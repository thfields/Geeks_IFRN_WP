(()=>{var e={4184:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var i=r.apply(null,n);i&&e.push(i)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var l in n)o.call(n,l)&&n[l]&&e.push(l)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},1874:e=>{e.exports='<html> <head> <style>body,html{background:#f1f3f5}.content{display:flex;flex-direction:column;align-items:center;justify-items:center;justify-content:center;position:fixed;left:0;top:0;width:100vw;height:100vh}.container{text-align:center}.message{font-size:1.2rem;color:#15192b;font-family:-apple-system,BlinkMacSystemFont,\'Segoe UI\',Roboto,Oxygen-Sans,Ubuntu,Cantarell,\'Helvetica Neue\',sans-serif}#eKIDzSscbEO1{overflow:visible;width:120px!important;height:120px!important;max-width:120px!important;fill:#a4afb7!important}#eKIDzSscbEO3_tr{animation:eKIDzSscbEO3_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO3_tr__tr{0%{transform:translate(193.209984px,190.850067px) rotate(0)}12%{transform:translate(193.209984px,190.850067px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}20%{transform:translate(193.209984px,190.850067px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}52%{transform:translate(193.209984px,190.850067px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}60%{transform:translate(193.209984px,190.850067px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}68%{transform:translate(193.209984px,190.850067px) rotate(0)}100%{transform:translate(193.209984px,190.850067px) rotate(0)}}#eKIDzSscbEO5_tr{animation:eKIDzSscbEO5_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO5_tr__tr{0%{transform:translate(193.219933px,61.519987px) rotate(360deg)}20%{transform:translate(193.219933px,61.519987px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}28%{transform:translate(193.219933px,61.519987px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}84%{transform:translate(193.219933px,61.519987px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}92%{transform:translate(193.219933px,61.519987px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}100%{transform:translate(193.219933px,61.519987px) rotate(360deg)}}#eKIDzSscbEO7_tr{animation:eKIDzSscbEO7_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO7_tr__tr{0%{transform:translate(59.18501px,193.18499px) rotate(0)}28%{transform:translate(59.18501px,193.18499px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}36%{transform:translate(59.18501px,193.18499px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}68%{transform:translate(59.18501px,193.18499px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}76%{transform:translate(59.18501px,193.18499px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}84%{transform:translate(59.18501px,193.18499px) rotate(0)}100%{transform:translate(59.18501px,193.18499px) rotate(0)}}#eKIDzSscbEO9_tr{animation:eKIDzSscbEO9_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO9_tr__tr{0%{transform:translate(59.149774px,59.150009px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}8%{transform:translate(59.149774px,59.150009px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}36%{transform:translate(59.149774px,59.150009px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}44%{transform:translate(59.149774px,59.150009px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}52%{transform:translate(59.149774px,59.150009px) rotate(360deg)}100%{transform:translate(59.149774px,59.150009px) rotate(360deg)}}</style> </head> <body> <div class="content"> <div class="container"> {svg_image} <p class="message">{message}</p> </div> </div> </body> </html> '},9457:e=>{e.exports='<html> <head> <style>.kubio-loading-logo{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:0}.kubio-loading-logo svg{width:120px!important;height:120px!important;max-width:120px!important;fill:#a4afb7!important}#eKIDzSscbEO1{overflow:visible;max-width:90px}#eKIDzSscbEO3_tr{animation:eKIDzSscbEO3_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO3_tr__tr{0%{transform:translate(193.209984px,190.850067px) rotate(0)}12%{transform:translate(193.209984px,190.850067px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}20%{transform:translate(193.209984px,190.850067px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}52%{transform:translate(193.209984px,190.850067px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}60%{transform:translate(193.209984px,190.850067px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}68%{transform:translate(193.209984px,190.850067px) rotate(0)}100%{transform:translate(193.209984px,190.850067px) rotate(0)}}#eKIDzSscbEO5_tr{animation:eKIDzSscbEO5_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO5_tr__tr{0%{transform:translate(193.219933px,61.519987px) rotate(360deg)}20%{transform:translate(193.219933px,61.519987px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}28%{transform:translate(193.219933px,61.519987px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}84%{transform:translate(193.219933px,61.519987px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}92%{transform:translate(193.219933px,61.519987px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}100%{transform:translate(193.219933px,61.519987px) rotate(360deg)}}#eKIDzSscbEO7_tr{animation:eKIDzSscbEO7_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO7_tr__tr{0%{transform:translate(59.18501px,193.18499px) rotate(0)}28%{transform:translate(59.18501px,193.18499px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}36%{transform:translate(59.18501px,193.18499px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}68%{transform:translate(59.18501px,193.18499px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}76%{transform:translate(59.18501px,193.18499px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}84%{transform:translate(59.18501px,193.18499px) rotate(0)}100%{transform:translate(59.18501px,193.18499px) rotate(0)}}#eKIDzSscbEO9_tr{animation:eKIDzSscbEO9_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO9_tr__tr{0%{transform:translate(59.149774px,59.150009px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}8%{transform:translate(59.149774px,59.150009px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}36%{transform:translate(59.149774px,59.150009px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}44%{transform:translate(59.149774px,59.150009px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}52%{transform:translate(59.149774px,59.150009px) rotate(360deg)}100%{transform:translate(59.149774px,59.150009px) rotate(360deg)}}</style> </head> <body> <div id="content"> </div> </body> </html> '},1143:e=>{"use strict";e.exports=function(e,t,n,o,r,a,i,l){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,o,r,a,i,l],u=0;(s=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},7418:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach((function(e){o[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}()?Object.assign:function(e,r){for(var a,i,l=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var c in a=Object(arguments[s]))n.call(a,c)&&(l[c]=a[c]);if(t){i=t(a);for(var u=0;u<i.length;u++)o.call(a,i[u])&&(l[i[u]]=a[i[u]])}}return l}},2703:(e,t,n)=>{"use strict";var o=n(414);function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,a,i){if(i!==o){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},5697:(e,t,n)=>{e.exports=n(2703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},5800:function(e,t,n){!function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var o=n(t);function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}var a={error:null},i=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).state=a,t.resetErrorBoundary=function(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];null==t.props.onReset||(e=t.props).onReset.apply(e,o),t.reset()},t}var n,i;i=e,(n=t).prototype=Object.create(i.prototype),n.prototype.constructor=n,r(n,i),t.getDerivedStateFromError=function(e){return{error:e}};var l=t.prototype;return l.reset=function(){this.setState(a)},l.componentDidCatch=function(e,t){var n,o;null==(n=(o=this.props).onError)||n.call(o,e,t)},l.componentDidUpdate=function(e,t){var n,o,r,a,i=this.state.error,l=this.props.resetKeys;null!==i&&null!==t.error&&(void 0===(r=e.resetKeys)&&(r=[]),void 0===(a=l)&&(a=[]),r.length!==a.length||r.some((function(e,t){return!Object.is(e,a[t])})))&&(null==(n=(o=this.props).onResetKeysChange)||n.call(o,e.resetKeys,l),this.reset())},l.render=function(){var e=this.state.error,t=this.props,n=t.fallbackRender,r=t.FallbackComponent,a=t.fallback;if(null!==e){var i={error:e,resetErrorBoundary:this.resetErrorBoundary};if(o.isValidElement(a))return a;if("function"==typeof n)return n(i);if(r)return o.createElement(r,i);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(o.Component);e.ErrorBoundary=i,e.useErrorHandler=function(e){var t=o.useState(null),n=t[0],r=t[1];if(null!=e)throw e;if(null!=n)throw n;return r},e.withErrorBoundary=function(e,t){var n=function(n){return o.createElement(i,t,o.createElement(e,n))},r=e.displayName||e.name||"Unknown";return n.displayName="withErrorBoundary("+r+")",n},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(9196))},9590:e=>{var t="undefined"!=typeof Element,n="function"==typeof Map,o="function"==typeof Set,r="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function a(e,i){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){if(e.constructor!==i.constructor)return!1;var l,s,c,u;if(Array.isArray(e)){if((l=e.length)!=i.length)return!1;for(s=l;0!=s--;)if(!a(e[s],i[s]))return!1;return!0}if(n&&e instanceof Map&&i instanceof Map){if(e.size!==i.size)return!1;for(u=e.entries();!(s=u.next()).done;)if(!i.has(s.value[0]))return!1;for(u=e.entries();!(s=u.next()).done;)if(!a(s.value[1],i.get(s.value[0])))return!1;return!0}if(o&&e instanceof Set&&i instanceof Set){if(e.size!==i.size)return!1;for(u=e.entries();!(s=u.next()).done;)if(!i.has(s.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(i)){if((l=e.length)!=i.length)return!1;for(s=l;0!=s--;)if(e[s]!==i[s])return!1;return!0}if(e.constructor===RegExp)return e.source===i.source&&e.flags===i.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===i.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===i.toString();if((l=(c=Object.keys(e)).length)!==Object.keys(i).length)return!1;for(s=l;0!=s--;)if(!Object.prototype.hasOwnProperty.call(i,c[s]))return!1;if(t&&e instanceof Element)return!1;for(s=l;0!=s--;)if(("_owner"!==c[s]&&"__v"!==c[s]&&"__o"!==c[s]||!e.$$typeof)&&!a(e[c[s]],i[c[s]]))return!1;return!0}return e!=e&&i!=i}e.exports=function(e,t){try{return a(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},7761:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(9196),a=l(r),i=l(n(5697));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.scrollListener=n.scrollListener.bind(n),n.eventListenerOptions=n.eventListenerOptions.bind(n),n.mousewheelListener=n.mousewheelListener.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){if(this.props.isReverse&&this.loadMore){var e=this.getParentElement(this.scrollComponent);e.scrollTop=e.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"isPassiveSupported",value:function(){var e=!1,t={get passive(){e=!0}};try{document.addEventListener("test",null,t),document.removeEventListener("test",null,t)}catch(e){}return e}},{key:"eventListenerOptions",value:function(){return this.props.useCapture,this.isPassiveSupported()?{useCapture:this.props.useCapture,passive:!0}:{passive:!1}}},{key:"setDefaultLoader",value:function(e){this.defaultLoader=e}},{key:"detachMousewheelListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}},{key:"detachScrollListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}},{key:"getParentElement",value:function(e){var t=this.props.getScrollParent&&this.props.getScrollParent();return null!=t?t:e&&e.parentNode}},{key:"filterProps",value:function(e){return e}},{key:"attachScrollListener",value:function(){var e=this.getParentElement(this.scrollComponent);if(this.props.hasMore&&e){var t=window;!1===this.props.useWindow&&(t=e),t.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),t.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),t.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(e){1!==e.deltaY||this.isPassiveSupported()||e.preventDefault()}},{key:"scrollListener",value:function(){var e=this.scrollComponent,t=window,n=this.getParentElement(e),o=void 0;if(this.props.useWindow){var r=document.documentElement||document.body.parentNode||document.body,a=void 0!==t.pageYOffset?t.pageYOffset:r.scrollTop;o=this.props.isReverse?a:this.calculateOffset(e,a)}else o=this.props.isReverse?n.scrollTop:e.scrollHeight-n.scrollTop-n.clientHeight;o<Number(this.props.threshold)&&e&&null!==e.offsetParent&&(this.detachScrollListener(),this.beforeScrollHeight=n.scrollHeight,this.beforeScrollTop=n.scrollTop,"function"==typeof this.props.loadMore&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}},{key:"calculateOffset",value:function(e,t){return e?this.calculateTopPosition(e)+(e.offsetHeight-t-window.innerHeight):0}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"render",value:function(){var e=this,t=this.filterProps(this.props),n=t.children,o=t.element,r=t.hasMore,i=(t.initialLoad,t.isReverse),l=t.loader,s=(t.loadMore,t.pageStart,t.ref),c=(t.threshold,t.useCapture,t.useWindow,t.getScrollParent,function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(t,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","getScrollParent"]));c.ref=function(t){e.scrollComponent=t,s&&s(t)};var u=[n];return r&&(l?i?u.unshift(l):u.push(l):this.defaultLoader&&(i?u.unshift(this.defaultLoader):u.push(this.defaultLoader))),a.default.createElement(o,c,u)}}]),t}(r.Component);s.propTypes={children:i.default.node.isRequired,element:i.default.node,hasMore:i.default.bool,initialLoad:i.default.bool,isReverse:i.default.bool,loader:i.default.node,loadMore:i.default.func.isRequired,pageStart:i.default.number,ref:i.default.func,getScrollParent:i.default.func,threshold:i.default.number,useCapture:i.default.bool,useWindow:i.default.bool},s.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null},t.default=s,e.exports=t.default},246:(e,t,n)=>{e.exports=n(7761)},6255:e=>{var t="complete",n="canceled";function o(e,t,n){Math.max(0,t),Math.max(0,n),e.self===e?e.scrollTo(t,n):(e.scrollLeft=t,e.scrollTop=n)}function r(e){var n=e._scrollSettings;if(n){var a=n.maxSynchronousAlignments,i=function(e,t){var n,o,r,a,i,l,s,c=e.align,u=e.target.getBoundingClientRect(),d=c&&null!=c.left?c.left:.5,m=c&&null!=c.top?c.top:.5,p=c&&null!=c.leftOffset?c.leftOffset:0,h=c&&null!=c.topOffset?c.topOffset:0,g=d,f=m;if(e.isWindow(t))l=Math.min(u.width,t.innerWidth),s=Math.min(u.height,t.innerHeight),o=u.left+t.pageXOffset-t.innerWidth*g+l*g,r=u.top+t.pageYOffset-t.innerHeight*f+s*f,o-=p,r-=h,o=e.align.lockX?t.pageXOffset:o,r=e.align.lockY?t.pageYOffset:r,a=o-t.pageXOffset,i=r-t.pageYOffset;else{l=u.width,s=u.height,n=t.getBoundingClientRect();var b=u.left-(n.left-t.scrollLeft),v=u.top-(n.top-t.scrollTop);o=b+l*g-t.clientWidth*g,r=v+s*f-t.clientHeight*f,o-=p,r-=h,o=Math.max(Math.min(o,t.scrollWidth-t.clientWidth),0),r=Math.max(Math.min(r,t.scrollHeight-t.clientHeight),0),o=e.align.lockX?t.scrollLeft:o,r=e.align.lockY?t.scrollTop:r,a=o-t.scrollLeft,i=r-t.scrollTop}return{x:o,y:r,differenceX:a,differenceY:i}}(n,e),l=Date.now()-n.startTime,s=Math.min(1/n.time*l,1);if(n.endIterations>=a)return o(e,i.x,i.y),e._scrollSettings=null,n.end(t);var c=1-n.ease(s);if(o(e,i.x-i.differenceX*c,i.y-i.differenceY*c),l>=n.time)return n.endIterations++,n.scrollAncestor&&r(n.scrollAncestor),void r(e);!function(e){if("requestAnimationFrame"in window)return window.requestAnimationFrame(e);setTimeout(e,16)}(r.bind(null,e))}}function a(e){return e.self===e}function i(e){return"pageXOffset"in e||(e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth)&&"hidden"!==getComputedStyle(e).overflow}function l(){return!0}function s(e){if(e.assignedSlot)return s(e.assignedSlot);if(e.parentElement)return"body"===e.parentElement.tagName.toLowerCase()?e.parentElement.ownerDocument.defaultView||e.parentElement.ownerDocument.ownerWindow:e.parentElement;if(e.getRootNode){var t=e.getRootNode();if(11===t.nodeType)return t.host}}e.exports=function(e,o,c){if(e){"function"==typeof o&&(c=o,o=null),o||(o={}),o.time=isNaN(o.time)?1e3:o.time,o.ease=o.ease||function(e){return 1-Math.pow(1-e,e/2)},o.align=o.align||{};var u=s(e),d=1,m=o.validTarget||l,p=o.isScrollable;o.debug&&(console.log("About to scroll to",e),u||console.error("Target did not have a parent, is it mounted in the DOM?"));for(var h=[];u;)if(o.debug&&console.log("Scrolling parent node",u),m(u,d)&&(p?p(u,i):i(u))&&(d++,h.push(u)),!(u=s(u))){g(t);break}return h.reduce(((t,i,l)=>function(e,t,o,i,l){var s,c=!t._scrollSettings,u=t._scrollSettings,d=Date.now(),m={passive:!0};function p(e){t._scrollSettings=null,t.parentElement&&t.parentElement._scrollSettings&&t.parentElement._scrollSettings.end(e),o.debug&&console.log("Scrolling ended with type",e,"for",t),l(e),s&&(t.removeEventListener("touchstart",s,m),t.removeEventListener("wheel",s,m))}u&&u.end(n);var h=o.maxSynchronousAlignments;return null==h&&(h=3),t._scrollSettings={startTime:d,endIterations:0,target:e,time:o.time,ease:o.ease,align:o.align,isWindow:o.isWindow||a,maxSynchronousAlignments:h,end:p,scrollAncestor:i},"cancellable"in o&&!o.cancellable||(s=p.bind(null,n),t.addEventListener("touchstart",s,m),t.addEventListener("wheel",s,m)),c&&r(t),s}(e,i,o,h[l+1],g)),null)}function g(e){--d||c&&c(e)}}},4670:(e,t,n)=>{"use strict";e.exports=n(5607)},9829:(e,t,n)=>{"use strict";var o,r,a,i=n(8946),l="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function s(){a=!1}function c(e){if(e){if(e!==o){if(e.length!==l.length)throw new Error("Custom alphabet for shortid must be "+l.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,n){return t!==n.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+l.length+" unique characters. These characters were not unique: "+t.join(", "));o=e,s()}}else o!==l&&(o=l,s())}function u(){return a||(a=function(){o||c(l);for(var e,t=o.split(""),n=[],r=i.nextValue();t.length>0;)r=i.nextValue(),e=Math.floor(r*t.length),n.push(t.splice(e,1)[0]);return n.join("")}())}e.exports={get:function(){return o||l},characters:function(e){return c(e),o},seed:function(e){i.seed(e),r!==e&&(s(),r=e)},lookup:function(e){return u()[e]},shuffled:u}},480:(e,t,n)=>{"use strict";var o,r,a=n(8416);n(9829),e.exports=function(e){var t="",n=Math.floor(.001*(Date.now()-1567752802062));return n===r?o++:(o=0,r=n),t+=a(7),t+=a(e),o>0&&(t+=a(o)),t+a(n)}},8416:(e,t,n)=>{"use strict";var o=n(9829),r=n(3766),a=n(296);e.exports=function(e){for(var t,n=0,i="";!t;)i+=a(r,o.get(),1),t=e<Math.pow(16,n+1),n++;return i}},5607:(e,t,n)=>{"use strict";var o=n(9829),r=n(480),a=n(1082),i=n(5636)||0;function l(){return r(i)}e.exports=l,e.exports.generate=l,e.exports.seed=function(t){return o.seed(t),e.exports},e.exports.worker=function(t){return i=t,e.exports},e.exports.characters=function(e){return void 0!==e&&o.characters(e),o.shuffled()},e.exports.isValid=a},1082:(e,t,n)=>{"use strict";var o=n(9829);e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6||new RegExp("[^"+o.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e))}},3766:e=>{"use strict";var t,n="object"==typeof window&&(window.crypto||window.msCrypto);t=n&&n.getRandomValues?function(e){return n.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],n=0;n<e;n++)t.push(Math.floor(256*Math.random()));return t},e.exports=t},8946:e=>{"use strict";var t=1;e.exports={nextValue:function(){return(t=(9301*t+49297)%233280)/233280},seed:function(e){t=e}}},5636:e=>{"use strict";e.exports=0},296:e=>{e.exports=function(e,t,n){for(var o=(2<<Math.log(t.length-1)/Math.LN2)-1,r=-~(1.6*o*n/t.length),a="";;)for(var i=e(r),l=r;l--;)if((a+=t[i[l]&o]||"").length===+n)return a}},989:(e,t,n)=>{e.exports=n(3268)},3268:function(e,t){var n;!function(o){"use strict";var r={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"Ae",Å:"A",Æ:"AE",Ç:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"Oe",Ő:"O",Ø:"O",Ù:"U",Ú:"U",Û:"U",Ü:"Ue",Ű:"U",Ý:"Y",Þ:"TH",ß:"ss",à:"a",á:"a",â:"a",ã:"a",ä:"ae",å:"a",æ:"ae",ç:"c",è:"e",é:"e",ê:"e",ë:"e",ì:"i",í:"i",î:"i",ï:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"oe",ő:"o",ø:"o",ù:"u",ú:"u",û:"u",ü:"ue",ű:"u",ý:"y",þ:"th",ÿ:"y",ẞ:"SS",ا:"a",أ:"a",إ:"i",آ:"aa",ؤ:"u",ئ:"e",ء:"a",ب:"b",ت:"t",ث:"th",ج:"j",ح:"h",خ:"kh",د:"d",ذ:"th",ر:"r",ز:"z",س:"s",ش:"sh",ص:"s",ض:"dh",ط:"t",ظ:"z",ع:"a",غ:"gh",ف:"f",ق:"q",ك:"k",ل:"l",م:"m",ن:"n",ه:"h",و:"w",ي:"y",ى:"a",ة:"h",ﻻ:"la",ﻷ:"laa",ﻹ:"lai",ﻵ:"laa",گ:"g",چ:"ch",پ:"p",ژ:"zh",ک:"k",ی:"y","َ":"a","ً":"an","ِ":"e","ٍ":"en","ُ":"u","ٌ":"on","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9",က:"k",ခ:"kh",ဂ:"g",ဃ:"ga",င:"ng",စ:"s",ဆ:"sa",ဇ:"z",စျ:"za",ည:"ny",ဋ:"t",ဌ:"ta",ဍ:"d",ဎ:"da",ဏ:"na",တ:"t",ထ:"ta",ဒ:"d",ဓ:"da",န:"n",ပ:"p",ဖ:"pa",ဗ:"b",ဘ:"ba",မ:"m",ယ:"y",ရ:"ya",လ:"l",ဝ:"w",သ:"th",ဟ:"h",ဠ:"la",အ:"a","ြ":"y","ျ":"ya","ွ":"w","ြွ":"yw","ျွ":"ywa","ှ":"h",ဧ:"e","၏":"-e",ဣ:"i",ဤ:"-i",ဉ:"u",ဦ:"-u",ဩ:"aw",သြော:"aw",ဪ:"aw","၀":"0","၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","္":"","့":"","း":"",č:"c",ď:"d",ě:"e",ň:"n",ř:"r",š:"s",ť:"t",ů:"u",ž:"z",Č:"C",Ď:"D",Ě:"E",Ň:"N",Ř:"R",Š:"S",Ť:"T",Ů:"U",Ž:"Z",ހ:"h",ށ:"sh",ނ:"n",ރ:"r",ބ:"b",ޅ:"lh",ކ:"k",އ:"a",ވ:"v",މ:"m",ފ:"f",ދ:"dh",ތ:"th",ލ:"l",ގ:"g",ޏ:"gn",ސ:"s",ޑ:"d",ޒ:"z",ޓ:"t",ޔ:"y",ޕ:"p",ޖ:"j",ޗ:"ch",ޘ:"tt",ޙ:"hh",ޚ:"kh",ޛ:"th",ޜ:"z",ޝ:"sh",ޞ:"s",ޟ:"d",ޠ:"t",ޡ:"z",ޢ:"a",ޣ:"gh",ޤ:"q",ޥ:"w","ަ":"a","ާ":"aa","ި":"i","ީ":"ee","ު":"u","ޫ":"oo","ެ":"e","ޭ":"ey","ޮ":"o","ޯ":"oa","ް":"",ა:"a",ბ:"b",გ:"g",დ:"d",ე:"e",ვ:"v",ზ:"z",თ:"t",ი:"i",კ:"k",ლ:"l",მ:"m",ნ:"n",ო:"o",პ:"p",ჟ:"zh",რ:"r",ს:"s",ტ:"t",უ:"u",ფ:"p",ქ:"k",ღ:"gh",ყ:"q",შ:"sh",ჩ:"ch",ც:"ts",ძ:"dz",წ:"ts",ჭ:"ch",ხ:"kh",ჯ:"j",ჰ:"h",α:"a",β:"v",γ:"g",δ:"d",ε:"e",ζ:"z",η:"i",θ:"th",ι:"i",κ:"k",λ:"l",μ:"m",ν:"n",ξ:"ks",ο:"o",π:"p",ρ:"r",σ:"s",τ:"t",υ:"y",φ:"f",χ:"x",ψ:"ps",ω:"o",ά:"a",έ:"e",ί:"i",ό:"o",ύ:"y",ή:"i",ώ:"o",ς:"s",ϊ:"i",ΰ:"y",ϋ:"y",ΐ:"i",Α:"A",Β:"B",Γ:"G",Δ:"D",Ε:"E",Ζ:"Z",Η:"I",Θ:"TH",Ι:"I",Κ:"K",Λ:"L",Μ:"M",Ν:"N",Ξ:"KS",Ο:"O",Π:"P",Ρ:"R",Σ:"S",Τ:"T",Υ:"Y",Φ:"F",Χ:"X",Ψ:"PS",Ω:"O",Ά:"A",Έ:"E",Ί:"I",Ό:"O",Ύ:"Y",Ή:"I",Ώ:"O",Ϊ:"I",Ϋ:"Y",ā:"a",ē:"e",ģ:"g",ī:"i",ķ:"k",ļ:"l",ņ:"n",ū:"u",Ā:"A",Ē:"E",Ģ:"G",Ī:"I",Ķ:"k",Ļ:"L",Ņ:"N",Ū:"U",Ќ:"Kj",ќ:"kj",Љ:"Lj",љ:"lj",Њ:"Nj",њ:"nj",Тс:"Ts",тс:"ts",ą:"a",ć:"c",ę:"e",ł:"l",ń:"n",ś:"s",ź:"z",ż:"z",Ą:"A",Ć:"C",Ę:"E",Ł:"L",Ń:"N",Ś:"S",Ź:"Z",Ż:"Z",Є:"Ye",І:"I",Ї:"Yi",Ґ:"G",є:"ye",і:"i",ї:"yi",ґ:"g",ă:"a",Ă:"A",ș:"s",Ș:"S",ț:"t",Ț:"T",ţ:"t",Ţ:"T",а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"yo",ж:"zh",з:"z",и:"i",й:"i",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"kh",ц:"c",ч:"ch",ш:"sh",щ:"sh",ъ:"",ы:"y",ь:"",э:"e",ю:"yu",я:"ya",А:"A",Б:"B",В:"V",Г:"G",Д:"D",Е:"E",Ё:"Yo",Ж:"Zh",З:"Z",И:"I",Й:"I",К:"K",Л:"L",М:"M",Н:"N",О:"O",П:"P",Р:"R",С:"S",Т:"T",У:"U",Ф:"F",Х:"Kh",Ц:"C",Ч:"Ch",Ш:"Sh",Щ:"Sh",Ъ:"",Ы:"Y",Ь:"",Э:"E",Ю:"Yu",Я:"Ya",ђ:"dj",ј:"j",ћ:"c",џ:"dz",Ђ:"Dj",Ј:"j",Ћ:"C",Џ:"Dz",ľ:"l",ĺ:"l",ŕ:"r",Ľ:"L",Ĺ:"L",Ŕ:"R",ş:"s",Ş:"S",ı:"i",İ:"I",ğ:"g",Ğ:"G",ả:"a",Ả:"A",ẳ:"a",Ẳ:"A",ẩ:"a",Ẩ:"A",đ:"d",Đ:"D",ẹ:"e",Ẹ:"E",ẽ:"e",Ẽ:"E",ẻ:"e",Ẻ:"E",ế:"e",Ế:"E",ề:"e",Ề:"E",ệ:"e",Ệ:"E",ễ:"e",Ễ:"E",ể:"e",Ể:"E",ỏ:"o",ọ:"o",Ọ:"o",ố:"o",Ố:"O",ồ:"o",Ồ:"O",ổ:"o",Ổ:"O",ộ:"o",Ộ:"O",ỗ:"o",Ỗ:"O",ơ:"o",Ơ:"O",ớ:"o",Ớ:"O",ờ:"o",Ờ:"O",ợ:"o",Ợ:"O",ỡ:"o",Ỡ:"O",Ở:"o",ở:"o",ị:"i",Ị:"I",ĩ:"i",Ĩ:"I",ỉ:"i",Ỉ:"i",ủ:"u",Ủ:"U",ụ:"u",Ụ:"U",ũ:"u",Ũ:"U",ư:"u",Ư:"U",ứ:"u",Ứ:"U",ừ:"u",Ừ:"U",ự:"u",Ự:"U",ữ:"u",Ữ:"U",ử:"u",Ử:"ư",ỷ:"y",Ỷ:"y",ỳ:"y",Ỳ:"Y",ỵ:"y",Ỵ:"Y",ỹ:"y",Ỹ:"Y",ạ:"a",Ạ:"A",ấ:"a",Ấ:"A",ầ:"a",Ầ:"A",ậ:"a",Ậ:"A",ẫ:"a",Ẫ:"A",ắ:"a",Ắ:"A",ằ:"a",Ằ:"A",ặ:"a",Ặ:"A",ẵ:"a",Ẵ:"A","⓪":"0","①":"1","②":"2","③":"3","④":"4","⑤":"5","⑥":"6","⑦":"7","⑧":"8","⑨":"9","⑩":"10","⑪":"11","⑫":"12","⑬":"13","⑭":"14","⑮":"15","⑯":"16","⑰":"17","⑱":"18","⑲":"18","⑳":"18","⓵":"1","⓶":"2","⓷":"3","⓸":"4","⓹":"5","⓺":"6","⓻":"7","⓼":"8","⓽":"9","⓾":"10","⓿":"0","⓫":"11","⓬":"12","⓭":"13","⓮":"14","⓯":"15","⓰":"16","⓱":"17","⓲":"18","⓳":"19","⓴":"20","Ⓐ":"A","Ⓑ":"B","Ⓒ":"C","Ⓓ":"D","Ⓔ":"E","Ⓕ":"F","Ⓖ":"G","Ⓗ":"H","Ⓘ":"I","Ⓙ":"J","Ⓚ":"K","Ⓛ":"L","Ⓜ":"M","Ⓝ":"N","Ⓞ":"O","Ⓟ":"P","Ⓠ":"Q","Ⓡ":"R","Ⓢ":"S","Ⓣ":"T","Ⓤ":"U","Ⓥ":"V","Ⓦ":"W","Ⓧ":"X","Ⓨ":"Y","Ⓩ":"Z","ⓐ":"a","ⓑ":"b","ⓒ":"c","ⓓ":"d","ⓔ":"e","ⓕ":"f","ⓖ":"g","ⓗ":"h","ⓘ":"i","ⓙ":"j","ⓚ":"k","ⓛ":"l","ⓜ":"m","ⓝ":"n","ⓞ":"o","ⓟ":"p","ⓠ":"q","ⓡ":"r","ⓢ":"s","ⓣ":"t","ⓤ":"u","ⓦ":"v","ⓥ":"w","ⓧ":"x","ⓨ":"y","ⓩ":"z","“":'"',"”":'"',"‘":"'","’":"'","∂":"d",ƒ:"f","™":"(TM)","©":"(C)",œ:"oe",Œ:"OE","®":"(R)","†":"+","℠":"(SM)","…":"...","˚":"o",º:"o",ª:"a","•":"*","၊":",","။":".",$:"USD","€":"EUR","₢":"BRN","₣":"FRF","£":"GBP","₤":"ITL","₦":"NGN","₧":"ESP","₩":"KRW","₪":"ILS","₫":"VND","₭":"LAK","₮":"MNT","₯":"GRD","₱":"ARS","₲":"PYG","₳":"ARA","₴":"UAH","₵":"GHS","¢":"cent","¥":"CNY",元:"CNY",円:"YEN","﷼":"IRR","₠":"EWE","฿":"THB","₨":"INR","₹":"INR","₰":"PF","₺":"TRY","؋":"AFN","₼":"AZN",лв:"BGN","៛":"KHR","₡":"CRC","₸":"KZT",ден:"MKD",zł:"PLN","₽":"RUB","₾":"GEL"},a=["်","ް"],i={"ာ":"a","ါ":"a","ေ":"e","ဲ":"e","ိ":"i","ီ":"i","ို":"o","ု":"u","ူ":"u","ေါင်":"aung","ော":"aw","ော်":"aw","ေါ":"aw","ေါ်":"aw","်":"်",က်:"et","ိုက်":"aik","ောက်":"auk",င်:"in","ိုင်":"aing","ောင်":"aung",စ်:"it",ည်:"i",တ်:"at","ိတ်":"eik","ုတ်":"ok","ွတ်":"ut","ေတ်":"it",ဒ်:"d","ိုဒ်":"ok","ုဒ်":"ait",န်:"an","ာန်":"an","ိန်":"ein","ုန်":"on","ွန်":"un",ပ်:"at","ိပ်":"eik","ုပ်":"ok","ွပ်":"ut",န်ုပ်:"nub",မ်:"an","ိမ်":"ein","ုမ်":"on","ွမ်":"un",ယ်:"e","ိုလ်":"ol",ဉ်:"in","ံ":"an","ိံ":"ein","ုံ":"on","ައް":"ah","ަށް":"ah"},l={en:{},az:{ç:"c",ə:"e",ğ:"g",ı:"i",ö:"o",ş:"s",ü:"u",Ç:"C",Ə:"E",Ğ:"G",İ:"I",Ö:"O",Ş:"S",Ü:"U"},cs:{č:"c",ď:"d",ě:"e",ň:"n",ř:"r",š:"s",ť:"t",ů:"u",ž:"z",Č:"C",Ď:"D",Ě:"E",Ň:"N",Ř:"R",Š:"S",Ť:"T",Ů:"U",Ž:"Z"},fi:{ä:"a",Ä:"A",ö:"o",Ö:"O"},hu:{ä:"a",Ä:"A",ö:"o",Ö:"O",ü:"u",Ü:"U",ű:"u",Ű:"U"},lt:{ą:"a",č:"c",ę:"e",ė:"e",į:"i",š:"s",ų:"u",ū:"u",ž:"z",Ą:"A",Č:"C",Ę:"E",Ė:"E",Į:"I",Š:"S",Ų:"U",Ū:"U"},lv:{ā:"a",č:"c",ē:"e",ģ:"g",ī:"i",ķ:"k",ļ:"l",ņ:"n",š:"s",ū:"u",ž:"z",Ā:"A",Č:"C",Ē:"E",Ģ:"G",Ī:"i",Ķ:"k",Ļ:"L",Ņ:"N",Š:"S",Ū:"u",Ž:"Z"},pl:{ą:"a",ć:"c",ę:"e",ł:"l",ń:"n",ó:"o",ś:"s",ź:"z",ż:"z",Ą:"A",Ć:"C",Ę:"e",Ł:"L",Ń:"N",Ó:"O",Ś:"S",Ź:"Z",Ż:"Z"},sv:{ä:"a",Ä:"A",ö:"o",Ö:"O"},sk:{ä:"a",Ä:"A"},sr:{љ:"lj",њ:"nj",Љ:"Lj",Њ:"Nj",đ:"dj",Đ:"Dj"},tr:{Ü:"U",Ö:"O",ü:"u",ö:"o"}},s={ar:{"∆":"delta","∞":"la-nihaya","♥":"hob","&":"wa","|":"aw","<":"aqal-men",">":"akbar-men","∑":"majmou","¤":"omla"},az:{},ca:{"∆":"delta","∞":"infinit","♥":"amor","&":"i","|":"o","<":"menys que",">":"mes que","∑":"suma dels","¤":"moneda"},cs:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"nebo","<":"mensi nez",">":"vetsi nez","∑":"soucet","¤":"mena"},de:{"∆":"delta","∞":"unendlich","♥":"Liebe","&":"und","|":"oder","<":"kleiner als",">":"groesser als","∑":"Summe von","¤":"Waehrung"},dv:{"∆":"delta","∞":"kolunulaa","♥":"loabi","&":"aai","|":"noonee","<":"ah vure kuda",">":"ah vure bodu","∑":"jumula","¤":"faisaa"},en:{"∆":"delta","∞":"infinity","♥":"love","&":"and","|":"or","<":"less than",">":"greater than","∑":"sum","¤":"currency"},es:{"∆":"delta","∞":"infinito","♥":"amor","&":"y","|":"u","<":"menos que",">":"mas que","∑":"suma de los","¤":"moneda"},fa:{"∆":"delta","∞":"bi-nahayat","♥":"eshgh","&":"va","|":"ya","<":"kamtar-az",">":"bishtar-az","∑":"majmooe","¤":"vahed"},fi:{"∆":"delta","∞":"aarettomyys","♥":"rakkaus","&":"ja","|":"tai","<":"pienempi kuin",">":"suurempi kuin","∑":"summa","¤":"valuutta"},fr:{"∆":"delta","∞":"infiniment","♥":"Amour","&":"et","|":"ou","<":"moins que",">":"superieure a","∑":"somme des","¤":"monnaie"},ge:{"∆":"delta","∞":"usasruloba","♥":"siqvaruli","&":"da","|":"an","<":"naklebi",">":"meti","∑":"jami","¤":"valuta"},gr:{},hu:{"∆":"delta","∞":"vegtelen","♥":"szerelem","&":"es","|":"vagy","<":"kisebb mint",">":"nagyobb mint","∑":"szumma","¤":"penznem"},it:{"∆":"delta","∞":"infinito","♥":"amore","&":"e","|":"o","<":"minore di",">":"maggiore di","∑":"somma","¤":"moneta"},lt:{"∆":"delta","∞":"begalybe","♥":"meile","&":"ir","|":"ar","<":"maziau nei",">":"daugiau nei","∑":"suma","¤":"valiuta"},lv:{"∆":"delta","∞":"bezgaliba","♥":"milestiba","&":"un","|":"vai","<":"mazak neka",">":"lielaks neka","∑":"summa","¤":"valuta"},my:{"∆":"kwahkhyaet","∞":"asaonasme","♥":"akhyait","&":"nhin","|":"tho","<":"ngethaw",">":"kyithaw","∑":"paungld","¤":"ngwekye"},mk:{},nl:{"∆":"delta","∞":"oneindig","♥":"liefde","&":"en","|":"of","<":"kleiner dan",">":"groter dan","∑":"som","¤":"valuta"},pl:{"∆":"delta","∞":"nieskonczonosc","♥":"milosc","&":"i","|":"lub","<":"mniejsze niz",">":"wieksze niz","∑":"suma","¤":"waluta"},pt:{"∆":"delta","∞":"infinito","♥":"amor","&":"e","|":"ou","<":"menor que",">":"maior que","∑":"soma","¤":"moeda"},ro:{"∆":"delta","∞":"infinit","♥":"dragoste","&":"si","|":"sau","<":"mai mic ca",">":"mai mare ca","∑":"suma","¤":"valuta"},ru:{"∆":"delta","∞":"beskonechno","♥":"lubov","&":"i","|":"ili","<":"menshe",">":"bolshe","∑":"summa","¤":"valjuta"},sk:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"alebo","<":"menej ako",">":"viac ako","∑":"sucet","¤":"mena"},sr:{},tr:{"∆":"delta","∞":"sonsuzluk","♥":"ask","&":"ve","|":"veya","<":"kucuktur",">":"buyuktur","∑":"toplam","¤":"para birimi"},uk:{"∆":"delta","∞":"bezkinechnist","♥":"lubov","&":"i","|":"abo","<":"menshe",">":"bilshe","∑":"suma","¤":"valjuta"},vn:{"∆":"delta","∞":"vo cuc","♥":"yeu","&":"va","|":"hoac","<":"nho hon",">":"lon hon","∑":"tong","¤":"tien te"}},c=[";","?",":","@","&","=","+","$",",","/"].join(""),u=[";","?",":","@","&","=","+","$",","].join(""),d=[".","!","~","*","'","(",")"].join(""),m=function(e,t){var n,o,m,g,f,b,v,_,y,k,E,S,w,C,I="-",x="",T="",P=!0,R={},O="";if("string"!=typeof e)return"";if("string"==typeof t&&(I=t),v=s.en,_=l.en,"object"==typeof t)for(E in n=t.maintainCase||!1,R=t.custom&&"object"==typeof t.custom?t.custom:R,m=+t.truncate>1&&t.truncate||!1,g=t.uric||!1,f=t.uricNoSlash||!1,b=t.mark||!1,P=!1!==t.symbols&&!1!==t.lang,I=t.separator||I,g&&(O+=c),f&&(O+=u),b&&(O+=d),v=t.lang&&s[t.lang]&&P?s[t.lang]:P?s.en:{},_=t.lang&&l[t.lang]?l[t.lang]:!1===t.lang||!0===t.lang?{}:l.en,t.titleCase&&"number"==typeof t.titleCase.length&&Array.prototype.toString.call(t.titleCase)?(t.titleCase.forEach((function(e){R[e+""]=e+""})),o=!0):o=!!t.titleCase,t.custom&&"number"==typeof t.custom.length&&Array.prototype.toString.call(t.custom)&&t.custom.forEach((function(e){R[e+""]=e+""})),Object.keys(R).forEach((function(t){var n;n=t.length>1?new RegExp("\\b"+p(t)+"\\b","gi"):new RegExp(p(t),"gi"),e=e.replace(n,R[t])})),R)O+=E;for(O=p(O+=I),w=!1,C=!1,k=0,S=(e=e.replace(/(^\s+|\s+$)/g,"")).length;k<S;k++)E=e[k],h(E,R)?w=!1:_[E]?(E=w&&_[E].match(/[A-Za-z0-9]/)?" "+_[E]:_[E],w=!1):E in r?(k+1<S&&a.indexOf(e[k+1])>=0?(T+=E,E=""):!0===C?(E=i[T]+r[E],T=""):E=w&&r[E].match(/[A-Za-z0-9]/)?" "+r[E]:r[E],w=!1,C=!1):E in i?(T+=E,E="",k===S-1&&(E=i[T]),C=!0):!v[E]||g&&-1!==c.indexOf(E)||f&&-1!==u.indexOf(E)?(!0===C?(E=i[T]+E,T="",C=!1):w&&(/[A-Za-z0-9]/.test(E)||x.substr(-1).match(/A-Za-z0-9]/))&&(E=" "+E),w=!1):(E=w||x.substr(-1).match(/[A-Za-z0-9]/)?I+v[E]:v[E],E+=void 0!==e[k+1]&&e[k+1].match(/[A-Za-z0-9]/)?I:"",w=!0),x+=E.replace(new RegExp("[^\\w\\s"+O+"_-]","g"),I);return o&&(x=x.replace(/(\w)(\S*)/g,(function(e,t,n){var o=t.toUpperCase()+(null!==n?n:"");return Object.keys(R).indexOf(o.toLowerCase())<0?o:o.toLowerCase()}))),x=x.replace(/\s+/g,I).replace(new RegExp("\\"+I+"+","g"),I).replace(new RegExp("(^\\"+I+"+|\\"+I+"+$)","g"),""),m&&x.length>m&&(y=x.charAt(m)===I,x=x.slice(0,m),y||(x=x.slice(0,x.lastIndexOf(I)))),n||o||(x=x.toLowerCase()),x},p=function(e){return e.replace(/[-\\^$*+?.()|[\]{}\/]/g,"\\$&")},h=function(e,t){for(var n in t)if(t[n]===e)return!0};e.exports?(e.exports=m,e.exports.createSlug=function(e){return function(t){return m(t,e)}}):void 0===(n=function(){return m}.apply(t,[]))||(e.exports=n)}()},5358:(e,t,n)=>{"use strict";Object.defineProperty(t,"Ls",{enumerable:!0,get:function(){return o.STORE_KEY}});var o=n(9527);o.STORE_KEY},9196:e=>{"use strict";e.exports=window.React},9527:e=>{"use strict";e.exports=window.kubio.constants},9307:e=>{"use strict";e.exports=window.wp.element}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{"use strict";n.r(o),n.d(o,{SidebarArea:()=>Zo,SubSidebarArea:()=>rr,__experimentalFullscreenModeClose:()=>WE,initialize:()=>VE,registerSidebarArea:()=>tr,registerSubSidebarArea:()=>nr});var e={};n.r(e),n.d(e,{disableComplementaryArea:()=>bo,enableComplementaryArea:()=>fo,pinItem:()=>vo,setDefaultComplementaryArea:()=>go,setFeatureDefaults:()=>Eo,setFeatureValue:()=>ko,toggleFeature:()=>yo,unpinItem:()=>_o});var t={};n.r(t),n.d(t,{getActiveComplementaryArea:()=>So,isFeatureActive:()=>Co,isItemPinned:()=>wo});var r={};n.r(r),n.d(r,{__experimentalSetPreviewDeviceType:()=>t_,addSubSidebar:()=>h_,addTemplate:()=>o_,closeSidebar:()=>f_,openInserterSidebar:()=>p_,openNavigationPanelToMenu:()=>c_,openSidebar:()=>m_,removeSubSidebar:()=>g_,removeTemplate:()=>r_,setCurrentAncestor:()=>k_,setHomeTemplateId:()=>i_,setIsListViewOpened:()=>E_,setIsNavigationPanelOpened:()=>u_,setKubioEditorMode:()=>w_,setOpenInserter:()=>y_,setPage:()=>l_,setTemplate:()=>n_,setTemplatePart:()=>a_,setUIVersion:()=>S_,showHomepage:()=>s_,toggleAICapabilities:()=>C_,toggleFeature:()=>e_,toggleGlobalStyleEditing:()=>b_,toggleGutentagDebug:()=>v_,updateAIInfo:()=>I_,updateSettings:()=>d_});var a={};n.r(a),n.d(a,{__experimentalGetInsertionPoint:()=>uy,__experimentalGetPreviewDeviceType:()=>z_,currentPageHasFSETemplate:()=>hy,getAIInfo:()=>xy,getAvailablePageTemplates:()=>yy,getCanUserCreateMedia:()=>B_,getCanvasMode:()=>Py,getClassicTemplateId:()=>ky,getCurrentAncestor:()=>ry,getCurrentKubioTemplateSource:()=>my,getCurrentPageTemplate:()=>py,getCurrentPostId:()=>fy,getCurrentPostType:()=>gy,getEditedPostId:()=>H_,getEditedPostType:()=>G_,getEditorOpenedSidebar:()=>ay,getEntity:()=>Z_,getGlobalStyleEditingPreviousEntity:()=>sy,getHomeTemplateId:()=>F_,getIsBlogPage:()=>by,getIsFrontPage:()=>vy,getIsInnerPage:()=>_y,getIsWooCommercePage:()=>Ey,getKubioEditorMode:()=>Cy,getKubioEditorModeIsSimple:()=>Iy,getNavigationMenu:()=>W_,getOpenedInsertedClientId:()=>ty,getOpenedInsertedShouldCloseOnSelect:()=>oy,getOpenedInsertedShouldReplace:()=>ny,getOpenedInserter:()=>ey,getPage:()=>j_,getSettings:()=>L_,getShowOnFront:()=>J_,getSubSidebars:()=>iy,getTemplateId:()=>K_,getTemplateIds:()=>Y_,getTemplatePartId:()=>$_,getTemplatePartIds:()=>X_,getTemplateType:()=>q_,getUIVersion:()=>Sy,isAICapabilityEnabled:()=>wy,isChangingPage:()=>Ty,isEditorSidebarOpened:()=>Q_,isFeatureActive:()=>D_,isGlobalStyleEditing:()=>ly,isGutentagDebug:()=>cy,isInserterOpened:()=>V_,isListViewOpened:()=>dy,isNavigationOpened:()=>U_});var i=n(9307);const l=window.kubio.blockPatterns,s=window.kubio.core,c=window.wp.blockLibrary,u=window.wp.hooks,d=window.wp.notices,m=window.lodash;var p=n.n(m),h=n(9527);const g=window.kubio.coreHooks,f=window.kubio.editorData,b=window.kubio.ai,v=window.kubio.globalData,_=window.kubio.wpGlobalStyles,y=window.wp.blockEditor,k=window.wp.components,E=window.wp.compose,S=window.wp.coreData,w=window.wp.data;function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},C.apply(this,arguments)}var I=n(4184),x=n.n(I);const T=window.wp.i18n,P=window.kubio.controls,R=window.wp.primitives,O=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"})),A=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),N={family:"Open Sans"},M={family:"Work Sans"},D={family:"Roboto"},z={family:"Playfair Display"},B={family:"Inter"},L={family:"Offside"},F={family:"Lekton"},G={family:"Architects Daughter"},H={family:"Mulish"},j={family:"Prompt"},U={family:"La Belle Aurore"},W={h1:{weight:300},h2:{weight:600},h3:{weight:600},h4:{weight:600},h5:{weight:600},h6:{weight:600}},V={h1:{weight:400},h2:{weight:400},h3:{weight:400},h4:{weight:400},h5:{weight:400},h6:{weight:400}},K=[p().merge({},{h1:M,h2:M,h3:M,h4:M,h5:M,h6:M,p:D,lead:D,a:D},V),p().merge({},{h1:z,h2:z,h3:z,h4:B,h5:z,h6:z,p:B,lead:B,a:B},W),p().merge({},{h1:L,h2:L,h3:L,h4:L,h5:L,h6:L,p:F,lead:F,a:F},V),p().merge({},{h1:G,h2:G,h3:G,h4:H,h5:G,h6:G,p:H,lead:H,a:H},V),p().merge({},{h1:N,h2:N,h3:N,h4:N,h5:N,h6:N,p:N,lead:N,a:N},W),p().merge({},{h1:U,h2:U,h3:U,h4:j,h5:U,h6:j,p:j,lead:j,a:j},V)],$=e=>{let{children:t,scrollIntoView:n=!0,...o}=e;const r=(0,i.useRef)(),a=(0,i.useCallback)((()=>{if(!n)return;const e=r.current.querySelector(".kubio-style-preset-list__item--active");e&&e.scrollIntoView({behavior:"instant"})}),[]);return(0,i.useEffect)((()=>{a()}),[]),(0,i.createElement)("div",{ref:r,className:"kubio-style-preset-list__container"},(0,i.createElement)("div",C({className:"kubio-style-preset-list"},o),t))};$.Item=e=>{let{isActive:t=!1,className:n,children:o,...r}=e;return(0,i.createElement)("div",C({className:x()("kubio-style-preset-list__item",{"kubio-style-preset-list__item--active":t},n)},r),o)};const q=window.kubio.utils,Y=window.kubio.icons,X=window.kubio.log;var Z=n(9590),J=n.n(Z);function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}var ee=/^\s+/,te=/\s+$/;function ne(e,t){if(t=t||{},(e=e||"")instanceof ne)return e;if(!(this instanceof ne))return new ne(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,o=null,r=null,a=null,i=!1,l=!1;return"string"==typeof e&&(e=function(e){e=e.replace(ee,"").replace(te,"").toLowerCase();var t,n=!1;if(_e[e])e=_e[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=Ae.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=Ae.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Ae.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=Ae.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Ae.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=Ae.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Ae.hex8.exec(e))?{r:we(t[1]),g:we(t[2]),b:we(t[3]),a:Te(t[4]),format:n?"name":"hex8"}:(t=Ae.hex6.exec(e))?{r:we(t[1]),g:we(t[2]),b:we(t[3]),format:n?"name":"hex"}:(t=Ae.hex4.exec(e))?{r:we(t[1]+""+t[1]),g:we(t[2]+""+t[2]),b:we(t[3]+""+t[3]),a:Te(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=Ae.hex3.exec(e))&&{r:we(t[1]+""+t[1]),g:we(t[2]+""+t[2]),b:we(t[3]+""+t[3]),format:n?"name":"hex"}}(e)),"object"==Q(e)&&(Ne(e.r)&&Ne(e.g)&&Ne(e.b)?(t=function(e,t,n){return{r:255*Ee(e,255),g:255*Ee(t,255),b:255*Ee(n,255)}}(e.r,e.g,e.b),i=!0,l="%"===String(e.r).substr(-1)?"prgb":"rgb"):Ne(e.h)&&Ne(e.s)&&Ne(e.v)?(o=Ie(e.s),r=Ie(e.v),t=function(e,t,n){e=6*Ee(e,360),t=Ee(t,100),n=Ee(n,100);var o=Math.floor(e),r=e-o,a=n*(1-t),i=n*(1-r*t),l=n*(1-(1-r)*t),s=o%6;return{r:255*[n,i,a,a,l,n][s],g:255*[l,n,n,i,a,a][s],b:255*[a,a,l,n,n,i][s]}}(e.h,o,r),i=!0,l="hsv"):Ne(e.h)&&Ne(e.s)&&Ne(e.l)&&(o=Ie(e.s),a=Ie(e.l),t=function(e,t,n){var o,r,a;function i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=Ee(e,360),t=Ee(t,100),n=Ee(n,100),0===t)o=r=a=n;else{var l=n<.5?n*(1+t):n+t-n*t,s=2*n-l;o=i(s,l,e+1/3),r=i(s,l,e),a=i(s,l,e-1/3)}return{r:255*o,g:255*r,b:255*a}}(e.h,o,a),i=!0,l="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=ke(n),{ok:i,format:e.format||l,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function oe(e,t,n){e=Ee(e,255),t=Ee(t,255),n=Ee(n,255);var o,r,a=Math.max(e,t,n),i=Math.min(e,t,n),l=(a+i)/2;if(a==i)o=r=0;else{var s=a-i;switch(r=l>.5?s/(2-a-i):s/(a+i),a){case e:o=(t-n)/s+(t<n?6:0);break;case t:o=(n-e)/s+2;break;case n:o=(e-t)/s+4}o/=6}return{h:o,s:r,l}}function re(e,t,n){e=Ee(e,255),t=Ee(t,255),n=Ee(n,255);var o,r,a=Math.max(e,t,n),i=Math.min(e,t,n),l=a,s=a-i;if(r=0===a?0:s/a,a==i)o=0;else{switch(a){case e:o=(t-n)/s+(t<n?6:0);break;case t:o=(n-e)/s+2;break;case n:o=(e-t)/s+4}o/=6}return{h:o,s:r,v:l}}function ae(e,t,n,o){var r=[Ce(Math.round(e).toString(16)),Ce(Math.round(t).toString(16)),Ce(Math.round(n).toString(16))];return o&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function ie(e,t,n,o){return[Ce(xe(o)),Ce(Math.round(e).toString(16)),Ce(Math.round(t).toString(16)),Ce(Math.round(n).toString(16))].join("")}function le(e,t){t=0===t?0:t||10;var n=ne(e).toHsl();return n.s-=t/100,n.s=Se(n.s),ne(n)}function se(e,t){t=0===t?0:t||10;var n=ne(e).toHsl();return n.s+=t/100,n.s=Se(n.s),ne(n)}function ce(e){return ne(e).desaturate(100)}function ue(e,t){t=0===t?0:t||10;var n=ne(e).toHsl();return n.l+=t/100,n.l=Se(n.l),ne(n)}function de(e,t){t=0===t?0:t||10;var n=ne(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),ne(n)}function me(e,t){t=0===t?0:t||10;var n=ne(e).toHsl();return n.l-=t/100,n.l=Se(n.l),ne(n)}function pe(e,t){var n=ne(e).toHsl(),o=(n.h+t)%360;return n.h=o<0?360+o:o,ne(n)}function he(e){var t=ne(e).toHsl();return t.h=(t.h+180)%360,ne(t)}function ge(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=ne(e).toHsl(),o=[ne(e)],r=360/t,a=1;a<t;a++)o.push(ne({h:(n.h+a*r)%360,s:n.s,l:n.l}));return o}function fe(e){var t=ne(e).toHsl(),n=t.h;return[ne(e),ne({h:(n+72)%360,s:t.s,l:t.l}),ne({h:(n+216)%360,s:t.s,l:t.l})]}function be(e,t,n){t=t||6,n=n||30;var o=ne(e).toHsl(),r=360/n,a=[ne(e)];for(o.h=(o.h-(r*t>>1)+720)%360;--t;)o.h=(o.h+r)%360,a.push(ne(o));return a}function ve(e,t){t=t||6;for(var n=ne(e).toHsv(),o=n.h,r=n.s,a=n.v,i=[],l=1/t;t--;)i.push(ne({h:o,s:r,v:a})),a=(a+l)%1;return i}ne.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,o=this.toRgb();return e=o.r/255,t=o.g/255,n=o.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=ke(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=re(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=re(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),o=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+o+"%)":"hsva("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var e=oe(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=oe(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),o=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+o+"%)":"hsla("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHex:function(e){return ae(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,o,r){var a=[Ce(Math.round(e).toString(16)),Ce(Math.round(t).toString(16)),Ce(Math.round(n).toString(16)),Ce(xe(o))];return r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*Ee(this._r,255))+"%",g:Math.round(100*Ee(this._g,255))+"%",b:Math.round(100*Ee(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*Ee(this._r,255))+"%, "+Math.round(100*Ee(this._g,255))+"%, "+Math.round(100*Ee(this._b,255))+"%)":"rgba("+Math.round(100*Ee(this._r,255))+"%, "+Math.round(100*Ee(this._g,255))+"%, "+Math.round(100*Ee(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(ye[ae(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+ie(this._r,this._g,this._b,this._a),n=t,o=this._gradientType?"GradientType = 1, ":"";if(e){var r=ne(e);n="#"+ie(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,o=this._a<1&&this._a>=0;return t||!o||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return ne(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(ue,arguments)},brighten:function(){return this._applyModification(de,arguments)},darken:function(){return this._applyModification(me,arguments)},desaturate:function(){return this._applyModification(le,arguments)},saturate:function(){return this._applyModification(se,arguments)},greyscale:function(){return this._applyModification(ce,arguments)},spin:function(){return this._applyModification(pe,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(be,arguments)},complement:function(){return this._applyCombination(he,arguments)},monochromatic:function(){return this._applyCombination(ve,arguments)},splitcomplement:function(){return this._applyCombination(fe,arguments)},triad:function(){return this._applyCombination(ge,[3])},tetrad:function(){return this._applyCombination(ge,[4])}},ne.fromRatio=function(e,t){if("object"==Q(e)){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]="a"===o?e[o]:Ie(e[o]));e=n}return ne(e,t)},ne.equals=function(e,t){return!(!e||!t)&&ne(e).toRgbString()==ne(t).toRgbString()},ne.random=function(){return ne.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},ne.mix=function(e,t,n){n=0===n?0:n||50;var o=ne(e).toRgb(),r=ne(t).toRgb(),a=n/100;return ne({r:(r.r-o.r)*a+o.r,g:(r.g-o.g)*a+o.g,b:(r.b-o.b)*a+o.b,a:(r.a-o.a)*a+o.a})},ne.readability=function(e,t){var n=ne(e),o=ne(t);return(Math.max(n.getLuminance(),o.getLuminance())+.05)/(Math.min(n.getLuminance(),o.getLuminance())+.05)},ne.isReadable=function(e,t,n){var o,r,a=ne.readability(e,t);switch(r=!1,o=function(e){var t,n;return"AA"!==(t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==t&&(t="AA"),"small"!==(n=(e.size||"small").toLowerCase())&&"large"!==n&&(n="small"),{level:t,size:n}}(n),o.level+o.size){case"AAsmall":case"AAAlarge":r=a>=4.5;break;case"AAlarge":r=a>=3;break;case"AAAsmall":r=a>=7}return r},ne.mostReadable=function(e,t,n){var o,r,a,i,l=null,s=0;r=(n=n||{}).includeFallbackColors,a=n.level,i=n.size;for(var c=0;c<t.length;c++)(o=ne.readability(e,t[c]))>s&&(s=o,l=ne(t[c]));return ne.isReadable(e,l,{level:a,size:i})||!r?l:(n.includeFallbackColors=!1,ne.mostReadable(e,["#fff","#000"],n))};var _e=ne.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ye=ne.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(_e);function ke(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Ee(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function Se(e){return Math.min(1,Math.max(0,e))}function we(e){return parseInt(e,16)}function Ce(e){return 1==e.length?"0"+e:""+e}function Ie(e){return e<=1&&(e=100*e+"%"),e}function xe(e){return Math.round(255*parseFloat(e)).toString(16)}function Te(e){return we(e)/255}var Pe,Re,Oe,Ae=(Re="[\\s|\\(]+("+(Pe="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+Pe+")[,|\\s]+("+Pe+")\\s*\\)?",Oe="[\\s|\\(]+("+Pe+")[,|\\s]+("+Pe+")[,|\\s]+("+Pe+")[,|\\s]+("+Pe+")\\s*\\)?",{CSS_UNIT:new RegExp(Pe),rgb:new RegExp("rgb"+Re),rgba:new RegExp("rgba"+Oe),hsl:new RegExp("hsl"+Re),hsla:new RegExp("hsla"+Oe),hsv:new RegExp("hsv"+Re),hsva:new RegExp("hsva"+Oe),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Ne(e){return!!Ae.CSS_UNIT.exec(e)}const Me=h.colorPalettes,De=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"}));function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function Be(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){Le(e,t,n[t])}))}return e}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],_n=!0,o=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(_n=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);_n=!0);}catch(e){o=!0,r=e}finally{try{_n||null==i.return||i.return()}finally{if(o)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var He=function(){},je={},Ue={},We={mark:He,measure:He};try{"undefined"!=typeof window&&(je=window),"undefined"!=typeof document&&(Ue=document),"undefined"!=typeof MutationObserver&&MutationObserver,"undefined"!=typeof performance&&(We=performance)}catch(e){}var Ve=(je.navigator||{}).userAgent,Ke=void 0===Ve?"":Ve,$e=je,qe=Ue,Ye=We,Xe=($e.document,!!qe.documentElement&&!!qe.head&&"function"==typeof qe.addEventListener&&"function"==typeof qe.createElement),Ze=(~Ke.indexOf("MSIE")||Ke.indexOf("Trident/"),"___FONT_AWESOME___"),Je="fa",Qe="svg-inline--fa",et=(function(){try{return!0}catch(e){return!1}}(),[1,2,3,4,5,6,7,8,9,10]),tt=et.concat([11,12,13,14,15,16,17,18,19,20]),nt={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},ot=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",nt.GROUP,nt.SWAP_OPACITY,nt.PRIMARY,nt.SECONDARY].concat(et.map((function(e){return"".concat(e,"x")}))).concat(tt.map((function(e){return"w-".concat(e)}))),$e.FontAwesomeConfig||{});qe&&"function"==typeof qe.querySelector&&[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=Ge(e,2),n=t[0],o=t[1],r=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=qe.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));null!=r&&(ot[o]=r)}));var rt=Fe({},{familyPrefix:Je,replacementClass:Qe,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},ot);rt.autoReplaceSvg||(rt.observeMutations=!1);var at=Fe({},rt);$e.FontAwesomeConfig=at;var it=$e||{};it[Ze]||(it[Ze]={}),it[Ze].styles||(it[Ze].styles={}),it[Ze].hooks||(it[Ze].hooks={}),it[Ze].shims||(it[Ze].shims=[]);var lt=it[Ze],st=[];Xe&&((qe.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(qe.readyState)||qe.addEventListener("DOMContentLoaded",(function e(){qe.removeEventListener("DOMContentLoaded",e),st.map((function(e){return e()}))})));var ct,ut="pending",dt="settled",mt="fulfilled",pt="rejected",ht=function(){},gt=void 0!==n.g&&void 0!==n.g.process&&"function"==typeof n.g.process.emit,ft="undefined"==typeof setImmediate?setTimeout:setImmediate,bt=[];function vt(){for(var e=0;e<bt.length;e++)bt[e][0](bt[e][1]);bt=[],ct=!1}function _t(e,t){bt.push([e,t]),ct||(ct=!0,ft(vt,0))}function yt(e){var t=e.owner,n=t._state,o=t._data,r=e[n],a=e.then;if("function"==typeof r){n=mt;try{o=r(o)}catch(e){wt(a,e)}}kt(a,o)||(n===mt&&Et(a,o),n===pt&&wt(a,o))}function kt(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"===ze(t))){var o=t.then;if("function"==typeof o)return o.call(t,(function(o){n||(n=!0,t===o?St(e,o):Et(e,o))}),(function(t){n||(n=!0,wt(e,t))})),!0}}catch(t){return n||wt(e,t),!0}return!1}function Et(e,t){e!==t&&kt(e,t)||St(e,t)}function St(e,t){e._state===ut&&(e._state=dt,e._data=t,_t(It,e))}function wt(e,t){e._state===ut&&(e._state=dt,e._data=t,_t(xt,e))}function Ct(e){e._then=e._then.forEach(yt)}function It(e){e._state=mt,Ct(e)}function xt(e){e._state=pt,Ct(e),!e._handled&&gt&&n.g.process.emit("unhandledRejection",e._data,e)}function Tt(e){n.g.process.emit("rejectionHandled",e)}function Pt(e){if("function"!=typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof Pt==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(e,t){function n(e){wt(t,e)}try{e((function(e){Et(t,e)}),n)}catch(e){n(e)}}(e,this)}Pt.prototype={constructor:Pt,_state:ut,_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(ht),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,this._state===pt&&gt&&_t(Tt,this)),this._state===mt||this._state===pt?_t(yt,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},Pt.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new Pt((function(t,n){var o=[],r=0;function a(e){return r++,function(n){o[e]=n,--r||t(o)}}for(var i,l=0;l<e.length;l++)(i=e[l])&&"function"==typeof i.then?i.then(a(l),n):o[l]=i;r||t(o)}))},Pt.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new Pt((function(t,n){for(var o,r=0;r<e.length;r++)(o=e[r])&&"function"==typeof o.then?o.then(t,n):t(o)}))},Pt.resolve=function(e){return e&&"object"===ze(e)&&e.constructor===Pt?e:new Pt((function(t){t(e)}))},Pt.reject=function(e){return new Pt((function(t,n){n(e)}))};var Rt={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};var Ot="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function At(){for(var e=12,t="";e-- >0;)t+=Ot[62*Math.random()|0];return t}function Nt(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Mt(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n],";")}),"")}function Dt(e){return e.size!==Rt.size||e.x!==Rt.x||e.y!==Rt.y||e.rotate!==Rt.rotate||e.flipX||e.flipY}function zt(e){var t=e.transform,n=e.containerWidth,o=e.iconWidth,r={transform:"translate(".concat(n/2," 256)")},a="translate(".concat(32*t.x,", ").concat(32*t.y,") "),i="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),l="rotate(".concat(t.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(a," ").concat(i," ").concat(l)},path:{transform:"translate(".concat(o/2*-1," -256)")}}}var Bt={x:0,y:0,width:"100%",height:"100%"};function Lt(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var Ft=(at.measurePerformance&&Ye&&Ye.mark&&Ye.measure,function(e,t,n,o){var r,a,i,l=Object.keys(e),s=l.length,c=void 0!==o?function(e,t){return function(n,o,r,a){return e.call(t,n,o,r,a)}}(t,o):t;for(void 0===n?(r=1,i=e[l[0]]):(r=0,i=n);r<s;r++)i=c(i,e[a=l[r]],a,e);return i});function Gt(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,o=void 0!==n&&n,r=Object.keys(t).reduce((function(e,n){var o=t[n];return o.icon?e[o.iconName]=o.icon:e[n]=o,e}),{});"function"!=typeof lt.hooks.addPack||o?lt.styles[e]=Fe({},lt.styles[e]||{},r):lt.hooks.addPack(e,r),"fas"===e&&Gt("fa",t)}var Ht=lt.styles,jt=lt.shims,Ut=function(){var e=function(e){return Ft(Ht,(function(t,n,o){return t[o]=Ft(n,e,{}),t}),{})};e((function(e,t,n){return t[3]&&(e[t[3]]=n),e})),e((function(e,t,n){var o=t[2];return e[n]=n,o.forEach((function(t){e[t]=n})),e}));var t="far"in Ht;Ft(jt,(function(e,n){var o=n[0],r=n[1],a=n[2];return"far"!==r||t||(r="fas"),e[o]={prefix:r,iconName:a},e}),{})};function Wt(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}function Vt(e){var t=e.tag,n=e.attributes,o=void 0===n?{}:n,r=e.children,a=void 0===r?[]:r;return"string"==typeof e?Nt(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(Nt(e[n]),'" ')}),"").trim()}(o),">").concat(a.map(Vt).join(""),"</").concat(t,">")}Ut(),lt.styles;function Kt(e){this.name="MissingIcon",this.message=e||"Icon unavailable",this.stack=(new Error).stack}Kt.prototype=Object.create(Error.prototype),Kt.prototype.constructor=Kt;var $t={fill:"currentColor"},qt={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},Yt=(Fe({},$t,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}),Fe({},qt,{attributeName:"opacity"}));function Xt(e){var t=e[0],n=e[1],o=Ge(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(o)?{tag:"g",attributes:{class:"".concat(at.familyPrefix,"-").concat(nt.GROUP)},children:[{tag:"path",attributes:{class:"".concat(at.familyPrefix,"-").concat(nt.SECONDARY),fill:"currentColor",d:o[0]}},{tag:"path",attributes:{class:"".concat(at.familyPrefix,"-").concat(nt.PRIMARY),fill:"currentColor",d:o[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:o}}}}Fe({},$t,{cx:"256",cy:"364",r:"28"}),Fe({},qt,{attributeName:"r",values:"28;14;28;28;14;28;"}),Fe({},Yt,{values:"1;0;1;1;0;1;"}),Fe({},$t,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),Fe({},Yt,{values:"1;0;0;0;0;1;"}),Fe({},$t,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),Fe({},Yt,{values:"0;0;1;1;0;0;"}),lt.styles,lt.styles;var Zt='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';var Jt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach((function(t){e.definitions[t]=Fe({},e.definitions[t]||{},r[t]),Gt(t,r[t]),Ut()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var o=n[t],r=o.prefix,a=o.iconName,i=o.icon;e[r]||(e[r]={}),e[r][a]=i})),e}}],n&&Be(t.prototype,n),e}();function Qt(){at.autoAddCss&&!on&&(function(e){if(e&&Xe){var t=qe.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=qe.head.childNodes,o=null,r=n.length-1;r>-1;r--){var a=n[r],i=(a.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(i)>-1&&(o=a)}qe.head.insertBefore(t,o)}}(function(){var e=Je,t=Qe,n=at.familyPrefix,o=at.replacementClass,r=Zt;if(n!==e||o!==t){var a=new RegExp("\\.".concat(e,"\\-"),"g"),i=new RegExp("\\--".concat(e,"\\-"),"g"),l=new RegExp("\\.".concat(t),"g");r=r.replace(a,".".concat(n,"-")).replace(i,"--".concat(n,"-")).replace(l,".".concat(o))}return r}()),on=!0)}function en(e){var t=e.prefix,n=void 0===t?"fa":t,o=e.iconName;if(o)return Wt(nn.definitions,n,o)||Wt(lt.styles,n,o)}var tn,nn=new Jt,on=!1,rn=function(e){return function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),o=n[0],r=n.slice(1).join("-");if(o&&"h"===r)return e.flipX=!0,e;if(o&&"v"===r)return e.flipY=!0,e;if(r=parseFloat(r),isNaN(r))return e;switch(o){case"grow":e.size=e.size+r;break;case"shrink":e.size=e.size-r;break;case"left":e.x=e.x-r;break;case"right":e.x=e.x+r;break;case"up":e.y=e.y-r;break;case"down":e.y=e.y+r;break;case"rotate":e.rotate=e.rotate+r}return e}),t):t}(e)},an=(tn=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.transform,a=void 0===r?Rt:r,i=o.symbol,l=void 0!==i&&i,s=o.mask,c=void 0===s?null:s,u=o.maskId,d=void 0===u?null:u,m=o.title,p=void 0===m?null:m,h=o.titleId,g=void 0===h?null:h,f=o.classes,b=void 0===f?[]:f,v=o.attributes,_=void 0===v?{}:v,y=o.styles,k=void 0===y?{}:y;if(e){var E=e.prefix,S=e.iconName,w=e.icon;return t=Fe({type:"icon"},e),n=function(){return Qt(),at.autoA11y&&(p?_["aria-labelledby"]="".concat(at.replacementClass,"-title-").concat(g||At()):(_["aria-hidden"]="true",_.focusable="false")),function(e){var t=e.icons,n=t.main,o=t.mask,r=e.prefix,a=e.iconName,i=e.transform,l=e.symbol,s=e.title,c=e.maskId,u=e.titleId,d=e.extra,m=e.watchable,p=void 0!==m&&m,h=o.found?o:n,g=h.width,f=h.height,b="fa-w-".concat(Math.ceil(g/f*16)),v=[at.replacementClass,a?"".concat(at.familyPrefix,"-").concat(a):"",b].filter((function(e){return-1===d.classes.indexOf(e)})).concat(d.classes).join(" "),_={children:[],attributes:Fe({},d.attributes,{"data-prefix":r,"data-icon":a,class:v,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(g," ").concat(f)})};p&&(_.attributes["data-fa-i2svg"]=""),s&&_.children.push({tag:"title",attributes:{id:_.attributes["aria-labelledby"]||"title-".concat(u||At())},children:[s]});var y=Fe({},_,{prefix:r,iconName:a,main:n,mask:o,maskId:c,transform:i,symbol:l,styles:d.styles}),k=o.found&&n.found?function(e){var t,n=e.children,o=e.attributes,r=e.main,a=e.mask,i=e.maskId,l=e.transform,s=r.width,c=r.icon,u=a.width,d=a.icon,m=zt({transform:l,containerWidth:u,iconWidth:s}),p={tag:"rect",attributes:Fe({},Bt,{fill:"white"})},h=c.children?{children:c.children.map(Lt)}:{},g={tag:"g",attributes:Fe({},m.inner),children:[Lt(Fe({tag:c.tag,attributes:Fe({},c.attributes,m.path)},h))]},f={tag:"g",attributes:Fe({},m.outer),children:[g]},b="mask-".concat(i||At()),v="clip-".concat(i||At()),_={tag:"mask",attributes:Fe({},Bt,{id:b,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,f]},y={tag:"defs",children:[{tag:"clipPath",attributes:{id:v},children:(t=d,"g"===t.tag?t.children:[t])},_]};return n.push(y,{tag:"rect",attributes:Fe({fill:"currentColor","clip-path":"url(#".concat(v,")"),mask:"url(#".concat(b,")")},Bt)}),{children:n,attributes:o}}(y):function(e){var t=e.children,n=e.attributes,o=e.main,r=e.transform,a=Mt(e.styles);if(a.length>0&&(n.style=a),Dt(r)){var i=zt({transform:r,containerWidth:o.width,iconWidth:o.width});t.push({tag:"g",attributes:Fe({},i.outer),children:[{tag:"g",attributes:Fe({},i.inner),children:[{tag:o.icon.tag,children:o.icon.children,attributes:Fe({},o.icon.attributes,i.path)}]}]})}else t.push(o.icon);return{children:t,attributes:n}}(y),E=k.children,S=k.attributes;return y.children=E,y.attributes=S,l?function(e){var t=e.prefix,n=e.iconName,o=e.children,r=e.attributes,a=e.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Fe({},r,{id:!0===a?"".concat(t,"-").concat(at.familyPrefix,"-").concat(n):a}),children:o}]}]}(y):function(e){var t=e.children,n=e.main,o=e.mask,r=e.attributes,a=e.styles,i=e.transform;if(Dt(i)&&n.found&&!o.found){var l={x:n.width/n.height/2,y:.5};r.style=Mt(Fe({},a,{"transform-origin":"".concat(l.x+i.x/16,"em ").concat(l.y+i.y/16,"em")}))}return[{tag:"svg",attributes:r,children:t}]}(y)}({icons:{main:Xt(w),mask:c?Xt(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:E,iconName:S,transform:Fe({},Rt,a),symbol:l,title:p,maskId:d,titleId:g,extra:{attributes:_,styles:k,classes:b}})},Object.defineProperty(t,"abstract",{get:n}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map((function(e){return Vt(e)}))}}),Object.defineProperty(t,"node",{get:function(){if(Xe){var e=qe.createElement("div");return e.innerHTML=t.html,e.children}}}),t}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(e||{}).icon?e:en(e||{}),o=t.mask;return o&&(o=(o||{}).icon?o:en(o||{})),tn(n,Fe({},t,{mask:o}))}),ln=n(5697),sn=n.n(ln),cn=n(9196),un=n.n(cn);function dn(e){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(e)}function mn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(n),!0).forEach((function(t){mn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gn(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function bn(e){return t=e,(t-=0)==t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var vn=!1;try{vn=!0}catch(e){}function yn(e){return null===e?null:"object"===dn(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"==typeof e?{prefix:"fas",iconName:e}:void 0}function kn(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?mn({},e,t):{}}function En(e){var t=e.forwardedRef,n=gn(e,["forwardedRef"]),o=n.icon,r=n.mask,a=n.symbol,i=n.className,l=n.title,s=yn(o),c=kn("classes",[].concat(fn(function(e){var t,n=e.spin,o=e.pulse,r=e.fixedWidth,a=e.inverse,i=e.border,l=e.listItem,s=e.flip,c=e.size,u=e.rotation,d=e.pull,m=(mn(t={"fa-spin":n,"fa-pulse":o,"fa-fw":r,"fa-inverse":a,"fa-border":i,"fa-li":l,"fa-flip-horizontal":"horizontal"===s||"both"===s,"fa-flip-vertical":"vertical"===s||"both"===s},"fa-".concat(c),null!=c),mn(t,"fa-rotate-".concat(u),null!=u&&0!==u),mn(t,"fa-pull-".concat(d),null!=d),mn(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(m).map((function(e){return m[e]?e:null})).filter((function(e){return e}))}(n)),fn(i.split(" ")))),u=kn("transform","string"==typeof n.transform?rn(n.transform):n.transform),d=kn("mask",yn(r)),m=an(s,hn({},c,{},u,{},d,{symbol:a,title:l}));if(!m)return function(){var e;!vn&&console&&"function"==typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",s),null;var p=m.abstract,h={ref:t};return Object.keys(n).forEach((function(e){En.defaultProps.hasOwnProperty(e)||(h[e]=n[e])})),Sn(p[0],h)}En.displayName="FontAwesomeIcon",En.propTypes={border:sn().bool,className:sn().string,mask:sn().oneOfType([sn().object,sn().array,sn().string]),fixedWidth:sn().bool,inverse:sn().bool,flip:sn().oneOf(["horizontal","vertical","both"]),icon:sn().oneOfType([sn().object,sn().array,sn().string]),listItem:sn().bool,pull:sn().oneOf(["right","left"]),pulse:sn().bool,rotation:sn().oneOf([0,90,180,270]),size:sn().oneOf(["lg","xs","sm","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:sn().bool,symbol:sn().oneOfType([sn().bool,sn().string]),title:sn().string,transform:sn().oneOfType([sn().string,sn().object]),swapOpacity:sn().bool},En.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var Sn=function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof n)return n;var r=(n.children||[]).map((function(n){return e(t,n)})),a=Object.keys(n.attributes||{}).reduce((function(e,t){var o=n.attributes[t];switch(t){case"class":e.attrs.className=o,delete n.attributes.class;break;case"style":e.attrs.style=o.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,o=t.indexOf(":"),r=bn(t.slice(0,o)),a=t.slice(o+1).trim();return r.startsWith("webkit")?e[(n=r,n.charAt(0).toUpperCase()+n.slice(1))]=a:e[r]=a,e}),{});break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=o:e.attrs[bn(t)]=o}return e}),{attrs:{}}),i=o.style,l=void 0===i?{}:i,s=gn(o,["style"]);return a.attrs.style=hn({},a.attrs.style,{},l),t.apply(void 0,[n.tag,hn({},a.attrs,{},s)].concat(fn(r)))}.bind(null,un().createElement);const wn=window.wp.mediaUtils,Cn=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return{value:(0,m.get)(e,t,o),onChange:e=>{const o=(0,m.set)({},t,e);n(o)}}},In=(0,i.forwardRef)((function({icon:e,size:t=24,...n},o){return(0,i.cloneElement)(e,{width:t,height:t,...n,ref:o})})),xn=()=>{const{activeStep:e,goToStep:t,steps:n}=(0,P.useWizard)(),o=(0,i.useMemo)((()=>n.map(((e,t)=>e.skipNavigation?null:{step:e,index:t})).filter(Boolean)),[n]);return(0,i.createElement)("div",{className:"kubio-ai-wizard-sidebar-steps"},o.map(((n,o)=>{let{step:r,index:a}=n;return(0,i.createElement)("div",{key:r.name,className:x()("kubio-ai-wizard-sidebar-step",{"kubio-ai-wizard-sidebar-step--passed":e>a,"kubio-ai-wizard-sidebar-step--current":e===a}),tabIndex:0,role:"button",onClick:()=>a<e?t(r.name):m.noop},(0,i.createElement)("div",{className:"kubio-ai-wizard-sidebar-step-number-container"},(0,i.createElement)("div",{className:"kubio-ai-wizard-sidebar-step-number"},o+1)),(0,i.createElement)("div",{className:"kubio-ai-wizard-sidebar-step-text"},r.label&&(0,i.createElement)("h4",null,r.label),r.description&&(0,i.createElement)("p",null,r.description)))})))},Tn=(0,E.createHigherOrderComponent)((e=>t=>{const n=(0,i.useRef)(m.stubTrue),[o,r]=(0,i.useState)(!1),a=(0,i.useRef)(),l=(0,w.useSelect)((e=>{const{getClientIdsWithDescendants:t,getBlock:n,getBlocks:o}=e("core/block-editor"),r=t().find((e=>{var t;return"core/post-content"===(null===(t=n(e))||void 0===t?void 0:t.name)}));var a;return!r||0===(null===(a=o(r))||void 0===a?void 0:a.length)}),[]),s=(0,i.useCallback)((e=>{n.current=e}),[]),{previousStep:c,nextStep:u,isLastStep:d,steps:p,activeStepName:h}=(0,P.useWizard)(),[g,f]=(0,i.useState)(!1),[v,_]=(0,i.useState)({}),{isSetup:y,onFinish:E,isNewPageWizard:S}=t,I=(0,i.useCallback)((()=>{if(!0===n.current())return d?y||l||S?E():r(!0):void u()}),[d,u,y,l,S,E]),R=(0,i.useMemo)((()=>{const e=p.filter((e=>!e.skipNavigation));return 0===(0,m.findIndex)(e,(e=>e.name===h))}),[h,p]),[O]=(0,b.useIsAIConnected)(),A=(0,i.useMemo)((()=>d?y?(0,T.__)("Save changes","kubio"):(0,T.__)("Generate","kubio"):(0,T.__)("Next","kubio")),[d,y]),N=(0,i.useMemo)((()=>d&&!O||g),[d,O,g]),M=((0,i.createElement)(k.Button,{ref:a,onClick:I,disabled:N,className:x()("has-text",{"kubio-ai-button":d,"kubio-ai-button-secondary":!d})},A),(0,i.useMemo)((()=>d&&!O?(0,T.__)("Please connect to Kubio AI first.","kubio"):(0,m.first)(Object.values(v).filter((e=>!(0,m.isEmpty)(e))))),[v,O,d]));return(0,i.createElement)("div",{className:"kubio-ai-wizard-step-wrapper"},(0,i.createElement)("div",{className:"kubio-ai-wizard-sidebar"},(0,i.createElement)(xn,null)),(0,i.createElement)("div",{className:"kubio-ai-wizard-content"},(0,i.createElement)("div",{className:"kubio-ai-wizard-step"},(0,i.createElement)(e,C({},t,{nextStepIsDisabled:g,setNextStepIsDisabled:f,errors:v,setErrors:_,setValidator:s}))),(0,i.createElement)("div",{className:"kubio-ai-wizard-footer"},(0,i.createElement)("div",{className:"kubio-ai-wizard-footer__left-side"}),(0,i.createElement)("div",{className:"kubio-ai-wizard-footer__right-side"},o&&(0,i.createElement)(k.Popover,{anchor:a.current,placement:"top",offset:10,focusOnMount:!1,className:"kubio-ai-wizard-confirmation",shift:!0,flip:!0},(0,i.createElement)(k.Flex,{className:"kubio-ai-wizard-confirmation__message",align:"flex-start"},(0,i.createElement)(In,{icon:Y.InfoIcon,size:16}),(0,i.createElement)("p",null,(0,T.__)("Looks like the current page already has content. This action will replace the current page content.","kubio"))),(0,i.createElement)(k.Flex,{justify:"flex-end"},(0,i.createElement)(k.Button,{className:"kubio-ai-button-tertiary has-text",onClick:()=>r(!1)},(0,T.__)("Back","kubio")),(0,i.createElement)(k.Button,{onClick:E,className:"kubio-ai-button has-text"},(0,T.__)("Continue","kubio")))),(0,i.createElement)(k.Button,{className:"kubio-ai-button-tertiary has-text",onClick:c,disabled:R},(0,T.__)("Back","kubio")),(0,i.createElement)(k.Tooltip,{placement:"top",delay:0,text:M?(0,i.createElement)("span",{className:"kubio-ai-wizard-error-tooltip"},M):null,hideOnClick:!1},(0,i.createElement)("div",null,(0,i.createElement)(k.Button,{ref:a,onClick:I,disabled:N,className:x()("has-text",{"kubio-ai-button":d,"kubio-ai-button-secondary":!d})},A)))))))}),"withStepWrapper"),Pn=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M18 11.2h-5.2V6h-1.6v5.2H6v1.6h5.2V18h1.6v-5.2H18z"})),Rn=[{value:"multi-page",label:(0,T.__)("Multi page","kubio")},{value:"one-page",label:(0,T.__)("Single page","kubio")}],On=e=>{let{field:t,label:n,errors:o,children:r}=e;return(0,i.createElement)("span",{className:x()("kubio-ai-wizard-control-label",{"has-errors":o&&!!o[t]})},n,!!o&&!!o[t]&&(0,i.createElement)("span",{className:"error-message"},o[t]),(0,i.createElement)("div",{className:"kubio-ai-wizard-control-label__extra-info"},r))},An=Tn((e=>{let{data:t,updateData:n,isFrontPage:o=!1,startWithAIFrontPage:r=!1,isRegenerate:a=!1,setValidator:l,setNextStepIsDisabled:c,errors:u,setErrors:d,isSetup:h=!1}=e;const{cloudTags:g}=(0,w.useSelect)((e=>{const{getSettings:t=p().noop}=e("kubio/edit-site")||{},n=t()||{};return{cloudTags:(null==n?void 0:n.kubioBlockTags)||[]}}),[]),{title:f}=(0,v.useSiteLogoImages)(),_=(0,i.useMemo)((()=>(0,m.map)((0,b.getBusinessTypes)(),(e=>{let{label:t,description:n,value:o}=e;return{value:o,label:t,description:n}}))),[]),y=(0,i.useMemo)((()=>g.map((e=>({label:e.label,value:e.slug})))),[g]),k=(0,i.useCallback)((function(e){return Cn(t,e,n,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")}),[t,n]),E=k("sections_tag"),S=k("short_desc"),I=k("business_type","Business"),R=k("business_name",f),[O,A]=(0,i.useState)((0,m.words)(S.value).length),N=(0,s.useDebounce)(A,150);(0,i.useEffect)((()=>{N((0,m.words)(S.value).length)}),[S]);const M=(0,i.useRef)();(0,i.useEffect)((()=>{if(0===y.length||M.current||!o||!a&&!r)return;const e=["shadow","flat"],t=y.filter((t=>{let{value:n}=t;return e.includes(n)})),n=(0,m.sample)(t).value;M.current=n,E.onChange(n)}),[y,E.value,E,o,a,r]);const D=(0,i.useCallback)((()=>{let e=!0;const t={business_name:null,business_type:null,short_desc:null};return R.value||(t.business_name=(0,T.__)("Website name cannot be empty!","kubio"),e=e&&!1),I.value||(t.business_type=(0,T.__)("Website type cannot be empty!","kubio"),e=e&&!1),S.value?O>100&&(t.short_desc=(0,T.__)("Website description exceeds 100 words. Please edit & keep it under the limit to proceed.","kubio"),e=e&&!1):(t.short_desc=(0,T.__)("Website description cannot be empty!","kubio"),e=e&&!1),d(t),c(!e),e}),[R.value,I.value,S.value,O]);return(0,i.useEffect)((()=>{l(D)}),[l,D]),(0,i.useEffect)((()=>{const e={short_desc:null};O>100&&(e.short_desc=(0,T.__)("Website description exceeds 100 words. Please edit & keep it under the limit to proceed.","kubio")),d((t=>({...t,...e}))),c(!!Object.values(e).filter(Boolean).length)}),[S.value,R.value,O]),(0,i.createElement)("div",{className:"kubio-ai-wizard__general-info"},(0,i.createElement)("div",{className:"kubio-ai-wizard-form-fields"},(0,i.createElement)("div",{className:"kubio-ai-wizard__columns-layout"},(0,i.createElement)(P.InputControl,C({label:(0,i.createElement)(On,{label:(0,T.__)("Website name","kubio"),field:"business_name",errors:u}),className:x()("kubio-ai-wizard__general-info__business-name",(null==u?void 0:u.business_name)&&"has-errors")},R)),(0,i.createElement)(P.SuggestionsInput,C({label:(0,i.createElement)(On,{label:(0,T.__)("Website type","kubio"),field:"business_type",errors:u}),className:x()("kubio-ai-wizard__general-info__business-type",(null==u?void 0:u.business_type)&&"has-errors"),options:_,optionRender:e=>(0,i.createElement)("div",{className:"kubio-ai-language-style-select-item"},(0,i.createElement)("span",null,e.label)),popoverClassName:"kubio-ai-business-suggestion-popover",filterKeys:["label","description"],suggestionsToShow:10,onSuggestionClick:(e,t)=>t(e.label)},I)),o&&!a&&!h&&(0,i.createElement)(P.GutentagSelectControl,C({label:(0,T.__)("Website structure","kubio"),inlineLabel:!1,options:Rn,popoverClassName:"kubio-ai-wizard__select-control-dropdown"},k("structure_type","multi-page"))))),(0,i.createElement)("div",{className:"kubio-ai-wizard-form-fields no-gap"},(0,i.createElement)("div",{className:"kubio-ai-wizard-business-desc"},(0,i.createElement)(P.TextareaControl,C({label:(0,i.createElement)(On,{label:(0,T.__)("Short description of the website","kubio"),field:"short_desc"},(0,i.createElement)((()=>{const e=["",(0,T.__)("Too short","kubio"),(0,T.__)("Almost there","kubio"),(0,T.__)("Great description","kubio")];let t=0;return O>0&&(t=O<=20?1:O<=30?2:3),(0,i.createElement)("div",{className:`kubio-short-description-meter kubio-short-description-meter__level-${t}`},(0,i.createElement)("span",null,e[t]),(0,i.createElement)("ul",{className:"kubio-short-description-meter__lines"},(0,i.createElement)("li",null),(0,i.createElement)("li",null),(0,i.createElement)("li",null)))}),{meterLevel:"level2"})),className:x()("kubio-ai-wizard-business-desc-field",(null==u?void 0:u.short_desc)&&"has-errors"),rows:10},S)),(0,i.createElement)("div",{className:"wizard-field-info"},(0,i.createElement)("span",{className:"error-message"},null==u?void 0:u.short_desc),(0,i.createElement)("span",{className:x()({"error-message":O>100})},O,"/100")),(0,i.createElement)("div",{className:"kubio-ai-wizard-business-desc__recommendations"},(0,i.createElement)("div",{className:"kubio-ai-wizard-business-desc__recommendations__title"},(0,i.createElement)("img",{src:(0,q.staticAssetURL)("ai-assets/recommendations-icon.svg"),alt:""}),(0,i.createElement)("span",null,(0,T.__)("Recommendations","kubio"))),(0,i.createElement)("div",{className:"kubio-ai-wizard-business-desc__recommendations__body"},(0,i.createElement)("span",null,(0,T.__)("A few important things to mention in your description:","kubio")),(0,i.createElement)("ul",null,(0,i.createElement)("li",null,(0,T.__)("your main activity","kubio")),(0,i.createElement)("li",null,(0,T.__)("main products or services","kubio")),(0,i.createElement)("li",null,(0,T.__)("the purpose of the website","kubio"))))))))})),Nn=[{type:"facebook",url:""},{type:"instagram",url:""},{type:"youtube",url:""}],Mn=[{name:"facebook",label:(0,T.__)("Facebook","kubio"),icon:(0,i.createElement)(En,{icon:{prefix:"fab",iconName:"facebook",icon:[512,512,[62e3],"f09a","M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"]}}),placeholder:"https://www.facebook.com/..."},{name:"twitter",label:(0,T.__)("Twitter","kubio"),icon:(0,i.createElement)(En,{icon:{prefix:"fab",iconName:"x-twitter",icon:[512,512,[],"e61b","M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"]}}),placeholder:"https://www.twitter.com/..."},{name:"instagram",label:(0,T.__)("Instagram","kubio"),icon:(0,i.createElement)(En,{icon:{prefix:"fab",iconName:"instagram",icon:[448,512,[],"f16d","M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"]}}),placeholder:"https://www.instagram.com/..."},{name:"youtube",label:(0,T.__)("YouTube","kubio"),icon:(0,i.createElement)(En,{icon:{prefix:"fab",iconName:"youtube",icon:[576,512,[61802],"f167","M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"]}}),placeholder:"https://www.youtube.com/..."},{name:"whatsapp",label:(0,T.__)("Whatsapp","kubio"),icon:(0,i.createElement)(En,{icon:{prefix:"fab",iconName:"whatsapp",icon:[448,512,[],"f232","M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"]}}),placeholder:"https://wa.me/+1xxxxxxxxxxx"},{name:"tiktok",label:(0,T.__)("Tiktok","kubio"),icon:(0,i.createElement)(En,{icon:{prefix:"fab",iconName:"tiktok",icon:[448,512,[],"e07b","M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"]}}),placeholder:"https://www.tiktok.com/..."},{name:"pinterest",label:(0,T.__)("Pinterest","kubio"),icon:(0,i.createElement)(En,{icon:{prefix:"fab",iconName:"pinterest",icon:[496,512,[],"f0d2","M496 256c0 137-111 248-248 248-25.6 0-50.2-3.9-73.4-11.1 10.1-16.5 25.2-43.5 30.8-65 3-11.6 15.4-59 15.4-59 8.1 15.4 31.7 28.5 56.8 28.5 74.8 0 128.7-68.8 128.7-154.3 0-81.9-66.9-143.2-152.9-143.2-107 0-163.9 71.8-163.9 150.1 0 36.4 19.4 81.7 50.3 96.1 4.7 2.2 7.2 1.2 8.3-3.3.8-3.4 5-20.3 6.9-28.1.6-2.5.3-4.7-1.7-7.1-10.1-12.5-18.3-35.3-18.3-56.6 0-54.7 41.4-107.6 112-107.6 60.9 0 103.6 41.5 103.6 100.9 0 67.1-33.9 113.6-78 113.6-24.3 0-42.6-20.1-36.7-44.8 7-29.5 20.5-61.3 20.5-82.6 0-19-10.2-34.9-31.4-34.9-24.9 0-44.9 25.7-44.9 60.2 0 22 7.4 36.8 7.4 36.8s-24.5 103.8-29 123.2c-5 21.4-3 51.6-.9 71.2C65.4 450.9 0 361.1 0 256 0 119 111 8 248 8s248 111 248 248z"]}}),placeholder:"https://www.pinterest.com/..."},{name:"linkedin",label:(0,T.__)("Linkedin","kubio"),icon:(0,i.createElement)(En,{icon:{prefix:"fab",iconName:"linkedin",icon:[448,512,[],"f08c","M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"]}}),placeholder:"https://www.linkedin.com/..."}],Dn=Tn((e=>{let{data:t,updateData:n,setValidator:o,setNextStepIsDisabled:r,errors:a,setErrors:l,isFrontPage:s=!1,startWithAIFrontPage:c=!1,isRegenerate:u=!1}=e;const d=(0,i.useCallback)((function(e){return Cn(t,e,n,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")}),[t,n]),h=d("contact.email"),g=d("website_logo");(0,i.useEffect)((()=>{l({}),r(!1)}),[h.value,r]);const{defaultLanguage:f,cloudTags:v}=(0,w.useSelect)((e=>{const{getSettings:t=p().noop}=e("kubio/edit-site")||{},n=t()||{},o=(null==n?void 0:n.kubioBlockTags)||[];return{defaultLanguage:e(S.store).getEntityRecord("root","site").language,cloudTags:o}}),[]),_=(0,i.useMemo)((()=>v.map((e=>({label:e.label,value:e.slug})))),[v]),y=d("sections_tag"),k=(0,i.useRef)();(0,i.useEffect)((()=>{if(0===_.length||k.current||!s)return;if(y.value)return;const e=["shadow","flat"],t=_.filter((t=>{let{value:n}=t;return e.includes(n)})),n=t[Math.floor(Math.random()*t.length)].value;k.current=n,y.onChange(n)}),[_,y.value,y,s,u,c]);const E=(0,i.useMemo)((()=>(0,m.map)((0,b.getContentLanguages)(),((e,t)=>({label:e,value:t})))),[]),I=(0,i.useMemo)((()=>(0,m.map)((0,b.getContentLanguageStyles)(),((e,t)=>{let{label:n,description:o}=e;return{label:n,description:o,value:t}}))),[]),R=(0,i.useCallback)((()=>{let e=!0;const t={};return h.value&&(e=/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}/gi.test(h.value),e||(t.email="Email is not valid!")),l(t),r(!e),e}),[h.value,r]);return(0,i.useEffect)((()=>{o(R)}),[o,R]),(0,i.createElement)("div",{className:"kubio-ai-wizard__columns-layout"},(0,i.createElement)("div",{className:"kubio-ai-wizard-form-fields"},(0,i.createElement)(P.InputControl,C({label:(0,i.createElement)(On,{label:(0,i.createElement)("span",null,(0,T.__)("Email address","kubio"),(0,i.createElement)("span",{className:"components-base-control__label__appendix"},"(Optional)")),field:"email",errors:a}),className:x()((null==a?void 0:a.email)&&"has-errors")},d("contact.email"))),(0,i.createElement)(P.InputControl,C({label:(0,i.createElement)(i.Fragment,null,(0,T.__)("Phone number","kubio"),(0,i.createElement)("span",{className:"components-base-control__label__appendix"},"(Optional)"))},d("contact.phone"))),(0,i.createElement)(P.InputControl,C({label:(0,i.createElement)(i.Fragment,null,(0,T.__)("Address","kubio"),(0,i.createElement)("span",{className:"components-base-control__label__appendix"},"(Optional)"))},d("contact.address"))),(0,i.createElement)(Gn,d("contact.socials",Nn))),(0,i.createElement)("div",{className:"kubio-ai-wizard-form-fields"},(0,i.createElement)(P.GutentagSelectControl,C({label:(0,T.__)("Website language","kubio"),inlineLabel:!1,options:E,popoverClassName:"kubio-ai-wizard__select-control-dropdown"},d("language",f))),(0,i.createElement)(P.GutentagSelectControl,C({label:(0,T.__)("Language style","kubio"),inlineLabel:!1,options:I,itemRenderer:e=>(0,i.createElement)("div",{className:"kubio-ai-language-style-select-item"},(0,i.createElement)("span",null,e.label),(0,i.createElement)("span",null,e.description)),popoverClassName:"kubio-ai-wizard__select-control-dropdown"},d("language_style","natural"))),(0,i.createElement)(zn,{websiteLogo:g})))})),zn=e=>{let{websiteLogo:t}=e;const[n,o]=(0,i.useState)(null),[r,a]=(0,i.useState)(!1),[l,s]=(0,i.useState)(null),c=(0,i.useCallback)((()=>{let e=(0,q.defaultAssetURL)("/logo-fallback.png");return n?e=n.url:t.value&&(e=t.value.url),e}),[n,t.value]),u=(0,i.useCallback)((()=>{let e=(0,T.__)("No file selected","kubio");return n?e=n.url:t.value&&(e=t.value.url),e.split("/").pop()}),[n,t.value]),d=(e,n)=>{null!=d&&d.calledOnce?(o(e[0]),t.onChange({id:e[0].id,url:e[0].url}),n.value="",a(!1)):d.calledOnce=!0};return(0,i.createElement)(k.Flex,{className:"kubio-ai-wizard__website-logo",direction:"column",gap:1.5},(0,i.createElement)("span",{className:"components-base-control__label"},(0,T.__)("Website logo","kubio"),(0,i.createElement)("span",{className:"components-base-control__label__appendix"},"(Optional)")),(0,i.createElement)(k.Flex,{className:"kubio-ai-wizard__columns-layout",gap:5},(0,i.createElement)(k.FlexItem,{className:"kubio-ai-wizard__website-logo__image-wrapper"},(0,i.createElement)("img",{src:c(),alt:"logo"})),(0,i.createElement)(k.Flex,{direction:"column",justify:"space-between"},(0,i.createElement)("span",null,(0,T.__)("Upload an image file with your company's logo","kubio")),(0,i.createElement)(k.Flex,{justify:"flex-start"},(0,i.createElement)(k.FormFileUpload,{accept:"image/*",onChange:async e=>{a(!0),await(0,wn.uploadMedia)({allowedTypes:["image"],filesList:e.currentTarget.files,onFileChange:t=>d(t,e.target),onError:e=>{"MIME_TYPE_NOT_SUPPORTED"===e.code?s("Sorry, this file type is not supported."):s("Something went wrong. Please, try again."),s(e.message),a(!1)}})},disabled:r},(0,T.__)("Upload a file","kubio")),r&&(0,i.createElement)(k.Spinner,null),!r&&l&&(0,i.createElement)("span",null,l)),(0,i.createElement)(k.Flex,{className:"kubio-ai-wizard__website-logo__filename-wrapper",justify:"space-between"},(0,i.createElement)("span",null,u()),(n||t.value)&&(0,i.createElement)(k.Icon,{size:17,icon:"no",onClick:()=>{o(null),t.onChange(null)}})))))},Bn=p().keyBy(Mn,"name"),Ln=e=>Bn[e].icon,Fn=e=>{let{type:t,url:n,onRemove:o,onChange:r}=e;const a=(0,i.useRef)(),[l,s]=(0,i.useState)(!1),[c,u]=(0,i.useState)(n),d=(0,i.useCallback)(((e,n)=>{null==e||e.preventDefault(),null==e||e.stopPropagation(),r({type:t,url:n||c}),s(!1)}),[c,r,t]),m=(0,i.useCallback)((e=>{u(e)}),[c,d]),p=(0,i.useMemo)((()=>Bn[t].placeholder||(0,T.__)("No URL set","kubio")));return(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",{ref:a,className:x()("kubio-ai-contact-step__social-icon",{"kubio-ai-contact-step__social-icon--is-selected":l})},(0,i.createElement)(k.Icon,{size:22,icon:Ln(t),onClick:()=>s(!0)}),(0,i.createElement)(k.Icon,{size:12,icon:Y.RoundedDeleteIcon,onClick:()=>o(t)})),l&&(0,i.createElement)(k.Popover,{anchor:a.current,onFocusOutside:()=>s(!1),variant:"unstyled",offset:4},(0,i.createElement)("form",{className:"kubio-ai-wizard__edit-social-icon",onSubmit:d},(0,i.createElement)(k.Flex,{gap:0},(0,i.createElement)(k.FlexBlock,null,(0,i.createElement)(P.InputControl,{value:n,onChange:m,placeholder:p})),(0,i.createElement)(k.FlexItem,{className:"kubio-ai-wizard__edit-social-icon__button-wrapper"},(0,i.createElement)(k.Button,{type:"submit"},(0,T.__)("Apply","kubio")))))))},Gn=e=>{let{value:t,onChange:n}=e;const o=(0,i.useCallback)((e=>{n([...t,{type:e,url:""}])}),[n,t]),r=(0,i.useCallback)((e=>{n(t.filter((t=>t.type!==e)))}),[n,t]),a=(0,i.useCallback)((e=>{n(t.map((t=>(t.type===e.type&&(t={...t,...e}),t))))}),[n,t]);(0,i.useEffect)((()=>{var e,t,n;const o="kubio-ai-wizard--contact-step";return null===(e=document)||void 0===e||null===(t=e.body)||void 0===t||null===(n=t.classList)||void 0===n||n.toggle(o,!0),()=>{var e,t,n;null===(e=document)||void 0===e||null===(t=e.body)||void 0===t||null===(n=t.classList)||void 0===n||n.toggle(o,!1)}}),[]);const l=(0,i.useMemo)((()=>{const e=t.map((e=>e.type));return Mn.filter((t=>!e.includes(t.name)))}),[t]);return(0,i.createElement)("div",{className:"kubio-ai-wizard__social-media"},(0,i.createElement)(k.BaseControl,{id:"social-media-control"},(0,i.createElement)(k.BaseControl.VisualLabel,null,(0,T.__)("Social media","kubio"),(0,i.createElement)("span",{className:"components-base-control__label__appendix"},"(Optional)")),(0,i.createElement)("div",{className:x()("kubio-ai-contact-step-socials-wrapper")},t.map((e=>{let{type:t,url:n}=e;return(0,i.createElement)(Fn,{key:t,type:t,onRemove:r,onChange:a,url:n})})),(0,i.createElement)(k.DropdownMenu,{popoverProps:{className:"kubio-ai-wizard__social-media__dropdown",placement:"top",offset:10},label:(0,T.__)("Add social platform","kubio"),icon:Pn,toggleProps:{iconSize:20},controls:l.map((e=>{let{label:t,name:n,icon:r}=e;return{title:t,icon:r,onClick:()=>o(n)}}))}))))};var Hn=n(7418),jn=n.n(Hn),Un=function(){return Un=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Un.apply(this,arguments)};const Wn=function(e){for(var t=e.url,n=e.allowFullScreen,o=e.position,r=e.display,a=e.height,i=e.width,l=e.overflow,s=e.styles,c=e.onLoad,u=e.onMouseOver,d=e.onMouseOut,m=e.scrolling,p=e.id,h=e.frameBorder,g=e.ariaHidden,f=e.sandbox,b=e.allow,v=e.className,_=e.title,y=e.ariaLabel,k=e.ariaLabelledby,E=e.name,S=e.target,w=e.loading,C=e.importance,I=e.referrerpolicy,x=e.allowpaymentrequest,T=e.src,P=jn()({src:T||t,target:S||null,style:{position:o||null,display:r||"block",overflow:l||null},scrolling:m||null,allowpaymentrequest:x||null,importance:C||null,sandbox:f||null,loading:w||null,styles:s||null,name:E||null,className:v||null,referrerpolicy:I||null,title:_||null,allow:b||null,id:p||null,"aria-labelledby":k||null,"aria-hidden":g||null,"aria-label":y||null,width:i||null,height:a||null,onLoad:c||null,onMouseOver:u||null,onMouseOut:d||null}),R=Object.create(null),O=0,A=Object.keys(P);O<A.length;O++){var N=A[O];null!=P[N]&&(R[N]=P[N])}for(var M=0,D=Object.keys(R.style);M<D.length;M++){var z=D[M];null==R.style[z]&&delete R.style[z]}if(n)if("allow"in R){var B=R.allow.replace("fullscreen","");R.allow=("fullscreen "+B.trim()).trim()}else R.allow="fullscreen";return h>=0&&(R.style.hasOwnProperty("border")||(R.style.border=h)),un().createElement("iframe",Un({},R))},Vn=(0,T.__)("Kubio AI is ready to generate your website.","kubio"),Kn=(0,T.__)("AI features require connecting to a Kubio account","kubio"),$n=(0,T.__)("Create a free Kubio account and you will receive 500 free AI credits to generate your homepage.","kubio"),qn=e=>{let{isSetup:t}=e;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)("img",{src:(0,q.staticAssetURL)("ai-assets/final-message.png"),alt:"final-message"}),!t&&(0,i.createElement)("h2",null,(0,T.__)('Awesome! Let\'s hit "Generate"',"kubio")),t&&(0,i.createElement)("h2",null,(0,T.__)('Awesome! Let\'s hit "Save changes"',"kubio")),(0,i.createElement)("p",null,Vn))},Yn=()=>{const[,e]=(0,b.useIsAIConnected)(),{createSuccessNotice:t}=(0,s.useKubioNotices)(),n=(0,m.first)((0,q.getBackendData)("kubioCloudUrl").split("?")).replace(/\/+$/,""),[o,r]=(0,b.useAIServiceInfo)(),a=(0,i.useRef)(o);return a.current=o,(0,i.useEffect)((()=>{const n=o=>{const{action:i=null,value:l=null,error:s=null}=o.data||{};"ai_subscription_key"===i&&(window.removeEventListener("message",n),s&&X.Log.error("AI Connect Iframe",s),l||X.Log.error("AI Connect Iframe, no value"),(async()=>{await(0,b.setAIKey)({aiKey:l});const{remaining_credits:n=0,per_page_credits:o=30}=await(0,b.getAIInfo)();r({...a.current,state:"ready",remainingCredits:n,perPageCredits:o}),e(!0),t((0,T.__)("Successfully connected to Kubio AI!","kubio"),{duration:3e3})})())};return window.addEventListener("message",n),()=>{window.removeEventListener("message",n)}}),[t,e,r]),(0,i.createElement)(k.Flex,{align:"center",className:"kubio-ai-connect-row",justify:"space-around",wrap:!0},(0,i.createElement)(k.FlexItem,{isBlock:!0,className:"kubio-ai-connect-header"},(0,i.createElement)("h1",{className:"kubio-ai-connect-title"},Kn),(0,i.createElement)("p",{className:"kubio-ai-connect-message"},$n)),(0,i.createElement)(k.FlexItem,{isBlock:!0},(0,i.createElement)("div",{className:"kubio-connect-iframe-container"},(0,i.createElement)(Wn,{loading:"eager",importance:"high",className:"kubio-connect-iframe",url:`${n}/ui-route/connect-ai?hl=1`,title:"Kubio AI Connect",sandbox:"allow-popups allow-modals allow-same-origin allow-scripts allow-forms allow-popups-to-escape-sandbox"}))))},Xn=Tn((e=>{let{isSetup:t}=e;const[n]=(0,b.useIsAIConnected)();return(0,i.createElement)("div",{className:"kubio-ai-wizard__generate-step kubio-ai-wizard__generate-step--"+(n?"connected":"disconnected")},n&&(0,i.createElement)(qn,{isSetup:t}),!n&&(0,i.createElement)(Yn,null))})),Zn=[{label:(0,T.__)("General","kubio"),value:"general"},{label:(0,T.__)("About Us","kubio"),value:"about"},{label:(0,T.__)("Services","kubio"),value:"services"},{label:(0,T.__)("Features","kubio"),value:"features"},{label:(0,T.__)("Portfolio","kubio"),value:"portfolio"},{label:(0,T.__)("Team","kubio"),value:"team"},{label:(0,T.__)("Gallery","kubio"),value:"gallery"},{label:(0,T.__)("F.A.Q.","kubio"),value:"faq"},{label:(0,T.__)("Pricing","kubio"),value:"pricing"},{label:(0,T.__)("Contact","kubio"),value:"contact"}],Jn=(0,T.__)("It will show the main features of our products, including our plans and user testimonials","kubio"),Qn={general:"",about:(0,T.__)("This page should offer detailed information about our organization. Describe company's history, values, and mission and give visitors a clear understanding of our identity.","kubio"),services:(0,T.__)("This page focus is on showcasing our business's offerings. Present details about the specific products, solutions, or expertise our company provides to attract potential clients.","kubio"),portfolio:(0,T.__)("This page should display a showcase of our notable projects and work. Highlight completed assignments, creative ventures, or successful case studies that effectively demonstrate our competence and skills.","kubio"),team:(0,T.__)("A page that introduces visitors to our team members. Spotlight their individual roles, skills, and contributions within the organization to provide insight into our workforce.","kubio"),contact:(0,T.__)("A page that streamlines communication between our business and its audience. Incorporate contact forms, phone numbers, addresses, and social media links to provide visitors with convenient ways to get in touch.","kubio"),features:(0,T.__)("This page is dedicated to showcasing the key features and functionalities of our products or services. Highlight the unique aspects that set our offerings apart and provide value to customers.","kubio"),gallery:(0,T.__)("This page should present a visual gallery that displays images, videos, or multimedia content relevant to our business or organization.","kubio"),faq:(0,T.__)("This page should present comprehensive list of frequently asked questions and their respective answers. Address common queries that visitors might have about our products, services, policies, or any other relevant topics.","kubio"),pricing:(0,T.__)("This page should present clear and detailed pricing information for our products or services.","kubio")},eo=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e=e.replace(/\s+/g,""),t=t.replace(/\s+/g,""),n||(e=e.toLowerCase(),t=t.toLowerCase()),e===t)return 1;if(e.length<2||t.length<2)return 0;const o=new Map;for(let t=0;t<e.length-1;t++){const n=e.substring(t,t+2),r=o.has(n)?o.get(n)+1:1;o.set(n,r)}let r=0;for(let e=0;e<t.length-1;e++){const n=t.substring(e,e+2),a=o.has(n)?o.get(n):0;a>0&&(o.set(n,a-1),r++)}return 2*r/(e.length+t.length-2)},to=Tn((e=>{var t;let{data:n,updateData:o,setNextStepIsDisabled:r,errors:a,setErrors:l}=e;const s=(0,i.useCallback)((function(e){return Cn(n,e,o,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")}),[n,o]),c=s("title",""),u=s("short_desc"),d=(0,i.useRef)(!0),p=(0,m.words)(u.value||"").length,h=(null==n?void 0:n.purpose)||"general",g=(0,i.useRef)();(0,i.useEffect)((()=>{if(g.current===c.value||u.value)return;g.current=c.value;const e=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.8;const r=[];let a=0;for(let n=0;n<t.length;n++){const o=t[n];let s=0;l=o,i=(i=e).toLowerCase(),l=l.toLowerCase(),s=i&&i.includes(l)?1:eo(e,o),r.push({target:o,rating:s}),s>r[a].rating&&(a=n)}var i,l;const s=r[a];return s.rating>=o?s.target:n}(c.value||"",Zn.map((e=>e.value)),h).toLowerCase();o({short_desc:g.current!==c.value||""===u.value?(0,m.get)(Qn,e,""):u.value,purpose:e})}),[c.value,h,u.value,o]);const f=(0,i.useCallback)((e=>{o({purpose:e,short_desc:(0,m.get)(Qn,e,"")})}),[o]),b=(0,i.useCallback)((e=>{c.onChange(e)}),[c]);return(0,i.useEffect)((()=>{const e={};c.value||d.current||(e.page_title=(0,T.__)("Page title cannot be empty!","kubio")),p>100&&(e.short_desc=(0,T.__)("Page description exceeds 100 words. Please edit & keep it under the limit to proceed.","kubio")),0===p&&(e.short_desc=(0,T.__)("Page description cannot be empty!","kubio")),l(e),r(!!Object.values(e).filter(Boolean).length||""===c.value),d.current&&(d.current=!1)}),[c.value,p,r,l]),(0,i.createElement)("div",{className:"kubio-ai-wizard-form-fields"},(0,i.createElement)(P.InputControl,C({label:(0,i.createElement)(On,{label:(0,T.__)("Page title","kubio"),field:"page_title",errors:a}),className:x()((null==a?void 0:a.page_title)&&"has-errors")},c,{onChange:b,autoComplete:"off",role:"presentation"})),(0,i.createElement)(P.GutentagSelectControl,{label:(0,T.__)("Page purpose","kubio"),placeholder:(0,T.__)("Select page purpose","kubio"),options:Zn,value:h,onChange:f,popoverClassName:"kubio-ai-wizard__select-control-dropdown"}),(0,i.createElement)("div",null,(0,i.createElement)(P.TextareaControl,C({label:(0,T.__)("Short description of the page","kubio"),className:x()("kubio-ai-wizard-page-desc-field",(null==a?void 0:a.short_desc)&&"has-errors"),placeholder:Jn,rows:6},u)),(0,i.createElement)("div",{className:"kubio-ai-wizard-textarea-desc-info"},(0,i.createElement)("span",{className:"error-message"},null!==(t=null==a?void 0:a.short_desc)&&void 0!==t?t:""),(0,i.createElement)("span",null,(0,T.__)("Max. 100 words","kubio")))))})),no=[{label:(0,T.__)("Welcome","kubio"),description:(0,T.__)("Tell us a few things about your new website.","kubio"),name:"welcome",component:e=>{let{onCancel:t}=e;const{nextStep:n}=(0,P.useWizard)();return(0,i.createElement)("div",{className:"kubio-ai-welcome-step"},(0,i.createElement)("div",{className:"kubio-ai-welcome-step__content"},(0,i.createElement)("div",{className:"kubio-ai-welcome-step__close-modal"},(0,i.createElement)(k.Button,{icon:De,onClick:t})),(0,i.createElement)(k.Flex,null,(0,i.createElement)(k.FlexBlock,{className:"kubio-ai-welcome-step__content-column"},(0,i.createElement)("div",{className:"kubio-ai-welcome-step__content-column__content"},(0,i.createElement)(k.Icon,{icon:Y.KubioAI,className:"kubio-ai-logo-colored kubio-ai-logo-animated"}),(0,i.createElement)("h1",null,(0,T.__)("Let's create your home page in just a few easy steps:","kubio")),(0,i.createElement)("ol",null,(0,i.createElement)("li",null,(0,T.__)("Provide a short description of the website","kubio")),(0,i.createElement)("li",null,(0,T.__)("Provide contact and social info (optional)","kubio")),(0,i.createElement)("li",null,(0,T.__)("Generate your homepage","kubio")),(0,i.createElement)("li",null,(0,T.__)("Apply finishing touches","kubio"))),(0,i.createElement)(k.Button,{variant:"primary",onClick:n,className:"kubio-ai-button"},(0,T.__)("Let's get started!","kubio")))),(0,i.createElement)(k.Flex,{className:"kubio-ai-welcome-step__bg-column"},(0,i.createElement)("img",{alt:"welcome",src:(0,q.staticAssetURL)("ai-assets/welcome.png")})))))},skipNavigation:!0},{label:(0,T.__)("General information","kubio"),description:(0,T.__)("Tell us a few things about your new website.","kubio"),name:"general-info",component:An},{label:(0,T.__)("Identity & contact","kubio"),description:(0,T.__)("Provide any contact information related to your business.","kubio"),name:"contact-info",component:Dn},{label:(0,T.__)("Page information","kubio"),description:(0,T.__)("Tell us a few things about the page we're about to generate.","kubio"),name:"page-info",component:to},{label:(0,T.__)("Generate with Kubio AI","kubio"),name:"final-step",description:(0,T.__)("Watch how Kubio AI does all the work for you.","kubio"),component:Xn}],oo=e=>{let{onFinish:t,isFrontPage:n=!1,isRegenerate:o=!1,forceGenerateTitle:r=!1,isSetup:a=!1,onCancel:l,checkPageType:s=!0,startWithAIFrontPage:c=!1,isNewPageWizard:u=!1}=e;const[{siteContext:d={},isFrontPage:p,pageContext:h={}},g]=(0,b.useAIData)(),[f]=(0,b.useIsAIConnected)(),[v]=(0,i.useState)(f),_=o?p:n,[y,E]=(0,i.useState)(d),[S,w]=(0,i.useState)({purpose:"general",...o?h:{}}),C=(0,i.useCallback)((e=>{w((t=>(0,q.mergeNoArrays)({},t,e)))}),[]),I=(0,i.useCallback)((e=>{E((t=>(0,q.mergeNoArrays)({},t,e)))}),[]),x=(0,i.useCallback)((()=>{const e={siteContext:y,pageContext:S,pageTitle:S.title,isFrontPage:_,isRegenerate:o};g(e),(0,b.saveAiGeneralSettings)(y),t(e)}),[y,S,_,o,g,t]),R=(0,i.useMemo)((()=>no.map((e=>{const{name:t}=e;switch(t){case"page-info":if(_)return null;break;case"final-step":if(v)return null}return e})).filter(Boolean)),[_,v]),O=(0,i.useCallback)((e=>{const{component:t,name:n}=e;let r=y,d=I;return"page-info"===n&&(r=S,d=C),(0,i.createElement)(t,{key:n,data:r,updateData:d,onFinish:x,onCancel:l,isSetup:a,isRegenerate:o,isFrontPage:_,checkPageType:s,isNewPageWizard:u,startWithAIFrontPage:c})}),[s,_,u,o,a,l,x,S,y,c,C,I]),A=(0,i.useMemo)((()=>!(0,m.isEmpty)(y.short_desc)||o||a?_?"general-info":"page-info":"welcome"),[_,o,a,y.short_desc]),N=(0,i.useMemo)((()=>_?(0,T.__)("Let's do magic","kubio"):(0,T.__)("Generate","kubio")),[_]),M=(0,i.useMemo)((()=>o?(0,T.__)("Close AI wizard 🧙‍♂️","kubio"):(0,T.__)("Skip AI wizard 🧙‍♂️","kubio")),[o]),D=(0,i.useMemo)((()=>{if(a)return(0,T.__)("Configure Kubio AI","kubio");// translators: %s is the type of page e.g. front page, inner page
let e=(0,T.__)("Generate %s","kubio");const t=_?(0,T.__)("front page","kubio"):(0,T.__)("page","kubio");return o&&!r&&(// translators: %s is the type of page e.g. front page, inner page
e=(0,T.__)("Regenerate %s","kubio")),(0,T.sprintf)(e,t)}),[r,_,o,a]);return(0,i.createElement)(k.Modal,{className:"kubio-ai-wizard-modal",overlayClassName:"kubio-ai-welcome-step__close-modal",title:(0,i.createElement)(k.Flex,null,(0,i.createElement)(k.FlexBlock,{className:"kubio-ai-wizard-modal__title"},(0,i.createElement)(k.Icon,{icon:Y.KubioAI,className:"kubio-ai-logo-colored kubio-ai-logo-animated"}),D),(0,i.createElement)(k.FlexItem,null,(0,i.createElement)(k.Button,{onClick:l,icon:De,label:(0,T.__)("Close","kubio")}))),isDismissible:!1},(0,i.createElement)(P.Wizard,{onFinish:x,startStep:A,showDots:!1,initialBackButton:{label:M,onClick:l},finishLabel:N,steps:R,stepRender:O,Footer:null}))},ro={isDismissable:!0,duration:1e4},ao=()=>{const[e]=(0,b.useIsAIConnected)(),[t,n]=(0,i.useState)(!1),o=(0,i.useRef)(m.noop),r=(0,i.useCallback)((e=>{n(!0),o.current=e}),[]),a=(0,i.useCallback)((t=>{e?null==t||t():r(t)}),[e,r]),{createSuccessNotice:l}=(0,s.useKubioNotices)(),c=(0,i.useCallback)((()=>{n(!1),(0,m.isFunction)(o.current)?o.current():l((0,T.__)("Kubio AI connected successfully!","kubio"),ro)}),[l]);return[t&&(0,i.createElement)(oo,{onFinish:c,onCancel:()=>n(!1),isFrontPage:!0,isSetup:!0}),a,e,r]},io=h.STORE_KEY,lo=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})),so=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"})),co=window.wp.viewport,uo=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),mo=window.wp.deprecated;var po=n.n(mo);const ho=window.wp.preferences,go=(e,t)=>({type:"SET_DEFAULT_COMPLEMENTARY_AREA",scope:e,area:t}),fo=(e,t)=>n=>{let{registry:o,dispatch:r}=n;t&&(o.select(ho.store).get(e,"isComplementaryAreaVisible")||o.dispatch(ho.store).set(e,"isComplementaryAreaVisible",!0),r({type:"ENABLE_COMPLEMENTARY_AREA",scope:e,area:t}))},bo=e=>t=>{let{registry:n}=t;n.select(ho.store).get(e,"isComplementaryAreaVisible")&&n.dispatch(ho.store).set(e,"isComplementaryAreaVisible",!1)},vo=(e,t)=>n=>{let{registry:o}=n;if(!t)return;const r=o.select(ho.store).get(e,"pinnedItems");!0!==(null==r?void 0:r[t])&&o.dispatch(ho.store).set(e,"pinnedItems",{...r,[t]:!0})},_o=(e,t)=>n=>{let{registry:o}=n;if(!t)return;const r=o.select(ho.store).get(e,"pinnedItems");o.dispatch(ho.store).set(e,"pinnedItems",{...r,[t]:!1})};function yo(e,t){return function(n){let{registry:o}=n;po()("dispatch( 'core/interface' ).toggleFeature",{since:"6.0",alternative:"dispatch( 'core/preferences' ).toggle"}),o.dispatch(ho.store).toggle(e,t)}}function ko(e,t,n){return function(o){let{registry:r}=o;po()("dispatch( 'core/interface' ).setFeatureValue",{since:"6.0",alternative:"dispatch( 'core/preferences' ).set"}),r.dispatch(ho.store).set(e,t,!!n)}}function Eo(e,t){return function(n){let{registry:o}=n;po()("dispatch( 'core/interface' ).setFeatureDefaults",{since:"6.0",alternative:"dispatch( 'core/preferences' ).setDefaults"}),o.dispatch(ho.store).setDefaults(e,t)}}const So=(0,w.createRegistrySelector)((e=>(t,n)=>{var o;const r=e(ho.store).get(n,"isComplementaryAreaVisible");if(void 0!==r)return r?null==t||null===(o=t.complementaryAreas)||void 0===o?void 0:o[n]:null})),wo=(0,w.createRegistrySelector)((e=>(t,n,o)=>{var r;const a=e(ho.store).get(n,"pinnedItems");return null===(r=null==a?void 0:a[o])||void 0===r||r})),Co=(0,w.createRegistrySelector)((e=>(t,n,o)=>(po()("select( 'core/interface' ).isFeatureActive( scope, featureName )",{since:"6.0",alternative:"select( 'core/preferences' ).get( scope, featureName )"}),!!e(ho.store).get(n,o)))),Io=(0,w.combineReducers)({complementaryAreas:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DEFAULT_COMPLEMENTARY_AREA":{const{scope:n,area:o}=t;return e[n]?e:{...e,[n]:o}}case"ENABLE_COMPLEMENTARY_AREA":{const{scope:n,area:o}=t;return{...e,[n]:o}}}return e}}),xo=(0,w.createReduxStore)("core/interface",{reducer:Io,actions:e,selectors:t});(0,w.register)(xo);const To=window.wp.plugins,Po=(0,To.withPluginContext)(((e,t)=>({icon:t.icon||e.icon,identifier:t.identifier||`${e.name}/${t.name}`}))),Ro=Po((function(e){let{as:t=k.Button,scope:n,identifier:o,icon:r,selectedIcon:a,name:l,...s}=e;const c=t,u=(0,w.useSelect)((e=>e(xo).getActiveComplementaryArea(n)===o),[o]),{enableComplementaryArea:d,disableComplementaryArea:m}=(0,w.useDispatch)(xo);return(0,i.createElement)(c,C({icon:a&&u?a:r,onClick:()=>{u?m(n):d(n,o)}},s))})),Oo=e=>{let{smallScreenTitle:t,children:n,className:o,toggleButtonProps:r}=e;const a=(0,i.createElement)(Ro,C({icon:uo},r));return(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",{className:"components-panel__header interface-complementary-area-header__small"},t&&(0,i.createElement)("span",{className:"interface-complementary-area-header__small-title"},t),a),(0,i.createElement)("div",{className:x()("components-panel__header","interface-complementary-area-header",o),tabIndex:-1},n,a))},Ao=()=>{};function No(e){let{name:t,as:n=k.Button,onClick:o,...r}=e;return(0,i.createElement)(k.Fill,{name:t},(e=>{let{onClick:t}=e;return(0,i.createElement)(n,C({onClick:o||t?function(){(o||Ao)(...arguments),(t||Ao)(...arguments)}:void 0},r))}))}No.Slot=function(e){let{name:t,as:n=k.ButtonGroup,fillProps:o={},bubblesVirtually:r,...a}=e;return(0,i.createElement)(k.Slot,{name:t,bubblesVirtually:r,fillProps:o},(e=>{if(!i.Children.toArray(e).length)return null;const t=[];i.Children.forEach(e,(e=>{let{props:{__unstableExplicitMenuItem:n,__unstableTarget:o}}=e;o&&n&&t.push(o)}));const o=i.Children.map(e,(e=>!e.props.__unstableExplicitMenuItem&&t.includes(e.props.__unstableTarget)?null:e));return(0,i.createElement)(n,a,o)}))};const Mo=No,Do=e=>{let{__unstableExplicitMenuItem:t,__unstableTarget:n,...o}=e;return(0,i.createElement)(k.MenuItem,o)};function zo(e){let{scope:t,target:n,__unstableExplicitMenuItem:o,...r}=e;return(0,i.createElement)(Ro,C({as:e=>(0,i.createElement)(Mo,C({__unstableExplicitMenuItem:o,__unstableTarget:`${t}/${n}`,as:Do,name:`${t}/plugin-more-menu`},e)),role:"menuitemcheckbox",selectedIcon:A,name:n,scope:t},r))}function Bo(e){let{scope:t,...n}=e;return(0,i.createElement)(k.Fill,C({name:`PinnedItems/${t}`},n))}Bo.Slot=function(e){let{scope:t,className:n,...o}=e;return(0,i.createElement)(k.Slot,C({name:`PinnedItems/${t}`},o),(e=>(null==e?void 0:e.length)>0&&(0,i.createElement)("div",{className:x()(n,"interface-pinned-items")},e)))};const Lo=Bo;function Fo(e){let{scope:t,children:n,className:o}=e;return(0,i.createElement)(k.Fill,{name:`ComplementaryArea/${t}`},(0,i.createElement)("div",{className:o},n))}const Go=Po((function(e){let{children:t,className:n,closeLabel:o=(0,T.__)("Close plugin"),identifier:r,header:a,headerClassName:l,icon:s,isPinnable:c=!0,panelClassName:u,scope:d,name:m,smallScreenTitle:p,title:h,toggleShortcut:g,isActiveByDefault:f,showIconLabels:b=!1}=e;const{isActive:v,isPinned:_,activeArea:y,isSmall:E,isLarge:S}=(0,w.useSelect)((e=>{const{getActiveComplementaryArea:t,isItemPinned:n}=e(xo),o=t(d);return{isActive:o===r,isPinned:n(d,r),activeArea:o,isSmall:e(co.store).isViewportMatch("< medium"),isLarge:e(co.store).isViewportMatch("large")}}),[r,d]);!function(e,t,n,o,r){const a=(0,i.useRef)(!1),l=(0,i.useRef)(!1),{enableComplementaryArea:s,disableComplementaryArea:c}=(0,w.useDispatch)(xo);(0,i.useEffect)((()=>{o&&r&&!a.current?(c(e),l.current=!0):l.current&&!r&&a.current?(l.current=!1,s(e,t)):l.current&&n&&n!==t&&(l.current=!1),r!==a.current&&(a.current=r)}),[o,r,e,t,n])}(d,r,y,v,E);const{enableComplementaryArea:C,disableComplementaryArea:I,pinItem:P,unpinItem:R}=(0,w.useDispatch)(xo);return(0,i.useEffect)((()=>{f&&void 0===y&&!E&&C(d,r)}),[y,f,d,r,E]),(0,i.createElement)(i.Fragment,null,c&&(0,i.createElement)(Lo,{scope:d},_&&(0,i.createElement)(Ro,{scope:d,identifier:r,isPressed:v&&(!b||S),"aria-expanded":v,label:h,icon:b?A:s,showTooltip:!b,variant:b?"tertiary":void 0})),m&&c&&(0,i.createElement)(zo,{target:m,scope:d,icon:s},h),v&&(0,i.createElement)(Fo,{className:x()("interface-complementary-area",n),scope:d},(0,i.createElement)(Oo,{className:l,closeLabel:o,onClose:()=>I(d),smallScreenTitle:p,toggleButtonProps:{label:o,shortcut:g,scope:d,identifier:r}},a||(0,i.createElement)(i.Fragment,null,(0,i.createElement)("strong",null,h),c&&(0,i.createElement)(k.Button,{className:"interface-complementary-area__pin-unpin-item",icon:_?lo:so,label:_?(0,T.__)("Unpin from toolbar"):(0,T.__)("Pin to toolbar"),onClick:()=>(_?R:P)(d,r),isPressed:_,"aria-expanded":_}))),(0,i.createElement)(k.Panel,{className:u},t)))}));Go.Slot=function(e){let{scope:t,...n}=e;return(0,i.createElement)(k.Slot,C({name:`ComplementaryArea/${t}`},n))};const Ho=Go,jo=e=>{let{isActive:t}=e;return(0,i.useEffect)((()=>{let e=!1;return document.body.classList.contains("sticky-menu")&&(e=!0,document.body.classList.remove("sticky-menu")),()=>{e&&document.body.classList.add("sticky-menu")}}),[]),(0,i.useEffect)((()=>(t?document.body.classList.add("is-fullscreen-mode"):document.body.classList.remove("is-fullscreen-mode"),()=>{t&&document.body.classList.remove("is-fullscreen-mode")})),[t]),null},Uo=(0,i.forwardRef)((function(e,t){let{footer:n,header:o,sidebar:r,secondarySidebar:a,notices:l,content:s,drawer:c,actions:u,labels:d,className:m,shortcuts:p}=e;const h=(0,k.__unstableUseNavigateRegions)(p);!function(e){(0,i.useEffect)((()=>{const t=document&&document.querySelector(`html:not(.${e})`);if(t)return t.classList.toggle(e),()=>{t.classList.toggle(e)}}),[e])}("interface-interface-skeleton__html-container");const g={/* translators: accessibility text for the nav bar landmark region. */drawer:(0,T.__)("Drawer"),/* translators: accessibility text for the top bar landmark region. */header:(0,T.__)("Header"),/* translators: accessibility text for the content landmark region. */body:(0,T.__)("Content"),/* translators: accessibility text for the secondary sidebar landmark region. */secondarySidebar:(0,T.__)("Block Library"),/* translators: accessibility text for the settings landmark region. */sidebar:(0,T.__)("Settings"),/* translators: accessibility text for the publish landmark region. */actions:(0,T.__)("Publish"),/* translators: accessibility text for the footer landmark region. */footer:(0,T.__)("Footer"),...d};return(0,i.createElement)("div",C({},h,{ref:(0,E.useMergeRefs)([t,h.ref]),className:x()(m,"interface-interface-skeleton",h.className,!!n&&"has-footer")}),!!c&&(0,i.createElement)("div",{className:"interface-interface-skeleton__drawer",role:"region","aria-label":g.drawer,tabIndex:"-1"},c),(0,i.createElement)("div",{className:"interface-interface-skeleton__editor"},!!o&&(0,i.createElement)("div",{className:"interface-interface-skeleton__header",role:"region","aria-label":g.header,tabIndex:"-1"},o),(0,i.createElement)("div",{className:"interface-interface-skeleton__body"},!!a&&(0,i.createElement)("div",{className:"interface-interface-skeleton__secondary-sidebar",role:"region","aria-label":g.secondarySidebar,tabIndex:"-1"},a),!!l&&(0,i.createElement)("div",{className:"interface-interface-skeleton__notices"},l),(0,i.createElement)("div",{className:"interface-interface-skeleton__content",role:"region","aria-label":g.body,tabIndex:"-1"},s),!!r&&(0,i.createElement)("div",{className:"interface-interface-skeleton__sidebar",role:"region","aria-label":g.sidebar,tabIndex:"-1"},r),!!u&&(0,i.createElement)("div",{className:"interface-interface-skeleton__actions",role:"region","aria-label":g.actions,tabIndex:"-1"},u))),!!n&&(0,i.createElement)("div",{className:"interface-interface-skeleton__footer",role:"region","aria-label":g.footer,tabIndex:"-1"},n))})),Wo=window.kubio.blockLibrary,Vo="kubio-dragging-from-inserter--active",Ko=()=>{setTimeout((()=>{const e=top.document.querySelector("body");e.classList.contains(Vo)&&e.classList.remove(Vo)}),10)},$o=()=>{const{setOpenInserter:e}=(0,w.useDispatch)(h.STORE_KEY),{insertionPoint:t,currentSelectedBlock:n}=(0,w.useSelect)((e=>({insertionPoint:e(h.STORE_KEY).getOpenedInserter(),currentSelectedBlock:e("core/block-editor").getSelectedBlockClientId()||null})),[]),o=(0,E.usePrevious)(n),{uiVersion:r}=(0,g.useUIVersion)();(0,i.useEffect)((()=>{2===r&&void 0!==o&&o!==n&&(e(!1),Ko())}),[o,n,r]);const a=(0,f.useBlocksOwnerDocument)(),l=(0,E.useViewportMatch)("medium","<"),c=(0,i.useRef)(),u=(0,i.useCallback)((n=>{!1!==t&&(n.target.closest(".kubio-inserter-button")||n.target.closest(".kubio-sidebar-add-section-button")||n.target.classList.contains("edit-site-header-toolbar__inserter-toggle")||n.target.closest(".edit-site-header-toolbar__inserter-toggle")||n.target.closest(".kubio-inserter-ignore-click-outisde")||e(!1))}),[t,e]);return(0,s.useOnClickOutside)(c,u),(0,i.createElement)("div",{ref:c,className:"edit-site-editor__inserter-panel"},(0,i.createElement)("div",{className:"edit-site-editor__inserter-panel-header"},(0,i.createElement)(k.Button,{icon:De,onClick:()=>e(!1)})),(0,i.createElement)("div",{className:"edit-site-editor__inserter-panel-content"},t&&(0,i.createElement)(y.__experimentalLibrary,{shouldFocusBlock:l,shouldSelectBlock:1===r,rootClientId:null==t?void 0:t.rootClientId,__experimentalInsertionIndex:null==t?void 0:t.insertionIndex,ownerDocument:a,insertionPoint:t,isAppender:null==t?void 0:t.isAppender})))},qo=(0,Wo.getNamesOfBlocks)(),Yo=["core/column","core/post-content","core/template-part",qo.HEADER,qo.FOOTER,qo.SIDEBAR,qo.COLUMN,qo.LOOP_ITEM,qo.SLIDER_CONTENT],Xo=e=>{let{variant:t="secondary",className:n="edit-site-header-toolbar__inserter-toggle"}=e;const{rootClientId:o,isInserterOpen:r}=(0,w.useSelect)((e=>{var t;const{getBlockListSettings:n,getSelectedBlockClientId:o,getBlockRootClientId:r,getBlock:a,getBlockIndex:i}=e("core/block-editor");let l,s=o(),c=n(s);((0,m.isUndefined)(c)||c.templateLock)&&(l=i(s),s=r(s),c=n(s));const u=s&&Yo.includes(null===(t=a(s))||void 0===t?void 0:t.name)&&((0,m.isUndefined)(c)||!c.templateLock);return{isInserterOpen:e(h.STORE_KEY).getOpenedInserter(),rootClientId:u?s:null,insertionIndex:l}}),[]),{setOpenInserter:a}=(0,w.useDispatch)(h.STORE_KEY),{selectBlock:l}=(0,w.useDispatch)("core/block-editor"),s=(0,i.useRef)(),{uiVersion:c}=(0,g.useUIVersion)(),u=(0,i.useCallback)((e=>{s.current.focus(),e.preventDefault(),e.stopPropagation()}),[]),d=(0,i.useCallback)((e=>{const t=!r&&"block-inserter";2!==c?(t?l(null):u(e),a(t,o),top.document.body.classList.remove("kubio-dragging-from-inserter--active")):t?(a("pattern-inserter/content",null),Ko()):(u(e),a(!1,null))}),[r,o]);return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.Button,{ref:s,variant:t,isPressed:r,className:n,onClick:d,icon:r?uo:Pn,onMouseDown:e=>{e.preventDefault()},label:(p=r,p?(0,T.__)("Close","kubio"):(0,T.__)("Add block","kubio"))}));var p};function Zo(e){let{areaIdentifier:t,title:n,backCallback:o=null,children:r,className:a}=e;const{uiVersion:l}=(0,g.useUIVersion)();return(0,i.createElement)(Ho,{scope:`${h.STORE_KEY}/sidebars`,complementaryAreaIdentifier:`${h.STORE_KEY}/sidebar/${t}`,identifier:`${h.STORE_KEY}/sidebar/${t}`,isPinnable:!1,className:x()(a,o?"kubio-sidebar-header-block":""),header:(0,i.createElement)("div",{className:x()("components-panel__header","kubio-sidebar-header","accordion-section-title",o?"kubio-sidebar-header--has-back":""),tabIndex:-1},o&&(0,i.createElement)(k.Button,{className:"kubio-sidebar-header-back-button",onClick:o,showTooltip:!0,label:(0,T.__)("Back","kubio")},(0,i.createElement)(In,{icon:Y.ArrowLeft,className:"kubio-sidebar-header-arrow"})),(0,i.createElement)("strong",null,"function"==typeof n?n():n),2===l&&(0,i.createElement)(Xo,{className:"kubio-inserter-button",variant:"primary"}))},r,er(t))}const Jo=[],Qo=e=>{let{name:t,title:n=null,parent:o="document",render:r,isSubsidebar:a=!1}=e;(0,m.find)(Jo,{name:t})&&console.error(`sidebar ${t} already added`),Jo.push({name:t,parent:o,render:r,title:n||t,isSubsidebar:a})},er=e=>(e=>Jo.filter((t=>{let{parent:n}=t;return n===e})))(e).map((t=>{let{title:n,render:o,name:r,isSubsidebar:a}=t;const l=a?rr:Zo;return(0,i.createElement)(l,{title:n,parentAreaIdentifier:e,areaIdentifier:r,key:`${e}.${r}`},o())})),tr=e=>{let{name:t,title:n,parent:o="document",render:r}=e;return Qo({name:t,title:n,parent:o,render:r,isSubsidebar:!1})},nr=e=>{let{name:t,title:n,parent:o="document",render:r}=e;return Qo({name:t,title:n,parent:o,render:r,isSubsidebar:!0})},or=[];function rr(e){let{title:t,label:n,children:o,areaIdentifier:r,className:a,backCallback:l,parentAreaIdentifier:s,onOpen:c,buttonOnly:u=!1,showArrow:d=!0}=e;const{clearSelectedBlock:p}=(0,w.useDispatch)("core/block-editor"),{openSidebar:g}=(0,w.useDispatch)(h.STORE_KEY),f=()=>{p().then((()=>g(s||"document")))},b=l?()=>l(f):f,v=(0,w.useSelect)((e=>e(h.STORE_KEY).getSubSidebars[r])),{addSubSidebar:_}=(0,w.useDispatch)(h.STORE_KEY);return(0,i.useLayoutEffect)((()=>{v||(_({areaIdentifier:r,sidebar:(0,i.createElement)(k.Animate,{type:"slide-in"},(e=>{let{className:n}=e;return(0,i.createElement)(Zo,{title:t,backCallback:b,areaIdentifier:r,className:`${n} kubio-subsidebar-content`},o,er(r))}))}),or.push(r))}),[v]),(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",{className:"kubio-subsidebar-container"},(0,i.createElement)("div",{className:x()("components-panel__header","interface-complementary-area-header","kubio-subsidebar-title",a),tabIndex:-1},(0,i.createElement)(k.Button,{label:(0,T.__)("Open","kubio"),onClick:()=>(u||p().then((()=>g(r))),void((0,m.isFunction)(c)&&c()))},(0,i.createElement)("strong",null,n||t),d&&(0,i.createElement)(In,{icon:Y.ArrowRight,className:"components-panel__arrow arrow_general_settings"})))),(0,i.createElement)("div",{style:{display:"none"}},o))}const ar=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e=ne(e).toHsl();const o=n||t,r=t;return ne({...e,l:Math.floor(Math.random()*(o-r+1)+r)}).toHexString()},ir=()=>{const{getPalette:e,setPalette:t,getCustomPalette:n}=(0,v.useGlobalDataColors)(),o=e(),r=n(),[a,l]=(0,i.useState)(o),c=(0,i.useCallback)(((e,n)=>{const o=ne(n),r=[o._r,o._g,o._b],i=[...a];i[e]={...i[e],color:r},J()(a[e].color,i[e].color)||(l(i),t(i))}),[l,t,a]),u=(0,i.useCallback)((e=>{l([...e]),t([...e])}),[l,t]),d=e=>()=>{u(e.colors)},{isKubioTheme:m}=(0,w.useSelect)((e=>{var t;const{getSettings:n}=e(h.STORE_KEY);return{isKubioTheme:(null===(t=n())||void 0===t?void 0:t.isKubioTheme)||null}})),g=e=>t=>{c(e,t)},f=(0,i.useCallback)((()=>{const e={slug:"kubio-color-"+(parseInt(a.length)+1),color:[255,255,255]};a.push(e),t(a,!1)}),[t,a]),b=(0,i.useCallback)((e=>{a.splice(e,1),t(a)}),[t,a]),_=(0,s.useDeepMemo)((()=>{const e=[];return p().isEmpty(r)||e.push({label:(0,T.__)("Previous","kubio"),colors:r}),e.concat(Me)}),[r]);return(0,i.createElement)(k.PanelBody,{title:(0,T.__)("Color Palette","kubio"),className:"kubio-color-palette-panel"},(0,i.createElement)(k.BaseControl,null,(0,i.createElement)(k.Flex,{justify:"center",className:""},(0,i.createElement)(k.FlexBlock,null,(0,i.createElement)(k.BaseControl,null,(0,T.__)("Current color scheme","kubio"))),(0,i.createElement)(k.FlexItem,null,(0,i.createElement)("span",{className:"c-components-units-list"},(0,i.createElement)("span",{role:"button",tabIndex:0,key:"palette-add-color",className:"c-components-units-list__item is-selected add-colors-button",onClick:f},(0,T.__)("Add colors","kubio"))))),(0,i.createElement)(k.Flex,{gap:0,className:"kubio-current-colors-palette"},a.map(((e,t)=>{let{color:n,slug:o}=e;const r=`rgb(${n.join(",")})`;return(0,i.createElement)(P.ColorIndicatorPopover,{key:`${o}-${t}`,color:r,onChange:g(t),alpha:!1,showPalette:!1,returnRawValue:!0,disabled:!1,hasButton:t>5,buttonIcon:!1,buttonText:(0,T.__)("Remove color","kubio"),onReset:()=>b(t)})})))),(0,i.createElement)(lr,{onChange:l}),!m&&(0,i.createElement)(P.ControlNotice,{className:"notice-general-settings no-padding",content:(0,T.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")}),(0,i.createElement)(P.SeparatorHorizontalLine,null),(0,i.createElement)(k.BaseControl,{label:(0,T.__)("More Palettes","kubio"),className:"more_palettes_base"},_.map(((e,t)=>(0,i.createElement)(k.BaseControl,{label:e.label,key:t,className:x()("kubio-color-scheme-base-control")},(0,i.createElement)(k.Button,{className:"kubio-color-scheme-selector",onClick:d(e),key:e.label},(0,i.createElement)("div",{className:"kubio-color-scheme-selector__grid"},e.colors.map((e=>{let{slug:t,color:n}=e;return(0,i.createElement)(P.ColorIndicator,{key:t,value:`rgb(${n.join(",")})`})})))))))))},lr=e=>{let{onChange:t=p().noop}=e;const{setPalette:n}=(0,v.useGlobalDataColors)(),{isAICapabilityEnabled:o}=(0,w.useSelect)((e=>{const{isAICapabilityEnabled:t}=e(h.STORE_KEY);return{isAICapabilityEnabled:t()}})),[r,a,l]=ao(),[s]=(0,b.useAIData)(),[c,u]=(0,i.useState)(!1),d=(0,i.useCallback)((async()=>{const{siteContext:e={},pageContext:o={},pageTitle:r=""}=s,{siteMood:a="neutral"}=e;try{u(!0);let i=await(0,b.generateColorScheme)({pageContext:o,siteContext:e,pageTitle:r,mood:a});i=(0,v.normalizeColorPalette)([...i,ar(i[1],98,100),ar(i[0],5,10)]),n(i),t(i)}catch(e){X.Log.error("Error determining site colors",e)}finally{u(!1)}}),[s,n]);return(0,i.createElement)(i.Fragment,null,o&&(0,i.createElement)(i.Fragment,null,r,(0,i.createElement)(k.BaseControl,{className:"kubio-generate-color-scheme-button"},(0,i.createElement)(k.Button,{icon:Y.KubioAI,className:x()("kubio-ai-button"),isBusy:c,onClick:l?d:a},c?(0,T.__)("Generating color scheme…","kubio"):(0,T.__)("Generate color scheme","kubio")))))},sr=e=>{let{areaIdentifier:t}=e;return(0,w.useSelect)((e=>e(h.STORE_KEY).isEditorSidebarOpened(t)),[])&&(0,i.createElement)(ir,null)};function cr(e){let{parentAreaIdentifier:t}=e;return(0,i.createElement)(rr,{title:"Color Scheme",parentAreaIdentifier:t,areaIdentifier:`${t}/color-scheme`},(0,i.createElement)(sr,{areaIdentifier:`${t}/color-scheme`}))}const ur=h.colorPalettes.map(((e,t)=>({...e,label:(0,T.sprintf)((0,T.__)("Preset %s","kubio"),t+1)}))),dr=e=>{const{clearSelectedBlock:t}=(0,w.useDispatch)("core/block-editor"),{openSidebar:n}=(0,w.useDispatch)(h.STORE_KEY)||{};return(0,i.createElement)(P.KubioPanelBody,{title:(0,i.createElement)(i.Fragment,null,(0,i.createElement)("span",null,(0,T.__)("Color Scheme Presets","kubio")),(0,i.createElement)(k.Tooltip,{text:(0,T.__)("Advanced Settings","kubio")},(0,i.createElement)("div",{className:"kubio-style-preset-list__cog"},(0,i.createElement)(k.Icon,{icon:O,onClick:()=>{t().then((()=>{n("document/general-settings/color-scheme")}))}})))),className:"kubio-style-preset-panel",initialOpen:!0},(0,i.createElement)(mr,e))},mr=(0,i.memo)((()=>{const{onHandleClick:e,activePaletteValue:t,customPalette:n,currentPaletteIsCustom:o}=pr(),{activePalette:r,restOfPalettes:a}=(0,s.useDeepMemo)((()=>{const e=[];return!p().isEmpty(n)&&e.push({label:(0,T.__)("Previous","kubio"),colors:n}),{activePalette:{label:(0,T.__)("Current","kubio"),colors:t},restOfPalettes:e.concat(ur)}}),[o,t,n]);return(0,i.createElement)("div",{className:"kubio-style-presets-color-scheme__container"},(0,i.createElement)($,{scrollIntoView:!1},(0,i.createElement)(hr,{palette:r,index:0,onHandleClick:e,activePaletteValue:t})),(0,i.createElement)(lr,null),(0,i.createElement)(P.SeparatorHorizontalLine,null),(0,i.createElement)($,{scrollIntoView:!1},a.map(((t,n)=>(0,i.createElement)(hr,{key:n,palette:t,index:n,onHandleClick:e,activePaletteValue:null})))))})),pr=()=>{const{getPalette:e,setPalette:t,getCustomPalette:n}=(0,v.useGlobalDataColors)(),o=e(),r=n(),a=(0,i.useMemo)((()=>{const e=!h.colorPalettes.find((e=>(0,q.getColorPalettesAreEqual)(e.colors,o))),t=(0,q.getColorPalettesAreEqual)(r,o);return e&&!t}),[o,r]);return{mergedPalettes:(0,s.useDeepMemo)((()=>{const e=[];if(!p().isEmpty(r)&&e.push({label:(0,T.__)("Previous","kubio"),colors:r}),a){const t=(0,T.__)("Current","kubio");e.unshift({label:t,colors:o})}return e.concat(ur)}),[a,o,r]),onHandleClick:e=>{t([...e.colors])},activePaletteValue:o,customPalette:r,currentPaletteIsCustom:a}},hr=e=>{let{palette:t,index:n,onHandleClick:o,activePaletteValue:r}=e;const a=(0,q.getColorPalettesAreEqual)(t.colors,r);return(0,i.createElement)($.Item,{className:"kubio-style-preset-list__colors",key:n,isActive:a,onClick:()=>o(t)},!!t.label&&(0,i.createElement)("div",{className:"kubio-style-preset-list__item__title"},t.label),(0,i.createElement)("div",{className:"kubio-style-preset-list__colors__item"},t.colors.map((e=>{let{slug:t,color:n}=e;return(0,i.createElement)(P.ColorIndicator,{key:t,value:`rgb(${n.join(",")})`})}))),a&&(0,i.createElement)("div",{className:"kubio-style-preset-list__check"},(0,i.createElement)(k.Icon,{icon:A})))},gr=e=>{let{className:t,children:n,...o}=e;const r=(0,i.useRef)();return(e=>{let{ref:t}=e;(0,i.useEffect)((()=>{if(!t.current)return;const e=new ResizeObserver((e=>{for(const l of e){var n,o,r,a;null===(n=t.current)||void 0===n||null===(o=n.classList)||void 0===o||null===(r=(a=o).toggle)||void 0===r||r.call(a,"kubio-has-scrollbar",!!(i=t.current)&&i.scrollHeight>i.clientHeight)}var i}));return e.observe(t.current),()=>{e.disconnect()}}),[t.current])})({ref:r}),(0,i.createElement)("div",C({ref:r,className:x()("kubio-editor-ai-post-generate-interface__wizard__list",t)},o),n)},fr=()=>{const e=(0,f.useGetGlobalSessionProp)("aiFrontPageHeroImageVariantsData",{})||{},{currentValue:t,variants:n,clientId:o,blockName:r}=e,a=t,l=n,{wizardContextData:s,onWizardDataChange:c}=xr(),{currentHeroImage:u=a}=s||{},[d,m]=(0,i.useState)(u),{getBlockWithImageDataHelper:p}=br(),h=(0,i.useRef)(),g=e=>{m(e),h.current||(h.current=p(o));const t=h.current;if(t){switch(r){case"kubio/hero":t.setStyle("background.image.0.source.url",e,{descendants:"outer",media:"desktop"});break;case"kubio/image":t.setAttribute("url",e)}c({currentHeroImage:e})}},v=(0,i.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="";if(""===t)return!1;try{if(e.has(t))g(e.get(t)),n=e.get(t);else{const o=await(0,b.aiSearchedImageSave)({selectedImage:t});""!==o&&(g(o.url),e.set(t,o.url),n=o.url)}}catch(e){console.log(e)}return[t,n]}),[]);return{activeImage:d,onChangeImage:g,initialImg:a,restOfImages:l,saveImageOnNext:v}},br=()=>{const e=(0,s.useColibriDataHooks)();return{getBlockWithImageDataHelper:t=>(0,s.getColibriData)({clientId:t,autoSave:!0,loadColibriData:!0},e)}},vr=e=>{let{src:t,activeImage:n,setActiveImage:o}=e;const r=t===n;return(0,i.createElement)($.Item,{isActive:r,onClick:()=>o(t)},(0,i.createElement)("img",{src:t,alt:""}),r&&(0,i.createElement)("div",{className:"kubio-style-preset-list__check"},(0,i.createElement)(k.Icon,{icon:A})))},_r=()=>{const{clearSelectedBlock:e}=(0,w.useDispatch)("core/block-editor"),{openSidebar:t}=(0,w.useDispatch)(h.STORE_KEY)||{};return(0,i.createElement)(P.KubioPanelBody,{title:(0,i.createElement)(i.Fragment,null,(0,i.createElement)("span",null,(0,T.__)("Typography Presets","kubio")),(0,i.createElement)(k.Tooltip,{text:(0,T.__)("Advanced Settings","kubio")},(0,i.createElement)("div",{className:"kubio-style-preset-list__cog"},(0,i.createElement)(k.Icon,{icon:O,onClick:()=>{e().then((()=>{t("document/general-settings/typography")}))}})))),className:"kubio-style-preset-panel",initialOpen:!0},(0,i.createElement)(yr,null))},yr=()=>{const{mergedPresets:e,bodyTypographyHolders:t,onSelectPreset:n}=kr();return(0,i.createElement)($,null,e.map(((e,o)=>(0,i.createElement)(Er,{key:o,preset:e,index:o,bodyTypographyHolders:t,onSelect:n}))))},kr=()=>{const{globalStyle:e}=(0,v.useGlobalDataStyle)(),t=e.getStyle("typography.holders",{},{styledComponent:"body"}),n=(0,i.useMemo)((()=>{const e={};return p().each(t,((t,n)=>{"input"!==n&&p().set(e,n,p().pick(t,["family","weight"]))})),e}),[t]),o=(0,i.useRef)(n),r=(0,i.useRef)(!1),a=(0,i.useMemo)((()=>{const e=o.current,t=!K.find((t=>{let n=!0;return p().each(t,((t,o)=>{t.family!==p().get(e,[o,"family"])&&(n=!1)})),n}));return t?[{isCustom:!0,...e}].concat(K):K}),[]);return{mergedPresets:a,bodyTypographyHolders:t,onSelectPreset:t=>{r.current=!0,e.setStyle("typography.holders",p().cloneDeep(t),{styledComponent:"body"})}}},Er=e=>{let{preset:t,index:n,bodyTypographyHolders:o,onSelect:r}=e;const a=t.h1.family,l={fontFamily:a},s=t.p.family,c={fontFamily:s},u=p().get(o,"h1.family"),d=p().get(o,"p.family"),m=(0,i.useRef)(),h=(0,i.useRef)(),g=(0,i.useCallback)((()=>{var e;null!==(e=m.current)&&void 0!==e&&e.rel&&(m.current.rel="stylesheet")}),[]),f=(0,i.useCallback)((()=>{var e;null!==(e=h.current)&&void 0!==e&&e.rel&&(h.current.rel="stylesheet")}),[]),b=u===a&&d===s;return(0,i.createElement)($.Item,{key:n,isActive:b,onClick:()=>{r(t)}},(0,i.createElement)("link",{href:`https://fonts.googleapis.com/css?family=${a}&display=swap`,rel:"preload",as:"style",ref:m,onLoad:g}),(0,i.createElement)("link",{href:`https://fonts.googleapis.com/css?family=${s}&display=swap`,rel:"preload",as:"style",ref:h,onLoad:f}),(0,i.createElement)("div",{className:"kubio-style-preset-list__typography"},t.isCustom&&(0,i.createElement)("div",{className:"kubio-style-preset-list__typography__custom"},(0,T.__)("Custom","kubio")),(0,i.createElement)("span",{className:"kubio-style-preset-list__typography__heading-container"},(0,i.createElement)("h2",{style:l},a),b&&(0,i.createElement)("div",{className:"kubio-style-preset-list__check"},(0,i.createElement)(k.Icon,{icon:A}))),(0,i.createElement)("p",{style:c},s)))},Sr=[{Component:()=>{const{activeImage:e,onChangeImage:t,initialImg:n,restOfImages:o}=fr(),{onWizardDataChange:r}=xr();return(0,i.useEffect)((()=>{r({currentSelectedImage:e})}),[e]),(0,i.createElement)(gr,{className:"kubio-editor-ai-post-generate-interface__wizard__image-step"},(0,i.createElement)("h2",null,(0,T.__)("Hero Image","kubio")),(0,i.createElement)("p",null,(0,T.__)("Are you happy with the hero image selected by Kubio AI?","kubio")),(0,i.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__preset-list__first-item"},(0,i.createElement)($,{scrollIntoView:!1},(0,i.createElement)(vr,{src:n,activeImage:e,setActiveImage:t}))),(0,i.createElement)("p",{className:"kubio-editor-ai-post-generate-interface__wizard__list__after-first"},(0,T.__)("Below are a few alternatives. You can also change this later.","kubio")),(0,i.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__image-step__image-list"},(0,i.createElement)($,{scrollIntoView:!1},o.map(((n,o)=>(0,i.createElement)(vr,{src:n,key:o,activeImage:e,setActiveImage:t}))))))},nextButtonLabel:(0,T.__)("Continue","kubio")},{Component:()=>{const{activePaletteWithData:e,restOfPalettes:t,onHandleClick:n,activePaletteValue:o}=(()=>{const{mergedPalettes:e,onHandleClick:t,activePaletteValue:n}=pr(),{wizardContextData:o,onWizardDataChange:r}=xr(),[a]=(0,b.useAIData)(),l=a.siteContext.siteMood||"neutral",{activePaletteWithData:s,restOfPalettes:c}=(0,i.useMemo)((()=>{let{activePaletteWithData:t=null,restOfPalettes:a=[]}=o;if(t)return{activePaletteWithData:t,restOfPalettes:a};e.forEach((e=>{(0,q.getColorPalettesAreEqual)(e.colors,n)?t={...e,mood:l,label:(0,T.__)("Preset 1","kubio")}:a.push(e)})),a=a.filter((e=>e.mood===l)).map(((e,t)=>({...e,label:(0,T.sprintf)((0,T.__)("Preset %s","kubio"),t+2)})));const i={activePaletteWithData:t,restOfPalettes:a};return r(i),i}),[n,e,l,r,o]);return{activePaletteWithData:s,restOfPalettes:c,onHandleClick:t,activePaletteValue:n}})();return(0,i.createElement)(gr,null,(0,i.createElement)("h2",null,(0,T.__)("Color Scheme","kubio")),(0,i.createElement)("p",null,(0,T.__)("Are you happy with the color scheme selected by Kubio AI?","kubio")),(0,i.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__preset-list__first-item"},(0,i.createElement)($,{scrollIntoView:!1},(0,i.createElement)(hr,{palette:e,index:0,onHandleClick:n,activePaletteValue:o}))),(0,i.createElement)("p",{className:"kubio-editor-ai-post-generate-interface__wizard__list__after-first"},(0,T.__)("Below are a few alternatives. You can also change this later.","kubio")),(0,i.createElement)($,{scrollIntoView:!1},t.map(((e,t)=>(0,i.createElement)(hr,{key:t,palette:e,index:t+1,onHandleClick:n,activePaletteValue:o})))))},nextButtonLabel:(0,T.__)("Continue","kubio")},{Component:()=>{const{activePresetWithData:e,restOfPresets:t,onSelectPreset:n,bodyTypographyHolders:o}=(()=>{const{mergedPresets:e,bodyTypographyHolders:t,onSelectPreset:n}=kr(),{wizardContextData:o,onWizardDataChange:r}=xr(),{activePresetWithData:a,restOfPresets:l}=(0,i.useMemo)((()=>{let{activePresetWithData:n=null,restOfPresets:a=[]}=o;if(n)return{activePresetWithData:n,restOfPresets:a};const i=p().get(t,"h1.family"),l=p().get(t,"p.family");e.forEach((e=>{const t=e.h1.family,o=e.p.family;i===t&&l===o?n=e:a.push(e)}));const s={activePresetWithData:n,restOfPresets:a};return r(s),s}),[]);return{activePresetWithData:a,restOfPresets:l,onSelectPreset:n,bodyTypographyHolders:t}})();return(0,i.createElement)(gr,null,(0,i.createElement)("h2",null,(0,T.__)("Typography","kubio")),(0,i.createElement)("p",null,(0,T.__)("Are you happy with the family fonts selected by Kubio AI?","kubio")),(0,i.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__preset-list__first-item"},(0,i.createElement)($,{scrollIntoView:!1},(0,i.createElement)(Er,{preset:e,index:0,bodyTypographyHolders:o,onSelect:n}))),(0,i.createElement)("p",{className:"kubio-editor-ai-post-generate-interface__wizard__list__after-first"},(0,T.__)("Below are a few alternatives. You can also change this later.","kubio")),(0,i.createElement)($,{scrollIntoView:!1},t.map(((e,t)=>(0,i.createElement)(Er,{key:t,preset:e,index:t+1,bodyTypographyHolders:o,onSelect:n})))))},nextButtonLabel:(0,T.__)("Finish","kubio")}],wr=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M20 11.2H6.8l3.7-3.7-1-1L3.9 12l5.6 5.5 1-1-3.7-3.7H20z"})),Cr=(0,i.createContext)({}),Ir=e=>{let{onFinish:t,overlayClicked:n,setOverlayClicked:o}=e;const[r,a]=(0,i.useState)(0),[l,s]=(0,i.useState)({}),[c,u]=(0,i.useState)(new Map),{saveImageOnNext:d}=fr(),m=(0,f.useGetGlobalSessionProp)("aiFrontPageHeroImageVariantsData",null),{clearSelectedBlock:h}=(0,w.useDispatch)("core/block-editor"),{openSidebar:g,setIsNavigationPanelOpened:b}=(0,w.useDispatch)("kubio/edit-site")||{};(0,i.useEffect)((()=>{h().then((()=>{null==g||g("document")})),null==b||b(!1)}),[h,g,b]);const v=(0,i.useRef)(),_=(0,i.useCallback)((e=>{const t=p().merge({},l,e);s(t)}),[l]),y=(0,i.useMemo)((()=>p().isEmpty(m)?Sr.slice(1):Sr),[m]),E=y[r],{nextButtonLabel:S,Component:C}=E;(0,i.useEffect)((()=>{r===y.length-1&&document.body.classList.toggle("kubio-ai-will-show-front-page-wizard",!1)}),[r,y]);const I=(0,T.sprintf)((0,T.__)("Step %s of %s","kubio"),r+1,y.length),x=(0,i.useMemo)((()=>({wizardContextData:l,onWizardDataChange:_})),[l,_]);return(0,i.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard"},(0,i.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__header"},(0,i.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__header__container"},(0,i.createElement)(In,{className:"kubio-ai-logo-animated kubio-ai-logo-colored",icon:Y.KubioAI}),(0,i.createElement)("span",null,(0,T.__)("Finishing Touches","kubio"))),(0,i.createElement)("p",{className:"kubio-editor-ai-post-generate-interface__wizard__header__current-step-header"},I)),(0,i.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__content"},(0,i.createElement)(Cr.Provider,{value:x},(0,i.createElement)(C,null))),(0,i.createElement)("div",{ref:v,className:"kubio-editor-ai-post-generate-interface__wizard__footer"},(0,i.createElement)(k.Button,{icon:wr,onClick:()=>{0!==r&&a(r-1)},disabled:0===r}),(0,i.createElement)(k.Button,{onClick:()=>{if(!p().isEmpty(m)){const e=d(c,null==l?void 0:l.currentSelectedImage);e&&u(c.set(e[0],e[1]))}r===y.length-1?(a(0),null==t||t()):a(r+1)},className:"kubio-ai-button"},S),n&&(0,i.createElement)(k.Popover,{anchorRef:v,className:"kubio-options-popover kubio-editor-ai-post-generate-interface__wizard__overlay-popup",position:"top",offset:10,animate:!0,noArrow:!0,onClose:()=>{n&&o(!1)}},(0,i.createElement)(k.Button,{icon:De,onClick:()=>o(!1)}),(0,i.createElement)("img",{src:(0,q.staticAssetURL)("ai-assets/info-icon.svg")}),(0,i.createElement)("h4",null,(0,T.__)("You can edit the content of the website after you finish the style customization setup.","kubio")))))},xr=()=>(0,i.useContext)(Cr),Tr=e=>{let{children:t}=e;const n=(0,f.useGetGlobalSessionProp)("showAiPostGenerateInterface",!1),o=(0,f.useSetGlobalSessionProp)("showAiPostGenerateInterface"),[r,a]=(0,i.useState)(!1),l=(0,i.useMemo)((()=>{var e,t,n,o;return null===(e=document.querySelector(".kubio-iframe"))||void 0===e||null===(t=e.contentDocument)||void 0===t||null===(n=t.body)||void 0===n||null===(o=n.querySelector)||void 0===o?void 0:o.call(n,".block-editor-writing-flow > .edit-site-block-editor__block-list")}),[n]);return(0,i.createElement)("div",{className:x()("kubio-editor-ai-post-generate-interface",{"kubio-editor-ai-post-generate-interface--show-wizard":n})},(0,i.createElement)(Pr,{showAiPostGenerateInterface:n,onHideSidebar:()=>{o(!1)},overlayClicked:r,setOverlayClicked:a}),(0,i.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__content position-relative"},t,n&&l&&(0,i.createPortal)((0,i.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__content__overlay",onClick:()=>a(!0)}),l)))},Pr=e=>{let{showAiPostGenerateInterface:t,onHideSidebar:n,...o}=e;return(0,i.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__sidebar"},t&&(0,i.createElement)(Ir,C({onFinish:n},o)))},Rr=window.wp.editor,Or=window.wp.keyboardShortcuts;function Ar(){return(0,i.createElement)(i.Fragment,null)}const Nr=window.kubio.pro,Mr=window.wp.blocks;function Dr(e){let{children:t}=e;const{clearSelectedBlock:n}=(0,w.useDispatch)("core/block-editor"),{openSidebar:o}=(0,w.useDispatch)(h.STORE_KEY),{blockType:r,isMultiSelection:a}=(0,w.useSelect)((e=>{const{getSelectedBlockClientId:t,getBlockName:n,hasMultiSelection:o}=e("core/block-editor"),r=t(),a=r&&n(r);return{blockType:r&&(0,Mr.getBlockType)(a),isMultiSelection:o()}}));return(0,i.createElement)(Zo,{areaIdentifier:"block-inspector",title:()=>(0,i.createElement)("span",{className:"kubio-header-active-section"},(0,i.createElement)(y.BlockIcon,{icon:null==r?void 0:r.icon}),(0,i.createElement)("span",{className:"kubio-header-active-section page-title"},a?(0,T.__)("Multiple selection","kubio"):null==r?void 0:r.title)),backCallback:()=>{o("document"),n()}},!a&&t,a&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",{className:"kubio-multiple-selection"},(0,i.createElement)("p",null,(0,T.__)("Sidebar controls are not availble on multiple blocks selection","kubio")))))}function zr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Br(e,t){if(e){if("string"==typeof e)return zr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zr(e,t):void 0}}function Lr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a,i,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=a.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return l}}(e,t)||Br(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fr(e){return Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fr(e)}function Gr(e){var t=function(e,t){if("object"!==Fr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==Fr(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Fr(t)?t:String(t)}function Hr(e,t,n){return(t=Gr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&o.push.apply(o,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach((function(t){Hr(e,t,n[t])}))}return e}function Ur(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Gr(o.key),o)}}function Vr(e,t,n){return t&&Wr(e.prototype,t),n&&Wr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $r(e,t){if(t&&("object"===Fr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Kr(e)}function qr(e){return qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qr(e)}function Yr(e,t){return Yr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yr(e,t)}function Xr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yr(e,t)}const Zr=window.ReactDOM;var Jr=n(1143),Qr=n.n(Jr);function ea(e){return function(e){if(Array.isArray(e))return zr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Br(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ta=function(){function e(){Ur(this,e),Hr(this,"refs",{})}return Vr(e,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){var n=this.getIndex(e,t);-1!==n&&this.refs[e].splice(n,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var e=this;return this.refs[this.active.collection].find((function(t){return t.node.sortableInfo.index==e.active.index}))}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[e].sort(na)}}]),e}();function na(e,t){return e.node.sortableInfo.index-t.node.sortableInfo.index}function oa(e,t){return Object.keys(e).reduce((function(n,o){return-1===t.indexOf(o)&&(n[o]=e[o]),n}),{})}var ra={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},aa=function(){if("undefined"==typeof window||"undefined"==typeof document)return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];return"ms"===t?"ms":t&&t.length?t[0].toUpperCase()+t.substr(1):""}();function ia(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}function la(e,t){e.style["".concat(aa,"Transform")]=null==t?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function sa(e,t){e.style["".concat(aa,"TransitionDuration")]=null==t?"":"".concat(t,"ms")}function ca(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function ua(e,t,n){return Math.max(e,Math.min(n,t))}function da(e){return"px"===e.substr(-2)?parseFloat(e):0}function ma(e,t){var n=t.displayName||t.name;return n?"".concat(e,"(").concat(n,")"):e}function pa(e,t){var n=e.getBoundingClientRect();return{top:n.top+t.top,left:n.left+t.left}}function ha(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function ga(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{left:0,top:0};if(e){var o={left:n.left+e.offsetLeft,top:n.top+e.offsetTop};return e.parentNode===t?o:ga(e.parentNode,t,o)}}function fa(e){var t=e.lockOffset,n=e.width,o=e.height,r=t,a=t,i="px";if("string"==typeof t){var l=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);Qr()(null!==l,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t),r=parseFloat(t),a=parseFloat(t),i=l[1]}return Qr()(isFinite(r)&&isFinite(a),"lockOffset value should be a finite. Given %s",t),"%"===i&&(r=r*n/100,a=a*o/100),{x:r,y:a}}function ba(e){return e instanceof HTMLElement?function(e){var t=window.getComputedStyle(e),n=/(auto|scroll)/;return["overflow","overflowX","overflowY"].find((function(e){return n.test(t[e])}))}(e)?e:ba(e.parentNode):null}var va={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function _a(e){return null!=e.sortableHandle}var ya=function(){function e(t,n){Ur(this,e),this.container=t,this.onScrollCallback=n}return Vr(e,[{key:"clear",value:function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(e){var t=this,n=e.translate,o=e.minTranslate,r=e.maxTranslate,a=e.width,i=e.height,l={x:0,y:0},s={x:1,y:1},c=this.container,u=c.scrollTop,d=c.scrollLeft,m=c.scrollHeight,p=c.scrollWidth,h=0===u,g=m-u-c.clientHeight==0,f=0===d,b=p-d-c.clientWidth==0;n.y>=r.y-i/2&&!g?(l.y=1,s.y=10*Math.abs((r.y-i/2-n.y)/i)):n.x>=r.x-a/2&&!b?(l.x=1,s.x=10*Math.abs((r.x-a/2-n.x)/a)):n.y<=o.y+i/2&&!h?(l.y=-1,s.y=10*Math.abs((n.y-i/2-o.y)/i)):n.x<=o.x+a/2&&!f&&(l.x=-1,s.x=10*Math.abs((n.x-a/2-o.x)/a)),this.interval&&(this.clear(),this.isAutoScrolling=!1),0===l.x&&0===l.y||(this.interval=setInterval((function(){t.isAutoScrolling=!0;var e={left:s.x*l.x,top:s.y*l.y};t.container.scrollTop+=e.top,t.container.scrollLeft+=e.left,t.onScrollCallback(e)}),5))}}]),e}(),ka={axis:sn().oneOf(["x","y","xy"]),contentWindow:sn().any,disableAutoscroll:sn().bool,distance:sn().number,getContainer:sn().func,getHelperDimensions:sn().func,helperClass:sn().string,helperContainer:sn().oneOfType([sn().func,"undefined"==typeof HTMLElement?sn().any:sn().instanceOf(HTMLElement)]),hideSortableGhost:sn().bool,keyboardSortingTransitionDuration:sn().number,lockAxis:sn().string,lockOffset:sn().oneOfType([sn().number,sn().string,sn().arrayOf(sn().oneOfType([sn().number,sn().string]))]),lockToContainerEdges:sn().bool,onSortEnd:sn().func,onSortMove:sn().func,onSortOver:sn().func,onSortStart:sn().func,pressDelay:sn().number,pressThreshold:sn().number,keyCodes:sn().shape({lift:sn().arrayOf(sn().number),drop:sn().arrayOf(sn().number),cancel:sn().arrayOf(sn().number),up:sn().arrayOf(sn().number),down:sn().arrayOf(sn().number)}),shouldCancelStart:sn().func,transitionDuration:sn().number,updateBeforeSortStart:sn().func,useDragHandle:sn().bool,useWindowAsScrollContainer:sn().bool},Ea={lift:[32],drop:[32],cancel:[27],up:[38,37],down:[40,39]},Sa={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:function(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}},hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:Ea,shouldCancelStart:function(e){return-1!==[va.Input,va.Textarea,va.Select,va.Option,va.Button].indexOf(e.target.tagName)||!!ca(e.target,(function(e){return"true"===e.contentEditable}))},transitionDuration:300,useWindowAsScrollContainer:!1},wa=Object.keys(ka),Ca={index:sn().number.isRequired,collection:sn().oneOfType([sn().number,sn().string]),disabled:sn().bool},Ia=Object.keys(Ca),xa=n(989),Ta=n.n(xa);const Pa=(0,i.createContext)({clientId:null,setContainer:m.noop}),Ra=()=>(0,i.useContext)(Pa),Oa=(0,Wo.getNamesOfBlocks)(),Aa=[Oa.SECTION,Oa.HERO,Oa.NAVIGATION].map((e=>`[data-type="${e}"]`)).join(","),Na=e=>{let{children:t}=e;const[n,o]=(0,i.useState)(null),r=(0,f.useBlocksOwnerDocument)(),a=(0,E.useThrottle)((0,i.useCallback)((e=>{var t,n;const r=null==e||null===(t=e.target)||void 0===t||null===(n=t.closest)||void 0===n?void 0:n.call(t,Aa),a=(null==r?void 0:r.getAttribute("data-block"))||null;o(a)}),[]),300);(0,i.useEffect)((()=>{if(r)return r.addEventListener("mousemove",a),()=>r.removeEventListener("mousemove",a)}),[r]);const l=(0,i.useMemo)((()=>({clientId:n})),[n]);return(0,i.createElement)(Pa.Provider,{value:l},t)},Ma=(0,i.createElement)(R.SVG,{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M8 7h2V5H8v2zm0 6h2v-2H8v2zm0 6h2v-2H8v2zm6-14v2h2V5h-2zm0 8h2v-2h-2v2zm0 6h2v-2h-2v2z"})),Da=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(){return Ur(this,n),$r(this,qr(n).apply(this,arguments))}return Xr(n,t),Vr(n,[{key:"componentDidMount",value:function(){(0,Zr.findDOMNode)(this).sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return Qr()(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var t=o.withRef?"wrappedInstance":null;return(0,cn.createElement)(e,C({ref:t},this.props))}}]),n}(cn.Component),Hr(t,"displayName",ma("sortableHandle",e)),n}((()=>(0,i.createElement)(k.Tooltip,{text:(0,T.__)("Move","kubio")},(0,i.createElement)("div",{className:"d-flex"},(0,i.createElement)(In,{icon:Ma,className:"draggable-item"}))))),za=window.kubio.menuData,Ba=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M5 5v1.5h14V5H5zm0 7.8h14v-1.5H5v1.5zM5 19h14v-1.5H5V19z"})),La=(0,i.createContext)(null),Fa=e=>{let{children:t}=e;const n=(0,za.usePrimaryMenuBlockEditor)();return(0,i.createElement)(La.Provider,{value:n},t)},Ga=(0,i.createElement)(R.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,i.createElement)(R.Path,{d:"M12 4c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 14.5c-3.6 0-6.5-2.9-6.5-6.5S8.4 5.5 12 5.5s6.5 2.9 6.5 6.5-2.9 6.5-6.5 6.5zM9 16l4.5-3L15 8.4l-4.5 3L9 16z"})),Ha=e=>{let{containerRef:t,afterMenuCreation:n,onClose:o}=e;const[r,a]=(0,i.useState)(""),[l,s]=(0,i.useState)(!1);return(0,i.createElement)(k.Popover,{className:"kubio-options-popover kubio-create-menu-popover",anchorRef:t,position:"middle right",onClose:o},(0,i.createElement)(k.Placeholder,{className:"wp-block-navigation-placeholder kubio-menu-placeholder",icon:Ga,label:(0,T.__)("Kubio Menu","kubio")},(0,i.createElement)("div",null,(0,i.createElement)("div",{className:"kubio-create-menu-popover-description"},(0,i.createElement)("span",null,(0,T.__)("There is no header menu created. Please create a new one","kubio"))),(0,i.createElement)("div",{className:"wp-block-navigation-placeholder__actions"},(0,i.createElement)(k.Flex,null,(0,i.createElement)(k.FlexBlock,null,(0,i.createElement)(k.BaseControl,{className:"kubio-create-menu-popover-input-control"},(0,i.createElement)(k.BaseControl.VisualLabel,null,(0,T.__)("Menu name","kubio")),(0,i.createElement)(k.__experimentalInputControl,{value:r,onChange:a,placeholder:(0,T.__)("Please set a name","kubio")})),(0,i.createElement)(k.Button,{isSecondary:!0,className:"wp-block-navigation-placeholder__button",disabled:0===r.length,isBusy:l,onClick:async()=>{s(!0),await(0,za.createPrimaryMenu)(r),s(!1),n()}},(0,T.__)("Create new Menu","kubio"))))))))},ja=e=>{let{dataHelper:t,containerRef:n}=e;const[o,r]=(0,i.useState)(!1),[a,l]=(0,i.useState)(!1),{exists:s,items:c,setItems:u,hasResolved:d}=(0,i.useContext)(La),m=(0,w.useSelect)((e=>{var t,n;const{getPage:o,getEntity:r}=e(h.STORE_KEY),a=(null===(t=o())||void 0===t?void 0:t.link)||null,i=(null===(n=r())||void 0===n?void 0:n.path)||null;return(a||i||"").replace(/\/$/,"")}),[]);(0,i.useEffect)((()=>{a&&s&&d&&(u([{...(0,za.generateItemInitialData)(),label:null==t?void 0:t.getAttribute("attrs.name"),url:`${m}/${f}`}],!0),l(!1))}),[s,a,u,d]);const p=(0,i.useCallback)((()=>{if(b.length){const e=b.map((e=>{let{id:t}=e;return t})),t=g.filter((t=>-1===e.indexOf(t.id)));u([...t],!0)}else{const e=Math.max.apply(null,g.filter((e=>{let{parent:t}=e;return 0===t})).map((e=>{let{order:t}=e;return t})).filter(Boolean))+1;u([...g,{...(0,za.generateItemInitialData)(),label:null==t?void 0:t.getAttribute("attrs.name"),url:`${m}/${f}`,order:e}],!0)}}),[u,c,s,m]),g=Array.isArray(c)?c:[],f="#"+(null==t?void 0:t.getAttribute("anchor")),b=(0,i.useMemo)((()=>{if(!s)return[];const e=g.filter((e=>{let{url:t}=e;return t===`${m}/${f}`||t===`${m}${f}`}));return e.length?e:[]}),[s,c,m]),v=(0,i.useCallback)((()=>{s?p():r(!0)}),[s,p]),_=b.length>0;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.Tooltip,{text:_?(0,T.__)("Remove from menu","kubio"):(0,T.__)("Add to menu","kubio"),position:"top left"},(0,i.createElement)("div",{className:"d-flex"},(0,i.createElement)(k.Button,{isSmall:!0,onClick:()=>v(),icon:Ba,className:x()(["icon-menu",{active:_}])}))),o&&(0,i.createElement)(Ha,{containerRef:null==n?void 0:n.current,afterMenuCreation:()=>{l(!0),r(!1)},onClose:()=>r(!1)}))},Ua=e=>{let{onRemove:t,onSelect:n,dataHelper:o}=e;const{selectBlock:r,toggleBlockHighlight:a}=(0,w.useDispatch)("core/block-editor"),l=o.getAttribute("anchor"),c=o.getAttribute("attrs.name"),[u,d]=(0,i.useState)(!1),[h,g]=(0,i.useState)(l),[b,v]=(0,i.useState)(c),_=(0,f.useBlocksOwnerDocument)();(0,i.useEffect)((()=>{h!==l&&g(l),b!==c&&v(c)}),[l,c]);const y=(0,i.useRef)(),E=(0,i.useRef)(),S=p().debounce((e=>{e=e||h;let t=Ta()(e);t=(0,q.getUniqueSlug)(t,_),t&&(t!==h&&g(t),t!==l&&o.setAttribute("anchor",t))}),100),{clientId:C}=Ra(),I=(0,i.useCallback)((()=>{u&&d(!1)}),[u,d]),x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.noop;const n=null==e?void 0:e.clientId,o=(0,q.getPreviewElementByModelId)(n,_);o&&(0,q.scrollIntoView)(o,{behavior:"smooth",onScrollEnd:t}),a(n,!0)};return(0,s.useOnClickOutside)(y,I),(0,i.createElement)("div",{ref:E,className:"page-section-item"},(0,i.createElement)("div",{className:(e=>{const t=["kubio-section-list-item"];return e&&t.push("list-item-full-height"),C===o.clientId&&t.push("hovered"),t.join(" ")})(u)},(0,i.createElement)("div",{className:"align-items-center drag-icon"},(0,i.createElement)(Da,null)),(0,i.createElement)("div",{className:"input-container",ref:y},(0,i.createElement)("div",{className:"input-drag-text"},(0,i.createElement)("input",{type:"text",value:b,className:"input-name",onChange:e=>{const t=e.target.value;v(t)},onFocus:e=>{x(o),u||d(!0)},onBlur:()=>{b!==c&&(o.setAttribute("attrs.name",b),S(b))}}),(0,i.createElement)("span",{className:"input-drag-text__size"},b)),u&&(0,i.createElement)("div",{className:"id-div"},"ID:#",(0,i.createElement)("input",{type:"text",value:h,className:"input-name input-id",onFocus:()=>{x(o)},onChange:e=>{g(e.target.value)},onBlur:()=>{h===l&&b===c||S()}}))),(0,i.createElement)("div",{onClick:()=>{r(null==o?void 0:o.clientId)},className:"page-section-item__select-area",role:"button",tabIndex:0}),(0,i.createElement)("div",{className:"align-items-center"},(0,i.createElement)(k.Button,{isSmall:!0,icon:Y.DeleteItemIcon,className:"icon-close",onClick:t,showTooltip:!0,tooltipPosition:"top left",label:(0,T.__)("Remove","kubio")}),(0,i.createElement)(ja,{dataHelper:o,containerRef:E}),(0,i.createElement)(k.Button,{isSmall:!0,icon:O,className:"icon-settings",onClick:()=>x(o,n),showTooltip:!0,tooltipPosition:"top left",label:(0,T.__)("Settings","kubio")}))))},Wa="kubio/edit-site",Va=e=>{let{name:t="",area:n}=e;const o=(0,i.useRef)(),{setOpenInserter:r}=(0,w.useDispatch)(Wa),a=(0,w.useSelect)((e=>{e(Wa).getOpenedInserter()})),l=Za[n],s=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;const t=`pattern-inserter/${p().get(ei,e,ei[Xa.CONTENT])}`;a!==t&&await r(!1,null),r(t,n)},c=null==l?void 0:l.toLowerCase();return(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",{ref:o,className:["kubio-full-section","kubio-full-section--placeholder"].join(" ")},(0,i.createElement)("div",{className:"kubio-subsidebar-container"},(0,i.createElement)("div",{className:x()("components-panel__header","interface-complementary-area-header","kubio-subsidebar-title","kubio-subsidebar-title-header"),tabIndex:-1},(0,i.createElement)("div",{className:"kubio-sidebar-title-text"},l),(0,i.createElement)("div",{className:"dummy-column"}),(0,i.createElement)("div",{className:"section-list-header-buttons-holder"},(0,i.createElement)(k.Button,{isSmall:!0,icon:Pn,className:"section-icon-container",onClick:function(){s(Xa.CONTENT)},showTooltip:!0,tooltipPosition:"top left",label:(0,T.__)("Add block/section","kubio")})))),(0,i.createElement)(P.ControlNotice,{content:(0,T.sprintf)(// translators:  %1$s , %1$s - template names
(0,T.__)("The current page uses the theme %1$s. Use the button below to replace it with a Kubio %2$s","kubio"),c,c)}),(0,i.createElement)(k.Button,{isPrimary:!0,onClick:()=>s(),className:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return n===Xa.HEADER?["btn-primary","header-button"].concat(t).join(" "):["btn-primary"].concat(t).join(" ")}(t,["kubio-button-add-blocks"])},(0,i.createElement)("span",{className:x()("kubio-header-section-main-button",{"header-button":t===Xa.HEADER})},(()=>{switch(n){case Xa.HEADER:return(0,T.__)("Choose header design","kubio");case Xa.FOOTER:return(0,T.__)("Choose footer design","kubio");case Xa.SIDEBAR:return(0,T.__)("Add section","kubio");default:return(0,T.__)("Add predesigned section","kubio")}})()))))};function Ka(e){const{templateParts:t,selectBlock:n,removeBlocks:o,reorderBlocks:r}=e,{blockTypes:a,getBlocks:l,isPage:s}=(0,w.useSelect)((e=>{const{getPage:t}=e(h.STORE_KEY),n=(0,w.select)("core").getEditedEntityRecord("root","site");let o;t&&(o=t());const r=p().get(o,"context",{}),{postType:a,postId:i}=r,l="page"===(null==n?void 0:n.show_on_front)&&parseInt(null==n?void 0:n.page_for_posts)===parseInt(i);return{isPage:"page"===a&&!l,blockTypes:e("core/blocks").getBlockTypes(),getBlocks:e("core/block-editor").getBlocks}})),[c]=(0,f.useGlobalSessionProp)("currentPageHasBlocksContent",!0,[]),u=(0,i.useMemo)((()=>{const e={selectBlock:n,removeBlocks:o,reorderBlocks:r,innerBlocks:l(),templatePart:{},blockTypes:a,label:(0,T.__)("Content","kubio")};return c&&(0,i.createElement)(ai,e)}),[t,c]);return(0,i.createElement)(i.Fragment,null,s&&(0,i.createElement)(Va,{area:"header"}),u,s&&(0,i.createElement)(Va,{area:"footer"}))}function $a(e){const{templateParts:t,selectBlock:n,removeBlocks:o,reorderBlocks:r}=e,{blockTypes:a}=(0,w.useSelect)((e=>({blockTypes:e("core/blocks").getBlockTypes(),getBlocks:e("core/block-editor").getBlocks})));return(0,i.createElement)(i.Fragment,null,t.map(((e,t)=>{const{name:l,clientId:s}=e,c={selectBlock:n,removeBlocks:o,reorderBlocks:r,name:l,templatePart:e,templatePartClientId:s,blockTypes:a};return(0,i.createElement)(ai,C({key:"template-sections-"+t},c))})))}function qa(e){let{templateParts:t,...n}=e;const o=(0,w.useSelect)((e=>{const{currentPageHasFSETemplate:t}=e(h.STORE_KEY);return t()}),[]),r=(0,w.useSelect)((e=>e("core").getEntityRecords("postType","wp_template_part",{per_page:-1})||[]),[]),a=(0,s.useDeepMemo)((()=>t.map((e=>{const t=r.find((t=>{var n;return(null==t?void 0:t.slug)===(null==e||null===(n=e.attributes)||void 0===n?void 0:n.slug)})),n=null==t?void 0:t.area;return{...e,area:n}}))),[t,r]),l=(0,s.useDeepMemo)((()=>p().orderBy(a,(e=>p().findIndex(Ja,(t=>t===p().get(e,"area",Xa.CONTENT)))))),[a]);let c=null;return c=o?$a:Ka,(0,i.createElement)(c,C({},n,{templateParts:l}))}const Ya=e=>{let{onRemove:t,onSelect:n,item:o,dataHelper:r}=e;const{blockTypes:a}=(0,w.useSelect)((e=>({blockTypes:e("core/blocks").getBlockTypes()}))),{selectBlock:l}=(0,w.useDispatch)("core/block-editor"),{clientId:s}=Ra(),c=x()("kubio-section-list-item",{hovered:s===o.clientId}),u=(0,i.useRef)();return(0,i.useEffect)((()=>{s===o.clientId&&u.current.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}),[s]),(0,i.createElement)("div",{ref:u,className:"page-section-item"},(0,i.createElement)("div",{className:c},(0,i.createElement)("div",{className:"align-items-center"},(0,i.createElement)(Da,null)),(0,i.createElement)("div",{className:"input-container"},(0,i.createElement)("span",{className:"input-name"},(0,i.createElement)("span",{className:"input-name-text"},(e=>{const t=(0,m.find)(a,{name:e});return(null==t?void 0:t.title)||e})(o.name)))),(0,i.createElement)("div",{onClick:()=>{l(null==r?void 0:r.clientId)},className:"page-section-item__select-area",role:"button",tabIndex:"0"}),(0,i.createElement)("div",{className:"align-items-center"},(0,i.createElement)(k.Button,{isSmall:!0,icon:Y.DeleteItemIcon,className:"icon-close",onClick:t,showTooltip:!0,tooltipPosition:"top left",label:(0,T.__)("Remove","kubio")}),(0,i.createElement)(k.Button,{isSmall:!0,icon:O,className:"icon-settings",onClick:n,showTooltip:!0,tooltipPosition:"top left",label:(0,T.__)("Settings","kubio")}))))},Xa={HEADER:"header",FOOTER:"footer",SIDEBAR:"sidebar",CONTENT:"content"},Za={[Xa.HEADER]:(0,T.__)("Header","kubio"),[Xa.FOOTER]:(0,T.__)("Footer","kubio"),[Xa.SIDEBAR]:(0,T.__)("Sidebar","kubio"),[Xa.CONTENT]:(0,T.__)("Content","kubio")},Ja=[Xa.HEADER,Xa.CONTENT,Xa.SIDEBAR,Xa.FOOTER],Qa=["kubio/header","kubio/footer","core/post-content","core/template-part"],ei={[Xa.HEADER]:"header",[Xa.FOOTER]:"footer",[Xa.SIDEBAR]:"sidebar",[Xa.CONTENT]:"post-content"},ti=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(){return Ur(this,n),$r(this,qr(n).apply(this,arguments))}return Xr(n,t),Vr(n,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(e){this.node&&(e.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),e.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),e.collection!==this.props.collection&&(this.unregister(e.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var e=this.props,t=e.collection,n=e.disabled,o=e.index,r=(0,Zr.findDOMNode)(this);r.sortableInfo={collection:t,disabled:n,index:o,manager:this.context.manager},this.node=r,this.ref={node:r},this.context.manager.add(t,this.ref)}},{key:"unregister",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.collection;this.context.manager.remove(e,this.ref)}},{key:"getWrappedInstance",value:function(){return Qr()(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var t=o.withRef?"wrappedInstance":null;return(0,cn.createElement)(e,C({ref:t},oa(this.props,Ia)))}}]),n}(cn.Component),Hr(t,"displayName",ma("sortableElement",e)),Hr(t,"contextTypes",{manager:sn().object.isRequired}),Hr(t,"propTypes",Ca),Hr(t,"defaultProps",{collection:0}),n}((e=>{let{item:t,onRemove:n=m.noop,onSelect:o=m.noop,dataHelper:r}=e;return(0,q.isGutentagPrefixed)(t.name)?(0,i.createElement)(i.Fragment,null,(0,i.createElement)(Ua,{onRemove:()=>n(t),onSelect:()=>o(t),item:t,dataHelper:r})):(0,i.createElement)(Ya,{onRemove:()=>n(t),onSelect:()=>o(t),item:t,dataHelper:r})})),ni=e=>{var t;const n=(0,i.useMemo)((()=>oi()),[]);return(0,i.createElement)(n,C({clientId:null===(t=e.item)||void 0===t?void 0:t.clientId},e))},oi=()=>(0,s.WithKubioDataHelperProp)(ti),ri=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(e){var t;return Ur(this,n),Hr(Kr(Kr(t=$r(this,qr(n).call(this,e)))),"state",{}),Hr(Kr(Kr(t)),"handleStart",(function(e){var n=t.props,o=n.distance,r=n.shouldCancelStart;if(2!==e.button&&!r(e)){t.touched=!0,t.position=ha(e);var a=ca(e.target,(function(e){return null!=e.sortableInfo}));if(a&&a.sortableInfo&&t.nodeIsChild(a)&&!t.state.sorting){var i=t.props.useDragHandle,l=a.sortableInfo,s=l.index,c=l.collection;if(l.disabled)return;if(i&&!ca(e.target,_a))return;t.manager.active={collection:c,index:s},function(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}(e)||e.target.tagName!==va.Anchor||e.preventDefault(),o||(0===t.props.pressDelay?t.handlePress(e):t.pressTimer=setTimeout((function(){return t.handlePress(e)}),t.props.pressDelay))}}})),Hr(Kr(Kr(t)),"nodeIsChild",(function(e){return e.sortableInfo.manager===t.manager})),Hr(Kr(Kr(t)),"handleMove",(function(e){var n=t.props,o=n.distance,r=n.pressThreshold;if(!t.state.sorting&&t.touched&&!t._awaitingUpdateBeforeSortStart){var a=ha(e),i={x:t.position.x-a.x,y:t.position.y-a.y},l=Math.abs(i.x)+Math.abs(i.y);t.delta=i,o||r&&!(l>=r)?o&&l>=o&&t.manager.isActive()&&t.handlePress(e):(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0))}})),Hr(Kr(Kr(t)),"handleEnd",(function(){t.touched=!1,t.cancel()})),Hr(Kr(Kr(t)),"cancel",(function(){var e=t.props.distance;t.state.sorting||(e||clearTimeout(t.pressTimer),t.manager.active=null)})),Hr(Kr(Kr(t)),"handlePress",(function(e){try{var n=t.manager.getActive(),o=function(){if(n){var o=function(){var n,o,r,c,g,f,b=m.sortableInfo.index,v=(n=m,{bottom:da((o=window.getComputedStyle(n)).marginBottom),left:da(o.marginLeft),right:da(o.marginRight),top:da(o.marginTop)}),_=function(e){var t=window.getComputedStyle(e);return"grid"===t.display?{x:da(t.gridColumnGap),y:da(t.gridRowGap)}:{x:0,y:0}}(t.container),y=t.scrollContainer.getBoundingClientRect(),k=i({index:b,node:m,collection:p});if(t.node=m,t.margin=v,t.gridGap=_,t.width=k.width,t.height=k.height,t.marginOffset={x:t.margin.left+t.margin.right+t.gridGap.x,y:Math.max(t.margin.top,t.margin.bottom,t.gridGap.y)},t.boundingClientRect=m.getBoundingClientRect(),t.containerBoundingRect=y,t.index=b,t.newIndex=b,t.axis={x:a.indexOf("x")>=0,y:a.indexOf("y")>=0},t.offsetEdge=ga(m,t.container),t.initialOffset=ha(h?jr({},e,{pageX:t.boundingClientRect.left,pageY:t.boundingClientRect.top}):e),t.initialScroll={left:t.scrollContainer.scrollLeft,top:t.scrollContainer.scrollTop},t.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},t.helper=t.helperContainer.appendChild((c="input, textarea, select, canvas, [contenteditable]",g=(r=m).querySelectorAll(c),ea((f=r.cloneNode(!0)).querySelectorAll(c)).forEach((function(e,t){"file"!==e.type&&(e.value=g[t].value),"radio"===e.type&&e.name&&(e.name="__sortableClone__".concat(e.name)),e.tagName===va.Canvas&&g[t].width>0&&g[t].height>0&&e.getContext("2d").drawImage(g[t],0,0)})),f)),ia(t.helper,{boxSizing:"border-box",height:"".concat(t.height,"px"),left:"".concat(t.boundingClientRect.left-v.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(t.boundingClientRect.top-v.top,"px"),width:"".concat(t.width,"px")}),h&&t.helper.focus(),s&&(t.sortableGhost=m,ia(m,{opacity:0,visibility:"hidden"})),t.minTranslate={},t.maxTranslate={},h){var E=d?{top:0,left:0,width:t.contentWindow.innerWidth,height:t.contentWindow.innerHeight}:t.containerBoundingRect,S=E.top,w=E.left,C=E.width,I=S+E.height,x=w+C;t.axis.x&&(t.minTranslate.x=w-t.boundingClientRect.left,t.maxTranslate.x=x-(t.boundingClientRect.left+t.width)),t.axis.y&&(t.minTranslate.y=S-t.boundingClientRect.top,t.maxTranslate.y=I-(t.boundingClientRect.top+t.height))}else t.axis.x&&(t.minTranslate.x=(d?0:y.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(d?t.contentWindow.innerWidth:y.left+y.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(d?0:y.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(d?t.contentWindow.innerHeight:y.top+y.height)-t.boundingClientRect.top-t.height/2);l&&l.split(" ").forEach((function(e){return t.helper.classList.add(e)})),t.listenerNode=e.touches?m:t.contentWindow,h?(t.listenerNode.addEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.addEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.addEventListener("keydown",t.handleKeyDown)):(ra.move.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortMove,!1)})),ra.end.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortEnd,!1)}))),t.setState({sorting:!0,sortingIndex:b}),u&&u({node:m,index:b,collection:p,isKeySorting:h,nodes:t.manager.getOrderedRefs(),helper:t.helper},e),h&&t.keyMove(0)},r=t.props,a=r.axis,i=r.getHelperDimensions,l=r.helperClass,s=r.hideSortableGhost,c=r.updateBeforeSortStart,u=r.onSortStart,d=r.useWindowAsScrollContainer,m=n.node,p=n.collection,h=t.manager.isKeySorting,g=function(){if("function"==typeof c){t._awaitingUpdateBeforeSortStart=!0;var n=function(t,n){try{var o=(r=m.sortableInfo.index,Promise.resolve(c({collection:p,index:r,node:m,isKeySorting:h},e)).then((function(){})))}catch(e){return n(!0,e)}var r;return o&&o.then?o.then(n.bind(null,!1),n.bind(null,!0)):n(!1,value)}(0,(function(e,n){if(t._awaitingUpdateBeforeSortStart=!1,e)throw n;return n}));if(n&&n.then)return n.then((function(){}))}}();return g&&g.then?g.then(o):o()}}();return Promise.resolve(o&&o.then?o.then((function(){})):void 0)}catch(e){return Promise.reject(e)}})),Hr(Kr(Kr(t)),"handleSortMove",(function(e){var n=t.props.onSortMove;"function"==typeof e.preventDefault&&e.preventDefault(),t.updateHelperPosition(e),t.animateNodes(),t.autoscroll(),n&&n(e)})),Hr(Kr(Kr(t)),"handleSortEnd",(function(e){var n=t.props,o=n.hideSortableGhost,r=n.onSortEnd,a=t.manager,i=a.active.collection,l=a.isKeySorting,s=t.manager.getOrderedRefs();t.listenerNode&&(l?(t.listenerNode.removeEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("keydown",t.handleKeyDown)):(ra.move.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortMove)})),ra.end.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortEnd)})))),t.helper.parentNode.removeChild(t.helper),o&&t.sortableGhost&&ia(t.sortableGhost,{opacity:"",visibility:""});for(var c=0,u=s.length;c<u;c++){var d=s[c],m=d.node;d.edgeOffset=null,d.boundingClientRect=null,la(m,null),sa(m,null),d.translate=null}t.autoScroller.clear(),t.manager.active=null,t.manager.isKeySorting=!1,t.setState({sorting:!1,sortingIndex:null}),"function"==typeof r&&r({collection:i,newIndex:t.newIndex,oldIndex:t.index,isKeySorting:l,nodes:s},e),t.touched=!1})),Hr(Kr(Kr(t)),"autoscroll",(function(){var e=t.props.disableAutoscroll,n=t.manager.isKeySorting;if(e)t.autoScroller.clear();else{if(n){var o=jr({},t.translate),r=0,a=0;return t.axis.x&&(o.x=Math.min(t.maxTranslate.x,Math.max(t.minTranslate.x,t.translate.x)),r=t.translate.x-o.x),t.axis.y&&(o.y=Math.min(t.maxTranslate.y,Math.max(t.minTranslate.y,t.translate.y)),a=t.translate.y-o.y),t.translate=o,la(t.helper,t.translate),t.scrollContainer.scrollLeft+=r,void(t.scrollContainer.scrollTop+=a)}t.autoScroller.update({height:t.height,maxTranslate:t.maxTranslate,minTranslate:t.minTranslate,translate:t.translate,width:t.width})}})),Hr(Kr(Kr(t)),"onAutoScroll",(function(e){t.translate.x+=e.left,t.translate.y+=e.top,t.animateNodes()})),Hr(Kr(Kr(t)),"handleKeyDown",(function(e){var n=e.keyCode,o=t.props,r=o.shouldCancelStart,a=o.keyCodes,i=jr({},Ea,void 0===a?{}:a);t.manager.active&&!t.manager.isKeySorting||!(t.manager.active||i.lift.includes(n)&&!r(e)&&t.isValidSortingTarget(e))||(e.stopPropagation(),e.preventDefault(),i.lift.includes(n)&&!t.manager.active?t.keyLift(e):i.drop.includes(n)&&t.manager.active?t.keyDrop(e):i.cancel.includes(n)?(t.newIndex=t.manager.active.index,t.keyDrop(e)):i.up.includes(n)?t.keyMove(-1):i.down.includes(n)&&t.keyMove(1))})),Hr(Kr(Kr(t)),"keyLift",(function(e){var n=e.target,o=ca(n,(function(e){return null!=e.sortableInfo})).sortableInfo,r=o.index,a=o.collection;t.initialFocusedNode=n,t.manager.isKeySorting=!0,t.manager.active={index:r,collection:a},t.handlePress(e)})),Hr(Kr(Kr(t)),"keyMove",(function(e){var n=t.manager.getOrderedRefs(),o=n[n.length-1].node.sortableInfo.index,r=t.newIndex+e,a=t.newIndex;if(!(r<0||r>o)){t.prevIndex=a,t.newIndex=r;var i=function(e,t,n){return e<n&&e>t?e-1:e>n&&e<t?e+1:e}(t.newIndex,t.prevIndex,t.index),l=n.find((function(e){return e.node.sortableInfo.index===i})),s=l.node,c=t.containerScrollDelta,u=l.boundingClientRect||pa(s,c),d=l.translate||{x:0,y:0},m=u.top+d.y-c.top,p=u.left+d.x-c.left,h=a<r,g=h&&t.axis.x?s.offsetWidth-t.width:0,f=h&&t.axis.y?s.offsetHeight-t.height:0;t.handleSortMove({pageX:p+g,pageY:m+f,ignoreTransition:0===e})}})),Hr(Kr(Kr(t)),"keyDrop",(function(e){t.handleSortEnd(e),t.initialFocusedNode&&t.initialFocusedNode.focus()})),Hr(Kr(Kr(t)),"handleKeyEnd",(function(e){t.manager.active&&t.keyDrop(e)})),Hr(Kr(Kr(t)),"isValidSortingTarget",(function(e){var n=t.props.useDragHandle,o=e.target,r=ca(o,(function(e){return null!=e.sortableInfo}));return r&&r.sortableInfo&&!r.sortableInfo.disabled&&(n?_a(o):o.sortableInfo)})),function(e){Qr()(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}(e),t.manager=new ta,t.events={end:t.handleEnd,move:t.handleMove,start:t.handleStart},t}return Xr(n,t),Vr(n,[{key:"getChildContext",value:function(){return{manager:this.manager}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.useWindowAsScrollContainer,n=this.getContainer();Promise.resolve(n).then((function(n){e.container=n,e.document=e.container.ownerDocument||document;var o=e.props.contentWindow||e.document.defaultView||window;e.contentWindow="function"==typeof o?o():o,e.scrollContainer=t?e.document.scrollingElement||e.document.documentElement:ba(e.container)||e.container,e.autoScroller=new ya(e.scrollContainer,e.onAutoScroll),Object.keys(e.events).forEach((function(t){return ra[t].forEach((function(n){return e.container.addEventListener(n,e.events[t],!1)}))})),e.container.addEventListener("keydown",e.handleKeyDown)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach((function(t){return ra[t].forEach((function(n){return e.container.removeEventListener(n,e.events[t])}))})),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(e){var t=this.props,n=t.lockAxis,o=t.lockOffset,r=t.lockToContainerEdges,a=t.transitionDuration,i=t.keyboardSortingTransitionDuration,l=void 0===i?a:i,s=this.manager.isKeySorting,c=e.ignoreTransition,u=ha(e),d={x:u.x-this.initialOffset.x,y:u.y-this.initialOffset.y};if(d.y-=window.pageYOffset-this.initialWindowScroll.top,d.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=d,r){var m=function(e){var t=e.height,n=e.width,o=e.lockOffset,r=Array.isArray(o)?o:[o,o];Qr()(2===r.length,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",o);var a=Lr(r,2),i=a[0],l=a[1];return[fa({height:t,lockOffset:i,width:n}),fa({height:t,lockOffset:l,width:n})]}({height:this.height,lockOffset:o,width:this.width}),p=Lr(m,2),h=p[0],g=p[1],f={x:this.width/2-h.x,y:this.height/2-h.y},b={x:this.width/2-g.x,y:this.height/2-g.y};d.x=ua(this.minTranslate.x+f.x,this.maxTranslate.x-b.x,d.x),d.y=ua(this.minTranslate.y+f.y,this.maxTranslate.y-b.y,d.y)}"x"===n?d.y=0:"y"===n&&(d.x=0),s&&l&&!c&&sa(this.helper,l),la(this.helper,d)}},{key:"animateNodes",value:function(){var e=this.props,t=e.transitionDuration,n=e.hideSortableGhost,o=e.onSortOver,r=this.containerScrollDelta,a=this.windowScrollDelta,i=this.manager.getOrderedRefs(),l=this.offsetEdge.left+this.translate.x+r.left,s=this.offsetEdge.top+this.translate.y+r.top,c=this.manager.isKeySorting,u=this.newIndex;this.newIndex=null;for(var d=0,m=i.length;d<m;d++){var p=i[d].node,h=p.sortableInfo.index,g=p.offsetWidth,f=p.offsetHeight,b={height:this.height>f?f/2:this.height/2,width:this.width>g?g/2:this.width/2},v=c&&h>this.index&&h<=u,_=c&&h<this.index&&h>=u,y={x:0,y:0},k=i[d].edgeOffset;k||(k=ga(p,this.container),i[d].edgeOffset=k,c&&(i[d].boundingClientRect=pa(p,r)));var E=d<i.length-1&&i[d+1],S=d>0&&i[d-1];E&&!E.edgeOffset&&(E.edgeOffset=ga(E.node,this.container),c&&(E.boundingClientRect=pa(E.node,r))),h!==this.index?(t&&sa(p,t),this.axis.x?this.axis.y?_||h<this.index&&(l+a.left-b.width<=k.left&&s+a.top<=k.top+b.height||s+a.top+b.height<=k.top)?(y.x=this.width+this.marginOffset.x,k.left+y.x>this.containerBoundingRect.width-b.width&&E&&(y.x=E.edgeOffset.left-k.left,y.y=E.edgeOffset.top-k.top),null===this.newIndex&&(this.newIndex=h)):(v||h>this.index&&(l+a.left+b.width>=k.left&&s+a.top+b.height>=k.top||s+a.top+b.height>=k.top+f))&&(y.x=-(this.width+this.marginOffset.x),k.left+y.x<this.containerBoundingRect.left+b.width&&S&&(y.x=S.edgeOffset.left-k.left,y.y=S.edgeOffset.top-k.top),this.newIndex=h):v||h>this.index&&l+a.left+b.width>=k.left?(y.x=-(this.width+this.marginOffset.x),this.newIndex=h):(_||h<this.index&&l+a.left<=k.left+b.width)&&(y.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=h)):this.axis.y&&(v||h>this.index&&s+a.top+b.height>=k.top?(y.y=-(this.height+this.marginOffset.y),this.newIndex=h):(_||h<this.index&&s+a.top<=k.top+b.height)&&(y.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=h))),la(p,y),i[d].translate=y):n&&(this.sortableGhost=p,ia(p,{opacity:0,visibility:"hidden"}))}null==this.newIndex&&(this.newIndex=this.index),c&&(this.newIndex=u);var w=c?this.prevIndex:u;o&&this.newIndex!==w&&o({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:w,isKeySorting:c,nodes:i,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return Qr()(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.refs.wrappedInstance}},{key:"getContainer",value:function(){var e=this.props.getContainer;return"function"!=typeof e?(0,Zr.findDOMNode)(this):e(o.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var t=o.withRef?"wrappedInstance":null;return(0,cn.createElement)(e,C({ref:t},oa(this.props,wa)))}},{key:"helperContainer",get:function(){var e=this.props.helperContainer;return"function"==typeof e?e():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){return this.props.useWindowAsScrollContainer?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),n}(cn.Component),Hr(t,"displayName",ma("sortableList",e)),Hr(t,"defaultProps",Sa),Hr(t,"propTypes",ka),Hr(t,"childContextTypes",{manager:sn().object.isRequired}),n}((e=>{let{items:t,onRemove:n,onSelect:o}=e;return(0,i.createElement)("div",null,(0,i.createElement)(w.AsyncModeProvider,{value:!0},null==t?void 0:t.map(((e,t)=>(0,i.createElement)(ni,{key:e.clientId,item:e,onRemove:n,onSelect:o,index:t})))))})),ai=e=>{let{name:t="",reorderBlocks:n,templatePart:o={},blockTypes:r,removeBlocks:a,selectBlock:l,templatePartClientId:s,label:c}=e;const d=null==o?void 0:o.area,f=ei[Xa.CONTENT],b=p().get(ei,d,f),v=(0,i.useRef)(),_=(0,i.useRef)(),y=(0,i.useRef)(),[E,S]=(0,i.useState)(!1),{setOpenInserter:C}=(0,w.useDispatch)(h.STORE_KEY),I=b,{isUnlocked:R}=(0,P.useTemplatePartLock)(I),[A,N]=(0,i.useState)(!1),{postType:M,postId:D}=(0,w.useSelect)((e=>{var t,n;return(null===(t=e(h.STORE_KEY))||void 0===t||null===(n=t.getPage())||void 0===n?void 0:n.context)||{}}),[]),z=(0,w.useSelect)((e=>e(h.STORE_KEY).getKubioEditorModeIsSimple()),[]),{uiVersion:B}=(0,g.useUIVersion)(),L=(0,w.useSelect)((e=>e("core/block-editor").getBlocks(s)),[s]);if("core/post-content"===t&&(0,u.applyFilters)("kubio.showRenderedPostContent","page"!==M,M,D))return(0,i.createElement)(i.Fragment,null);const F=t.includes("kubio")&&["header","footer","sidebar"].includes(I),G=["kubio-full-section"];return F&&(R?G.push("kubio-full-section--unlocked"):G.push("kubio-full-section--locked")),(0,i.createElement)("div",{ref:v,className:G.join(" ")},F&&(0,i.createElement)("div",{ref:_,tabIndex:-1,role:"button",className:x()("kubio-full-section-overlay",{"kubio-full-section-overlay--show-popup":E})}),(0,i.createElement)("div",{className:"kubio-subsidebar-container"},(0,i.createElement)("div",{className:x()("components-panel__header","interface-complementary-area-header","kubio-subsidebar-title","kubio-subsidebar-title-header"),tabIndex:-1},(0,i.createElement)("div",{className:"kubio-sidebar-title-text"},c||(()=>{let e=Za[d];return e||(e=(()=>{const e=t,n=(0,m.find)(r,{name:e});return(null==n?void 0:n.title)||e})()),e})()),(0,i.createElement)("div",{className:"dummy-column"}),(0,i.createElement)("div",{ref:y,className:"section-list-header-buttons-holder"},F&&!R&&(0,i.createElement)(P.KubioPopup,{position:2===B?"middle right":"top left",className:"kubio-options-popover kubio-template-controls-popover",buttonRef:_,anchorRef:2===B?y:v,selectorToIgnoreOnClickOutside:".h-template-wizard__modal",onOpen:()=>S(!0),onClose:()=>S(!1)},(0,i.createElement)(P.TemplateLockModal,{title:(0,T.__)("Choose editing mode","kubio")},(0,i.createElement)(P.TemplateLockControls,{isWizardShown:A,setIsWizardShown:N,templatePart:I}))),!z&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.Button,{isSmall:!0,icon:O,className:"section-icon-container",onClick:()=>{l(o.clientId)},showTooltip:!0,tooltipPosition:"top left",label:(0,T.__)("Settings","kubio")}),(0,i.createElement)(k.Button,{isSmall:!0,icon:Pn,className:"section-icon-container",onClick:function(){C(`pattern-inserter/${b}-blocks`,o.clientId)},showTooltip:!0,tooltipPosition:"top left",label:(0,T.__)("Add block/section","kubio")}))))),(0,i.createElement)(ri,{helperClass:"kubio-list-item-is-sorting",helperContainer:()=>v.current,onSortEnd:e=>{let{oldIndex:t,newIndex:o}=e;n(L,t,o)},lockAxis:"y",useDragHandle:!0,items:L,onRemove:e=>{a([e.clientId],!1)},onSelect:e=>{l(e.clientId)}}),b&&(0,i.createElement)(k.Button,{isPrimary:!0,onClick:()=>async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;const t=p().get(ei,e,f);C(`pattern-inserter/${t}`,o.clientId)}(),className:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return d===Xa.HEADER?["btn-primary","header-button"].concat(t).join(" "):["btn-primary"].concat(t).join(" ")}(t,["kubio-button-add-blocks","kubio-sidebar-add-section-button"])},(0,i.createElement)("span",{className:"kubio-header-section-main-button"},(()=>{switch(d){case Xa.HEADER:return(0,T.__)("Choose header design","kubio");case Xa.FOOTER:return(0,T.__)("Choose footer design","kubio");case Xa.SIDEBAR:return(0,T.__)("Add section","kubio");default:return(0,T.__)("Add predesigned section","kubio")}})())))},ii=(0,E.compose)((0,w.withSelect)((e=>{const{getSelectedBlockClientId:t,getBlock:n,getBlockParents:o,getClientIdsWithDescendants:r}=e("core/block-editor"),a=r().map(n).filter((e=>{let{name:t}=e;return Qa.includes(t)}));return{selectedBlockClientId:t(),templateParts:a,getBlockParents:o}})),(0,w.withDispatch)(((e,t)=>{let{onSelect:n=m.noop,getBlockParents:o,getBlockAttributes:r}=t;const{removeBlocks:a,moveBlockToPosition:i,updateBlockAttributes:l}=e("core/block-editor");return{selectBlock(t){e("core/block-editor").selectBlock(t),n(t)},removeBlocks:a,reorderBlocks:(e,t,n)=>{const r=o(e[t].clientId).pop();i(e[t].clientId,r,r,n)},updateBlockAttribute:(e,t,n)=>{let o=r(e);o=(0,m.set)(o,t,n),l(e,{...o})}}})))((e=>(0,i.createElement)(Fa,null,(0,i.createElement)("div",{className:"block-editor-block-navigation__container kubio-interface kubio-section-list"},(0,i.createElement)("div",{className:"block-editor-block-navigation__label"},(0,i.createElement)(qa,e)))))),li=e=>{let{parentAreaIdentifier:t}=e;const n=`${t}/page-settings`,{isAICapabilityEnabled:o}=(0,w.useSelect)((e=>{const{isAICapabilityEnabled:t=p().noop}=e(h.STORE_KEY)||{};return{isAICapabilityEnabled:t()}}),[]),[r,,,a]=ao();return o?(0,i.createElement)(i.Fragment,null,(0,i.createElement)(rr,{title:(0,i.createElement)("span",{className:"kubio-sidebar-panel-with-icon__title"},(0,i.createElement)(In,{icon:Y.KubioAI,size:18}),(0,i.createElement)("span",null,(0,T.__)("AI Settings","kubio"))),areaIdentifier:n,onOpen:a,buttonOnly:!0,showArrow:!1}),r):(0,i.createElement)(i.Fragment,null)},si=window.wp.apiFetch;var ci=n.n(si);const ui=async()=>await ci()({path:"kubio/v1/3rd_party_themes/import_blog"}),di=window.wp.url,mi=["home","index","single","search","archive","singular"],pi=()=>{const e=(0,f.useGetGlobalSessionProp)("ready",!1),t=(0,f.useGetGlobalSessionProp)("urlBasedTemplatesMap",{}),n=(0,f.useSetGlobalSessionProp)("urlBasedTemplatesMap",{}),[o,r]=(0,i.useState)(!1),{getEntity:a,page:l,templateType:s,templateId:c}=(0,w.useSelect)((e=>{const{getEditedEntityRecord:t}=e("core"),{getPage:n,getEditedPostType:o,getEditedPostId:r}=e(h.STORE_KEY);return{getEntity:t,page:n(),templateType:o(),templateId:r()}}),[]);(0,i.useEffect)((()=>{e||r(!1)}),[e]);const u=(0,i.useCallback)((()=>{const e=a("postType",s,c),t=null==e?void 0:e.kubio_template_source;r(!["kubio","kubio-custom"].includes(t))}),[c,s]),d=(0,i.useCallback)((async()=>{if(null==l||!l.path)return;let e=t[null==l?void 0:l.path],o=!0;if(!e&&null!==e){const r=await window.fetch((0,di.addQueryArgs)(null==l?void 0:l.path,{"__kubio-classic-page-template-slug":1})).then((e=>e.json()));e=r.data||null,n({...t,[null==l?void 0:l.path]:e}),o=r.success}r(o&&mi.includes(e))}),[l,t]),m=(0,i.useCallback)(((e,t)=>{if(e&&t){var n;const t=null==e||null===(n=e.split("//"))||void 0===n?void 0:n.pop();mi.includes(t)?u():r(!1)}else d()}),[]);return(0,i.useEffect)((()=>{e&&m(c,s)}),[e,c,s]),o},hi=()=>{const[e,t]=(0,i.useState)(!1),[n,o]=(0,f.useGlobalSessionProp)("thirdPartyBlockInstalled",!1),r=pi(),{createSuccessNotice:a,createErrorNotice:l}=(0,w.useDispatch)("core/notices"),s=(0,i.useCallback)((async()=>{t(!0);try{await ui()}catch(e){return void l((0,T.__)("There was an error while importing the Kubio blog. Please try again","kubio"))}o(!0),a((0,T.__)("Kubio blog templates were imported successfully! Refresh the editor to enjoy the full site editing experience","kubio"),{isDismissible:!0,actions:[{label:(0,T.__)("Refresh page now","kubio"),onClick:()=>window.location.reload()}]}),t(!1)}),[]);return!r||r&&n?(0,i.createElement)(i.Fragment,null):(0,i.createElement)("div",{className:"kubio-sidebar-blog-area-import"},(0,i.createElement)("h2",null,(0,T.__)("💫 Start with the Kubio blog!","kubio")),(0,i.createElement)("p",null,(0,T.__)("Kubio comes with a fully customizable blog area for your site.","kubio"),(0,i.createElement)("br",null),(0,T.__)("Would you like to use the Kubio blog templates? ","kubio")),(0,i.createElement)(k.Button,{isPrimary:!0,isBusy:e,onClick:s},!e&&(0,T.__)("Import Kubio blog","kubio"),e&&(0,T.__)("Importing Kubio blog…","kubio")))};function gi(){const e=(0,f.useCurrentPageBodyClasses)(),{additionalCSS:t,setAdditionalCSS:n}=(0,v.useGlobalAdditionalCSS)(),[o,r]=(0,i.useState)(t);(0,i.useEffect)((()=>{t!==o&&r(t)}),[t]);const a=(0,E.useDebounce)(n,300);return(0,i.createElement)(k.PanelBody,{initialOpen:!0,title:(0,T.__)("Additional CSS","kubio")},(0,i.createElement)(P.CodeMirrorControl,{value:o,onChange:e=>{a(e),r(e)},mode:"css"}),e&&!!e.length&&(0,i.createElement)(P.ControlNotice,{content:(0,i.createElement)(i.Fragment,null,(0,i.createElement)("span",null,(0,T.__)("Current page has the following classes that can be used as top selectors:","kubio")),(0,i.createElement)("div",null,(0,i.createElement)("strong",null,e.join(", "))))}))}const fi=e=>{let{areaIdentifier:t}=e;const n=(0,w.useSelect)((e=>e(h.STORE_KEY).getEditorOpenedSidebar()),[]),o=null==n?void 0:n.endsWith(t);return(0,i.createElement)(i.Fragment,null,o&&(0,i.createElement)(gi,null))},bi=e=>{let{parentAreaIdentifier:t}=e;return(0,i.createElement)(rr,{title:(0,T.__)("Additional CSS","kubio"),parentAreaIdentifier:t,areaIdentifier:`${t}/additional-css`},(0,i.createElement)(fi,{areaIdentifier:`${t}/additional-css`}))};function vi(){const{globalStyle:e,getStyleDefaultGlobalValue:t}=(0,v.useGlobalDataStyle)(),n={styledComponent:"transition"};return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.PanelBody,{initialOpen:!0,title:(0,T.__)("Effects","kubio")},(0,i.createElement)(P.RangeWithUnitControl,{label:(0,T.__)("Transition Duration","kubio"),value:e.getStyle("transition.duration",{unit:"s"},{...n}),onChange:t=>((t,o,r)=>e.setStyle("transition.duration",o,{...n}))(0,t),onReset:()=>((o,r)=>{const a={...n},i=t(o,a);i?e.setStyle(o,i,a):e.setStyle(o,null,{...a,unset:!0})})("transition.duration"),min:0,max:5,step:.01})))}const _i=e=>{let{areaIdentifier:t}=e;const n=(0,w.useSelect)((e=>e(h.STORE_KEY).isEditorSidebarOpened(t)),[]),o=(0,w.useSelect)((e=>{var t,n;return(null===(t=e("kubio/edit-site"))||void 0===t||null===(n=t.getSettings())||void 0===n?void 0:n.isKubioTheme)||null}));return n&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)(vi,null),!o&&(0,i.createElement)(P.ControlNotice,{className:"notice-general-settings",content:(0,T.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")}))},yi=e=>{let{parentAreaIdentifier:t}=e;return(0,i.createElement)(rr,{title:(0,T.__)("Global Effects","kubio"),label:(0,T.__)("Effects","kubio"),parentAreaIdentifier:t,areaIdentifier:`${t}/effects`},(0,i.createElement)(_i,{areaIdentifier:`${t}/effects`}))},ki=window.kubio.advancedPanel,Ei=()=>{const[e,t]=(0,i.useState)(""),{globalStyle:n,resetToInitialData:o}=(0,v.useGlobalDataStyle)(),r="form-fields",a={type:s.WithDataPathTypes.STYLE,style:r,dataHelper:n};return(0,i.createElement)(k.PanelBody,{initialOpen:!1,title:(0,T.__)("Form fields","kubio")},(0,i.createElement)(k.BaseControl,{label:(0,T.__)("State","kubio")},(0,i.createElement)(ki.StatesControl,{activeState:e,setActiveState:t,availableStates:["normal","hover","focus","disabled"]}),(0,i.createElement)(P.ColorWithPath,C({label:(0,T.__)("Text color","kubio"),path:"typography.color",state:e},a,{onReset:o("typography.color",{styledComponent:r,state:e})})),(0,i.createElement)(P.ColorWithPath,C({label:(0,T.__)("Background color","kubio"),state:e,path:"background.color",showReset:!0},a,{onReset:o("background.color",{styledComponent:r,state:e})})),(0,i.createElement)(P.ColorWithPath,C({label:(0,T.__)("Border color","kubio"),path:["border.top.color","border.bottom.color","border.left.color","border.right.color"],state:e},a,{onReset:o(["border.top.color","border.bottom.color","border.left.color","border.right.color"],{styledComponent:r,state:e})})),(0,i.createElement)(P.SeparatorHorizontalLine,null),(0,i.createElement)(P.TypographyControlPopupWithPath,C({path:"typography"},a,{onReset:o("typography",{styledComponent:r})})),(0,i.createElement)(P.SeparatorHorizontalLine,null),(0,i.createElement)(P.BoxUnitValueControlWithPath,C({label:(0,T.__)("Padding","kubio"),path:"padding"},a,{onReset:o("padding",{styledComponent:r})})),(0,i.createElement)(P.BoxUnitValueControlWithPath,C({label:(0,T.__)("Margin","kubio"),path:"margin"},a,{onReset:o("margin",{styledComponent:r})})),(0,i.createElement)(P.SeparatorHorizontalLine,null),(0,i.createElement)(P.BordersAndRadiusWithPath,C({path:"border"},a,{withColor:!1,onReset:o("border",{styledComponent:r})}))))},Si=e=>{let{styledElement:t="form-submit-button",title:n=(0,T.__)("Form submit button","kubio")}=e;const[o,r]=(0,i.useState)(""),{globalStyle:a,resetToInitialData:l}=(0,v.useGlobalDataStyle)(),c={type:s.WithDataPathTypes.STYLE,style:t,dataHelper:a};return(0,i.createElement)(k.PanelBody,{initialOpen:!1,title:n},(0,i.createElement)(k.BaseControl,{label:(0,T.__)("State","kubio")},(0,i.createElement)(ki.StatesControl,{activeState:o,setActiveState:r,availableStates:["normal","hover","disabled"]}),(0,i.createElement)(P.GradientColorPickerWithPath,C({label:(0,T.__)("Background","kubio"),path:"background",state:o},c,{onReset:l("background",{styledComponent:t,state:o})})),(0,i.createElement)(P.ColorWithPath,C({label:(0,T.__)("Text color","kubio"),path:"typography.color",state:o},c,{onReset:l("typography.color",{styledComponent:t,state:o})})),(0,i.createElement)(P.ColorWithPath,C({label:(0,T.__)("Border color","kubio"),path:["border.top.color","border.bottom.color","border.left.color","border.right.color"],state:o},c,{onReset:l(["border.top.color","border.bottom.color","border.left.color","border.right.color"],{styledComponent:t,state:o})})),(0,i.createElement)(P.SeparatorHorizontalLine,null),(0,i.createElement)(P.TypographyControlPopupWithPath,C({path:"typography"},c,{onReset:l("typography",{styledComponent:t})})),(0,i.createElement)(P.SeparatorHorizontalLine,null),(0,i.createElement)(P.BoxUnitValueControlWithPath,C({label:(0,T.__)("Padding","kubio"),path:"padding"},c,{onReset:l("padding",{styledComponent:t})})),(0,i.createElement)(P.BoxUnitValueControlWithPath,C({label:(0,T.__)("Margin","kubio"),path:"margin"},c,{onReset:l("margin",{styledComponent:t})})),(0,i.createElement)(P.SeparatorHorizontalLine,null),(0,i.createElement)(P.BordersAndRadiusWithPath,C({path:"border"},c,{withColor:!1,onReset:l("border",{styledComponent:t})})),(0,i.createElement)(P.SeparatorHorizontalLine,null),(0,i.createElement)(P.BoxShadowWithPath,C({path:"boxShadow"},c,{onReset:l("boxShadow",{styledComponent:t})}))))},wi=e=>{let{areaIdentifier:t}=e;const n=(0,w.useSelect)((e=>e(h.STORE_KEY).isEditorSidebarOpened(t)),[]),o=(0,w.useSelect)((e=>{var t,n;return(null===(t=e("kubio/edit-site"))||void 0===t||null===(n=t.getSettings())||void 0===n?void 0:n.isKubioTheme)||null}));return n&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)(Ei,null),(0,i.createElement)(Si,{styledElement:"form-button",title:(0,T.__)("Form button","kubio")}),(0,i.createElement)(Si,{styledElement:"form-submit-button",title:(0,T.__)("Form submit button","kubio")}),(0,i.createElement)(Si,{styledElement:"form-reset-button",title:(0,T.__)("Form reset button","kubio")}),!o&&(0,i.createElement)(P.ControlNotice,{className:"notice-general-settings",content:(0,T.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")}))},Ci=e=>{let{parentAreaIdentifier:t}=e;return(0,i.createElement)(rr,{title:(0,T.__)("Form Elements","kubio"),parentAreaIdentifier:t,areaIdentifier:`${t}/form-elements`},(0,i.createElement)(wi,{areaIdentifier:`${t}/form-elements`}))},Ii={H1:"h1",H2:"h2",H3:"h3",H4:"h4",H5:"h5",H6:"h6"},xi={headingType:{values:Ii,options:[{value:Ii.H1,label:"H1"},{value:Ii.H2,label:"H2"},{value:Ii.H3,label:"H3"},{value:Ii.H4,label:"H4"},{value:Ii.H5,label:"H5"},{value:Ii.H6,label:"H6"}]}},Ti=()=>{const[e,t]=(0,v.useGlobalDataSetting)("googleFonts.serveLocally");return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(P.ToggleControl,{label:(0,T.__)("Serve Google Fonts locally","kubio"),value:e,onChange:t}),(0,i.createElement)(P.ControlNotice,{className:"notice-general-settings no-padding",content:(0,T.__)("When this option is turned on the Google Fonts used in your site will be downloaded and served from your server instead of the Google server. This will minimize the DNS requests, reduce the Cumulative Layout Shift and serve your Google Fonts in a 100% GDPR compliant way.","kubio")}))},{weightOptions:Pi,sizeUnitsOptions:Ri,sizeUnitsConfig:Oi,styleOptions:Ai,transformOptions:Ni,decorationOptions:Mi}=P.TypographyConfig,Di=e=>{const{globalStyle:t,getStyleDefaultGlobalValue:n,getStyleInitialDefaultGlobalValue:o}=(0,v.useGlobalDataStyle)();return((e,t,n,o)=>{const r={styledComponent:"body"};return{setTypography:function(n,o){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=a.state?`states.${a.state}`:null;a=(0,m.omit)(a,"state");const l=["typography","holders",t,i,n].filter(Boolean).join("."),s=p().merge({},r,a);e.setStyle(l,o,s)},getTypography:function(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=a.state?`states.${a.state}`:null;a=(0,m.omit)(a,"state");const l=["typography","holders",t,i,n].filter(Boolean).join("."),s=p().merge({},r,a);return e.getStyle(l,o,s)},unsetTypography:function(n){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=a.state?`states.${a.state}`:null;a=(0,m.omit)(a,"state");const l=["typography","holders",t,i,n].filter(Boolean).join("."),s=p().merge({},r,a),c=o(l,s);e.setStyle(l,c,s)}}})(t,e,0,o)},zi=e=>{let{getTypography:t,setTypography:n,unsetTypography:o,showTransform:r=!1,showDecoration:a=!0}=e;return(0,i.createElement)(P.PopoverOptionsButton,{label:(0,T.__)("Advanced","kubio"),popoverWidth:250,popupContent:(0,i.createElement)(i.Fragment,null,r&&(0,i.createElement)(P.GutentagSelectControl,{label:(0,T.__)("Transform","kubio"),options:Ni,value:t("transform"),onChange:e=>n("transform",e)}),a&&(0,i.createElement)(P.GutentagSelectControl,{label:(0,T.__)("Decoration","kubio"),options:Mi,value:t("decoration",""),onChange:e=>n("decoration",e)}),(0,i.createElement)(P.GutentagSelectControl,{label:(0,T.__)("Style","kubio"),options:Ai,value:t("style"),onChange:e=>n("style",e)}),(0,i.createElement)(P.SeparatorHorizontalLine,{fit:!0}),(0,i.createElement)(P.RangeWithUnitControl,{label:(0,T.__)("Line Height","kubio"),value:t("lineHeight"),onChange:e=>n("lineHeight",e),onReset:()=>o("lineHeight"),defaultUnit:"",min:0,max:10,step:.1}),(0,i.createElement)(P.RangeWithUnitControl,{label:(0,T.__)("Letter Spacing","kubio"),value:t("letterSpacing",{value:"",unit:"px"}),onChange:e=>n("letterSpacing",e),onReset:()=>o("letterSpacing"),min:0,max:10,step:.1,units:Ri}))})},Bi=e=>{let{element:t="h1"}=e;const{getTypography:n,setTypography:o,unsetTypography:r}=Di(t),{getFontWeights:a}=(0,v.useGlobalDataFonts)(),l=a(n("family")),s=Pi.filter((e=>-1!==l.indexOf(e.value)));return(0,i.createElement)(k.BaseControl,null,(0,i.createElement)(k.Flex,{className:"kubio-font-family-container general-typography"},(0,i.createElement)(k.FlexBlock,null,(0,i.createElement)("span",{className:"kubio-font-family-label"},(0,T.__)("Font family","kubio"))),(0,i.createElement)(k.FlexBlock,{className:"kubio-font-family-container__select"},(0,i.createElement)(P.FontPicker,{value:n("family"),onChange:e=>o("family",e)}))),(0,i.createElement)(P.GutentagSelectControl,{className:"kubio-select-control-container",label:(0,T.__)("Font weight","kubio"),options:s,value:parseInt(n("weight")),onChange:e=>o("weight",e)}),(0,i.createElement)(P.InlineLabeledControl,{label:(0,T.__)("Color","kubio")},(0,i.createElement)(P.ColorIndicatorPopover,{color:n("color"),onChange:e=>o("color",e),onReset:()=>r("color"),showReset:!0})),(0,i.createElement)(P.RangeWithUnitControl,{label:(0,T.__)("Size","kubio"),units:Ri,optionsByUnit:Oi,onChange:e=>o("size",e),value:n("size"),onReset:()=>r("size")}),(0,i.createElement)(zi,{getTypography:n,setTypography:o,unsetTypography:r,showTransform:!0}))},Li=()=>{const[e,t]=(0,i.useState)(""),{getTypography:n,setTypography:o,unsetTypography:r}=Di("a");return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.BaseControl,null,(0,i.createElement)(k.Flex,{className:"kubio-font-family-container"},(0,i.createElement)(k.FlexBlock,null,(0,i.createElement)("span",{className:"kubio-font-family-label"},(0,T.__)("Font family","kubio"))),(0,i.createElement)(k.FlexItem,null,(0,i.createElement)(P.FontPicker,{label:(0,T.__)("Font family","kubio"),value:n("family"),onChange:e=>o("family",e)}))),(0,i.createElement)(P.GutentagSelectControl,{label:(0,T.__)("Font Weight","kubio"),options:Pi,value:parseInt(n("weight")),onChange:e=>o("weight",e)}),(0,i.createElement)(P.RangeWithUnitControl,{label:(0,T.__)("Size","kubio"),units:Ri,value:n("size"),onChange:e=>o("size",e),onReset:()=>r("size")}),(0,i.createElement)(k.BaseControl,{label:(0,T.__)("State","kubio")},(0,i.createElement)(ki.StatesControl,{activeState:e,setActiveState:t,availableStates:["normal","hover"]})),(0,i.createElement)(P.InlineLabeledControl,{label:(0,T.__)("Color","kubio")},(0,i.createElement)(P.ColorIndicatorPopover,{color:n("color","",{state:e}),onChange:t=>o("color",t,{state:e}),onReset:()=>{r("color",{state:e})},showReset:!0})),(0,i.createElement)(P.GutentagSelectControl,{label:(0,T.__)("Decoration","kubio"),options:Mi,value:n("decoration","",{state:e}),onChange:t=>o("decoration",t,{state:e})}),(0,i.createElement)(P.SeparatorHorizontalLine,null),(0,i.createElement)(zi,{getTypography:n,setTypography:o,unsetTypography:r,showTransform:!0,showDecoration:!1})))},Fi=()=>{const[e,t]=(0,i.useState)("h1"),n=(0,w.useSelect)((e=>{var t,n;return(null===(t=e("kubio/edit-site"))||void 0===t||null===(n=t.getSettings())||void 0===n?void 0:n.isKubioTheme)||null}));return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.PanelBody,{initialOpen:!1,title:(0,T.__)("Headings","kubio")},(0,i.createElement)(P.ToggleGroup,{label:(0,T.__)("Heading Type","kubio"),options:xi.headingType.options,value:e,onChange:t}),(0,i.createElement)(Bi,{element:e})),(0,i.createElement)(k.PanelBody,{initialOpen:!1,title:(0,T.__)("Texts","kubio")},(0,i.createElement)(Bi,{element:"p"})),(0,i.createElement)(k.PanelBody,{initialOpen:!1,title:(0,T.__)("Lead text","kubio")},(0,i.createElement)(Bi,{element:"lead"})),(0,i.createElement)(k.PanelBody,{initialOpen:!1,title:(0,T.__)("Links","kubio")},(0,i.createElement)(Li,null)),(0,i.createElement)(k.PanelBody,{initialOpen:!1,title:(0,T.__)("Adobe TypeKit","kubio")},(0,i.createElement)(P.TypeKitSetupInterface,{showNotice:!0})),(0,i.createElement)(k.PanelBody,{initialOpen:!1,title:(0,T.__)("Google Fonts Settings","kubio")},(0,i.createElement)(Ti,{showNotice:!0})),!n&&(0,i.createElement)(P.ControlNotice,{className:"notice-general-settings",content:(0,T.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")}))},Gi=e=>{let{areaIdentifier:t}=e;return(0,w.useSelect)((e=>e(h.STORE_KEY).isEditorSidebarOpened(t)),[])?(0,i.createElement)(Fi,null):(0,i.createElement)(i.Fragment,null)},Hi=e=>{let{parentAreaIdentifier:t}=e;return(0,i.createElement)(rr,{title:(0,T.__)("Typography","kubio"),parentAreaIdentifier:t,areaIdentifier:`${t}/typography`},(0,i.createElement)(Gi,{areaIdentifier:`${t}/typography`}))};let ji=null;const Ui=()=>{const{logoImage:e,alternateLogoImage:t,setLogoImage:n,setAlternateLogoImage:o}=(0,v.useSiteLogoImages)(),[r,a]=(0,S.useEntityProp)("root","site","title"),[l,s]=(0,S.useEntityProp)("root","site","description"),{siteIconUrl:c}=(0,w.useSelect)((e=>{const{getEditedEntityRecord:t}=e("core"),n=t("root","site"),o=ji||(null==n?void 0:n.site_icon),r=o&&e("core").getEntityRecord("root","media",o);return{siteIconUrl:null==r?void 0:r.source_url}}),[ji]),{editEntityRecord:u}=(0,w.useDispatch)("core"),d=(0,i.useCallback)((e=>{var t;const n=null!==(t=parseInt(e))&&void 0!==t?t:void 0;ji=n,u("root","site",void 0,{site_icon:n})}),[u]);return(0,i.createElement)(k.PanelBody,{title:(0,T.__)("Site Identity","kubio"),className:"kubio-site-identity-panel"},(0,i.createElement)(k.BaseControl,{label:(0,T.__)("Site title","kubio"),id:"site-title-control"},(0,i.createElement)(P.InputControl,{value:r||"",onChange:e=>a(e)})),(0,i.createElement)(k.BaseControl,{label:(0,T.__)("Tagline","kubio"),id:"tagline-control"},(0,i.createElement)(P.InputControl,{value:l||"",onChange:e=>s(e)})),(0,i.createElement)(P.SeparatorHorizontalLine,null),(0,i.createElement)(k.BaseControl,{label:(0,T.__)("Logo image","kubio"),id:"logo-image-control"},(0,i.createElement)(P.MediaPicker,{value:e,type:"image",showButton:!0,onReset:()=>{n(null)},buttonLabel:(0,T.__)("Change image","kubio"),removeButtonLabel:(0,T.__)("Reset image","kubio"),onChange:e=>n(e.id)})),(0,i.createElement)(k.BaseControl,{label:(0,T.__)("Alternate logo image","kubio"),id:"alternate-logo-image-control"},(0,i.createElement)(P.MediaPicker,{value:t,type:"image",showButton:!0,showRemoveButton:!0,onReset:()=>{o(null)},buttonLabel:(0,T.__)("Change alternate image","kubio"),removeButtonLabel:(0,T.__)("Reset image","kubio"),onChange:e=>o(e.url)})),(0,i.createElement)(P.SeparatorHorizontalLine,null),(0,i.createElement)(k.BaseControl,{label:(0,T.__)("Site Icon","kubio"),id:"site-icon-control",help:(0,T.__)("Site Icons are what you see in browser tabs, bookmark bars, and within the WordPress mobile apps. Upload one here!","kubio")},(0,i.createElement)(P.MediaPicker,{value:""!==c?c:null,type:"image",showButton:!0,showRemoveButton:!0,onReset:()=>{d(null)},buttonLabel:(0,T.__)("Set site icon","kubio"),onChange:e=>d(e.id)})))},Wi=e=>{let{areaIdentifier:t}=e;const n=(0,w.useSelect)((e=>e(h.STORE_KEY).getEditorOpenedSidebar()),[]),o=null==n?void 0:n.endsWith(t);return(0,i.createElement)(i.Fragment,null,o&&(0,i.createElement)(Ui,null))};function Vi(e){let{parentAreaIdentifier:t}=e;return(0,i.createElement)(rr,{title:(0,T.__)("Site Identity","kubio"),parentAreaIdentifier:t,areaIdentifier:`${t}/site-identity`},(0,i.createElement)(Wi,{areaIdentifier:`${t}/site-identity`}))}const Ki=()=>{const{globalStyle:e,getPropDefaultGlobalValue:t,getStyleDefaultGlobalValue:n}=(0,v.useGlobalDataStyle)(),o=(t,n,o)=>e.getPropInMedia(t,n,{...o}),r=(t,n)=>o=>e.setPropInMedia(t,o,{...n}),a=function(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return()=>{const r=t(n,o);e.setPropInMedia(n,r,o)}},l={styledComponent:"sectionSpacing"};return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.PanelBody,{initialOpen:!0,title:(0,T.__)("Spacing","kubio")},(0,i.createElement)(P.RangeWithUnitControl,{label:(0,T.__)("Horizontal space between buttons/links","kubio"),units:P.sizeUnitsOptions,onChange:r("hSpace"),value:o("hSpace",{unit:"px"}),onReset:a("hSpace")}),(0,i.createElement)(P.RangeWithUnitControl,{label:(0,T.__)("Column contents vertical spacing","kubio"),units:P.sizeUnitsOptions,onChange:r("vSpace"),value:o("vSpace",{unit:"px"}),onReset:a("vSpace")}),(0,i.createElement)(P.RangeWithUnitControl,{label:(0,T.__)("Section vertical spacing","kubio"),units:P.sizeUnitsOptions,value:e.getStyle("padding.top",{unit:"px"},l),onChange:t=>{e.setStyle("padding.top",t,l),e.setStyle("padding.bottom",t,l)},onReset:()=>{const t=n("padding.top",l);e.setStyle("padding.top",t,l);const o=n("padding.bottom",l);e.setStyle("padding.bottom",o,l)}})))},$i=e=>{let{areaIdentifier:t}=e;const n=(0,w.useSelect)((e=>e(h.STORE_KEY).isEditorSidebarOpened(t)),[]),o=(0,w.useSelect)((e=>{var t,n;return(null===(t=e("kubio/edit-site"))||void 0===t||null===(n=t.getSettings())||void 0===n?void 0:n.isKubioTheme)||null}));return n&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)(Ki,null),!o&&(0,i.createElement)(P.ControlNotice,{className:"notice-general-settings",content:(0,T.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")}))},qi=e=>{let{parentAreaIdentifier:t}=e;return(0,i.createElement)(rr,{title:(0,T.__)("Global Spacing","kubio"),label:(0,T.__)("Spacing","kubio"),parentAreaIdentifier:t,areaIdentifier:`${t}/spacing`},(0,i.createElement)($i,{areaIdentifier:`${t}/spacing`}))};function Yi(e){let{parentAreaIdentifier:t}=e;const n=`${t}/general-settings`;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(rr,{title:(0,T.__)("General Settings","kubio"),areaIdentifier:n},(0,i.createElement)(Vi,{parentAreaIdentifier:n}),(0,i.createElement)(Hi,{parentAreaIdentifier:n}),(0,i.createElement)(Ci,{parentAreaIdentifier:n}),(0,i.createElement)(cr,{parentAreaIdentifier:n}),(0,i.createElement)(qi,{parentAreaIdentifier:n}),(0,i.createElement)(yi,{parentAreaIdentifier:n}),(0,i.createElement)(bi,{parentAreaIdentifier:n})))}const Xi=e=>{let{addItem:t}=e;const[n,o]=(0,i.useState)(!1),[r,a]=(0,i.useState)((0,za.generateItemInitialData)()),l=(0,i.useRef)(null);return(0,i.createElement)("div",{ref:l},(0,i.createElement)(k.Button,{onClick:()=>o(!0),className:"kubio-button-100",isPrimary:!0},(0,T.__)("Add menu item","kubio")),n&&(0,i.createElement)(k.Popover,{position:"middle left",className:"kubio-options-popover",onClose:()=>{o(!1)},anchorRef:l.current,offset:6,anchor:l.current,flip:!0,shift:!0,resize:!1},(0,i.createElement)(P.MenuItemOptions,{item:r,isAdd:!0,onChange:e=>{t(e),o(!1),a((0,za.generateItemInitialData)())},afterUpdateClick:()=>o(!1),updateLabel:(0,T.__)("Add item","kubio")})))},Zi=e=>{let{item:t,onItemChange:n,onRemoveItem:o,onTogglePopover:r}=e;const[a,l]=(0,i.useState)(t);(0,i.useEffect)((()=>{l(t)}),[t]);const s=e=>{const t={...a,...e};l(t),n(t)},c=(0,i.useRef)();return(0,i.createElement)("div",{ref:c},(0,i.createElement)(k.Flex,{className:"kubio-inspector-menu-item-content"},(0,i.createElement)(k.FlexBlock,null,(0,i.createElement)(k.Tooltip,{text:(0,q.stripTags)(a.label)},(0,i.createElement)("span",{className:"kubio-inspector-menu-item-label"},(0,q.stripTags)(a.label)))),(0,i.createElement)(k.FlexItem,{className:"kubio-inspector-menu-items-settings"},(0,i.createElement)(k.Flex,{gap:1},(0,i.createElement)(k.FlexItem,null,(0,i.createElement)(k.Button,{className:"kubio-inspector-menu-remove-item",isSmall:!0,iconSize:18,onClick:()=>o(a),icon:Y.DeleteItemIcon})),(0,i.createElement)(k.FlexItem,null,(0,i.createElement)(P.PopoverOptionsButton,{iconSize:18,popoverClass:"kubio-menu-edit-popover",popoverAnchorRef:c,popupContent:e=>(0,i.createElement)(P.MenuItemOptions,{item:a,onChange:s,afterUpdateClick:e}),onPopoverClose:()=>r(!1),onPopoverOpen:()=>r(!0)}))))))},Ji=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.filter((e=>e.parent===t)).map((t=>({...t,children:t.id?Ji(e,t.id):[]})))},Qi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map(((e,n)=>[{...(0,m.omit)(e,["children","block"]),order:n+1,parent:t},...Qi(e.children||[],e.id)])).reduce(((e,t)=>e.concat(t)),[])},el=e=>{let{items:t=[],setItems:n,isResolving:o,hasResolved:r}=e;const[a,l]=(0,i.useState)(-1/0),s=(0,i.useMemo)((()=>Ji(t)),[t]),c=(0,i.useCallback)((e=>{n(e,!0)}),[n]),u=(0,i.useCallback)((e=>{let n=(0,m.cloneDeep)(t).filter((t=>t.id!==e.id)).map((t=>(t.parent===e.id&&(t.parent=e.parent),t))),o=0;n=n.map((t=>t.parent===e.parent?(o++,{...t,order:o}):t)),c(n)}),[c]),d=(0,i.useCallback)((e=>{const t=Qi(e);c(t)}),[c]),p=(0,i.useCallback)((e=>{if(!e.id)return void console.error("Cannot update item without id");const n=(0,m.cloneDeep)(t).map((t=>t.id===e.id?{...t,...e}:t));c(n)}),[c]),h=(0,i.useCallback)((e=>{let{item:t}=e;return(0,i.createElement)(Zi,{item:t,onItemChange:p,onRemoveItem:u,onTogglePopover:e=>{l(e?t.id:-1/0)}})}),[l,p,u]),g=s.length>0,f=(0,i.useCallback)((e=>e.id===a),[a]);return(0,i.createElement)(k.BaseControl,null,(0,i.createElement)("div",{className:"kubio-inspector-menu-tree"},o&&(0,i.createElement)(P.LoadingPlaceholder,{message:(0,T.__)("Loading menu …","kubio")}),r&&g&&(0,i.createElement)(P.SortableTree,{items:s,renderItem:h,handler:!0,collapsable:!1,onChange:d,isActive:f}),r&&!g&&(0,i.createElement)(P.SmallPlaceholder,{message:(0,T.__)("Empty menu","kubio")})))},tl=e=>{let{menu:t}=e;const{setItems:n,items:o=[],isResolving:r,hasResolved:a}=(0,za.useMenuBlockEditor)(t.id),l=(0,i.useCallback)((e=>{n([...o,{...e,order:o.length+1}],!0)}),[o]);return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.PanelBody,{title:(0,T.__)("Menu Structure","kubio")},(0,i.createElement)(el,{menuId:t.id,items:o,setItems:n,isResolving:r,hasResolved:a}),(0,i.createElement)(Xi,{addItem:l})))},nl=e=>{let{menu:t,areaIdentifier:n}=e;const o=(0,w.useSelect)((e=>e(h.STORE_KEY).getEditorOpenedSidebar()));return o&&-1!==o.indexOf(n)&&(0,i.createElement)(tl,{menu:t})},ol=e=>{let{parentAreaIdentifier:t,menu:n}=e;const o=`${t}/menu-${n.id}`;return(0,i.createElement)(rr,{title:(0,T.sprintf)(// translators: %s is for the menu name
(0,T.__)("Menu: %s","kubio"),n.name||(0,T.__)("Unnamed menu","kubio")),label:n.name||(0,T.__)("Unnamed menu","kubio"),parentAreaIdentifier:t,areaIdentifier:o},(0,i.createElement)(nl,{areaIdentifier:o,menu:n}))},rl=()=>{const[e,t]=(0,i.useState)(!1),[n,o]=(0,i.useState)(!1),[r,a]=(0,i.useState)(""),l=(0,i.useRef)(),{saveMenu:s}=(0,w.useDispatch)("core"),{createErrorNotice:c,createInfoNotice:u}=(0,w.useDispatch)(d.store),m=(0,i.useCallback)((()=>{n?u((0,T.__)("Another menu creation is in progress","kubio"),{type:"snackbar"}):(t(!e),a(""))}),[e,t,n]),p=(0,i.useCallback)((async()=>{if(!n){o(!0);try{await s({name:r})}catch(e){c((0,T.__)("Menu creation failed","kubio"),{type:"snackbar"})}t(!1),o(!1)}}),[t,s,r,n,o]);return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.BaseControl,{className:"kubio-create-menu-button"},(0,i.createElement)(k.Button,{onClick:m,isPrimary:!0,className:"kubio-button-100",ref:l,isBusy:n},(0,T.__)("Create menu","kubio"))),e&&(0,i.createElement)(k.Popover,{position:"middle left",className:"kubio-options-popover",anchorRef:l.current,onClose:()=>t(!1),offset:6},(0,i.createElement)("div",null,(0,i.createElement)(k.BaseControl,null,(0,i.createElement)(P.InputControl,{label:(0,T.__)("Menu name","kubio"),onChange:a,value:r,disabled:n})),(0,i.createElement)(k.BaseControl,null,(0,i.createElement)(k.Button,{onClick:p,isPrimary:!0,disabled:n,isBusy:n,className:"kubio-button-100"},(0,T.__)("Create menu","kubio"))))))},al=e=>{let{areaIdentifier:t}=e;const{menus:n}=(0,w.useSelect)((e=>{const{getMenus:t,isResolving:n,hasFinishedResolution:o}=e("core"),r=[{per_page:-1}];return{menus:t(...r),isResolvingMenus:n("getMenus",r),hasResolvedMenus:o("getMenus",r)}}));return(0,i.createElement)(i.Fragment,null,null==n?void 0:n.map((e=>(0,i.createElement)(ol,{key:e.id,parentAreaIdentifier:t,menu:e}))))};function il(e){let{parentAreaIdentifier:t}=e;const n=`${t}/menus-settings`;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(rr,{title:(0,T.__)("Menus","kubio"),areaIdentifier:n},(0,i.createElement)(al,{areaIdentifier:n}),(0,i.createElement)(rl,null)))}const ll=function(){return(0,i.createElement)(Rr.PostTypeSupportCheck,{supportKeys:["comments","trackbacks"]},(0,i.createElement)(k.PanelBody,{title:(0,T.__)("Discussion","kubio")},(0,i.createElement)(Rr.PostTypeSupportCheck,{supportKeys:"comments"},(0,i.createElement)(k.PanelRow,null,(0,i.createElement)(Rr.PostComments,null))),(0,i.createElement)(Rr.PostTypeSupportCheck,{supportKeys:"trackbacks"},(0,i.createElement)(k.PanelRow,null,(0,i.createElement)(Rr.PostPingbacks,null)))))};var sl=n(5358);const cl=(0,w.withSelect)((e=>{const{getCurrentPostType:t}=e(sl.Ls),{getPostType:n}=e(S.store);return{postType:n(t())}})),ul=(0,E.compose)(cl)((function(e){let{postType:t}=e;return(0,i.createElement)(Rr.PostFeaturedImageCheck,null,(0,i.createElement)(k.PanelBody,{title:(0,m.get)(t,["labels","featured_image"],(0,T.__)("Featured image","kubio"))},(0,i.createElement)(Rr.PostFeaturedImage,null)))})),dl=function(){const{postType:e}=(0,w.useSelect)((e=>{const{getCurrentPostType:t}=e(sl.Ls),{getPostType:n}=e(S.store);return{postType:n(t())}}),[]);return e?(0,i.createElement)(Rr.PageAttributesCheck,null,(0,i.createElement)(k.PanelBody,{title:(0,m.get)(e,["labels","attributes"],(0,T.__)("Page attributes","kubio"))},(0,i.createElement)(Rr.PageAttributesParent,null),(0,i.createElement)(k.PanelRow,null,(0,i.createElement)(Rr.PageAttributesOrder,null)))):null},ml=function(){return(0,i.createElement)(Rr.PostExcerptCheck,null,(0,i.createElement)(k.PanelBody,{title:(0,T.__)("Excerpt","kubio")},(0,i.createElement)(Rr.PostExcerpt,null)))},pl=(0,E.compose)([(0,w.withSelect)((e=>{const{isPermalinkEditable:t,getCurrentPost:n,isCurrentPostPublished:o,getPermalinkParts:r,getEditedPostAttribute:a,getEditedPostSlug:i}=e(Rr.store),{getPostType:l}=e(S.store),{link:s}=n(),c=l(a("type")),u=r();return{postLink:s,isEditable:t(),isPublished:o(),isViewable:(0,m.get)(c,["viewable"],!1),postSlug:(0,di.safeDecodeURIComponent)(i()),postTypeLabel:(0,m.get)(c,["labels","view_item"]),hasPermalinkParts:!!u,permalinkPrefix:null==u?void 0:u.prefix,permalinkSuffix:null==u?void 0:u.suffix}})),(0,E.ifCondition)((e=>{let{isEnabled:t,postLink:n,isViewable:o,hasPermalinkParts:r}=e;return t&&n&&o&&r}))])((function(e){let{postLink:t,permalinkPrefix:n,permalinkSuffix:o,editPermalink:r,postSlug:a,postTypeLabel:l,isEditable:s}=e;const[c,u]=(0,i.useState)(!1);let d,m,p;return s&&(d=n&&(0,i.createElement)("span",{className:"edit-post-post-link__link-prefix"},n),m=a&&(0,i.createElement)("span",{className:"edit-post-post-link__link-post-name"},a),p=o&&(0,i.createElement)("span",{className:"edit-post-post-link__link-suffix"},o)),(0,i.createElement)(k.PanelBody,{title:(0,T.__)("Permalink","kubio")},s&&(0,i.createElement)("div",{className:"editor-post-link"},(0,i.createElement)(P.InputControl,{label:(0,T.__)("URL Slug","kubio"),value:c?"":a,onChange:e=>{r(e),e?c&&u(!1):c||u(!0)},onBlur:e=>{r((0,Rr.cleanForSlug)(e.target.value)),c&&u(!1)}}),(0,i.createElement)("p",null,(0,T.__)("The last part of the URL.","kubio")," ",(0,i.createElement)(k.ExternalLink,{href:"https://wordpress.org/support/article/writing-posts/#post-field-descriptions"},(0,T.__)("Read about permalinks","kubio")))),(0,i.createElement)("h3",{className:"edit-post-post-link__preview-label"},l||(0,T.__)("View post","kubio")),(0,i.createElement)("div",{className:"edit-post-post-link__preview-link-container"},(0,i.createElement)(k.ExternalLink,{className:"edit-post-post-link__link",href:t,target:"_blank"},s?(0,i.createElement)(i.Fragment,null,d,m,p):t)))})),hl=function(e){let{taxonomy:t,children:n}=e;const o=(0,m.get)(t,["labels","menu_name"]);return o?(0,i.createElement)(k.PanelBody,{title:o},n):null},gl=function(){return(0,i.createElement)(Rr.PostTaxonomiesCheck,null,(0,i.createElement)(Rr.PostTaxonomies,{taxonomyWrapper:(e,t)=>(0,i.createElement)(hl,{taxonomy:t},e)}))};function fl(e){let{layoutBlock:t}=e;const{dataHelper:n}=(0,s.useKubioDataHelper)(t),o=(0,Wo.useQueryLayout)(n);return(0,i.createElement)(P.SelectWithIconControl,C({label:(0,T.__)("Layout","kubio")},o))}const bl=(0,E.compose)([(0,w.withSelect)((e=>{const{getPage:t=p().noop}=e("kubio/edit-site")||{};return{currentPage:t()}}))])((function(e){const{currentPage:t}=e,{getBlocks:n}=(0,w.useSelect)("core/block-editor"),o=p().get(t,["context","postId"]),[r,a]=(0,i.useState)();return(0,i.useEffect)((()=>{const e=n(),t=(0,q.findBlockByName)(e,"kubio/query-layout");a(t)}),[o]),r?(0,i.createElement)(k.PanelBody,{title:(0,T.__)("Blog layout","kubio"),initialOpen:!0},(0,i.createElement)(fl,C({},e,{layoutBlock:r}))):null})),vl=function(e){let{onNewTemplate:t}=e;const[n,o]=(0,i.useState)(!1);return(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",{className:"edit-post-template__actions"},(0,i.createElement)(Nr.ProItem,{tag:k.Button,isPrimary:!0,onClick:()=>o(!0),urlArgs:{source:"template",content:"create-new"}},(0,T.__)("Create new template","kubio")),n&&(0,i.createElement)(P.TemplateWizard,{onNewTemplate:t,onClose:()=>{o(!1)}})))},_l=function(){const{currentPostType:e,currentTemplate:t,currentTemplateLabel:n,availableTemplates:o}=(0,w.useSelect)((e=>{var t;const{getCurrentPageTemplate:n,getCurrentPostType:o,getAvailablePageTemplates:r}=e(h.STORE_KEY),a=o();let i=n();a===i&&(i="");const l=r();return{currentPostType:a,currentTemplate:i,currentTemplateLabel:(null===(t=(0,m.find)(l,{value:i}))||void 0===t?void 0:t.label)||"",availableTemplates:l}}),[]),{onNewTemplate:r,assignTemplate:a,assignClassicTemplate:l}=(0,s.useTemplateData)("header"),c=(0,s.useDeepMemo)((()=>{const e=o.reduce(((e,t)=>{const n=t.source||"custom";return{...e,[n]:[...e[n]||[],t]}}),{});return h.templateGroupPriorities.map((t=>({label:h.templateGroups[t],items:e[t]}))).filter((e=>{var t;return null===(t=e.items)||void 0===t?void 0:t.length}))}),[o]);return"page"!==e||"front-page"===(null==t?void 0:t.replace(".php",""))?(0,i.createElement)(i.Fragment,null):(0,i.createElement)(k.PanelBody,{title:(0,T.sprintf)(/* translators: %s: template title */(0,T.__)("Template: %s","kubio"),n)},(0,i.createElement)(P.GutentagSelectControl,{hideLabelFromVision:!0,label:(0,T.__)("Template:","kubio"),value:t,onChange:async function(e){Object.values(s.defaultTemplatesByPostType).includes(e)&&(e="");const t=o.find((t=>t.value===e));t&&((null==t?void 0:t.isClassicTemplate)?l(e):a(e))},options:c}),(0,i.createElement)(vl,{onNewTemplate:r}))},yl=["page","post","product"],kl=e=>{let{areaIdentifier:t}=e;const{currentSidebar:n,isInnerPage:o,isWooPage:r}=(0,w.useSelect)((e=>({isWooPage:e(h.STORE_KEY).getIsWooCommercePage(),currentSidebar:e(h.STORE_KEY).getEditorOpenedSidebar(),isInnerPage:e(h.STORE_KEY).getIsInnerPage()})),[]),a=null==n?void 0:n.endsWith(t),l=o&&!r;return(0,i.createElement)("span",{className:"kubio-page-settings"},a&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)(bl,null),l&&(0,i.createElement)(_l,null),(0,i.createElement)(pl,null),(0,i.createElement)(gl,null),(0,i.createElement)(ul,null),(0,i.createElement)(ml,null),(0,i.createElement)(ll,null),(0,i.createElement)(dl,null)))};function El(e){let{parentAreaIdentifier:t}=e;const n=`${t}/page-settings`,{postType:o}=(0,w.useSelect)((e=>{const{getCurrentPostType:t}=e(h.STORE_KEY);return{postType:t()}}),[]);return yl.includes(o)?(0,i.createElement)(i.Fragment,null,(0,i.createElement)(rr,{title:(0,T.__)("Page Settings","kubio"),areaIdentifier:n},(0,i.createElement)(kl,{areaIdentifier:n}))):null}const Sl=e=>{let{parentAreaIdentifier:t}=e;const n=`${t}/style-presets`,o=(0,T.__)("Style Presets","kubio");return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(rr,{title:(0,i.createElement)("span",{className:"kubio-sidebar-panel-with-icon__title"},(0,i.createElement)(In,{icon:Y.StylePresetsIcon}),(0,i.createElement)("span",null,o)),areaIdentifier:n},(0,i.createElement)(wl,{AREA_IDENTIFIER:n})))},wl=(0,i.memo)((e=>{let{AREA_IDENTIFIER:t}=e;return t===(0,w.useSelect)((e=>{var t,n;return null===(t=e(h.STORE_KEY))||void 0===t||null===(n=t.getEditorOpenedSidebar())||void 0===n?void 0:n.replace("kubio/edit-site/sidebar/","")}),[])?(0,i.createElement)(Cl,null):(0,i.createElement)(i.Fragment,null)})),Cl=(0,i.memo)((()=>(0,i.createElement)("div",{className:"kubio-style-preset-panel__container"},(0,i.createElement)(dr,null),(0,i.createElement)(_r,null))));function Il(e){let{beforeSectionsList:t,afterSectionsList:n}=e;const o=(0,s.usePageTitle)(),{uiVersion:r}=(0,g.useUIVersion)();return(0,i.createElement)(Zo,{title:(0,i.createElement)(i.Fragment,null,(0,i.createElement)("span",{className:"preview-notice"},(0,T.__)("You are editing","kubio")),(0,i.createElement)("span",{className:"panel-title site-title"},(0,q.fromHtmlEntities)(o))),areaIdentifier:"document"},t,1===r&&(0,i.createElement)(El,{parentAreaIdentifier:"document"}),(0,i.createElement)(hi,null),(0,i.createElement)(Sl,{parentAreaIdentifier:"document"}),(0,i.createElement)(ii,null),(0,i.createElement)(li,null),2===r&&(0,i.createElement)(El,{parentAreaIdentifier:"document"}),(0,i.createElement)(Yi,{parentAreaIdentifier:"document"}),(0,i.createElement)(il,{parentAreaIdentifier:"document"}),n)}const xl=window.kubio.inspectors,{Slot:Tl,Fill:Pl}=(0,k.createSlotFill)("ColibriEditSiteBlockEditorSidebarInspector"),Rl=()=>{const{currentSidebar:e,selectedBlock:t}=(0,w.useSelect)((e=>{var t,n;return{currentSidebar:(null===(t=e(h.STORE_KEY).getEditorOpenedSidebar())||void 0===t||null===(n=t.split)||void 0===n?void 0:n.call(t,"/sidebar/").at(1))||null,selectedBlock:e("core/block-editor").getSelectedBlock()}}),[]),[n]=(0,xl.useCurrentInspectorTab)();return(0,q.showSupplementaryUpgradeToPRO)()||"document"===e?(0,i.createElement)(Nr.UpgradeToPro,{urlArgs:{source:t?t.name:e,content:t?n:""}}):(0,i.createElement)(i.Fragment,null)},Ol=()=>{const{subsidebars:e}=(0,w.useSelect)((e=>({subsidebars:e(h.STORE_KEY).getSubSidebars()})));return(0,f.useGetGlobalSessionProp)("ready",!1)?(0,i.createElement)(i.Fragment,null,(0,i.createElement)(Il,null),(0,i.createElement)(Dr,null,(0,i.createElement)(Tl,{bubblesVirtually:!0})),(0,m.map)(e,((e,t)=>(0,i.createElement)(i.Fragment,{key:t},e)))):null},Al=Pl,Nl={content:()=>(0,i.createElement)(xl.ContentBlockInspector,null),style:()=>(0,i.createElement)(xl.StyleBlockInspector,null),advanced:()=>(0,i.createElement)(xl.AdvancedStyleBlockInspector,null)},Ml=(0,Wo.getNamesOfBlocks)(),Dl=[Ml.HEADER,Ml.FOOTER,Ml.QUERY_LAYOUT,Ml.HERO,Ml.SECTION,Ml.ROW,Ml.COLUMN,Ml.QUERY,Ml.LOOP,Ml.LOOP_ITEM],zl=[{name:"content",title:()=>{const e=(0,w.useSelect)((e=>{var t;return null===(t=e("core/block-editor").getSelectedBlock())||void 0===t?void 0:t.name}));let t=(0,T.__)("Layout","kubio");return-1===Dl.indexOf(e)&&(t=(0,T.__)("Content","kubio")),(0,i.createElement)("span",{className:"kubio-tab-panel"},(0,i.createElement)(In,{icon:Y.LayoutIcon}),(0,i.createElement)("span",{className:"kubio-tab-panel-text"},t))},className:"tab-content"},{name:"style",title:()=>(0,i.createElement)("span",{className:"kubio-tab-panel"},(0,i.createElement)(In,{icon:Y.StyleIcon}),(0,i.createElement)("span",{className:"kubio-tab-panel-text"},(0,T.__)("Style","kubio"))),className:"tab-style"},{name:"advanced",title:()=>(0,i.createElement)("span",{className:"kubio-tab-panel"},(0,i.createElement)(In,{icon:Y.AdvancedIcon}),(0,i.createElement)("span",{className:"kubio-tab-panel-text"},(0,T.__)("Advanced","kubio"))),className:"tab-advanced"}],Bl=()=>{const e=Nl.content;return(0,i.createElement)("div",{className:"kubio-block-inspector-tab-content default-inspector"},(0,i.createElement)(xl.BlockInspectorTopControls.Slot,{bubblesVirtually:!0}),(0,i.createElement)(e,null))},Ll=(0,E.compose)((0,w.withSelect)((e=>{const{getSelectedBlock:t}=e("core/block-editor"),{hasBlockSupport:n}=e("core/blocks"),o=t();return{isBlockSelected:o&&o.clientId,supportsKubio:o&&(o.name.startsWith("kubio/")||"core/post-content"===o.name||n(o.name,"kubio"))}})))((e=>{let{isBlockSelected:t,supportsKubio:n}=e;const[o,r]=(0,xl.useCurrentInspectorTab)(),{selectedBlockName:a}=(0,w.useSelect)((e=>{const t=e("core/block-editor").getSelectedBlock();return{selectedBlockName:null==t?void 0:t.name}})),l=(0,i.useRef)(!0);(0,i.useMemo)((()=>{l.current=!0}),[a]);const s=(0,w.useSelect)((e=>{const{getKubioEditorMode:t}=e("kubio/edit-site")||{};return"simple"===(null==t?void 0:t())}),[]),c=(0,i.useMemo)((()=>zl.filter((e=>s&&"advanced"===e.name?null:e))),[s]);return t?n?(0,i.createElement)(P.TabPanel,{className:"kubio-advanced-block-inspector",currentTab:o,onSelect:r,tabs:c},(e=>{let t=Nl[e.name];return!0===l.current&&(t=Nl.content,"content"===e.name&&(l.current=!1)),(0,i.createElement)("div",{className:"kubio-block-inspector-tab-content kubio-inspector"},(0,i.createElement)(xl.BlockInspectorTopControls.Slot,{bubblesVirtually:!0}),(0,i.createElement)(t,null))})):(0,i.createElement)(Bl,null):null})),Fl=window.kubio.styleManager,Gl="editor-styles-wrapper",Hl="wp-editor-classic-layout-styles",jl=e=>{if("BUTTON"===e.nodeName){const t=["forminator-ui","wpcf7-form ","wpforms-form","mc4wp-form"],n=e.closest("form"),o=t.some((e=>{var t;return null==n||null===(t=n.classList)||void 0===t?void 0:t.contains(e)}));if(n&&!n.getAttribute("action")&&!o)return}e.addEventListener("click",(e=>{e.preventDefault()}))},Ul=(0,i.forwardRef)((function(e,t){let{contentRef:n,children:o,head:r,headHTML:a,contentHolderSelector:l,assetsHolderSelector:c,src:u,onLoad:d=m.noop,execStylesheetCompat:p=!0,...g}=e;const[b,v]=(0,i.useState)(),[_,y]=(0,i.useState)(),k=(0,f.useCurrentPageBodyClasses)(),S=(0,f.useSetGlobalSessionProp)("ownerDocument"),I=(0,f.useSetGlobalSessionProp)("blockEditorRootClasses",""),x=(0,i.useRef)(),P=(0,f.useGetGlobalSessionProp)("ready",!1),{currentTemplateSource:R,kubioThemesBaseURL:O,isInserterOpen:A,isListViewOpen:N}=(0,w.useSelect)((e=>{const{getCurrentKubioTemplateSource:t,getSettings:n}=e(h.STORE_KEY);return{currentTemplateSource:t(),kubioThemesBaseURL:n().kubioThemesBaseURL,isInserterOpen:e(h.STORE_KEY).getOpenedInserter(),isListViewOpen:e(h.STORE_KEY).isListViewOpened()}}),[]);(0,i.useEffect)((()=>{!P&&u&&(v(null),y(null),S(window.document),(0,Fl.removeStyleManager)(b))}),[u,P]),(0,i.useEffect)((()=>{if(!P||!b)return;let e=!1;const t=P&&u&&b;P&&!u&&b&&["kubio-custom","kubio"].includes(R)&&(e=!0),["kubio-custom","kubio"].includes(R)?(e=>{let t=e.querySelector(".kubio-block-vars-reset");t||(t=e.createElement("style"),t.classList.add("kubio-block-vars-reset"),t.textContent="\n\t\t:root,\n\t\tbody,\n\t\tbody *,\n\t\t.editor-styles-wrapper .block-editor-block-list__layout.is-root-container > *\n\t\t{\n\t\t\t--wp--style--block-gap:0px;\n\t\t\t--gallery-block--gutter-size:0.5em;\n\t\t\t--global-content-width: unset;\n\t\t}",e.head.appendChild(t))})(b):(e=>{const t=e.querySelector(".kubio-block-vars-reset");var n;t&&(null==t||null===(n=t.remove)||void 0===n||n.call(t))})(b),b.querySelectorAll(`link[href^="${O}"]`).forEach((t=>{const n=null==t?void 0:t.id.replace(/(.*?)-css$/,"$1");n&&b.querySelectorAll(`style[id*="${n}-"]`).forEach((t=>{t.sheet&&(t.sheet.disabled=e)})),t.sheet&&(t.sheet.disabled=e)})),b.querySelectorAll(["wp-reset-editor-styles-css","wp-editor-classic-layout-styles-css","common-css","forms-css"].map((e=>`link#${e}`))).forEach((e=>{e.sheet&&(e.sheet.disabled=t)}))}),[P,u,R,b,O]),(0,i.useEffect)((()=>{if(b&&k.length){const e=Array.from(b.body.classList);b.body.setAttribute("class",(0,m.uniq)(e.concat(k)).join(" "))}}),[b,k]);const[,M]=(0,f.useGlobalSessionProp)("blocksOwnerDocument",null,[]),[,D]=(0,f.useGlobalSessionProp)("currentPageHasBlocksContent",null,[]),z=(0,i.useCallback)((e=>{function t(){const{contentDocument:t}=e,{readyState:o,body:r}=t;if("complete"!==o)return!1;"function"==typeof n?n(r):n&&(n.current=r);const i=["a",'[type="submit"]',"form button"];new t.defaultView.MutationObserver((function(e){(0,m.each)(e,(function(e){e.target.querySelectorAll(i.join(",")).forEach(jl)}))})).observe(t,{childList:!0,subtree:!0}),t.querySelectorAll(i.join(",")).forEach(jl),p&&function(e){const t=new Map;Array.from(document.styleSheets).forEach((n=>{try{n.cssRules}catch(e){return}const{ownerNode:o,cssRules:r}=n;if(!r)return;Array.from(r).find((e=>{let{selectorText:t}=e;return t&&(t.includes(`.${Gl}`)||t.includes(".wp-block"))}))&&!t.has(o)&&(o.id&&-1!==o.id.indexOf(Hl)||o.href&&-1!==o.href.indexOf(Hl)?e.head.prepend(o.cloneNode(!0)):e.head.appendChild(o.cloneNode(!0)),t.set(o,!0))}))}(t),t.defaultView.isKubioBlockEditor=!0,t.defaultView.isInsideIframe=!0,t.defaultView.requestIdleCallback=t.defaultView.requestIdleCallback||function(e){const t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))})}),1)},t.defaultView.cancelIdleCallback=t.defaultView.cancelIdleCallback||function(e){clearTimeout(e)},function(e,t){e.head.innerHTML="<style>/* head style start */</style>"+t+"<style>/* head style end */</style><style>*{scroll-behavior:  auto !important; html{height:auto!important}}</style>"+e.head.innerHTML}(t,a),function(e){const{defaultView:t}=e,{frameElement:n}=t;function o(e){const{keyCode:o,ctrlKey:r,metaKey:a}=e;if((65===o||95===o)&&(r||a)){const t=e.target.hasAttribute("contenteditable")?e.target:e.target.closest("[contenteditable]");if(t)return((e,t)=>(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),e&&e.ownerDocument.execCommand("selectAll",!1,null),!1))(t,e)}const i=Object.getPrototypeOf(e).constructor.name,l=window[i],s={};for(const t in e)s[t]=e[t];if(e instanceof t.MouseEvent){const e=n.getBoundingClientRect();s.clientX+=e.left,s.clientY+=e.top}const c=new l(e.type,s);!n.dispatchEvent(c)&&e.preventDefault()}const r=["keydown","keypress","dragover"];for(const t of r)e.addEventListener(t,o)}(t),v(t),S(t);let s=l&&t.querySelector(l),c="";if(l&&s){const e=s.parentElement;1===e.children.length&&(s.remove(),s=e),c=s.getAttribute("class"),s.setAttribute("class","kubio-hybrid-template-content-edit")}I(c);let h=t.body;return s?h=s:(u||l)&&(h.classList.add("kubio-hybrid-no-block-content"),D(!1)),h.classList.add(Gl),h.classList.add("wp-embed-responsive"),d(e,t),y(h),M(t),!0}e&&(e.contentDocument.body.parentElement.className="kubio-iframe",u?e.addEventListener("load",(()=>{t()})):t()||e.addEventListener("load",(()=>{t()})))}),[]),B=(0,i.useMemo)((()=>!!b&&(c&&b.querySelector(c)||b.head)),[c,b]),L=(0,i.useMemo)((()=>({ownerDocument:b||window.document})),[b]);return(0,i.createElement)(s.OwnerDocumentContext.Provider,{value:L},(0,i.createElement)("iframe",C({},g,{ref:(0,E.useMergeRefs)([t,z,x]),tabIndex:"0",title:(0,T.__)("Editor canvas","kubio"),className:"kubio-iframe",name:"editor-canvas",src:u}),_&&(0,i.createPortal)(o,_),B&&(0,i.createPortal)(r,B)))})),Wl=async(e,t)=>new Promise((n=>{if(-1!==Array.from(e.ownerDocument.querySelectorAll("script[src]")).map((e=>e.src)).indexOf(t))return;const o=e.ownerDocument.createElement("script");o.async=!0,o.src=t,e.appendChild(o),o.addEventListener("load",n)})),Vl=(0,m.debounce)((async function(e,t){for((arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.noop)(),t=window.structuredClone(t);t.length;){const n=t.shift();await Wl(e,n)}}),1e3),Kl=[{value:"infographic-label",label:(0,T.__)("infographic label","kubio")},{value:"infographic-number",label:(0,T.__)("infographic number","kubio")},{value:"address",label:(0,T.__)("address","kubio")},{value:"phone",label:(0,T.__)("phone number","kubio")},{value:"email",label:(0,T.__)("email","kubio")}],$l=e=>{let{setIsModalVisible:t}=e;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.MenuGroup,null,(0,i.createElement)(k.MenuItem,{onClick:()=>t(!0)},(0,T.__)("AI block short desc","kubio"))))},ql=()=>{const[e,t]=(0,i.useState)(!1),[n,o]=(0,i.useState)(""),r=(0,i.useRef)({clientId:null,onClose:m.noop}),{dataHelper:a}=(0,s.useKubioDataHelper)({clientId:r.current.clientId});(0,i.useEffect)((()=>{o(a.getAttribute("kubioAI.desc",""))}),[a,r.current.clientId]);const l=(0,i.useCallback)((()=>{a.setAttribute("kubioAI.desc",n||""),t(!1),r.current.onClose()}),[a,n]),c=(0,i.useCallback)((()=>{t(!1),r.current.onClose()}),[]),u=(0,i.useCallback)(((e,n)=>{r.current={clientId:n,onClose:e},t(!0)}),[]);return(0,i.createElement)(i.Fragment,null,e&&(0,i.createElement)(k.Modal,{title:(0,T.__)("Element short description","kubio"),shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,onRequestClose:c},(0,i.createElement)(k.BaseControl,null,(0,i.createElement)(P.SuggestionsInput,{label:(0,T.__)("Description","kubio"),options:Kl,value:n,onChange:o,filterKeys:["value","label"],onSuggestionClick:(e,t)=>t(e.value),optionRender:e=>(0,i.createElement)("div",{className:"kubio-ai-language-style-select-item"},(0,i.createElement)("span",null,e.label),(0,i.createElement)("i",null,e.value))})),(0,i.createElement)(k.Flex,{align:"flex-start"},(0,i.createElement)(k.Button,{variant:"primary",onClick:l},(0,T.__)("Save","kubio")),(0,i.createElement)(k.Button,{variant:"secondary",onClick:c},(0,T.__)("Cancel","kubio")))),(0,i.createElement)(y.BlockSettingsMenuControls,null,(e=>{let{onClose:t,firstBlockClientId:n}=e;return(0,i.createElement)($l,{setIsModalVisible:()=>u(t,n)})})))},Yl=e=>{const{children:t,className:n}=e,o=(0,i.useRef)(),r=(0,i.useRef)(),[a,l]=(0,f.useGlobalSessionProp)("containerBgMediaUploadRef",{dataHelper:null,ref:null,blockId:null,value:null});(0,i.useEffect)((()=>{null!==r.current&&l({...a,ref:r})}),[r.current]);const s=(0,f.useGetGlobalSessionProp)("ready",!1);(0,i.useLayoutEffect)((()=>{const e=o.current;if(e&&s){var t;const n=null===(t=e.ownerDocument.querySelector("#kubio-scripts-template"))||void 0===t?void 0:t.content.querySelectorAll("script");n&&Vl(e.ownerDocument.head,Array.from(n).map((e=>{let{src:t}=e;return t})).filter(Boolean))}}),[s]);const c=(0,w.useSelect)((e=>{var t;const{getSettings:n}=e(y.store);return null===(t=n())||void 0===t?void 0:t.supportsLayout}),[]),u=(0,y.useSetting)("layout")||{},{contentSize:d,wideSize:m}=u,p={type:"default",alignments:(0,i.useMemo)((()=>{const e=["left","center","right"];return d&&e.push("full"),m&&e.push("wide"),c?e:void 0}),[c,d,m])};return(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",{ref:o}),(0,i.createElement)(y.WritingFlow,null,(0,i.createElement)(y.BlockList,{__experimentalLayout:p,className:x()(n,"edit-site-block-editor__block-list","kubio-block-editor__block-list"),renderAppender:Wo.KubioBlockAppender}),(0,q.getShowInternalFeatures)("ai")&&(0,i.createElement)(ql,null),t),(0,i.createElement)(y.MediaUploadCheck,null,(0,i.createElement)(y.MediaUpload,{allowedTypes:["image","video"],value:a.value,onSelect:e=>{const{dataHelper:t}=a;if(!t)return;const n=t.getStyle("background");"image"===n.type&&"image"===e.type?n.image[0].source.url=e.url:"video"===n.type&&"video"===e.type&&(n.video.internal.url=e.url),t.setStyle("background",n)},render:e=>{let{open:t}=e;return(0,i.createElement)("div",{ref:r,onClick:t})}})))};var Xl=n(9457),Zl=n.n(Xl);const Jl=()=>(0,i.createElement)("div",{className:"kubio-loading-logo"},(0,i.createElement)(k.Icon,{icon:Y.KubioLoader})),Ql=(0,i.memo)((()=>{const e=(0,E.useRefEffect)((e=>{e.contentWindow.document.open(),e.contentWindow.document.write(Zl()),e.contentWindow.document.close();const t=e.contentDocument||e.contentWindow.document,n=null==t?void 0:t.querySelector("#content");n&&(0,s.reactRender)((0,i.createElement)(Jl,null),n)}),[]);return(0,i.createElement)("iframe",{title:"kubio-loader",ref:e,className:"kubio-loading-logo-iframe"})}));let es;const ts=(e,t)=>{var n,o;e&&(null===(n=e.querySelector("#kubio-editor-view"))||void 0===n||null===(o=n.classList)||void 0===o||o.remove("device-change-animation"),t?es=e.defaultView.setTimeout((()=>{e.body.classList.add("kubio-iframe-holder--show"),e.body.classList.remove("kubio-iframe-holder--hide"),e.body.classList.remove("h-ui-disable-transitions")}),100):(e.defaultView.clearTimeout(es),e.body.classList.remove("kubio-iframe-holder--show"),e.body.classList.add("kubio-iframe-holder--hide"),e.body.classList.add("h-ui-disable-transitions")))},ns=(0,E.pure)((e=>{let{iframe:t,deviceType:n}=e;const o=(0,y.__experimentalUseResizeCanvas)(n,!0),r=(0,i.useRef)(),a=(0,i.useRef)(),l=(0,i.useRef)(),s=(0,E.useMergeRefs)([r,(0,y.__unstableUseTypingObserver)()]);return(0,f.useEditorIsLoadedChanged)((e=>{var t,n;ts(null===(t=l.current)||void 0===t?void 0:t.ownerDocument,e),ts(null===(n=r.current)||void 0===n?void 0:n.ownerDocument,e)})),(0,i.createElement)(i.Fragment,null,(0,i.createElement)(y.BlockTools,{className:"kubio-block-tools",__unstableContentRef:r},(0,i.createElement)("div",{id:"kubio-editor-view",ref:a},(0,i.createElement)("div",{id:"kubio-iframe-holder",className:"editor-styles-wrapper edit-site-block-editor__editor-styles-wrapper",style:o,ref:l},t(s)),(0,i.createElement)(Ql,{key:"kubio-blinking-iframe"}))))})),os="<style>body{width:100%;max-width:100%;overflow-x:hidden;}</style>",rs=()=>{const[e]=(0,b.useIsAIConnected)(),[t,n]=(0,b.useAIServiceInfo)(),o=(0,f.useGetGlobalSessionProp)("ready"),r=(0,i.useRef)(!1),a=(0,i.useRef)(n);a.current=n,(0,i.useEffect)((()=>{!r.current&&o&&e&&(r.current=!0,"started"!==t.state&&"ready"!==t.state)&&(a.current({remainingCredits:0,perPageCredits:1/0,state:"started"}),(async()=>{const{remaining_credits:e=0,per_page_credits:n=480,account_email:o=null,ai_image_cost:r=150,ai_section_cost:i=30}=await(0,b.getAIInfo)();a.current({...t,state:"ready",remainingCredits:e,perPageCredits:n,email:o,aiImageCost:r,aiSectionCost:i})})())}),[o,e,t])},as=window.wp.htmlEntities,is=(e,t)=>`<a ${ls(e)}>${t}</a>`,ls=e=>`href="${e}" target="_blank" rel="noreferrer noopener"`,ss=e=>{const{title:t,foreign_landing_url:n,creator:o,creator_url:r,license:a,license_version:i,license_url:l}=e,s=((e,t)=>{let n=e.trim();return"pdm"!==e&&(n=e.toUpperCase().replace("SAMPLING","Sampling")),t&&(n+=` ${t}`),["pdm","cc0"].includes(e)||(n=`CC ${n}`),n})(a,i),c=(0,as.decodeEntities)(o);let u;return u=c?t?(0,T.sprintf)(// translators: %1s: Title of a media work from Openverse; %2s: Name of the work's creator; %3s: Work's licence e.g: "CC0 1.0".
(0,T._x)('"%1$s" by %2$s/ %3$s',"caption","kubio"),is(n,(0,as.decodeEntities)(t)),r?is(r,c):c,l?is(`${l}?ref=openverse`,s):s):(0,T.sprintf)(// translators: %1s: Link attributes for a given Openverse media work; %2s: Name of the work's creator; %3s: Works's licence e.g: "CC0 1.0".
(0,T._x)("<a %1$s>Work</a> by %2$s/ %3$s","caption","kubio"),ls(n),r?is(r,c):c,l?is(`${l}?ref=openverse`,s):s):t?(0,T.sprintf)(// translators: %1s: Title of a media work from Openverse; %2s: Work's licence e.g: "CC0 1.0".
(0,T._x)('"%1$s"/ %2$s',"caption","kubio"),is(n,(0,as.decodeEntities)(t)),l?is(`${l}?ref=openverse`,s):s):(0,T.sprintf)(// translators: %1s: Link attributes for a given Openverse media work; %2s: Works's licence e.g: "CC0 1.0".
(0,T._x)("<a %1$s>Work</a>/ %3$s","caption","kubio"),ls(n),l?is(`${l}?ref=openverse`,s):s),u.replace(/\s{2}/g," ")},cs=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await(0,w.resolveSelect)(S.store).getMediaItems({...e,orderBy:null!=e&&e.search?"relevance":"date"})).map((e=>{var t,n,o,r;return{...e,alt:e.alt_text,url:e.source_url,previewUrl:null===(t=e.media_details)||void 0===t||null===(n=t.sizes)||void 0===n||null===(o=n.medium)||void 0===o?void 0:o.source_url,caption:null===(r=e.caption)||void 0===r?void 0:r.raw}}))},us=[{name:"images",labels:{name:(0,T.__)("Images","kubio"),search_items:(0,T.__)("Search images","kubio")},mediaType:"image",async fetch(){return cs({...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},media_type:"image"})}},{name:"videos",labels:{name:(0,T.__)("Videos","kubio"),search_items:(0,T.__)("Search videos","kubio")},mediaType:"video",async fetch(){return cs({...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},media_type:"video"})}},{name:"audio",labels:{name:(0,T.__)("Audio","kubio"),search_items:(0,T.__)("Search audio","kubio")},mediaType:"audio",async fetch(){return cs({...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},media_type:"audio"})}},{name:"openverse",labels:{name:(0,T.__)("Openverse","kubio"),search_items:(0,T.__)("Search Openverse","kubio")},mediaType:"image",async fetch(){const e={...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},mature:!1,excluded_source:"flickr,inaturalist,wikimedia",license:"pdm,cc0"},t={per_page:"page_size",search:"q"},n=new URL("https://api.openverse.engineering/v1/images/");Object.entries(e).forEach((e=>{let[o,r]=e;const a=t[o]||o;n.searchParams.set(a,r)}));const o=await window.fetch(n,{headers:{"User-Agent":"WordPress/inserter-media-fetch"}});return(await o.json()).results.map((e=>{var t;return{...e,title:null!==(t=e.title)&&void 0!==t&&t.toLowerCase().startsWith("file:")?e.title.slice(5):e.title,sourceId:e.id,id:void 0,caption:ss(e),previewUrl:e.thumbnail}}))},getReportUrl:e=>{let{sourceId:t}=e;return`https://wordpress.org/openverse/image/${t}/report/`},isExternalResource:!0}],ds=us;function ms(){var e,t;const{setOpenInserter:n}=(0,w.useDispatch)(h.STORE_KEY),{storedSettings:o,canvasMode:r,templateType:a,siteSettings:l}=(0,w.useSelect)((e=>{const{canUser:t,getEntityRecord:o}=e(S.store),{getSettings:r,getCanvasMode:a,getEditedPostType:i}=e(h.STORE_KEY);return{storedSettings:r(n),canvasMode:null==a?void 0:a(),templateType:i(),siteSettings:t("read","settings")?o("root","site"):void 0}}),[]),s=null!==(e=o.__experimentalAdditionalBlockPatterns)&&void 0!==e?e:o.__experimentalBlockPatterns,c=null!==(t=o.__experimentalAdditionalBlockPatternCategories)&&void 0!==t?t:o.__experimentalBlockPatternCategories,{restBlockPatterns:u,restBlockPatternCategories:d,templateSlug:m,userPatternCategories:p}=(0,w.useSelect)((e=>{const{getEditedPostType:t,getEditedPostId:n}=e(h.STORE_KEY),{getEditedEntityRecord:o,getUserPatternCategories:r}=e(S.store),a=o("postType",t(),n());return{restBlockPatterns:e(S.store).getBlockPatterns(),restBlockPatternCategories:e(S.store).getBlockPatternCategories(),templateSlug:a.slug,userPatternCategories:(null==r?void 0:r())||[]}}),[]),g=function(e){const t=null==e?void 0:e.match(/^(category|tag|taxonomy-([^-]+))$|^(((category|tag)|taxonomy-([^-]+))-(.+))$/);let n,o,r,a=!1;if(t)t[1]?n=t[2]?t[2]:t[1]:t[3]&&(n=t[6]?t[6]:t[4],o=t[7]),n="tag"===n?"post_tag":n;else{const t=null==e?void 0:e.match(/^(author)$|^author-(.+)$/);t&&(a=!0,t[2]&&(r=t[2]))}return(0,w.useSelect)((e=>{const{getEntityRecords:t,getTaxonomy:i,getAuthors:l}=e(S.store);let s,c;var u,d;if(n&&(s=null===(u=i(n))||void 0===u||null===(d=u.labels)||void 0===d?void 0:d.singular_name),o){const e=t("taxonomy",n,{slug:o,per_page:1});e&&e[0]&&(c=e[0].name)}if(a&&(s="Author",r)){const e=l({slug:r});e&&e[0]&&(c=e[0].name)}return{archiveTypeLabel:s,archiveNameLabel:c}}),[r,a,n,o])}(m),f=(0,i.useMemo)((()=>[...s||[],...u||[]].filter(((e,t,n)=>t===n.findIndex((t=>e.name===t.name)))).filter((e=>{let{postTypes:t}=e;return!t||Array.isArray(t)&&t.includes(a)}))),[s,u,a]),b=(0,i.useMemo)((()=>[...c||[],...d||[]].filter(((e,t,n)=>t===n.findIndex((t=>e.name===t.name))))),[c,d]);return(0,i.useMemo)((()=>{const{__experimentalAdditionalBlockPatterns:e,__experimentalAdditionalBlockPatternCategories:t,focusMode:n,...a}=o;return{...a,inserterMediaCategories:ds,__experimentalBlockPatterns:f,__experimentalBlockPatternCategories:b,__experimentalUserPatternCategories:p,focusMode:("view"!==r||!n)&&n,__experimentalArchiveTitleTypeLabel:g.archiveTypeLabel,__experimentalArchiveTitleNameLabel:g.archiveNameLabel,pageOnFront:null==l?void 0:l.page_on_front,pageForPosts:null==l?void 0:l.page_for_posts}}),[o,f,b,p,r,g.archiveTypeLabel,g.archiveNameLabel,null==l?void 0:l.page_on_front,null==l?void 0:l.page_for_posts])}const ps=(0,E.createHigherOrderComponent)((e=>t=>{const{templateType:n,page:o,deviceType:r,templateId:a}=(0,w.useSelect)((e=>{const{getTemplateType:t,getTemplateId:n,getPage:o,__experimentalGetPreviewDeviceType:r}=e(h.STORE_KEY);return{templateType:t(),templateId:n(),page:o(),deviceType:r()}}),[]),l={settings:ms(),templateType:n,page:o,deviceType:r,templateId:a};return o||n?(0,i.createElement)(e,C({},t,l)):null}),"currentEditorEntity"),hs=(0,E.compose)(ps,E.pure)((function(e){let{settings:t,templateType:n,page:o,deviceType:r,templateId:a}=e;rs();const[l,s,c]=(0,S.useEntityBlockEditor)("postType",n,{id:a}),{setPage:u}=(0,w.useDispatch)(h.STORE_KEY),d=(0,y.__unstableUseMouseMoveTypingReset)(),m=window.__kubioEditorStyles.html+os,p=(0,w.useSelect)((e=>{const t=e(h.STORE_KEY).getCurrentKubioTemplateSource();return null==t?void 0:t.startsWith("kubio")}),[n,a]),g=(0,i.useMemo)((()=>t.styles),[p,t.styles]),f=(0,i.useCallback)((e=>(0,i.createElement)(Ul,{headHTML:m,ref:d,head:(0,i.createElement)(y.__unstableEditorStyles,{styles:g}),contentRef:e},(0,i.createElement)(Yl,null))),[d,m,g]);return(0,i.createElement)(y.BlockEditorProvider,{settings:t,value:l,onInput:s,onChange:c,useSubRegistry:!1},(0,i.createElement)(y.BlockEditorKeyboardShortcuts,null),(0,i.createElement)(y.__experimentalLinkControl.ViewerFill,null,(0,i.useCallback)((e=>(0,i.createElement)(Ar,C({},e,{activePage:o,onActivePageChange:u}))),[o])),(0,i.createElement)(Al,null,(0,i.createElement)(Ll,null)),(0,i.createElement)(ns,{deviceType:r,iframe:f}))})),gs=function(){var e,t;rs();const{setOpenInserter:n}=(0,w.useDispatch)(h.STORE_KEY),[o,r]=(0,i.useState)({}),{page:a,deviceType:l,classicTemplateId:s}=(0,w.useSelect)((e=>{const{getEntity:t,getPage:n,getClassicTemplateId:o,__experimentalGetPreviewDeviceType:r}=e(h.STORE_KEY);return{entity:t(),page:n(),classicTemplateId:o(),deviceType:r()}}),[n]),c=ms();(0,i.useEffect)((()=>{J()(a,o)||r(a)}),[a]);const[u,d,m]=(0,S.useEntityBlockEditor)("postType",null==o||null===(e=o.context)||void 0===e?void 0:e.postType,{id:null==o||null===(t=o.context)||void 0===t?void 0:t.postId}),{setPage:p}=(0,w.useDispatch)(h.STORE_KEY),g=(0,y.__unstableUseMouseMoveTypingReset)(),b=(0,f.useSetGlobalSessionProp)("ready"),v=(e,t)=>{t.body.id="kubio",b(!0)},_=window.__kubioEditorStyles.html+os,k=(0,f.useGetGlobalSessionProp)("blockEditorRootClasses",""),E=(0,i.useCallback)((e=>(null==o?void 0:o.path)&&(0,i.createElement)(Ul,{headHTML:_,ref:g,contentRef:e,src:(0,di.addQueryArgs)(null==o?void 0:o.path,{"__kubio-site-edit-iframe-preview":!0,"__kubio-site-edit-iframe-classic-template":s}),contentHolderSelector:"#kubio-site-edit-content-holder",assetsHolderSelector:"#kubio-site-edit-assets-holder",onLoad:v,execStylesheetCompat:!1},(0,i.createElement)(Yl,{className:k},(0,i.createElement)(P.LayoutPicker,null)))),[null==o?void 0:o.path,g,_,_,c.styles,k]);return(0,i.createElement)(y.BlockEditorProvider,{settings:c,value:u,onInput:d,onChange:m,useSubRegistry:!1},(0,i.createElement)(y.BlockEditorKeyboardShortcuts,null),(0,i.createElement)(y.__experimentalLinkControl.ViewerFill,null,(0,i.useCallback)((e=>(0,i.createElement)(Ar,C({},e,{activePage:o,onActivePageChange:p}))),[o])),(0,i.createElement)(Al,null,(0,i.createElement)(Ll,null)),(0,i.createElement)(ns,{deviceType:l,iframe:E}))},fs=()=>{const[e,t]=(0,i.useState)([]),n=(0,w.useSelect)((e=>{const{getEntityRecords:t}=e("core");return t("postType","kubio_section",{per_page:-1})}),[]),o="kubio-content/custom";return(0,i.useEffect)((()=>{let r=e;null==n||n.forEach((t=>{if(e.includes(t.id))return;const n={name:`${o}/custom-section/${t.id}`,title:t.title.rendered,categories:[o],description:(0,T.__)("Custom section","kubio"),screenshot:!1,fromColibri:!0,fromFirebase:!0,isCustomSection:!0,isProOnFree:!1,isGutentagPattern:!0,content:JSON.parse(t.content.raw),internalTags:[],publicTags:[]};(0,l.registerPattern)(n),r=[...r,t.id]})),t(r)}),[n,e]),null};function bs(e){let{record:t,checked:n,onChange:o,closePanel:r}=e;const{name:a,kind:l,title:s,key:c}=t,u=(0,w.useSelect)((e=>{var t;const{blocks:n=[]}=e("core").getEditedEntityRecord(l,a,c),o=e("core/block-editor").getBlockParents(null===(t=n[0])||void 0===t?void 0:t.clientId);return o[o.length-1]}),[]),d=(0,w.useSelect)((e=>{if("postType"!==l||"wp_template"!==a)return s;const t=e("core").getEditedEntityRecord(l,a,c);return e("core/editor").__experimentalGetTemplateInfo(t).title}),[a,l,s,c]),m=(0,w.useSelect)((e=>e("core/block-editor").getSelectedBlockClientId()===u),[u]),p=m?(0,T.__)("Selected","kubio"):(0,T.__)("Select","kubio"),{selectBlock:h}=(0,w.useDispatch)("core/block-editor"),g=(0,i.useCallback)((()=>h(u)),[u]),f=(0,i.useCallback)((()=>{h(u),r()}),[u]);return(0,i.createElement)(k.PanelRow,null,(0,i.createElement)(k.CheckboxControl,{label:(0,i.createElement)("strong",null,d||(0,T.__)("Untitled","kubio")),checked:n,onChange:o}),u?(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.Button,{onClick:g,className:"entities-saved-states__find-entity",disabled:m},p),(0,i.createElement)(k.Button,{onClick:f,className:"entities-saved-states__find-entity-small",disabled:m},p)):null)}const vs={site:(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})),page:(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M7 5.5h10a.5.5 0 01.5.5v12a.5.5 0 01-.5.5H7a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM17 4H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V6a2 2 0 00-2-2zm-1 3.75H8v1.5h8v-1.5zM8 11h8v1.5H8V11zm6 3.25H8v1.5h6v-1.5z"}))};function _s(e){let{list:t,unselectedEntities:n,setUnselectedEntities:o,closePanel:r}=e;const a=t[0],l=(0,w.useSelect)((e=>e("core").getEntity(a.kind,a.name)),[a.kind,a.name]),{name:s}=a,c=vs[s];return(0,i.createElement)(k.PanelBody,{title:l.label,initialOpen:!0,icon:c},t.map((e=>(0,i.createElement)(bs,{key:e.key||`${e.kind}-${e.name}-${e.property}`,record:e,checked:!(0,m.some)(n,(t=>t.kind===e.kind&&t.name===e.name&&t.key===e.key)),onChange:t=>o(e,t),closePanel:r}))))}const ys={title:(0,T.__)("Title","kubio"),description:(0,T.__)("Tagline","kubio"),site_logo:(0,T.__)("Logo","kubio"),sitelogo:(0,T.__)("Logo","kubio"),show_on_front:(0,T.__)("Show on front","kubio"),page_on_front:(0,T.__)("Page on front","kubio")},ks={wp_template_part:e=>(0,T._n)("template part","template parts",e,"kubio"),wp_template:e=>(0,T._n)("template","templates",e,"kubio"),post:e=>(0,T._n)("post","posts",e,"kubio"),page:e=>(0,T._n)("page","pages",e,"kubio"),site:e=>(0,T._n)("site","sites",e,"kubio")},Es=(0,k.withFocusReturn)((function(e){let{isOpen:t,close:n}=e;const{dirtyEntityRecords:o}=(0,w.useSelect)((e=>{const t=e(S.store).__experimentalGetDirtyEntityRecords().filter((e=>!("root"===e.kind&&"site"===e.name))),n=e(S.store).getEntityRecordEdits("root","site"),o=[];for(const e in n)o.push({kind:"root",name:"site",title:ys[e]||e,property:e});return{dirtyEntityRecords:[...t,...o]}}),[]),{saveEditedEntityRecord:r}=(0,w.useDispatch)("core"),a=Object.values((0,m.groupBy)(o,"name")),l=[];a.forEach((e=>{ks[e[0].name]&&l.push(ks[e[0].name](e.length))}));const[s,c]=(0,i.useState)([]),u=(e,t)=>{let{kind:n,name:o,key:r}=e;c(t?s.filter((e=>e.kind!==n||e.name!==o||e.key!==r)):[...s,{kind:n,name:o,key:r}])},d=(0,i.useCallback)((()=>n()),[n]),p=(0,T.__)("Save","kubio");return t?(0,i.createElement)("div",{className:"entities-saved-states__panel kubio-entities-saved-states__panel"},(0,i.createElement)("div",{className:"entities-saved-states__panel-header"},(0,i.createElement)(k.Button,{isPrimary:!0,disabled:o.length-s.length==0,onClick:()=>{const e=(()=>{const e=o.filter((e=>{let{kind:t,name:n,key:o}=e;return!(0,m.some)(s,(e=>e.kind===t&&e.name===n&&e.key===o))}));return e})();n(e),e.forEach((e=>{let{kind:t,name:n,key:o}=e;r(t,n,o)}))},className:"editor-entities-saved-states__save-button"},p),(0,i.createElement)(k.Button,{onClick:d,icon:De,label:(0,T.__)("Close panel","kubio")})),(0,i.createElement)("div",{className:"entities-saved-states__text-prompt"},(0,i.createElement)("strong",null,(0,T.__)("Select the changes you want to save","kubio")),(0,i.createElement)("p",null,(0,T.__)("Some changes may affect other areas of your site.","kubio"))),a.map((e=>(0,i.createElement)(_s,{key:e[0].name,list:e,closePanel:d,unselectedEntities:s,setUnselectedEntities:u})))):null})),Ss=(0,i.createElement)(R.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,i.createElement)(R.Path,{d:"M3 6h11v1.5H3V6Zm3.5 5.5h11V13h-11v-1.5ZM21 17H10v1.5h11V17Z"})),ws=["front-page","single-post","page","archive","search","404","index"],Cs="root",Is="template-parts",xs="templates",Ts="templates-general",Ps="templates-pages",Rs="templates-posts",Os="kubio__custom-templates",As="kubio__theme-templates",Ns="kubio__kubio-templates",Ms=[{area:"header",menu:"template-parts-headers",title:(0,T.__)("Headers","kubio")},{area:"footer",menu:"template-parts-footers",title:(0,T.__)("Footers","kubio")},{area:"sidebar",menu:"template-parts-sidebars",title:(0,T.__)("Sidebars","kubio")},{area:"uncategorized",menu:"template-parts-general",title:(0,T.__)("General","kubio")}];function Ds(e){let{openEntitiesSavedStates:t}=e;const{saveEditedEntityRecord:n}=(0,w.useDispatch)("core"),{isSaving:o,isDirty:r}=(0,w.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t,isSavingEntityRecord:n}=e("core"),o=t();return{isDirty:o.length>0,isSaving:(0,m.some)(o,(e=>n(e.kind,e.name,e.key)))}})),a=!r||o,l=(0,T.__)("Save","kubio"),{dirtyEntityRecords:s}=(0,w.useSelect)((e=>{const t=e(S.store).__experimentalGetDirtyEntityRecords().filter((e=>!("root"===e.kind&&"site"===e.name))),n=e(S.store).getEntityRecordEdits("root","site"),o=[];for(const e in n)o.push({kind:"root",name:"site",property:e});return{dirtyEntityRecords:[...t,...o]}}),[]);return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.Button,{isPrimary:!0,className:"edit-site-save-button__button","aria-disabled":a,disabled:a,isBusy:o,onClick:a?void 0:()=>{s.forEach((e=>{let{kind:t,name:o,key:r}=e;n(t,o,r)}))}},l),(0,i.createElement)(k.Button,{isPrimary:!0,icon:Y.ArrowDown,iconSize:24,className:"edit-site-save-button__dropdown","aria-disabled":a,disabled:a,onClick:a?void 0:t}))}const zs=window.kubio.adminPanel,Bs=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})),Ls=window.wp.a11y;function Fs(e){let{feature:t,label:n,info:o,messageActivated:r,messageDeactivated:a}=e;const l=(0,w.useSelect)((e=>e(h.STORE_KEY).isFeatureActive(t)),[]),{toggleFeature:s}=(0,w.useDispatch)(h.STORE_KEY);return(0,i.createElement)(k.MenuItem,{icon:l&&A,isSelected:l,onClick:(0,m.flow)(s.bind(null,t),(()=>{l?(0,Ls.speak)(a||(0,T.__)("Feature deactivated","kubio")):(0,Ls.speak)(r||(0,T.__)("Feature activated","kubio"))})),role:"menuitemcheckbox",info:o},n)}const Gs={className:"edit-site-more-menu__content",position:"bottom left"},Hs={tooltipPosition:"bottom"},js=()=>{const e=(0,zs.useColibriConvertProps)(),[t,n]=(0,i.useState)(!1);return(0,i.createElement)(k.MenuItem,{onClick:async()=>{n(!0),await(0,zs.convertSiteTemplate)(e),n(!1)},role:"menuitemcheckbox"},(0,T.__)("Convert Colibri Site","kubio"),t&&(0,i.createElement)(k.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,isDismissible:!1,title:(0,T.__)("Convert Colibri template","kubio"),onRequestClose:()=>n(!0)},(0,T.__)("Converting template…","kubio")))},Us=()=>{const{isGutentagDebug:e,baseUrl:t,currentPage:n,hasBlockSelected:o,isAICapabilityEnabled:r}=(0,w.useSelect)((e=>{const{isGutentagDebug:t=p().noop,getPage:n=p().noop,isAICapabilityEnabled:o}=e(h.STORE_KEY)||{},{url:r}=e("core").getEntityRecord("root","site")||{};return{isGutentagDebug:t(),currentPage:n(),baseUrl:r,hasBlockSelected:!!e("core/block-editor").getSelectedBlockClientId(),isAICapabilityEnabled:o()}}),[]),a=(0,i.useRef)(m.noop),l=()=>{const e=null==n?void 0:n.link,o=encodeURIComponent(e);window.open(`${t}/wp-admin/customize.php?url=${o}`).focus()},{toggleGutentagDebug:c}=(0,w.useDispatch)(h.STORE_KEY),u=(0,q.getShowInternalFeatures)();let d=(0,i.createElement)(i.Fragment,null);var f,v;u&&(d=(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.MenuItem,{icon:e&&A,isSelected:e,onClick:()=>c(!e),role:"menuitemcheckbox"},(0,T.__)("Toggle Kubio debug","kubio")),(null===(f=window)||void 0===f||null===(v=f.kubioUtilsData)||void 0===v?void 0:v.patternsOnTheFly)&&(0,i.createElement)(k.MenuItem,{onClick:()=>window.consoleOutputConvertedData(),role:"menuitemcheckbox"},(0,T.__)("Convert colibri data","kubio")),(0,i.createElement)(k.MenuItem,{onClick:()=>window.kubioSaveConvertedData(),role:"menuitemcheckbox"},(0,T.__)("Save converted content","kubio")),(0,i.createElement)(js,null)));const{uiVersion:_,setUIVersion:y}=(0,g.useUIVersion)(),{openSidebar:E,toggleAICapabilities:S}=(0,w.useDispatch)(h.STORE_KEY),C=()=>{const e=2===_?1:2;y(e),2===e&&E(o?"block-inspector":"document")},[I,x]=ao(),[P,R]=(0,b.useIsAIConnected)(),O=(0,i.useCallback)((()=>{const e=!r;S(e),e&&!P&&(x(),a.current())}),[x,r,P,S]),N=1===_?(0,T.__)("Switch to Kubio Editor layout","kubio"):(0,T.__)("Switch to WordPress Editor layout","kubio"),M=1===_?(0,T.__)("Switch to the new Kubio editor layout for a more friendly editing experience","kubio"):(0,T.__)("Switch to the WordPress editor layout to have the default editing experience","kubio"),D=r?(0,T.__)("Disable Kubio AI capabilities","kubio"):(0,T.__)("Enable Kubio AI capabilities","kubio"),z=r?(0,T.__)("Hide Kubio AI buttons in editors interface","kubio"):(0,T.__)("Show Kubio AI buttons in editors interface","kubio"),[B]=(0,b.useAIServiceInfo)();(0,i.useCallback)((()=>{R(!1),(0,b.setAIKey)("")}),[R]);let L=(0,i.createElement)(i.Fragment,null);if((0,q.getShowInternalFeatures)("cloud")){const[e,t,n]=(0,s.useKubioCloudConnect)();L=(0,i.createElement)(k.MenuGroup,{label:"Kubio Cloud"},"connected"!==e.status?(0,i.createElement)(k.MenuItem,{iconPosition:"left",onClick:t,info:(0,T.__)("Connect this site to Kubio Cloud","kubio")},(0,T.__)("Connect to Kubio Cloud","kubio")):(0,i.createElement)(k.MenuItem,{onClick:n,iconPosition:"left",info:(0,i.createElement)("span",{dangerouslySetInnerHTML:{__html:(0,T.sprintf)(// translators: %s is Kubio Cloud the account email
(0,T.__)("Currently connected as %s","kubio"),`<strong><em>${e.email}</em></strong>`)}})},(0,T.__)("Disconnect from Kubio Cloud","kubio")))}const F=(0,i.createElement)(k.MenuGroup,{label:"Kubio AI"},(0,i.createElement)(k.MenuItem,{onClick:O,iconPosition:"left",info:z},D));return(0,i.createElement)(i.Fragment,null,I,(0,i.createElement)(k.DropdownMenu,{className:"edit-site-more-menu",icon:Bs,label:(0,T.__)("More tools & options","kubio"),popoverProps:Gs,toggleProps:Hs},(e=>{let{onClose:t}=e;return a.current=t,(0,i.createElement)(i.Fragment,null,L,F,(0,i.createElement)(k.MenuGroup,{label:(0,T._x)("View","noun","kubio")},(0,i.createElement)(k.MenuItem,{onClick:C,info:M},N),(0,i.createElement)(Fs,{feature:"focusMode",label:(0,T.__)("Spotlight mode","kubio"),info:(0,T.__)("Focus on one block at a time","kubio"),messageActivated:(0,T.__)("Spotlight mode activated","kubio"),messageDeactivated:(0,T.__)("Spotlight mode deactivated","kubio")}),d,(0,i.createElement)(k.MenuItem,{onClick:l},(0,T.__)("Open theme customizer","kubio")),(0,i.createElement)(Mo.Slot,{name:"kubio/edit-site/plugin-more-menu",label:(0,T.__)("Plugins","kubio"),as:[k.MenuGroup,k.MenuItem],fillProps:{onClick:t}})))})))};var Ws=n(5800);function Vs(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ks}=Object.prototype,{getPrototypeOf:$s}=Object,qs=(Ys=Object.create(null),e=>{const t=Ks.call(e);return Ys[t]||(Ys[t]=t.slice(8,-1).toLowerCase())});var Ys;const Xs=e=>(e=e.toLowerCase(),t=>qs(t)===e),Zs=e=>t=>typeof t===e,{isArray:Js}=Array,Qs=Zs("undefined"),ec=Xs("ArrayBuffer"),tc=Zs("string"),nc=Zs("function"),oc=Zs("number"),rc=e=>null!==e&&"object"==typeof e,ac=e=>{if("object"!==qs(e))return!1;const t=$s(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},ic=Xs("Date"),lc=Xs("File"),sc=Xs("Blob"),cc=Xs("FileList"),uc=Xs("URLSearchParams");function dc(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let o,r;if("object"!=typeof e&&(e=[e]),Js(e))for(o=0,r=e.length;o<r;o++)t.call(null,e[o],o,e);else{const r=n?Object.getOwnPropertyNames(e):Object.keys(e),a=r.length;let i;for(o=0;o<a;o++)i=r[o],t.call(null,e[i],i,e)}}function mc(e,t){t=t.toLowerCase();const n=Object.keys(e);let o,r=n.length;for(;r-- >0;)if(o=n[r],t===o.toLowerCase())return o;return null}const pc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,hc=e=>!Qs(e)&&e!==pc,gc=(fc="undefined"!=typeof Uint8Array&&$s(Uint8Array),e=>fc&&e instanceof fc);var fc;const bc=Xs("HTMLFormElement"),vc=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),_c=Xs("RegExp"),yc=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};dc(n,((n,r)=>{let a;!1!==(a=t(n,r,e))&&(o[r]=a||n)})),Object.defineProperties(e,o)},kc="abcdefghijklmnopqrstuvwxyz",Ec="0123456789",Sc={DIGIT:Ec,ALPHA:kc,ALPHA_DIGIT:kc+kc.toUpperCase()+Ec},wc=Xs("AsyncFunction"),Cc={isArray:Js,isArrayBuffer:ec,isBuffer:function(e){return null!==e&&!Qs(e)&&null!==e.constructor&&!Qs(e.constructor)&&nc(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||nc(e.append)&&("formdata"===(t=qs(e))||"object"===t&&nc(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ec(e.buffer),t},isString:tc,isNumber:oc,isBoolean:e=>!0===e||!1===e,isObject:rc,isPlainObject:ac,isUndefined:Qs,isDate:ic,isFile:lc,isBlob:sc,isRegExp:_c,isFunction:nc,isStream:e=>rc(e)&&nc(e.pipe),isURLSearchParams:uc,isTypedArray:gc,isFileList:cc,forEach:dc,merge:function e(){const{caseless:t}=hc(this)&&this||{},n={},o=(o,r)=>{const a=t&&mc(n,r)||r;ac(n[a])&&ac(o)?n[a]=e(n[a],o):ac(o)?n[a]=e({},o):Js(o)?n[a]=o.slice():n[a]=o};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&dc(arguments[e],o);return n},extend:(e,t,n,{allOwnKeys:o}={})=>(dc(t,((t,o)=>{n&&nc(t)?e[o]=Vs(t,n):e[o]=t}),{allOwnKeys:o}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,o)=>{let r,a,i;const l={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),a=r.length;a-- >0;)i=r[a],o&&!o(i,e,t)||l[i]||(t[i]=e[i],l[i]=!0);e=!1!==n&&$s(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:qs,kindOfTest:Xs,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return-1!==o&&o===n},toArray:e=>{if(!e)return null;if(Js(e))return e;let t=e.length;if(!oc(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=n.next())&&!o.done;){const n=o.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const o=[];for(;null!==(n=e.exec(t));)o.push(n);return o},isHTMLForm:bc,hasOwnProperty:vc,hasOwnProp:vc,reduceDescriptors:yc,freezeMethods:e=>{yc(e,((t,n)=>{if(nc(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const o=e[n];nc(o)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},o=e=>{e.forEach((e=>{n[e]=!0}))};return Js(e)?o(e):o(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:mc,global:pc,isContextDefined:hc,ALPHABET:Sc,generateString:(e=16,t=Sc.ALPHA_DIGIT)=>{let n="";const{length:o}=t;for(;e--;)n+=t[Math.random()*o|0];return n},isSpecCompliantForm:function(e){return!!(e&&nc(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,o)=>{if(rc(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[o]=e;const r=Js(e)?[]:{};return dc(e,((e,t)=>{const a=n(e,o+1);!Qs(a)&&(r[t]=a)})),t[o]=void 0,r}}return e};return n(e,0)},isAsyncFn:wc,isThenable:e=>e&&(rc(e)||nc(e))&&nc(e.then)&&nc(e.catch)};function Ic(e,t,n,o,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),r&&(this.response=r)}Cc.inherits(Ic,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Cc.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const xc=Ic.prototype,Tc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Tc[e]={value:e}})),Object.defineProperties(Ic,Tc),Object.defineProperty(xc,"isAxiosError",{value:!0}),Ic.from=(e,t,n,o,r,a)=>{const i=Object.create(xc);return Cc.toFlatObject(e,i,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Ic.call(i,e.message,t,n,o,r),i.cause=e,i.name=e.name,a&&Object.assign(i,a),i};const Pc=Ic;function Rc(e){return Cc.isPlainObject(e)||Cc.isArray(e)}function Oc(e){return Cc.endsWith(e,"[]")?e.slice(0,-2):e}function Ac(e,t,n){return e?e.concat(t).map((function(e,t){return e=Oc(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Nc=Cc.toFlatObject(Cc,{},null,(function(e){return/^is[A-Z]/.test(e)})),Mc=function(e,t,n){if(!Cc.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const o=(n=Cc.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Cc.isUndefined(t[e])}))).metaTokens,r=n.visitor||c,a=n.dots,i=n.indexes,l=(n.Blob||"undefined"!=typeof Blob&&Blob)&&Cc.isSpecCompliantForm(t);if(!Cc.isFunction(r))throw new TypeError("visitor must be a function");function s(e){if(null===e)return"";if(Cc.isDate(e))return e.toISOString();if(!l&&Cc.isBlob(e))throw new Pc("Blob is not supported. Use a Buffer instead.");return Cc.isArrayBuffer(e)||Cc.isTypedArray(e)?l&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,r){let l=e;if(e&&!r&&"object"==typeof e)if(Cc.endsWith(n,"{}"))n=o?n:n.slice(0,-2),e=JSON.stringify(e);else if(Cc.isArray(e)&&function(e){return Cc.isArray(e)&&!e.some(Rc)}(e)||(Cc.isFileList(e)||Cc.endsWith(n,"[]"))&&(l=Cc.toArray(e)))return n=Oc(n),l.forEach((function(e,o){!Cc.isUndefined(e)&&null!==e&&t.append(!0===i?Ac([n],o,a):null===i?n:n+"[]",s(e))})),!1;return!!Rc(e)||(t.append(Ac(r,n,a),s(e)),!1)}const u=[],d=Object.assign(Nc,{defaultVisitor:c,convertValue:s,isVisitable:Rc});if(!Cc.isObject(e))throw new TypeError("data must be an object");return function e(n,o){if(!Cc.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+o.join("."));u.push(n),Cc.forEach(n,(function(n,a){!0===(!(Cc.isUndefined(n)||null===n)&&r.call(t,n,Cc.isString(a)?a.trim():a,o,d))&&e(n,o?o.concat(a):[a])})),u.pop()}}(e),t};function Dc(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function zc(e,t){this._pairs=[],e&&Mc(e,this,t)}const Bc=zc.prototype;Bc.append=function(e,t){this._pairs.push([e,t])},Bc.toString=function(e){const t=e?function(t){return e.call(this,t,Dc)}:Dc;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Lc=zc;function Fc(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Gc(e,t,n){if(!t)return e;const o=n&&n.encode||Fc,r=n&&n.serialize;let a;if(a=r?r(t,n):Cc.isURLSearchParams(t)?t.toString():new Lc(t,n).toString(o),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}const Hc=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Cc.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},jc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Uc={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Lc,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:(()=>{let e;return("undefined"==typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&"undefined"!=typeof window&&"undefined"!=typeof document})(),isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]},Wc=function(e){function t(e,n,o,r){let a=e[r++];const i=Number.isFinite(+a),l=r>=e.length;return a=!a&&Cc.isArray(o)?o.length:a,l?(Cc.hasOwnProp(o,a)?o[a]=[o[a],n]:o[a]=n,!i):(o[a]&&Cc.isObject(o[a])||(o[a]=[]),t(e,n,o[a],r)&&Cc.isArray(o[a])&&(o[a]=function(e){const t={},n=Object.keys(e);let o;const r=n.length;let a;for(o=0;o<r;o++)a=n[o],t[a]=e[a];return t}(o[a])),!i)}if(Cc.isFormData(e)&&Cc.isFunction(e.entries)){const n={};return Cc.forEachEntry(e,((e,o)=>{t(function(e){return Cc.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),o,n,0)})),n}return null},Vc={transitional:jc,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",o=n.indexOf("application/json")>-1,r=Cc.isObject(e);if(r&&Cc.isHTMLForm(e)&&(e=new FormData(e)),Cc.isFormData(e))return o&&o?JSON.stringify(Wc(e)):e;if(Cc.isArrayBuffer(e)||Cc.isBuffer(e)||Cc.isStream(e)||Cc.isFile(e)||Cc.isBlob(e))return e;if(Cc.isArrayBufferView(e))return e.buffer;if(Cc.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Mc(e,new Uc.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,o){return Uc.isNode&&Cc.isBuffer(e)?(this.append(t,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=Cc.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Mc(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||o?(t.setContentType("application/json",!1),function(e,t,n){if(Cc.isString(e))try{return(0,JSON.parse)(e),Cc.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Vc.transitional,n=t&&t.forcedJSONParsing,o="json"===this.responseType;if(e&&Cc.isString(e)&&(n&&!this.responseType||o)){const n=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw Pc.from(e,Pc.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Uc.classes.FormData,Blob:Uc.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Cc.forEach(["delete","get","head","post","put","patch"],(e=>{Vc.headers[e]={}}));const Kc=Vc,$c=Cc.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),qc=Symbol("internals");function Yc(e){return e&&String(e).trim().toLowerCase()}function Xc(e){return!1===e||null==e?e:Cc.isArray(e)?e.map(Xc):String(e)}function Zc(e,t,n,o,r){return Cc.isFunction(o)?o.call(this,t,n):(r&&(t=n),Cc.isString(t)?Cc.isString(o)?-1!==t.indexOf(o):Cc.isRegExp(o)?o.test(t):void 0:void 0)}class Jc{constructor(e){e&&this.set(e)}set(e,t,n){const o=this;function r(e,t,n){const r=Yc(t);if(!r)throw new Error("header name must be a non-empty string");const a=Cc.findKey(o,r);(!a||void 0===o[a]||!0===n||void 0===n&&!1!==o[a])&&(o[a||t]=Xc(e))}const a=(e,t)=>Cc.forEach(e,((e,n)=>r(e,n,t)));return Cc.isPlainObject(e)||e instanceof this.constructor?a(e,t):Cc.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?a((e=>{const t={};let n,o,r;return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),o=e.substring(r+1).trim(),!n||t[n]&&$c[n]||("set-cookie"===n?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)})),t})(e),t):null!=e&&r(t,e,n),this}get(e,t){if(e=Yc(e)){const n=Cc.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}(e);if(Cc.isFunction(t))return t.call(this,e,n);if(Cc.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Yc(e)){const n=Cc.findKey(this,e);return!(!n||void 0===this[n]||t&&!Zc(0,this[n],n,t))}return!1}delete(e,t){const n=this;let o=!1;function r(e){if(e=Yc(e)){const r=Cc.findKey(n,e);!r||t&&!Zc(0,n[r],r,t)||(delete n[r],o=!0)}}return Cc.isArray(e)?e.forEach(r):r(e),o}clear(e){const t=Object.keys(this);let n=t.length,o=!1;for(;n--;){const r=t[n];e&&!Zc(0,this[r],r,e,!0)||(delete this[r],o=!0)}return o}normalize(e){const t=this,n={};return Cc.forEach(this,((o,r)=>{const a=Cc.findKey(n,r);if(a)return t[a]=Xc(o),void delete t[r];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(r):String(r).trim();i!==r&&delete t[r],t[i]=Xc(o),n[i]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Cc.forEach(this,((n,o)=>{null!=n&&!1!==n&&(t[o]=e&&Cc.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[qc]=this[qc]={accessors:{}}).accessors,n=this.prototype;function o(e){const o=Yc(e);t[o]||(function(e,t){const n=Cc.toCamelCase(" "+t);["get","set","has"].forEach((o=>{Object.defineProperty(e,o+n,{value:function(e,n,r){return this[o].call(this,t,e,n,r)},configurable:!0})}))}(n,e),t[o]=!0)}return Cc.isArray(e)?e.forEach(o):o(e),this}}Jc.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Cc.reduceDescriptors(Jc.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),Cc.freezeMethods(Jc);const Qc=Jc;function eu(e,t){const n=this||Kc,o=t||n,r=Qc.from(o.headers);let a=o.data;return Cc.forEach(e,(function(e){a=e.call(n,a,r.normalize(),t?t.status:void 0)})),r.normalize(),a}function tu(e){return!(!e||!e.__CANCEL__)}function nu(e,t,n){Pc.call(this,null==e?"canceled":e,Pc.ERR_CANCELED,t,n),this.name="CanceledError"}Cc.inherits(nu,Pc,{__CANCEL__:!0});const ou=nu,ru=Uc.isStandardBrowserEnv?{write:function(e,t,n,o,r,a){const i=[];i.push(e+"="+encodeURIComponent(t)),Cc.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),Cc.isString(o)&&i.push("path="+o),Cc.isString(r)&&i.push("domain="+r),!0===a&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function au(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const iu=Uc.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function o(n){let o=n;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=o(window.location.href),function(e){const t=Cc.isString(e)?o(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};function lu(e,t){let n=0;const o=function(e,t){e=e||10;const n=new Array(e),o=new Array(e);let r,a=0,i=0;return t=void 0!==t?t:1e3,function(l){const s=Date.now(),c=o[i];r||(r=s),n[a]=l,o[a]=s;let u=i,d=0;for(;u!==a;)d+=n[u++],u%=e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),s-r<t)return;const m=c&&s-c;return m?Math.round(1e3*d/m):void 0}}(50,250);return r=>{const a=r.loaded,i=r.lengthComputable?r.total:void 0,l=a-n,s=o(l);n=a;const c={loaded:a,total:i,progress:i?a/i:void 0,bytes:l,rate:s||void 0,estimated:s&&i&&a<=i?(i-a)/s:void 0,event:r};c[t?"download":"upload"]=!0,e(c)}}const su="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let o=e.data;const r=Qc.from(e.headers).normalize(),a=e.responseType;let i,l;function s(){e.cancelToken&&e.cancelToken.unsubscribe(i),e.signal&&e.signal.removeEventListener("abort",i)}Cc.isFormData(o)&&(Uc.isStandardBrowserEnv||Uc.isStandardBrowserWebWorkerEnv?r.setContentType(!1):r.getContentType(/^\s*multipart\/form-data/)?Cc.isString(l=r.getContentType())&&r.setContentType(l.replace(/^\s*(multipart\/form-data);+/,"$1")):r.setContentType("multipart/form-data"));let c=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(t+":"+n))}const u=au(e.baseURL,e.url);function d(){if(!c)return;const o=Qc.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(e,t,n){const o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(new Pc("Request failed with status code "+n.status,[Pc.ERR_BAD_REQUEST,Pc.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),s()}),(function(e){n(e),s()}),{data:a&&"text"!==a&&"json"!==a?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:o,config:e,request:c}),c=null}if(c.open(e.method.toUpperCase(),Gc(u,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(d)},c.onabort=function(){c&&(n(new Pc("Request aborted",Pc.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new Pc("Network Error",Pc.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const o=e.transitional||jc;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Pc(t,o.clarifyTimeoutError?Pc.ETIMEDOUT:Pc.ECONNABORTED,e,c)),c=null},Uc.isStandardBrowserEnv){const t=iu(u)&&e.xsrfCookieName&&ru.read(e.xsrfCookieName);t&&r.set(e.xsrfHeaderName,t)}void 0===o&&r.setContentType(null),"setRequestHeader"in c&&Cc.forEach(r.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),Cc.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),a&&"json"!==a&&(c.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&c.addEventListener("progress",lu(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",lu(e.onUploadProgress)),(e.cancelToken||e.signal)&&(i=t=>{c&&(n(!t||t.type?new ou(null,e,c):t),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(i),e.signal&&(e.signal.aborted?i():e.signal.addEventListener("abort",i)));const m=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(u);m&&-1===Uc.protocols.indexOf(m)?n(new Pc("Unsupported protocol "+m+":",Pc.ERR_BAD_REQUEST,e)):c.send(o||null)}))},cu={http:null,xhr:su};Cc.forEach(cu,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const uu=e=>`- ${e}`,du=e=>Cc.isFunction(e)||null===e||!1===e,mu=e=>{e=Cc.isArray(e)?e:[e];const{length:t}=e;let n,o;const r={};for(let a=0;a<t;a++){let t;if(n=e[a],o=n,!du(n)&&(o=cu[(t=String(n)).toLowerCase()],void 0===o))throw new Pc(`Unknown adapter '${t}'`);if(o)break;r[t||"#"+a]=o}if(!o){const e=Object.entries(r).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));let n=t?e.length>1?"since :\n"+e.map(uu).join("\n"):" "+uu(e[0]):"as no adapter specified";throw new Pc("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return o};function pu(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ou(null,e)}function hu(e){return pu(e),e.headers=Qc.from(e.headers),e.data=eu.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),mu(e.adapter||Kc.adapter)(e).then((function(t){return pu(e),t.data=eu.call(e,e.transformResponse,t),t.headers=Qc.from(t.headers),t}),(function(t){return tu(t)||(pu(e),t&&t.response&&(t.response.data=eu.call(e,e.transformResponse,t.response),t.response.headers=Qc.from(t.response.headers))),Promise.reject(t)}))}const gu=e=>e instanceof Qc?e.toJSON():e;function fu(e,t){t=t||{};const n={};function o(e,t,n){return Cc.isPlainObject(e)&&Cc.isPlainObject(t)?Cc.merge.call({caseless:n},e,t):Cc.isPlainObject(t)?Cc.merge({},t):Cc.isArray(t)?t.slice():t}function r(e,t,n){return Cc.isUndefined(t)?Cc.isUndefined(e)?void 0:o(void 0,e,n):o(e,t,n)}function a(e,t){if(!Cc.isUndefined(t))return o(void 0,t)}function i(e,t){return Cc.isUndefined(t)?Cc.isUndefined(e)?void 0:o(void 0,e):o(void 0,t)}function l(n,r,a){return a in t?o(n,r):a in e?o(void 0,n):void 0}const s={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(e,t)=>r(gu(e),gu(t),!0)};return Cc.forEach(Object.keys(Object.assign({},e,t)),(function(o){const a=s[o]||r,i=a(e[o],t[o],o);Cc.isUndefined(i)&&a!==l||(n[o]=i)})),n}const bu={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{bu[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const vu={};bu.transitional=function(e,t,n){function o(e,t){return"[Axios v1.6.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,a)=>{if(!1===e)throw new Pc(o(r," has been removed"+(t?" in "+t:"")),Pc.ERR_DEPRECATED);return t&&!vu[r]&&(vu[r]=!0,console.warn(o(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,a)}};const _u={assertOptions:function(e,t,n){if("object"!=typeof e)throw new Pc("options must be an object",Pc.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let r=o.length;for(;r-- >0;){const a=o[r],i=t[a];if(i){const t=e[a],n=void 0===t||i(t,a,e);if(!0!==n)throw new Pc("option "+a+" must be "+n,Pc.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Pc("Unknown option "+a,Pc.ERR_BAD_OPTION)}},validators:bu},yu=_u.validators;class ku{constructor(e){this.defaults=e,this.interceptors={request:new Hc,response:new Hc}}request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=fu(this.defaults,t);const{transitional:n,paramsSerializer:o,headers:r}=t;void 0!==n&&_u.assertOptions(n,{silentJSONParsing:yu.transitional(yu.boolean),forcedJSONParsing:yu.transitional(yu.boolean),clarifyTimeoutError:yu.transitional(yu.boolean)},!1),null!=o&&(Cc.isFunction(o)?t.paramsSerializer={serialize:o}:_u.assertOptions(o,{encode:yu.function,serialize:yu.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=r&&Cc.merge(r.common,r[t.method]);r&&Cc.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete r[e]})),t.headers=Qc.concat(a,r);const i=[];let l=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));const s=[];let c;this.interceptors.response.forEach((function(e){s.push(e.fulfilled,e.rejected)}));let u,d=0;if(!l){const e=[hu.bind(this),void 0];for(e.unshift.apply(e,i),e.push.apply(e,s),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=i.length;let m=t;for(d=0;d<u;){const e=i[d++],t=i[d++];try{m=e(m)}catch(e){t.call(this,e);break}}try{c=hu.call(this,m)}catch(e){return Promise.reject(e)}for(d=0,u=s.length;d<u;)c=c.then(s[d++],s[d++]);return c}getUri(e){return Gc(au((e=fu(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}Cc.forEach(["delete","get","head","options"],(function(e){ku.prototype[e]=function(t,n){return this.request(fu(n||{},{method:e,url:t,data:(n||{}).data}))}})),Cc.forEach(["post","put","patch"],(function(e){function t(t){return function(n,o,r){return this.request(fu(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}ku.prototype[e]=t(),ku.prototype[e+"Form"]=t(!0)}));const Eu=ku;class Su{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const o=new Promise((e=>{n.subscribe(e),t=e})).then(e);return o.cancel=function(){n.unsubscribe(t)},o},e((function(e,o,r){n.reason||(n.reason=new ou(e,o,r),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new Su((function(t){e=t})),cancel:e}}}const wu=Su,Cu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Cu).forEach((([e,t])=>{Cu[t]=e}));const Iu=Cu,xu=function e(t){const n=new Eu(t),o=Vs(Eu.prototype.request,n);return Cc.extend(o,Eu.prototype,n,{allOwnKeys:!0}),Cc.extend(o,n,null,{allOwnKeys:!0}),o.create=function(n){return e(fu(t,n))},o}(Kc);xu.Axios=Eu,xu.CanceledError=ou,xu.CancelToken=wu,xu.isCancel=tu,xu.VERSION="1.6.0",xu.toFormData=Mc,xu.AxiosError=Pc,xu.Cancel=xu.CanceledError,xu.all=function(e){return Promise.all(e)},xu.spread=function(e){return function(t){return e.apply(null,t)}},xu.isAxiosError=function(e){return Cc.isObject(e)&&!0===e.isAxiosError},xu.mergeConfig=fu,xu.AxiosHeaders=Qc,xu.formToJSON=e=>Wc(Cc.isHTMLForm(e)?new FormData(e):e),xu.getAdapter=mu,xu.HttpStatusCode=Iu,xu.default=xu;const Tu=xu;var Pu=n(4670),Ru=n.n(Pu);const Ou={demoParts:null,demoSitesList:null,demoSitesListBySlug:null,demoPartsContentById:{pages:{},templates:{},templateParts:{},globalData:{}}};function Au(e){if(!e)return;const t=["demoPartsContentById","globalData",e.id];if(p().get(Ou,t))return;const n={contentUrlPath:e.content_url_path,content:null};p().set(Ou,t,n)}async function Nu(e){const t=["demoPartsContentById","pages",e],n=p().get(Ou,t),o=await async function(e){return zu(e,"pages")}(e),r=null==n?void 0:n.globalDataId;let a={page:o,globalData:await Du(r)};return a=p().cloneDeep(a),a}async function Mu(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=["demoPartsContentById","templates",e],o=p().get(Ou,n),r=p().get(o,"templatePartsIds",[]);let a={template:await async function(e){return zu(e,"templates")}(e),templateParts:await Promise.all(r.map((async e=>({area:p().get(Ou,["demoPartsContentById","templateParts",e,"area"]),content:await async function(e){return zu(e,"templateParts")}(e)}))))};if(t){const e=null==o?void 0:o.globalDataId,t=await Du(e);a.globalData=t}return a=p().cloneDeep(a),a}async function Du(e){return zu(e,"globalData")}async function zu(e,t){const n=p().get(Ou,["demoPartsContentById",t,e]);let o=null==n?void 0:n.content;if(o)await(10,new Promise((e=>setTimeout((()=>{e()}),10))));else{const e=null==n?void 0:n.contentUrlPath;if(!e)return;try{const t=await Tu.get(e);o=null==t?void 0:t.data,n.content=o}catch(e){console.error(e)}}return o}async function Bu(){if(Ou.demoParts)return Ou.demoParts;let e=p().get(window,["kubioUtilsData","demo_parts_by_slug"]);p().isEmpty(e)&&(e=await async function(){try{var e;const t=p().get(window,["kubioUtilsData","demo_parts_url"],""),n=await Tu.get(t);return(null==n||null===(e=n.data)||void 0===e?void 0:e.body)||{}}catch(e){return console.error(e),[]}}());const t=[];return p().each(e,((e,n)=>{t[n]=function(e,t){const n=p().get(window,["kubioUtilsData","demo_sites"],{}),o=p().get(n,t),r=p().get(o,"thumb",""),a=["index","home"],i=[],l=a.concat(["single","search","404"]);let s=e.filter((e=>{let{slug:t,type:n}=e;return"template"===n?(a.includes(t)&&i.push(t),l.includes(t)):"page"!==n||"sample-page"!==t}));if(i.length>1){const e=a.filter((e=>i.includes(e)));e.pop(),s=s.filter((t=>{let{slug:n,type:o}=t;return"template"!==o||!e.includes(n)}))}const c={};return s.forEach(((e,t)=>{c[e.content_url_path]=t})),p().sortBy(s,(e=>"page"===e.type?c[e.content_url_path]:100+p().indexOf(l,e.slug))).map((e=>{let{content_url_path:n,id:a,preview_image_url:i,preview_image_url_full:l,page_preview_url:s,title:c,type:u,slug:d}=e;return{contentUrlPath:n,id:a,slug:d,uniqueId:Ru().generate(),screenshot:i||r,screenshotFull:l||r,label:(m=Lu({title:c,slug:d,type:u}),function(e){return e.split(" ").map((e=>{return(t=e).charAt(0).toUpperCase()+t.slice(1);var t})).join(" ")}((p=m,ju.innerHTML=p,ju.innerText))),isPro:!(null==o||!o.is_pro),type:u,demoSiteSlug:t,pagePreviewUrl:Uu({page_preview_url:s,currentDemoSite:o,type:u,slug:d}),categories:(null==o?void 0:o.categories)||[]};var m,p}))}(e,n)})),n=e,p().each(n,((e,t)=>{e.forEach((e=>{"page"===(null==e?void 0:e.type)?function(e){var t,n;const o={templateId:null==e||null===(t=e.template)||void 0===t?void 0:t.id,globalDataId:null==e||null===(n=e.globalData)||void 0===n?void 0:n.id,contentUrlPath:e.content_url_path,content:null},r=e.globalData;r&&(o.globalDataId=null==r?void 0:r.id),p().set(Ou,["demoPartsContentById","pages",e.id],o),Au(r)}(e):function(e){const t=["demoPartsContentById","templates",e.id],n=p().get(e,"templateParts",[]);n.forEach((e=>{!function(e){const t=["demoPartsContentById","templateParts",e.id];if(p().get(Ou,t))return;const n={area:e.area,contentUrlPath:e.content_url_path,content:null};p().set(Ou,t,n)}(e)}));const o=null==e?void 0:e.globalData;if(Au(),p().get(Ou,t))return;const r={templatePartsIds:n.map((e=>e.id)),contentUrlPath:e.content_url_path,content:null};o&&(r.globalDataId=null==o?void 0:o.id),p().set(Ou,t,r)}(e)}))})),Ou.demoParts=t,p().isEmpty(t)?{}:Ou.demoParts;var n}function Lu(e){let{title:t,slug:n,type:o}=e;if("template"===o)switch(n){case"index":case"home":return(0,T.__)("Blog","kubio");case"search":return(0,T.__)("Search","kubio");case"single":return(0,T.__)("Post Page","kubio");default:return t}return t}async function Fu(){if(Ou.demoSitesList)return Ou.demoSitesList;let e=p().get(window,["kubioUtilsData","demo_sites"],null);if(p().isEmpty(e)&&(e=await async function(){const e=p().get(window,["kubioUtilsData","demo_sites_url"],null);if(e){try{var t;const n=await Tu.get(e),o=(null==n||null===(t=n.data)||void 0===t?void 0:t.body)||{};o.forEach((e=>{const t=p().get(e,"plugins",[]),n=[];p().each(t,((e,t)=>{const o=null==t?void 0:t.split("/")[0];n.push({label:e,slug:o})})),e.plugins=n}));const r=p().keyBy(o,"slug");return p().set(window,["kubioUtilsData","demo_sites"],r),r}catch(e){console.error(e)}return null}}()),p().isEmpty(e))return[];const t=Object.values(e).map((e=>{let{is_pro:t,name:n,thumb:o,categories:r,slug:a,preview:i,pro_template_slug:l,plugins:s}=e;return{isPro:!!t,label:Hu(n),preview:i,screenshot:o,proTemplateSlug:l,categories:r,slug:a,plugins:s}})),n=p().keyBy(t,"slug");return t.forEach((e=>{const{proTemplateSlug:t}=e;if(!t)return;const o=p().get(n,t);o&&(e.relatedDemoSite=o,o.relatedDemoSite=e)})),Ou.demoSitesList=t,Ou.demoSitesListBySlug=n,Ou.demoSitesList}const Gu=e=>{e&&setTimeout((()=>{const t=document.querySelector(".kubio-iframe");if(t){const n=null==t?void 0:t.contentDocument,o=null==n?void 0:n.querySelector(`[data-block="${e}"]`);null==o||o.scrollIntoView({behavior:"smooth"})}}),100)};function Hu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e=e.replace(/ (Free|Pro)/i,""),e=e.trim(),e}const ju=document.createElement("div");function Uu(e){let{page_preview_url:t,currentDemoSite:n,type:o,slug:r}=e;if("page"===o||!["404","search"].includes(r))return t;const a=null==n?void 0:n.preview;switch(r){case"404":return`${a}/404-page`;case"search":return`${a}?s="lorem"`}}!async function(){await Fu(),await Bu()}();const Wu={currentDemoParts:[],demoPartsIsLoaded:!1,selectedDemoPart:null,setSelectedDemoPart:p().noop},Vu=(0,i.createContext)(Wu),Ku=(0,i.memo)((e=>{let{children:t}=e;const{selectedDemoSlug:n,initialDemoPart:o,setInitialDemoPart:r,demosPartsPerSlug:a,demoPartsIsLoaded:l,currentDemoSite:s}=cf(),c=(0,i.useMemo)((()=>p().get(a,null==s?void 0:s.slug,[])),[s,a]),u=null==s?void 0:s.relatedDemoSite,d=(0,i.useMemo)((()=>p().get(a,null==u?void 0:u.slug,[])),[u,a]),m=(0,i.useMemo)((()=>{const e=p().get(c,[0]);if(!o)return e;return c.find((e=>(null==e?void 0:e.uniqueId)===(null==o?void 0:o.uniqueId)))||e}),[n,o]),[h,g]=(0,i.useState)(m),f=(0,i.useCallback)((e=>{o&&r(null),g(e)}),[g,o,r]);(0,i.useEffect)((()=>{o&&f(o)}),[o]),(0,i.useEffect)((()=>{f(m)}),[n]);const b=(0,i.useMemo)((()=>({currentDemoParts:c,demoPartsIsLoaded:l,selectedDemoPart:h,setSelectedDemoPart:f,relatedDemoParts:d})),[c,l,h,f,d]);return(0,i.createElement)(Vu.Provider,{value:b},t)})),$u=()=>(0,i.useContext)(Vu),qu="content",Yu="wholePage",Xu=((0,T.__)("Content","kubio"),(0,T.__)("Full page","kubio"),"onlyThisPage"),Zu="allPages",Ju=((0,T.__)("Only this page","kubio"),(0,T.__)("All pages","kubio"),["singular","single"]),Qu=["index","archive","home"],ed=Ju.concat(Qu),td=(0,i.createContext)({}),nd="starterSite",od="pages",rd="sections",ad="favorites",id=[{label:(0,T.__)("Starter sites","kubio"),value:nd},{label:(0,T.__)("Pages","kubio"),value:od},{label:(0,T.__)("Sections","kubio"),value:rd},{label:(0,T.__)("Favorites","kubio"),value:ad}],ld=(0,i.memo)((e=>{let{onClose:t,children:n,initialParams:o}=e;const r=p().get(o,"page",nd),[a,l]=(0,i.useState)(r),[s,c]=(0,i.useState)(r),u=(0,i.useCallback)((e=>{c(a),l(e)}),[a]),[d,m]=(0,i.useState)(!1),{templateId:h,postId:g}=(0,w.useSelect)((e=>{const{getPage:t=p().noop,getTemplateId:n=p().noop}=e("kubio/edit-site")||{},o=t();return{templateId:n()||"",postId:p().get(o,"context.postId")}}),[]);(0,i.useEffect)((()=>{d&&m(!1)}),[h,g]);const f=(0,i.useMemo)((()=>({activePage:a,setActivePage:u,onClose:t,showLoadingOverlay:d,setShowLoadingOverlay:m,initialParams:o,previousActivePage:s})),[a,u,t,d,m,o,s]);return(0,i.createElement)(td.Provider,{value:f},n)})),sd=()=>(0,i.useContext)(td),cd={isImporting:!1,importDemoPart:p().noop},ud=(0,i.createContext)(cd),dd=(0,i.memo)((e=>{let{children:t}=e;const n=(0,i.useRef)(!1),[o,r]=(0,i.useState)(!1),{selectedDemoPart:a}=$u(),[l,s]=(0,i.useState)(qu),[c,u]=(0,i.useState)(Xu),[d,m]=(0,i.useState)(),p=n.current,h=(0,i.useCallback)((e=>{n.current=e}),[n]),g=(0,i.useCallback)((()=>{p||m(a)}),[p,m,a]),f=(0,i.useMemo)((()=>({isImporting:p,setIsImporting:h,importDemoPart:g,demoPartThatIsImporting:d,setDemoPartThatIsImporting:m,whatToImport:l,setWhatToImport:s,whereToApplyChanges:c,setWhereToApplyChanges:u,shouldConvertGlobalColors:o,setShouldConvertGlobalColors:r})),[p,h,d,m,g,l,s,c,u,o,r]);return(0,i.createElement)(ud.Provider,{value:f},t)})),md=()=>(0,i.useContext)(ud),pd={typography:{holders:{}}};["a","lead","p","h1","h2","h3","h4","h5","h6"].forEach((e=>{p().set(pd,`typography.holders.${e}`,{transform:"none",style:"normal",decoration:"none"})}));const hd=e=>(e.forEach((e=>{switch(null==e?void 0:e.name){case"kubio/contact":case"kubio/subscribe-form":p().set(e,["attributes","shortcode"],""),p().set(e,["attributes","formId"],"");break;case"kubio/shortcode":p().set(e,["attributes","shortcode"],"")}const t=p().get(e,"innerBlocks",[]);hd(t)})),e),gd=e=>p().cloneDeep(p().get(e,"globalStyle.style.descendants.body",{}));function fd(e){return p()(e).pickBy(p().isObject).mapValues(fd).omitBy(p().isEmpty).assign(p().omitBy(e,(e=>p().isObject(e)&&!Array.isArray(e)))).value()}const bd=["header","footer","sidebar"],vd={header:"kubio/header",footer:"kubio/footer",sidebar:"kubio/sidebar"},_d=e=>{const t=top.document;e?t.defaultView.setTimeout((()=>{t.body.classList.add("kubio-iframe-holder--show"),t.body.classList.remove("kubio-iframe-holder--hide"),t.body.classList.remove("h-ui-disable-transitions")}),100):(t.body.classList.remove("kubio-iframe-holder--show"),t.body.classList.add("kubio-iframe-holder--hide"),t.body.classList.add("h-ui-disable-transitions"))},yd=(0,i.memo)((()=>{const{isImporting:e,setIsImporting:t,demoPartThatIsImporting:n,setDemoPartThatIsImporting:o,whereToApplyChanges:r,whatToImport:a,shouldConvertGlobalColors:l}=md(),{onClose:c=p().noop}=sd(),{contentClientId:u,nrOfBlocksInsideContent:d,postType:m,postId:h,isClassicTemplate:g,pagePath:b,isFrontPageClassic:_,currentTheme:y,currentPostTitle:k}=(0,w.useSelect)((e=>{var t,n;const{getBlocks:o,getBlockOrder:r}=e("core/block-editor"),{getPage:a=p().noop,getTemplateId:i}=e("kubio/edit-site")||{},{getEditedEntityRecord:l,getCurrentTheme:s,getEntityRecord:c}=e("core"),u=l("root","site"),d=null===(t=s())||void 0===t?void 0:t.stylesheet,m=a()||{},{path:h}=m,{postType:g,postId:f}=(null==m?void 0:m.context)||{},b=i()||"",v=!p().get(b.split("//"),"[1]"),_=null==u?void 0:u.page_on_front,y="page"===u.show_on_front,k=v&&y&&parseInt(_)===parseInt(f),E=o()||[],S=(0,q.findBlockByName)(E,"core/post-content"),w=null==S?void 0:S.clientId,C=null===(n=r(w))||void 0===n?void 0:n.length,I=c("postType",g,f);return{contentClientId:w,nrOfBlocksInsideContent:C,postType:g,postId:f,pagePath:h,isClassicTemplate:v,isFrontPageClassic:k,currentTheme:d,currentPost:I,currentPostTitle:p().get(I,"title.rendered","Kubio")}}),[]),{saveEntityRecord:S,editEntityRecord:C}=(0,w.useDispatch)("core"),{insertBlocks:I,replaceInnerBlocks:x,resetBlocks:P,selectBlock:R,removeBlocks:O}=(0,w.useDispatch)("core/block-editor"),{createErrorNotice:A}=(0,s.useKubioNotices)(),N=(0,f.useGetGlobalSessionProp)("urlBasedTemplatesMap",{})[b],M=(0,i.useRef)(),[,D=p().noop]=(0,f.useGlobalSessionProp)("thirdPartyBlockInstalled",!1),{onProcessGlobalDataSettings:z}=(e=>{let{shouldConvertGlobalColors:t,whatToImport:n,contentClientId:o,isClassicTemplate:r}=e;const{parseVariableColor:a,setPalette:l,getPalette:c}=(0,v.useGlobalDataColors)(),{updateBlockAttributes:u}=(0,w.useDispatch)("core/block-editor"),{editEntityRecord:d}=(0,w.useDispatch)("core"),m=(0,i.useRef)(!1),h=(0,i.useRef)(!1),g="globalStyle.style.descendants.body",{globalStyle:f}=(0,v.useGlobalDataStyle)(),b=(0,i.useMemo)((()=>c()),[]),_=(0,i.useMemo)((()=>f.getStyle("",{},{styledComponent:"body",fromRoot:!0})),[f]),y=(0,i.useMemo)((()=>f.getStyle("",{},{styledComponent:"sectionSpacing",fromRoot:!0})),[f]),{getBlocks:k,pages:E,templateParts:S,templates:C,currentPostId:I}=(0,w.useSelect)((e=>{const{getBlocks:t}=e("core/block-editor"),{getEntityRecords:n}=e("core"),{getPage:o=p().noop}=e("kubio/edit-site")||{},r=o(),{postId:a}=(null==r?void 0:r.context)||{},i=e=>n("postType",e,{per_page:-1});return{currentPostId:a,getBlocks:t,pages:i("page"),templateParts:i("wp_template_part"),templates:i("wp_template").filter((e=>{let{slug:t}=e;return ed.includes(t)}))}})),x=(0,i.useCallback)((e=>{l(e)}),[l]),T=(0,i.useCallback)((e=>{f.setStyle("",e,{styledComponent:"body"})}),[f]),P=(0,i.useCallback)((e=>{f.setStyle("",e,{styledComponent:"sectionSpacing"})}),[f]),R=(0,i.useCallback)(((e,t)=>{const n=t.colors;return p().isEqual(n,b)||(e=(0,q.removeThemeColorsFromBlocks)({blocks:e,colorPalette:n,parseVariableColor:a,generateColorVariants:v.generateColorVariants,shouldUpdateAttributes:!1})),e}),[b,x,a]),O=(0,i.useCallback)(((e,t)=>{const n=gd(t);let o=p().merge({},pd,n);const r=t.colors;o=(0,q.removeThemeColorsFromObject)(o,{colorPalette:r,parseVariableColor:a,generateColorVariants:v.generateColorVariants});const i=p().merge({},pd,_);let l=(0,q.getObjectDifference)(o,i);if(l=fd(l),p().isEmpty(l))return e;const c="typography.holders.lead";p().set(l,c,p().merge({},p().get(_,c),p().get(l,c))),p().each(p().get(l,"typography.holders"),((e,t)=>{p().isEmpty(e)||null==e||!e.family||null!=e&&e.weight||(e.weight=p().get(n,`typography.holders.${t}.weight`))}));const u=["kubio/header","kubio/footer","kubio/sidebar","core/post-content"],d="typography.holders.lead.color",m=p().get(l,d);return e.forEach((e=>{var t;const n=!!p().get(e,"attributes.kubio");if(u.includes(null==e?void 0:e.name)||!n)return;const o=`attributes.kubio.style.descendants.${null===(t=(0,s.getBlockDefaultElement)(null==e?void 0:e.name))||void 0===t?void 0:t.name}`;let r=p().get(e,o,{});const a=p().get(r,"typography.holders.p.color");a&&m&&(r=p().cloneDeep(r),p().set(r,d,a));const i=p().merge({},l,r);p().set(e,o,i)})),e}),[_,a,v.generateColorVariants]),A=(0,i.useCallback)((e=>{const t=e.colors;p().isEqual(t,b)||x(t)}),[b,x]),N=(0,i.useCallback)((e=>{const t=p().get(e,g,{}),n=p().merge({},pd,t),o=p().merge({},pd,_),r=fd((0,q.getObjectDifference)(n,o));p().isEmpty(r)||T(n)}),[_,g]),M=(0,i.useCallback)((e=>{const t=p().get(e,"globalStyle.style.descendants.sectionSpacing",{});p().isEqual(y,t)||P(t)}),[y,P]),D=(0,i.useCallback)((e=>{m.current||(m.current=!0,A(e),N(e),M(e))}),[A,N,M,m]),z=(0,i.useCallback)((function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o=t.colors;let r=!1;const a=e.map((e=>{if(!p().get(e,"attributes.kubio"))return e;const{updatedBlock:a,hasUpdates:i}=(e=>{let{block:t,colorPalette:n}=e;n=p().cloneDeep(n);const o=p().cloneDeep(t);let r=!1;const a=(0,v.generateColorVariants)(n),i=e=>{if(!Array.isArray(e))return e;let t;return t=4===e.length?"rgba":"rgb",`${t}(${e.join(", ")})`};n.forEach((e=>{e.color=i(e.color)})),a.forEach((e=>{e.color=i(e.color)}));const l=e=>{const t=p().get(e,"attributes.kubio",{});p().eachDeep(t,((e,t,o)=>{if("string"==typeof e&&(e.startsWith("#")&&(e=ne(e).toRgbString()),e.startsWith("rgb"))){const i=n=>{let{color:a,slug:i}=n;if(a===e){r=!0;const e=ne(a);return o[t]=`rgba(var(--${i}),${e.getAlpha()})`,!0}return!1};n.find(i)||a.find(i)}}),{leavesOnly:!0});const{innerBlocks:o}=e;o.forEach((e=>{l(e)}))};return l(o),{updatedBlock:o,hasUpdates:r}})({block:e,colorPalette:o}),l=gd(t),{updatedBlock:c,hasUpdates:d}=(e=>{var t;let{block:n,generalBodyStyle:o}=e,r=!1;const a=`attributes.kubio.style.descendants.${null===(t=(0,s.getBlockDefaultElement)(null==n?void 0:n.name))||void 0===t?void 0:t.name}`,i=p().get(n,a,{}),l=p().merge({},pd,o),c=fd((0,q.getObjectDifference)(i,l));return p().isEmpty(c)||p().isEqual(c,i)||(p().set(n,a,c),r=!0),{updatedBlock:n,hasUpdates:r}})({block:a,generalBodyStyle:l});return r=r||d||i,n&&(d||i)&&u(null==c?void 0:c.clientId,c.attributes),c}));return{blocks:a,blocksHaveChanges:r}}),[u]),B=(0,i.useCallback)((e=>{if(h.current=!0,n===Yu)return;let t=[],a=[];r||(a=k(),["kubio/header","kubio/footer","kubio/sidebar"].forEach((e=>{const n=(0,q.findBlockByName)(a,e);if(!n)return;const o=k(null==n?void 0:n.clientId);t=t.concat(o)})));const i=k(o),l=a.concat(t,i);z(l,e)}),[n,o,r,z]),L=((0,i.useCallback)((e=>{E.concat(S,C).forEach((t=>{if(t.id===I)return;const n=p().get(t,"content.raw",""),o=(0,Mr.parse)(n);if(p().isEmpty(o))return;const{blocks:r,blocksHaveChanges:a}=z(o,e,!1);if(!a)return;const i={content:(0,Mr.serialize)(r)},{id:l,type:s}=t;d("postType",s,l,i)}))}),[z,E,S,C,I]),(0,i.useCallback)((e=>{h.current||B(e)}),[B])),F=(0,i.useCallback)(((e,t)=>{const n=p().get(t,"globalStyle.style.descendants.sectionSpacing",{});if(p().isEqual(y,n))return e;let o=(0,q.getObjectDifference)(n,y);o=fd(o);const r=["kubio/section","kubio/navigation","kubio/hero","kubio/query-layout"];return e.forEach((e=>{var t;const n=!!p().get(e,"attributes.kubio");if(!r.includes(null==e?void 0:e.name)||!n)return;const a=`attributes.kubio.style.descendants.${null===(t=(0,s.getBlockDefaultElement)(null==e?void 0:e.name))||void 0===t?void 0:t.name}`,i=p().get(e,a,{}),l=p().merge({},o,i);p().set(e,a,l)})),e}),[y]);return{onProcessGlobalDataSettings:(0,i.useCallback)(((e,n)=>(t?(D(n),L(n)):(e=R(e,n),e=O(e,n),e=F(e,n)),e)),[R,O,F,L,t,D])}})({shouldConvertGlobalColors:l,whatToImport:a,contentClientId:u,isClassicTemplate:g}),B=(0,i.useCallback)(((e,t)=>(e=hd(e),e=z(e,t),(0,s.getBlocksWithNewRefs)(e))),[z]),L=(0,E.useDebounce)((0,i.useCallback)((e=>{clearTimeout(M.current),_d(!0),M.current=setTimeout((()=>{Gu(e)}),100)}),[]),100);(0,i.useEffect)((()=>()=>{clearTimeout(M.current)}),[]);const F=(0,i.useCallback)((()=>{o(null),t(!1)}),[o,t]),{templatePartIsUsedOnMultipleTemplates:G,templatePartIsFoundOnPage:H,refreshPage:j,templateIsUsedOnMultiplePages:U}=(0,s.useTemplateData)("header"),{templatePartIsUsedOnMultipleTemplates:W,templatePartIsFoundOnPage:V}=(0,s.useTemplateData)("footer"),{templatePartIsUsedOnMultipleTemplates:K,templatePartIsFoundOnPage:$}=(0,s.useTemplateData)("sidebar"),Y=(0,i.useMemo)((()=>({header:G,footer:W,sidebar:K})),[G,W,K]),X=(0,i.useMemo)((()=>({header:H,footer:V,sidebar:$})),[H,V,$]),{getBlocks:Z}=(0,w.useSelect)((e=>{const{getBlocks:t}=e("core/block-editor"),{getEntityRecords:n}=e("core");return{getBlocks:t,getEntityRecords:n}})),J=(0,i.useCallback)((()=>{t(!0),c(),_d(!1)}),[t,c]),Q=(0,i.useCallback)((e=>{let{templatePartName:t,templateBlocks:n,newSlug:o,newTheme:r}=e;const a=(0,q.findBlockByName)(n,t);a&&(a.attributes.slug=o,a.attributes.theme=r)}),[q.findBlockByName]),ee=(0,i.useCallback)((async(e,t,n)=>{var o;const r=Z(),a=vd[t],i=(0,q.findBlockByName)(r,a),l=null==i?void 0:i.clientId;if(!l)return;await x(l,e);const s=null==i||null===(o=i.attributes)||void 0===o?void 0:o.slug;Q({templateBlocks:n,templatePartName:a,newSlug:s,newTheme:y})}),[y,q.findBlockByName,Q,Z,B]),te=(0,i.useCallback)((async(e,t,n)=>{const o=`${k} ${t}`,r={title:o,slug:o,area:t,kubio_template_source:"kubio-custom",content:(0,Mr.serialize)(e)},a=await S("postType","wp_template_part",r),i=vd[t],l=null==a?void 0:a.slug,s=null==a?void 0:a.theme;l&&s&&Q({templateBlocks:n,templatePartName:i,newSlug:l,newTheme:s})}),[k,S,Q]),oe=(0,i.useCallback)((async e=>{const{title:t,slug:n,assignTemplateToPage:o}=(e=>{let{isFrontPageClassic:t,isClassicTemplate:n,classicTemplateSlug:o,postType:r,currentPostTitle:a}=e,i="page"===r,l=`${a} template`,s=l;const c=Ju,u="search"===o,d="404"===o,m=n&&Qu.includes(o),p=n&&c.includes(o);return t?(l="Front page",s="front-page",i=!1):m?(l="Index",s="index",i=!1):p?(l="Single Post",s="single",i=!1):u?(l="Search",s="search",i=!1):d?(l="404",s="404",i=!1):r&&(s=`${r}-${s}`),{title:l,slug:s,assignTemplateToPage:i}})({isFrontPageClassic:_,isClassicTemplate:g,classicTemplateSlug:N,postType:m,currentPostTitle:k}),r={title:t,slug:n,kubio_template_source:o?"kubio-custom":"kubio",content:(0,Mr.serialize)(e)},a=await S("postType","wp_template",r);return o&&await C("postType",m,h,{template:null==a?void 0:a.slug}),D(!0),await j(a),a}),[k,D,g,m,h,S,C,j]),re=(0,i.useCallback)((async e=>{let{templateBlocks:t,templateParts:n,globalData:o}=e;const r=Z(),a={};if(bd.forEach((e=>{const t=vd[e];a[e]=(0,q.findBlockByName)(r,t)})),await Promise.all(n.map((async e=>{var n;let{area:r,content:i}=e;const l=B((0,Mr.parse)(i),o),s=null===(n=a[r])||void 0===n?void 0:n.clientId;s?await x(s,l):await te(l,r,t)}))),!p().isEmpty(n)){const e=Object.values(a),o=n.map((e=>{let{area:t}=e;return vd[t]}));e.forEach((e=>{var n;if(!e)return;const r=null==e?void 0:e.name;if(!o.includes(r))return;const a=null==e||null===(n=e.attributes)||void 0===n?void 0:n.slug;Q({templateBlocks:t,templatePartName:r,newSlug:a,newTheme:y})}))}g?await oe(t):await P(t),L()}),[y,J,Z,Mu,Q,P,F,L,g,oe]),ae=(0,i.useCallback)((async e=>{let{templateBlocks:t,templateParts:n,globalData:o}=e;await Promise.all(n.map((async e=>{let{area:n,content:r}=e;const a=B((0,Mr.parse)(r),o);Y[n]||!X[n]?await te(a,n,t):await ee(a,n,t)}))),await P(t)}),[X,Y,te,ee,B]),ie=(0,i.useCallback)((async e=>{let{templateBlocks:t,templateParts:n,globalData:o}=e;await Promise.all(n.map((async e=>{let{area:n,content:r}=e;const a=B((0,Mr.parse)(r),o);await te(a,n,t)}))),await oe(t)}),[oe,B]),le=(0,i.useCallback)((async e=>{let{templateBlocks:t,templateParts:n,globalData:o}=e;U||g?await ie({templateBlocks:t,templateParts:n,globalData:o}):await ae({templateBlocks:t,templateParts:n,globalData:o}),D(!0),L()}),[U,J,Mu,F,x,L,g,D]),se=(0,i.useCallback)((async e=>{let{templateBlocks:t,templateParts:n,globalData:o}=e,a=r;m&&"page"!==m&&!g&&(a=Zu);const i=Zu===a;Xu===a&&await le({templateBlocks:t,templateParts:n,globalData:o}),i&&await ae({templateBlocks:t,templateParts:n,globalData:o})}),[g,m,r,ae,le]),ce=(0,i.useCallback)((async e=>{let{templateBlocks:t,templateParts:n,globalData:o}=e;const r=Z(),a=t[1];let i,l;r.forEach(((e,t)=>{("kubio/header"===e.name||"core/template-part"===e.name&&"header"===(null==e?void 0:e.area))&&(i=t),("kubio/footer"===e.name||"core/template-part"===e.name&&"footer"===(null==e?void 0:e.area))&&(l=t)}));let s=[];s=s.concat(r.slice(0,i+1)),s.push(a),s=s.concat(r.slice(l));const c=n.filter((e=>{let{area:t}=e;return!["footer","header"].includes(t)}));re({templateBlocks:s,templateParts:c,globalData:o}),L()}),[Z,L,B,re]),ue=(0,i.useCallback)((async e=>{let t=a===qu;g&&(t=!1),J();const{template:n,templateParts:o,globalData:r}=await Mu(e);if(!n)return void F();const i=B((0,Mr.parse)(n),r);t?await ce({templateBlocks:i,templateParts:o,globalData:r}):await se({templateBlocks:i,templateParts:o,globalData:r})}),[B,Mu,J,F,ce,se,a]),de=(0,i.useCallback)((async e=>{let{pageBlocks:t,globalData:n}=e;const o=p().get(t,[0,"clientId"]);await I(t,d,u,!1),L(o)}),[R,J,Nu,I,F,u,B]),me=(0,i.useCallback)((async e=>{let{pageBlocks:t,pageId:n}=e;g&&await P([]),await x(u,t);const o=(r=n,p().get(Ou,["demoPartsContentById","pages",r]));var r;const a=null==o?void 0:o.templateId;await ue(a),L()}),[O,g,u,x,L,ue,B]),pe=(0,i.useCallback)((async e=>{const t=a===qu,n=a===Yu;J();const{page:o,globalData:r}=await Nu(e);if(!o)return void F();const i=B((0,Mr.parse)(o),r);t&&await de({pageBlocks:i,globalData:r,pageId:e}),n&&await me({pageBlocks:i,globalData:r,pageId:e})}),[a,de,me,Nu,B]),he=(0,i.useCallback)((async()=>{if(!n||e)return;const t="page"===(null==n?void 0:n.type),o="template"===(null==n?void 0:n.type),r=null==n?void 0:n.id;if(r)try{t&&await pe(r),o&&await ue(r)}catch(e){console.error(e),A((0,T.__)("Could not import content. Please try again later","kubio"))}}),[n,pe,ue,e,A]);return(0,i.useEffect)((()=>{he()}),[n]),(0,i.createElement)(i.Fragment,null)})),kd=(0,i.memo)((()=>{const{categoriesList:e=[],selectedCategory:t,setSelectedCategory:n,nrOfItemsPerCategory:o}=of(),[r,a]=(0,i.useState)(t),l=(0,i.useCallback)((e=>{e!==t&&(a(e),n(e))}),[n,t,a]);return(0,i.useEffect)((()=>{r!==t&&a(t)}),[t]),(0,i.createElement)("div",{className:"kubio-predefined-layouts__category-list",onClick:e=>e.stopPropagation()},(0,i.createElement)("div",{className:"kubio-predefined-layouts__category-list__title"},"CATEGORIES"),e.map((e=>{let{label:t,value:n}=e;return(0,i.createElement)(k.Button,{key:n,onClick:()=>l(n),className:x()("kubio-predefined-layouts__category-list__item",{"kubio-predefined-layouts__category-list__item--active":n===r})},t,(0,i.createElement)("span",null,o[n]))})))})),Ed=(0,i.memo)((e=>{let{type:t,id:n,relatedFavoriteId:o}=e;const{favoritesDataByType:r,onAddToFavorites:a}=pf(),l=(0,i.useMemo)((()=>p().get(r,[t,n],!1)),[r]),[s,c]=(0,i.useState)(l);(0,i.useEffect)((()=>{l!==s&&c(l)}),[l]);const u=(0,i.useMemo)((()=>s?"font-awesome/heart":"font-awesome/heart-o"),[s]),d=(0,i.useCallback)((async e=>{e.stopPropagation();const r=!s;c(r),a(t,o?[n,o]:n,r)}),[s,a,c,o]);return(0,i.createElement)(P.CanvasIcon,{onClick:d,className:"kubio-predefined-layouts__favorite-button",name:u})})),Sd=(0,i.memo)((e=>{let{fontsToLoad:t}=e;const n=(0,i.useCallback)((e=>{e.target.rel="stylesheet"}),[t]);return Array.isArray(t)?(0,i.createElement)(i.Fragment,null,t.map((e=>(0,i.createElement)("link",{href:`https://fonts.googleapis.com/css?family=${e}&display=swap`,key:e,rel:"preload",as:"style",onLoad:n})))):(0,i.createElement)(i.Fragment,null)})),wd=(0,i.memo)((()=>(0,i.createElement)("div",{className:"kubio-predefined-layouts__img__placeholder"}))),Cd=e=>{let{src:t,uniqueId:n,showAnimationAtLoad:o,addImageType:r=!0,onLoad:a=p().noop,...l}=e;const[s,c]=(0,i.useState)(!0),u=(0,i.useRef)(),d=(0,i.useRef)(),m=(0,i.useRef)(!1),h=(0,i.useRef)(),g=(0,i.useRef)(!1),f=(0,i.useRef)(!1);(0,i.useEffect)((()=>{s||c(!0)}),[t]);const b=(0,i.useCallback)((()=>{var e,t;const n=u.current;if(!n)return;const o=parseInt((null===(e=d.current)||void 0===e?void 0:e.naturalWidth)||0),r=parseInt((null===(t=d.current)||void 0===t?void 0:t.naturalHeight)||0),a=n.parentNode;let i=!1;if(0!==o&&0!==r){const e=(r+10)/o;i=parseInt(a.clientHeight)/parseInt(a.clientWidth)>e}}),[u,d]),v=(0,i.useCallback)((()=>{f.current=!0;const e=u.current;e&&(e.src=t,e.setAttribute("data-is-loaded",""),c(!1),m.current&&a(),r&&b())}),[t,c,r,b]),_=(0,i.useMemo)((()=>{if(t.startsWith("data:image/"))return!0;f.current=!1,g.current=!1;const e=new Image;return d.current=e,clearTimeout(g.current),h.current=setTimeout((()=>{g.current=!0,f.current||e.complete&&v()}),350),e.onload=()=>{g.current&&v()},e.src=t,e.complete}),[t]);return(0,i.useEffect)((()=>()=>{clearTimeout(g.current)}),[]),(0,i.useLayoutEffect)((()=>{var e;null!==(e=d.current)&&void 0!==e&&e.complete&&b()}),[]),(0,i.createElement)("div",C({className:x()("kubio-predefined-layouts__img__outer",{"kubio-predefined-layouts__img__outer--with-placeholder":!_&&s})},l),(0,i.createElement)("img",{className:x()("kubio-predefined-layouts__img",{"kubio-predefined-layouts__img--with-animation":!_}),ref:u,src:t,onLoad:()=>{s||(m.current=!0,a())}}),!_&&s&&(0,i.createElement)(wd,null))},Id=(0,i.memo)((e=>{let{list:t,children:n=p().noop}=e;return(0,i.createElement)("div",{className:"kubio-predefined-layouts__screenshot-list"},t.map((e=>n(e))))})),xd=(0,i.memo)((0,i.forwardRef)(((e,t)=>{let{screenshot:n,screenshotFull:o,label:r="",isPack:a=!1,labelSlot:l,showFull:s=!1,uniqueId:c,isPro:u=!1,showFavorite:d=!0,isLandscape:m=!1,showLabel:p=!0,addUniquePreviewAttribute:h=!0,showAnimationAtLoad:g,onClick:f,onLoad:b,favoriteType:v,favoriteId:_,relatedFavoriteId:y,children:k,addImageType:E,...S}=e;const w=s?o:n;c=c||w;const I=(0,i.useMemo)((()=>Math.random()),[c]),T=u;let P={};return h&&(P={"data-unique-id":c}),(0,i.createElement)("div",C({key:I,className:"kubio-predefined-layouts__screenshot-preview__outer"},P,S),(0,i.createElement)("div",{ref:t,className:x()("kubio-predefined-layouts__screenshot-preview__parent",{"kubio-predefined-layouts__screenshot-preview__parent--with-pack":a,"kubio-predefined-layouts__screenshot-preview__parent--is-landscape":m})},(0,i.createElement)("div",{className:"kubio-predefined-layouts__screenshot-preview kubio-pro-item--small",onClick:f},(0,i.createElement)(Cd,{src:w,uniqueId:c,showAnimationAtLoad:g,onLoad:b,addImageType:E})),p&&(0,i.createElement)("div",{className:"kubio-predefined-layouts__screenshot-preview__label"},(0,i.createElement)("div",{className:"kubio-predefined-layouts__screenshot-preview__label__with-badge"},T&&(0,i.createElement)("span",{className:"kubio-pro-item__badge"},"PRO"),r),d&&(0,i.createElement)(Ed,{type:v,id:_,relatedFavoriteId:y}),l),k),a&&(0,i.createElement)("div",{className:"kubio-predefined-layouts__screenshot-preview__pack"},(0,i.createElement)("div",{className:"kubio-predefined-layouts__screenshot-preview__pack__layer kubio-predefined-layouts__screenshot-preview__pack--layer-1"}),(0,i.createElement)("div",{className:"kubio-predefined-layouts__screenshot-preview__pack__layer kubio-predefined-layouts__screenshot-preview__pack--layer-2"})))}))),Td=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M13 5c-3.3 0-6 2.7-6 6 0 1.4.5 2.7 1.3 3.7l-3.8 3.8 1.1 1.1 3.8-3.8c1 .8 2.3 1.3 3.7 1.3 3.3 0 6-2.7 6-6S16.3 5 13 5zm0 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z"})),Pd=(0,i.memo)((e=>{let{placeholder:t="Search"}=e;const{searchString:n,setSearchString:o}=nf(),[r,a]=(0,i.useState)(n),l=(0,s.useDebounce)(o,300),c=(0,i.useCallback)((e=>{const t=e.target.value;a(t),l(t)}),[a,l]);return(0,i.useEffect)((()=>{r!==n&&a(n)}),[n]),(0,i.createElement)(P.InputControl,{className:"kubio-predefined-layouts__search-input",value:r,onInput:c,placeholder:t,suffix:(0,i.createElement)(k.Icon,{icon:Td})})})),Rd=(0,i.memo)((e=>{let{label:t=(0,T.__)("PRO","kubio"),className:n}=e;return(0,i.createElement)("div",{className:x()("kubio-predefined-layouts__free-pro-separator",n)},t,(0,i.createElement)("div",{className:"kubio-predefined-layouts__free-pro-separator__line"}))}));function Od(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function Ad(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function Nd(e,t){try{var n=this.props,o=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,o)}finally{this.props=n,this.state=o}}function Md(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,o=null,r=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?o="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(o="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?r="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(r="UNSAFE_componentWillUpdate"),null!==n||null!==o||null!==r){var a=e.displayName||e.name,i="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+a+" uses "+i+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==o?"\n  "+o:"")+(null!==r?"\n  "+r:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=Od,t.componentWillReceiveProps=Ad),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=Nd;var l=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var o=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;l.call(this,e,t,o)}}return e}function Dd(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Dd(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}(0,T.__)("ALL","kubio"),(0,T.__)("FREE","kubio"),(0,T.__)("PRO","kubio"),Od.__suppressDeprecationWarning=!0,Ad.__suppressDeprecationWarning=!0,Nd.__suppressDeprecationWarning=!0;const zd=function(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=Dd(e))&&(o&&(o+=" "),o+=t);return o};function Bd(e){var t=e.cellCount,n=e.cellSize,o=e.computeMetadataCallback,r=e.computeMetadataCallbackProps,a=e.nextCellsCount,i=e.nextCellSize,l=e.nextScrollToIndex,s=e.scrollToIndex,c=e.updateScrollOffsetForScrollToIndex;t===a&&("number"!=typeof n&&"number"!=typeof i||n===i)||(o(r),s>=0&&s===l&&c())}function Ld(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Fd=function(){function e(t){var n=t.cellCount,o=t.cellSizeGetter,r=t.estimatedCellSize;Ur(this,e),Hr(this,"_cellSizeAndPositionData",{}),Hr(this,"_lastMeasuredIndex",-1),Hr(this,"_lastBatchedIndex",-1),Hr(this,"_cellCount",void 0),Hr(this,"_cellSizeGetter",void 0),Hr(this,"_estimatedCellSize",void 0),this._cellSizeGetter=o,this._cellCount=n,this._estimatedCellSize=r}return Vr(e,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(e){var t=e.cellCount,n=e.estimatedCellSize,o=e.cellSizeGetter;this._cellCount=t,this._estimatedCellSize=n,this._cellSizeGetter=o}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(e){if(e<0||e>=this._cellCount)throw Error("Requested index ".concat(e," is outside of range 0..").concat(this._cellCount));if(e>this._lastMeasuredIndex)for(var t=this.getSizeAndPositionOfLastMeasuredCell(),n=t.offset+t.size,o=this._lastMeasuredIndex+1;o<=e;o++){var r=this._cellSizeGetter({index:o});if(void 0===r||isNaN(r))throw Error("Invalid size returned for cell ".concat(o," of value ").concat(r));null===r?(this._cellSizeAndPositionData[o]={offset:n,size:0},this._lastBatchedIndex=e):(this._cellSizeAndPositionData[o]={offset:n,size:r},n+=r,this._lastMeasuredIndex=e)}return this._cellSizeAndPositionData[e]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var e=this.getSizeAndPositionOfLastMeasuredCell();return e.offset+e.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,n=void 0===t?"auto":t,o=e.containerSize,r=e.currentOffset,a=e.targetIndex;if(o<=0)return 0;var i,l=this.getSizeAndPositionOfCell(a),s=l.offset,c=s-o+l.size;switch(n){case"start":i=s;break;case"end":i=c;break;case"center":i=s-(o-l.size)/2;break;default:i=Math.max(c,Math.min(s,r))}var u=this.getTotalSize();return Math.max(0,Math.min(u-o,i))}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,n=e.offset;if(0===this.getTotalSize())return{};var o=n+t,r=this._findNearestCell(n),a=this.getSizeAndPositionOfCell(r);n=a.offset+a.size;for(var i=r;n<o&&i<this._cellCount-1;)i++,n+=this.getSizeAndPositionOfCell(i).size;return{start:r,stop:i}}},{key:"resetCell",value:function(e){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,e-1)}},{key:"_binarySearch",value:function(e,t,n){for(;t<=e;){var o=t+Math.floor((e-t)/2),r=this.getSizeAndPositionOfCell(o).offset;if(r===n)return o;r<n?t=o+1:r>n&&(e=o-1)}return t>0?t-1:0}},{key:"_exponentialSearch",value:function(e,t){for(var n=1;e<this._cellCount&&this.getSizeAndPositionOfCell(e).offset<t;)e+=n,n*=2;return this._binarySearch(Math.min(e,this._cellCount-1),Math.floor(e/2),t)}},{key:"_findNearestCell",value:function(e){if(isNaN(e))throw Error("Invalid offset ".concat(e," specified"));e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredCell(),n=Math.max(0,this._lastMeasuredIndex);return t.offset>=e?this._binarySearch(n,0,e):this._exponentialSearch(n,e)}}]),e}(),Gd=function(){function e(t){var n=t.maxScrollSize,o=void 0===n?"undefined"!=typeof window&&window.chrome?16777100:15e5:n,r=Ld(t,["maxScrollSize"]);Ur(this,e),Hr(this,"_cellSizeAndPositionManager",void 0),Hr(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new Fd(r),this._maxScrollSize=o}return Vr(e,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(e){this._cellSizeAndPositionManager.configure(e)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(e){var t=e.containerSize,n=e.offset,o=this._cellSizeAndPositionManager.getTotalSize(),r=this.getTotalSize(),a=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:r});return Math.round(a*(r-o))}},{key:"getSizeAndPositionOfCell",value:function(e){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(e)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,n=void 0===t?"auto":t,o=e.containerSize,r=e.currentOffset,a=e.targetIndex;r=this._safeOffsetToOffset({containerSize:o,offset:r});var i=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:n,containerSize:o,currentOffset:r,targetIndex:a});return this._offsetToSafeOffset({containerSize:o,offset:i})}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,n=e.offset;return n=this._safeOffsetToOffset({containerSize:t,offset:n}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:t,offset:n})}},{key:"resetCell",value:function(e){this._cellSizeAndPositionManager.resetCell(e)}},{key:"_getOffsetPercentage",value:function(e){var t=e.containerSize,n=e.offset,o=e.totalSize;return o<=t?0:n/(o-t)}},{key:"_offsetToSafeOffset",value:function(e){var t=e.containerSize,n=e.offset,o=this._cellSizeAndPositionManager.getTotalSize(),r=this.getTotalSize();if(o===r)return n;var a=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:o});return Math.round(a*(r-t))}},{key:"_safeOffsetToOffset",value:function(e){var t=e.containerSize,n=e.offset,o=this._cellSizeAndPositionManager.getTotalSize(),r=this.getTotalSize();if(o===r)return n;var a=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:r});return Math.round(a*(o-t))}}]),e}();function Hd(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={};return function(n){var o=n.callback,r=n.indices,a=Object.keys(r),i=!e||a.every((function(e){var t=r[e];return Array.isArray(t)?t.length>0:t>=0})),l=a.length!==Object.keys(t).length||a.some((function(e){var n=t[e],o=r[e];return Array.isArray(o)?n.join(",")!==o.join(","):n!==o}));t=r,i&&l&&o(r)}}function jd(e){var t=e.cellSize,n=e.cellSizeAndPositionManager,o=e.previousCellsCount,r=e.previousCellSize,a=e.previousScrollToAlignment,i=e.previousScrollToIndex,l=e.previousSize,s=e.scrollOffset,c=e.scrollToAlignment,u=e.scrollToIndex,d=e.size,m=e.sizeJustIncreasedFromZero,p=e.updateScrollIndexCallback,h=n.getCellCount(),g=u>=0&&u<h;g&&(d!==l||m||!r||"number"==typeof t&&t!==r||c!==a||u!==i)?p(u):!g&&h>0&&(d<l||h<o)&&s>n.getTotalSize()-d&&p(h-1)}const Ud=!("undefined"==typeof window||!window.document||!window.document.createElement);var Wd,Vd;function Kd(e){if((!Wd&&0!==Wd||e)&&Ud){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Wd=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Wd}var $d,qd,Yd=(Vd="undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).requestAnimationFrame||Vd.webkitRequestAnimationFrame||Vd.mozRequestAnimationFrame||Vd.oRequestAnimationFrame||Vd.msRequestAnimationFrame||function(e){return Vd.setTimeout(e,1e3/60)},Xd=Vd.cancelAnimationFrame||Vd.webkitCancelAnimationFrame||Vd.mozCancelAnimationFrame||Vd.oCancelAnimationFrame||Vd.msCancelAnimationFrame||function(e){Vd.clearTimeout(e)},Zd=Yd,Jd=Xd,Qd=function(e){return Jd(e.id)},em=function(e,t){var n;Promise.resolve().then((function(){n=Date.now()}));var o={id:Zd((function r(){Date.now()-n>=t?e.call():o.id=Zd(r)}))};return o};function tm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function nm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tm(n,!0).forEach((function(t){Hr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tm(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var om="requested",rm=(qd=$d=function(e){function t(e){var n;Ur(this,t),Hr(Kr(n=$r(this,qr(t).call(this,e))),"_onGridRenderedMemoizer",Hd()),Hr(Kr(n),"_onScrollMemoizer",Hd(!1)),Hr(Kr(n),"_deferredInvalidateColumnIndex",null),Hr(Kr(n),"_deferredInvalidateRowIndex",null),Hr(Kr(n),"_recomputeScrollLeftFlag",!1),Hr(Kr(n),"_recomputeScrollTopFlag",!1),Hr(Kr(n),"_horizontalScrollBarSize",0),Hr(Kr(n),"_verticalScrollBarSize",0),Hr(Kr(n),"_scrollbarPresenceChanged",!1),Hr(Kr(n),"_scrollingContainer",void 0),Hr(Kr(n),"_childrenToDisplay",void 0),Hr(Kr(n),"_columnStartIndex",void 0),Hr(Kr(n),"_columnStopIndex",void 0),Hr(Kr(n),"_rowStartIndex",void 0),Hr(Kr(n),"_rowStopIndex",void 0),Hr(Kr(n),"_renderedColumnStartIndex",0),Hr(Kr(n),"_renderedColumnStopIndex",0),Hr(Kr(n),"_renderedRowStartIndex",0),Hr(Kr(n),"_renderedRowStopIndex",0),Hr(Kr(n),"_initialScrollTop",void 0),Hr(Kr(n),"_initialScrollLeft",void 0),Hr(Kr(n),"_disablePointerEventsTimeoutId",void 0),Hr(Kr(n),"_styleCache",{}),Hr(Kr(n),"_cellCache",{}),Hr(Kr(n),"_debounceScrollEndedCallback",(function(){n._disablePointerEventsTimeoutId=null,n.setState({isScrolling:!1,needToResetStyleCache:!1})})),Hr(Kr(n),"_invokeOnGridRenderedHelper",(function(){var e=n.props.onSectionRendered;n._onGridRenderedMemoizer({callback:e,indices:{columnOverscanStartIndex:n._columnStartIndex,columnOverscanStopIndex:n._columnStopIndex,columnStartIndex:n._renderedColumnStartIndex,columnStopIndex:n._renderedColumnStopIndex,rowOverscanStartIndex:n._rowStartIndex,rowOverscanStopIndex:n._rowStopIndex,rowStartIndex:n._renderedRowStartIndex,rowStopIndex:n._renderedRowStopIndex}})})),Hr(Kr(n),"_setScrollingContainerRef",(function(e){n._scrollingContainer=e})),Hr(Kr(n),"_onScroll",(function(e){e.target===n._scrollingContainer&&n.handleScrollEvent(e.target)}));var o=new Gd({cellCount:e.columnCount,cellSizeGetter:function(n){return t._wrapSizeGetter(e.columnWidth)(n)},estimatedCellSize:t._getEstimatedColumnSize(e)}),r=new Gd({cellCount:e.rowCount,cellSizeGetter:function(n){return t._wrapSizeGetter(e.rowHeight)(n)},estimatedCellSize:t._getEstimatedRowSize(e)});return n.state={instanceProps:{columnSizeAndPositionManager:o,rowSizeAndPositionManager:r,prevColumnWidth:e.columnWidth,prevRowHeight:e.rowHeight,prevColumnCount:e.columnCount,prevRowCount:e.rowCount,prevIsScrolling:!0===e.isScrolling,prevScrollToColumn:e.scrollToColumn,prevScrollToRow:e.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:1,scrollDirectionVertical:1,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},e.scrollToRow>0&&(n._initialScrollTop=n._getCalculatedScrollTop(e,n.state)),e.scrollToColumn>0&&(n._initialScrollLeft=n._getCalculatedScrollLeft(e,n.state)),n}return Xr(t,e),Vr(t,[{key:"getOffsetForCell",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alignment,n=void 0===t?this.props.scrollToAlignment:t,o=e.columnIndex,r=void 0===o?this.props.scrollToColumn:o,a=e.rowIndex,i=void 0===a?this.props.scrollToRow:a,l=nm({},this.props,{scrollToAlignment:n,scrollToColumn:r,scrollToRow:i});return{scrollLeft:this._getCalculatedScrollLeft(l),scrollTop:this._getCalculatedScrollTop(l)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(e){var t=e.scrollLeft,n=void 0===t?0:t,o=e.scrollTop,r=void 0===o?0:o;if(!(r<0)){this._debounceScrollEnded();var a=this.props,i=a.autoHeight,l=a.autoWidth,s=a.height,c=a.width,u=this.state.instanceProps,d=u.scrollbarSize,m=u.rowSizeAndPositionManager.getTotalSize(),p=u.columnSizeAndPositionManager.getTotalSize(),h=Math.min(Math.max(0,p-c+d),n),g=Math.min(Math.max(0,m-s+d),r);if(this.state.scrollLeft!==h||this.state.scrollTop!==g){var f={isScrolling:!0,scrollDirectionHorizontal:h!==this.state.scrollLeft?h>this.state.scrollLeft?1:-1:this.state.scrollDirectionHorizontal,scrollDirectionVertical:g!==this.state.scrollTop?g>this.state.scrollTop?1:-1:this.state.scrollDirectionVertical,scrollPositionChangeReason:"observed"};i||(f.scrollTop=g),l||(f.scrollLeft=h),f.needToResetStyleCache=!1,this.setState(f)}this._invokeOnScrollMemoizer({scrollLeft:h,scrollTop:g,totalColumnsWidth:p,totalRowsHeight:m})}}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,n=e.rowIndex;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,t):t,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,n):n}},{key:"measureAllCells",value:function(){var e=this.props,t=e.columnCount,n=e.rowCount,o=this.state.instanceProps;o.columnSizeAndPositionManager.getSizeAndPositionOfCell(t-1),o.rowSizeAndPositionManager.getSizeAndPositionOfCell(n-1)}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,o=e.rowIndex,r=void 0===o?0:o,a=this.props,i=a.scrollToColumn,l=a.scrollToRow,s=this.state.instanceProps;s.columnSizeAndPositionManager.resetCell(n),s.rowSizeAndPositionManager.resetCell(r),this._recomputeScrollLeftFlag=i>=0&&(1===this.state.scrollDirectionHorizontal?n<=i:n>=i),this._recomputeScrollTopFlag=l>=0&&(1===this.state.scrollDirectionVertical?r<=l:r>=l),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(e){var t=e.columnIndex,n=e.rowIndex,o=this.props.columnCount,r=this.props;o>1&&void 0!==t&&this._updateScrollLeftForScrollToColumn(nm({},r,{scrollToColumn:t})),void 0!==n&&this._updateScrollTopForScrollToRow(nm({},r,{scrollToRow:n}))}},{key:"componentDidMount",value:function(){var e=this.props,n=e.getScrollbarSize,o=e.height,r=e.scrollLeft,a=e.scrollToColumn,i=e.scrollTop,l=e.scrollToRow,s=e.width,c=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),c.scrollbarSizeMeasured||this.setState((function(e){var t=nm({},e,{needToResetStyleCache:!1});return t.instanceProps.scrollbarSize=n(),t.instanceProps.scrollbarSizeMeasured=!0,t})),"number"==typeof r&&r>=0||"number"==typeof i&&i>=0){var u=t._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:r,scrollTop:i});u&&(u.needToResetStyleCache=!1,this.setState(u))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var d=o>0&&s>0;a>=0&&d&&this._updateScrollLeftForScrollToColumn(),l>=0&&d&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:r||0,scrollTop:i||0,totalColumnsWidth:c.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:c.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(e,t){var n=this,o=this.props,r=o.autoHeight,a=o.autoWidth,i=o.columnCount,l=o.height,s=o.rowCount,c=o.scrollToAlignment,u=o.scrollToColumn,d=o.scrollToRow,m=o.width,p=this.state,h=p.scrollLeft,g=p.scrollPositionChangeReason,f=p.scrollTop,b=p.instanceProps;this._handleInvalidatedGridSize();var v=i>0&&0===e.columnCount||s>0&&0===e.rowCount;g===om&&(!a&&h>=0&&(h!==this._scrollingContainer.scrollLeft||v)&&(this._scrollingContainer.scrollLeft=h),!r&&f>=0&&(f!==this._scrollingContainer.scrollTop||v)&&(this._scrollingContainer.scrollTop=f));var _=(0===e.width||0===e.height)&&l>0&&m>0;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):jd({cellSizeAndPositionManager:b.columnSizeAndPositionManager,previousCellsCount:e.columnCount,previousCellSize:e.columnWidth,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToColumn,previousSize:e.width,scrollOffset:h,scrollToAlignment:c,scrollToIndex:u,size:m,sizeJustIncreasedFromZero:_,updateScrollIndexCallback:function(){return n._updateScrollLeftForScrollToColumn(n.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):jd({cellSizeAndPositionManager:b.rowSizeAndPositionManager,previousCellsCount:e.rowCount,previousCellSize:e.rowHeight,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToRow,previousSize:e.height,scrollOffset:f,scrollToAlignment:c,scrollToIndex:d,size:l,sizeJustIncreasedFromZero:_,updateScrollIndexCallback:function(){return n._updateScrollTopForScrollToRow(n.props)}}),this._invokeOnGridRenderedHelper(),h!==t.scrollLeft||f!==t.scrollTop){var y=b.rowSizeAndPositionManager.getTotalSize(),k=b.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:h,scrollTop:f,totalColumnsWidth:k,totalRowsHeight:y})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&Qd(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var e=this.props,t=e.autoContainerWidth,n=e.autoHeight,o=e.autoWidth,r=e.className,a=e.containerProps,i=e.containerRole,l=e.containerStyle,s=e.height,c=e.id,u=e.noContentRenderer,d=e.role,m=e.style,p=e.tabIndex,h=e.width,g=this.state,f=g.instanceProps,b=g.needToResetStyleCache,v=this._isScrolling(),_={boxSizing:"border-box",direction:"ltr",height:n?"auto":s,position:"relative",width:o?"auto":h,WebkitOverflowScrolling:"touch",willChange:"transform"};b&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var y=f.columnSizeAndPositionManager.getTotalSize(),k=f.rowSizeAndPositionManager.getTotalSize(),E=k>s?f.scrollbarSize:0,S=y>h?f.scrollbarSize:0;S===this._horizontalScrollBarSize&&E===this._verticalScrollBarSize||(this._horizontalScrollBarSize=S,this._verticalScrollBarSize=E,this._scrollbarPresenceChanged=!0),_.overflowX=y+E<=h?"hidden":"auto",_.overflowY=k+S<=s?"hidden":"auto";var w=this._childrenToDisplay,I=0===w.length&&s>0&&h>0;return cn.createElement("div",C({ref:this._setScrollingContainerRef},a,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:zd("ReactVirtualized__Grid",r),id:c,onScroll:this._onScroll,role:d,style:nm({},_,{},m),tabIndex:p}),w.length>0&&cn.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:i,style:nm({width:t?"auto":y,height:k,maxWidth:y,maxHeight:k,overflow:"hidden",pointerEvents:v?"none":"",position:"relative"},l)},w),I&&u())}},{key:"_calculateChildrenToRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=e.cellRenderer,o=e.cellRangeRenderer,r=e.columnCount,a=e.deferredMeasurementCache,i=e.height,l=e.overscanColumnCount,s=e.overscanIndicesGetter,c=e.overscanRowCount,u=e.rowCount,d=e.width,m=e.isScrollingOptOut,p=t.scrollDirectionHorizontal,h=t.scrollDirectionVertical,g=t.instanceProps,f=this._initialScrollTop>0?this._initialScrollTop:t.scrollTop,b=this._initialScrollLeft>0?this._initialScrollLeft:t.scrollLeft,v=this._isScrolling(e,t);if(this._childrenToDisplay=[],i>0&&d>0){var _=g.columnSizeAndPositionManager.getVisibleCellRange({containerSize:d,offset:b}),y=g.rowSizeAndPositionManager.getVisibleCellRange({containerSize:i,offset:f}),k=g.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:d,offset:b}),E=g.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:i,offset:f});this._renderedColumnStartIndex=_.start,this._renderedColumnStopIndex=_.stop,this._renderedRowStartIndex=y.start,this._renderedRowStopIndex=y.stop;var S=s({direction:"horizontal",cellCount:r,overscanCellsCount:l,scrollDirection:p,startIndex:"number"==typeof _.start?_.start:0,stopIndex:"number"==typeof _.stop?_.stop:-1}),w=s({direction:"vertical",cellCount:u,overscanCellsCount:c,scrollDirection:h,startIndex:"number"==typeof y.start?y.start:0,stopIndex:"number"==typeof y.stop?y.stop:-1}),C=S.overscanStartIndex,I=S.overscanStopIndex,x=w.overscanStartIndex,T=w.overscanStopIndex;if(a){if(!a.hasFixedHeight())for(var P=x;P<=T;P++)if(!a.has(P,0)){C=0,I=r-1;break}if(!a.hasFixedWidth())for(var R=C;R<=I;R++)if(!a.has(0,R)){x=0,T=u-1;break}}this._childrenToDisplay=o({cellCache:this._cellCache,cellRenderer:n,columnSizeAndPositionManager:g.columnSizeAndPositionManager,columnStartIndex:C,columnStopIndex:I,deferredMeasurementCache:a,horizontalOffsetAdjustment:k,isScrolling:v,isScrollingOptOut:m,parent:this,rowSizeAndPositionManager:g.rowSizeAndPositionManager,rowStartIndex:x,rowStopIndex:T,scrollLeft:b,scrollTop:f,styleCache:this._styleCache,verticalOffsetAdjustment:E,visibleColumnIndices:_,visibleRowIndices:y}),this._columnStartIndex=C,this._columnStopIndex=I,this._rowStartIndex=x,this._rowStopIndex=T}}},{key:"_debounceScrollEnded",value:function(){var e=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&Qd(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=em(this._debounceScrollEndedCallback,e)}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex&&"number"==typeof this._deferredInvalidateRowIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t})}}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,n=e.scrollLeft,o=e.scrollTop,r=e.totalColumnsWidth,a=e.totalRowsHeight;this._onScrollMemoizer({callback:function(e){var n=e.scrollLeft,o=e.scrollTop,i=t.props,l=i.height;(0,i.onScroll)({clientHeight:l,clientWidth:i.width,scrollHeight:a,scrollLeft:n,scrollTop:o,scrollWidth:r})},indices:{scrollLeft:n,scrollTop:o}})}},{key:"_isScrolling",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return Object.hasOwnProperty.call(e,"isScrolling")?Boolean(e.isScrolling):Boolean(t.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var e=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,e({horizontal:this._horizontalScrollBarSize>0,size:this.state.instanceProps.scrollbarSize,vertical:this._verticalScrollBarSize>0})}}},{key:"scrollToPosition",value:function(e){var n=e.scrollLeft,o=e.scrollTop,r=t._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:n,scrollTop:o});r&&(r.needToResetStyleCache=!1,this.setState(r))}},{key:"_getCalculatedScrollLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return t._getCalculatedScrollLeft(e,n)}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,o=t._getScrollLeftForScrollToColumnStateUpdate(e,n);o&&(o.needToResetStyleCache=!1,this.setState(o))}},{key:"_getCalculatedScrollTop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return t._getCalculatedScrollTop(e,n)}},{key:"_resetStyleCache",value:function(){var e=this._styleCache,t=this._cellCache,n=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var o=this._rowStartIndex;o<=this._rowStopIndex;o++)for(var r=this._columnStartIndex;r<=this._columnStopIndex;r++){var a="".concat(o,"-").concat(r);this._styleCache[a]=e[a],n&&(this._cellCache[a]=t[a])}}},{key:"_updateScrollTopForScrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,o=t._getScrollTopForScrollToRowStateUpdate(e,n);o&&(o.needToResetStyleCache=!1,this.setState(o))}}],[{key:"getDerivedStateFromProps",value:function(e,n){var o={};0===e.columnCount&&0!==n.scrollLeft||0===e.rowCount&&0!==n.scrollTop?(o.scrollLeft=0,o.scrollTop=0):(e.scrollLeft!==n.scrollLeft&&e.scrollToColumn<0||e.scrollTop!==n.scrollTop&&e.scrollToRow<0)&&Object.assign(o,t._getScrollToPositionStateUpdate({prevState:n,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}));var r,a,i=n.instanceProps;return o.needToResetStyleCache=!1,e.columnWidth===i.prevColumnWidth&&e.rowHeight===i.prevRowHeight||(o.needToResetStyleCache=!0),i.columnSizeAndPositionManager.configure({cellCount:e.columnCount,estimatedCellSize:t._getEstimatedColumnSize(e),cellSizeGetter:t._wrapSizeGetter(e.columnWidth)}),i.rowSizeAndPositionManager.configure({cellCount:e.rowCount,estimatedCellSize:t._getEstimatedRowSize(e),cellSizeGetter:t._wrapSizeGetter(e.rowHeight)}),0!==i.prevColumnCount&&0!==i.prevRowCount||(i.prevColumnCount=0,i.prevRowCount=0),e.autoHeight&&!1===e.isScrolling&&!0===i.prevIsScrolling&&Object.assign(o,{isScrolling:!1}),Bd({cellCount:i.prevColumnCount,cellSize:"number"==typeof i.prevColumnWidth?i.prevColumnWidth:null,computeMetadataCallback:function(){return i.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.columnCount,nextCellSize:"number"==typeof e.columnWidth?e.columnWidth:null,nextScrollToIndex:e.scrollToColumn,scrollToIndex:i.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){r=t._getScrollLeftForScrollToColumnStateUpdate(e,n)}}),Bd({cellCount:i.prevRowCount,cellSize:"number"==typeof i.prevRowHeight?i.prevRowHeight:null,computeMetadataCallback:function(){return i.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.rowCount,nextCellSize:"number"==typeof e.rowHeight?e.rowHeight:null,nextScrollToIndex:e.scrollToRow,scrollToIndex:i.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){a=t._getScrollTopForScrollToRowStateUpdate(e,n)}}),i.prevColumnCount=e.columnCount,i.prevColumnWidth=e.columnWidth,i.prevIsScrolling=!0===e.isScrolling,i.prevRowCount=e.rowCount,i.prevRowHeight=e.rowHeight,i.prevScrollToColumn=e.scrollToColumn,i.prevScrollToRow=e.scrollToRow,i.scrollbarSize=e.getScrollbarSize(),void 0===i.scrollbarSize?(i.scrollbarSizeMeasured=!1,i.scrollbarSize=0):i.scrollbarSizeMeasured=!0,o.instanceProps=i,nm({},o,{},r,{},a)}},{key:"_getEstimatedColumnSize",value:function(e){return"number"==typeof e.columnWidth?e.columnWidth:e.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(e){return"number"==typeof e.rowHeight?e.rowHeight:e.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(e){var t=e.prevState,n=e.scrollLeft,o=e.scrollTop,r={scrollPositionChangeReason:om};return"number"==typeof n&&n>=0&&(r.scrollDirectionHorizontal=n>t.scrollLeft?1:-1,r.scrollLeft=n),"number"==typeof o&&o>=0&&(r.scrollDirectionVertical=o>t.scrollTop?1:-1,r.scrollTop=o),"number"==typeof n&&n>=0&&n!==t.scrollLeft||"number"==typeof o&&o>=0&&o!==t.scrollTop?r:{}}},{key:"_wrapSizeGetter",value:function(e){return"function"==typeof e?e:function(){return e}}},{key:"_getCalculatedScrollLeft",value:function(e,t){var n=e.columnCount,o=e.height,r=e.scrollToAlignment,a=e.scrollToColumn,i=e.width,l=t.scrollLeft,s=t.instanceProps;if(n>0){var c=n-1,u=a<0?c:Math.min(c,a),d=s.rowSizeAndPositionManager.getTotalSize(),m=s.scrollbarSizeMeasured&&d>o?s.scrollbarSize:0;return s.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:r,containerSize:i-m,currentOffset:l,targetIndex:u})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(e,n){var o=n.scrollLeft,r=t._getCalculatedScrollLeft(e,n);return"number"==typeof r&&r>=0&&o!==r?t._getScrollToPositionStateUpdate({prevState:n,scrollLeft:r,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(e,t){var n=e.height,o=e.rowCount,r=e.scrollToAlignment,a=e.scrollToRow,i=e.width,l=t.scrollTop,s=t.instanceProps;if(o>0){var c=o-1,u=a<0?c:Math.min(c,a),d=s.columnSizeAndPositionManager.getTotalSize(),m=s.scrollbarSizeMeasured&&d>i?s.scrollbarSize:0;return s.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:r,containerSize:n-m,currentOffset:l,targetIndex:u})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(e,n){var o=n.scrollTop,r=t._getCalculatedScrollTop(e,n);return"number"==typeof r&&r>=0&&o!==r?t._getScrollToPositionStateUpdate({prevState:n,scrollLeft:-1,scrollTop:r}):{}}}]),t}(cn.PureComponent),Hr($d,"propTypes",null),qd);Hr(rm,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:function(e){for(var t=e.cellCache,n=e.cellRenderer,o=e.columnSizeAndPositionManager,r=e.columnStartIndex,a=e.columnStopIndex,i=e.deferredMeasurementCache,l=e.horizontalOffsetAdjustment,s=e.isScrolling,c=e.isScrollingOptOut,u=e.parent,d=e.rowSizeAndPositionManager,m=e.rowStartIndex,p=e.rowStopIndex,h=e.styleCache,g=e.verticalOffsetAdjustment,f=e.visibleColumnIndices,b=e.visibleRowIndices,v=[],_=o.areOffsetsAdjusted()||d.areOffsetsAdjusted(),y=!s&&!_,k=m;k<=p;k++)for(var E=d.getSizeAndPositionOfCell(k),S=r;S<=a;S++){var w=o.getSizeAndPositionOfCell(S),C=S>=f.start&&S<=f.stop&&k>=b.start&&k<=b.stop,I="".concat(k,"-").concat(S),x=void 0;y&&h[I]?x=h[I]:i&&!i.has(k,S)?x={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(x={height:E.size,left:w.offset+l,position:"absolute",top:E.offset+g,width:w.size},h[I]=x);var T={columnIndex:S,isScrolling:s,isVisible:C,key:I,parent:u,rowIndex:k,style:x},P=void 0;!c&&!s||l||g?P=n(T):(t[I]||(t[I]=n(T)),P=t[I]),null!=P&&!1!==P&&v.push(P)}return v},containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:Kd,noContentRenderer:function(){return null},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:function(e){var t=e.cellCount,n=e.overscanCellsCount,o=e.scrollDirection,r=e.startIndex,a=e.stopIndex;return 1===o?{overscanStartIndex:Math.max(0,r),overscanStopIndex:Math.min(t-1,a+n)}:{overscanStartIndex:Math.max(0,r-n),overscanStopIndex:Math.min(t-1,a)}},overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1}),Md(rm);const am=rm;function im(e){var t=e.cellCount,n=e.overscanCellsCount,o=e.scrollDirection,r=e.startIndex,a=e.stopIndex;return n=Math.max(1,n),1===o?{overscanStartIndex:Math.max(0,r-1),overscanStopIndex:Math.min(t-1,a+n)}:{overscanStartIndex:Math.max(0,r-n),overscanStopIndex:Math.min(t-1,a+1)}}var lm,sm;function cm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var um,dm,mm=(sm=lm=function(e){function t(){var e,n;Ur(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return Hr(Kr(n=$r(this,(e=qr(t)).call.apply(e,[this].concat(r)))),"state",{scrollToColumn:0,scrollToRow:0,instanceProps:{prevScrollToColumn:0,prevScrollToRow:0}}),Hr(Kr(n),"_columnStartIndex",0),Hr(Kr(n),"_columnStopIndex",0),Hr(Kr(n),"_rowStartIndex",0),Hr(Kr(n),"_rowStopIndex",0),Hr(Kr(n),"_onKeyDown",(function(e){var t=n.props,o=t.columnCount,r=t.disabled,a=t.mode,i=t.rowCount;if(!r){var l=n._getScrollState(),s=l.scrollToColumn,c=l.scrollToRow,u=n._getScrollState(),d=u.scrollToColumn,m=u.scrollToRow;switch(e.key){case"ArrowDown":m="cells"===a?Math.min(m+1,i-1):Math.min(n._rowStopIndex+1,i-1);break;case"ArrowLeft":d="cells"===a?Math.max(d-1,0):Math.max(n._columnStartIndex-1,0);break;case"ArrowRight":d="cells"===a?Math.min(d+1,o-1):Math.min(n._columnStopIndex+1,o-1);break;case"ArrowUp":m="cells"===a?Math.max(m-1,0):Math.max(n._rowStartIndex-1,0)}d===s&&m===c||(e.preventDefault(),n._updateScrollState({scrollToColumn:d,scrollToRow:m}))}})),Hr(Kr(n),"_onSectionRendered",(function(e){var t=e.columnStartIndex,o=e.columnStopIndex,r=e.rowStartIndex,a=e.rowStopIndex;n._columnStartIndex=t,n._columnStopIndex=o,n._rowStartIndex=r,n._rowStopIndex=a})),n}return Xr(t,e),Vr(t,[{key:"setScrollIndexes",value:function(e){var t=e.scrollToColumn,n=e.scrollToRow;this.setState({scrollToRow:n,scrollToColumn:t})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,o=this._getScrollState(),r=o.scrollToColumn,a=o.scrollToRow;return cn.createElement("div",{className:t,onKeyDown:this._onKeyDown},n({onSectionRendered:this._onSectionRendered,scrollToColumn:r,scrollToRow:a}))}},{key:"_getScrollState",value:function(){return this.props.isControlled?this.props:this.state}},{key:"_updateScrollState",value:function(e){var t=e.scrollToColumn,n=e.scrollToRow,o=this.props,r=o.isControlled,a=o.onScrollToChange;"function"==typeof a&&a({scrollToColumn:t,scrollToRow:n}),r||this.setState({scrollToColumn:t,scrollToRow:n})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isControlled?{}:e.scrollToColumn!==t.instanceProps.prevScrollToColumn||e.scrollToRow!==t.instanceProps.prevScrollToRow?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cm(n,!0).forEach((function(t){Hr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cm(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{scrollToColumn:e.scrollToColumn,scrollToRow:e.scrollToRow,instanceProps:{prevScrollToColumn:e.scrollToColumn,prevScrollToRow:e.scrollToRow}}):{}}}]),t}(cn.PureComponent),Hr(lm,"propTypes",null),sm);function pm(e,t){var o,r=void 0!==(o=void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:n.g).document&&o.document.attachEvent;if(!r){var a=function(){var e=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||function(e){return o.setTimeout(e,20)};return function(t){return e(t)}}(),i=function(){var e=o.cancelAnimationFrame||o.mozCancelAnimationFrame||o.webkitCancelAnimationFrame||o.clearTimeout;return function(t){return e(t)}}(),l=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,o=t.lastElementChild,r=n.firstElementChild;o.scrollLeft=o.scrollWidth,o.scrollTop=o.scrollHeight,r.style.width=n.offsetWidth+1+"px",r.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},s=function(e){if(!(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;l(this),this.__resizeRAF__&&i(this.__resizeRAF__),this.__resizeRAF__=a((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(n){n.call(t,e)})))}))}},c=!1,u="",d="animationstart",m="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),h=o.document.createElement("fakeelement");if(void 0!==h.style.animationName&&(c=!0),!1===c)for(var g=0;g<m.length;g++)if(void 0!==h.style[m[g]+"AnimationName"]){u="-"+m[g].toLowerCase()+"-",d=p[g],c=!0;break}var f="resizeanim",b="@"+u+"keyframes "+f+" { from { opacity: 0; } to { opacity: 0; } } ",v=u+"animation: 1ms "+f+"; "}return{addResizeListener:function(t,n){if(r)t.attachEvent("onresize",n);else{if(!t.__resizeTriggers__){var a=t.ownerDocument,i=o.getComputedStyle(t);i&&"static"==i.position&&(t.style.position="relative"),function(t){if(!t.getElementById("detectElementResize")){var n=(b||"")+".resize-triggers { "+(v||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',o=t.head||t.getElementsByTagName("head")[0],r=t.createElement("style");r.id="detectElementResize",r.type="text/css",null!=e&&r.setAttribute("nonce",e),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(t.createTextNode(n)),o.appendChild(r)}}(a),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=a.createElement("div")).className="resize-triggers";var c='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>';if(window.trustedTypes){var u=trustedTypes.createPolicy("react-virtualized-auto-sizer",{createHTML:function(){return c}});t.__resizeTriggers__.innerHTML=u.createHTML("")}else t.__resizeTriggers__.innerHTML=c;t.appendChild(t.__resizeTriggers__),l(t),t.addEventListener("scroll",s,!0),d&&(t.__resizeTriggers__.__animationListener__=function(e){e.animationName==f&&l(t)},t.__resizeTriggers__.addEventListener(d,t.__resizeTriggers__.__animationListener__))}t.__resizeListeners__.push(n)}},removeResizeListener:function(e,t){if(r)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",s,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(d,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}function hm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function gm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hm(n,!0).forEach((function(t){Hr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hm(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Hr(mm,"defaultProps",{disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0}),Md(mm);var fm=(dm=um=function(e){function t(){var e,n;Ur(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return Hr(Kr(n=$r(this,(e=qr(t)).call.apply(e,[this].concat(r)))),"state",{height:n.props.defaultHeight||0,width:n.props.defaultWidth||0}),Hr(Kr(n),"_parentNode",void 0),Hr(Kr(n),"_autoSizer",void 0),Hr(Kr(n),"_window",void 0),Hr(Kr(n),"_detectElementResize",void 0),Hr(Kr(n),"_onResize",(function(){var e=n.props,t=e.disableHeight,o=e.disableWidth,r=e.onResize;if(n._parentNode){var a=n._parentNode.offsetHeight||0,i=n._parentNode.offsetWidth||0,l=(n._window||window).getComputedStyle(n._parentNode)||{},s=parseInt(l.paddingLeft,10)||0,c=parseInt(l.paddingRight,10)||0,u=parseInt(l.paddingTop,10)||0,d=parseInt(l.paddingBottom,10)||0,m=a-u-d,p=i-s-c;(!t&&n.state.height!==m||!o&&n.state.width!==p)&&(n.setState({height:a-u-d,width:i-s-c}),r({height:a,width:i}))}})),Hr(Kr(n),"_setRef",(function(e){n._autoSizer=e})),n}return Xr(t,e),Vr(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=pm(e,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,o=e.disableHeight,r=e.disableWidth,a=e.style,i=this.state,l=i.height,s=i.width,c={overflow:"visible"},u={};return o||(c.height=0,u.height=l),r||(c.width=0,u.width=s),cn.createElement("div",{className:n,ref:this._setRef,style:gm({},c,{},a)},t(u))}}]),t}(cn.Component),Hr(um,"propTypes",null),dm);Hr(fm,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}});var bm,vm,_m=(vm=bm=function(e){function t(){var e,n;Ur(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return Hr(Kr(n=$r(this,(e=qr(t)).call.apply(e,[this].concat(r)))),"_child",void 0),Hr(Kr(n),"_measure",(function(){var e=n.props,t=e.cache,o=e.columnIndex,r=void 0===o?0:o,a=e.parent,i=e.rowIndex,l=void 0===i?n.props.index||0:i,s=n._getCellMeasurements(),c=s.height,u=s.width;c===t.getHeight(l,r)&&u===t.getWidth(l,r)||(t.set(l,r,u,c),a&&"function"==typeof a.recomputeGridSize&&a.recomputeGridSize({columnIndex:r,rowIndex:l}))})),Hr(Kr(n),"_registerChild",(function(e){!e||e instanceof Element||console.warn("CellMeasurer registerChild expects to be passed Element or null"),n._child=e,e&&n._maybeMeasureCell()})),n}return Xr(t,e),Vr(t,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var e=this.props.children;return"function"==typeof e?e({measure:this._measure,registerChild:this._registerChild}):e}},{key:"_getCellMeasurements",value:function(){var e=this.props.cache,t=this._child||(0,Zr.findDOMNode)(this);if(t&&t.ownerDocument&&t.ownerDocument.defaultView&&t instanceof t.ownerDocument.defaultView.HTMLElement){var n=t.style.width,o=t.style.height;e.hasFixedWidth()||(t.style.width="auto"),e.hasFixedHeight()||(t.style.height="auto");var r=Math.ceil(t.offsetHeight),a=Math.ceil(t.offsetWidth);return n&&(t.style.width=n),o&&(t.style.height=o),{height:r,width:a}}return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var e=this.props,t=e.cache,n=e.columnIndex,o=void 0===n?0:n,r=e.parent,a=e.rowIndex,i=void 0===a?this.props.index||0:a;if(!t.has(i,o)){var l=this._getCellMeasurements(),s=l.height,c=l.width;t.set(i,o,c,s),r&&"function"==typeof r.invalidateCellSizeAfterRender&&r.invalidateCellSizeAfterRender({columnIndex:o,rowIndex:i})}}}]),t}(cn.PureComponent),Hr(bm,"propTypes",null),vm);function ym(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function km(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ym(n,!0).forEach((function(t){Hr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ym(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Hr(_m,"__internalCellMeasurerFlag",!1);var Em="requested",Sm=function(e){function t(){var e,n;Ur(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return Hr(Kr(n=$r(this,(e=qr(t)).call.apply(e,[this].concat(r)))),"state",{isScrolling:!1,scrollLeft:0,scrollTop:0}),Hr(Kr(n),"_calculateSizeAndPositionDataOnNextUpdate",!1),Hr(Kr(n),"_onSectionRenderedMemoizer",Hd()),Hr(Kr(n),"_onScrollMemoizer",Hd(!1)),Hr(Kr(n),"_invokeOnSectionRenderedHelper",(function(){var e=n.props,t=e.cellLayoutManager,o=e.onSectionRendered;n._onSectionRenderedMemoizer({callback:o,indices:{indices:t.getLastRenderedIndices()}})})),Hr(Kr(n),"_setScrollingContainerRef",(function(e){n._scrollingContainer=e})),Hr(Kr(n),"_updateScrollPositionForScrollToCell",(function(){var e=n.props,t=e.cellLayoutManager,o=e.height,r=e.scrollToAlignment,a=e.scrollToCell,i=e.width,l=n.state,s=l.scrollLeft,c=l.scrollTop;if(a>=0){var u=t.getScrollPositionForCell({align:r,cellIndex:a,height:o,scrollLeft:s,scrollTop:c,width:i});u.scrollLeft===s&&u.scrollTop===c||n._setScrollPosition(u)}})),Hr(Kr(n),"_onScroll",(function(e){if(e.target===n._scrollingContainer){n._enablePointerEventsAfterDelay();var t=n.props,o=t.cellLayoutManager,r=t.height,a=t.isScrollingChange,i=t.width,l=n._scrollbarSize,s=o.getTotalSize(),c=s.height,u=s.width,d=Math.max(0,Math.min(u-i+l,e.target.scrollLeft)),m=Math.max(0,Math.min(c-r+l,e.target.scrollTop));if(n.state.scrollLeft!==d||n.state.scrollTop!==m){var p=e.cancelable?"observed":Em;n.state.isScrolling||a(!0),n.setState({isScrolling:!0,scrollLeft:d,scrollPositionChangeReason:p,scrollTop:m})}n._invokeOnScrollMemoizer({scrollLeft:d,scrollTop:m,totalWidth:u,totalHeight:c})}})),n._scrollbarSize=Kd(),void 0===n._scrollbarSize?(n._scrollbarSizeMeasured=!1,n._scrollbarSize=0):n._scrollbarSizeMeasured=!0,n}return Xr(t,e),Vr(t,[{key:"recomputeCellSizesAndPositions",value:function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.cellLayoutManager,n=e.scrollLeft,o=e.scrollToCell,r=e.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=Kd(),this._scrollbarSizeMeasured=!0,this.setState({})),o>=0?this._updateScrollPositionForScrollToCell():(n>=0||r>=0)&&this._setScrollPosition({scrollLeft:n,scrollTop:r}),this._invokeOnSectionRenderedHelper();var a=t.getTotalSize(),i=a.height,l=a.width;this._invokeOnScrollMemoizer({scrollLeft:n||0,scrollTop:r||0,totalHeight:i,totalWidth:l})}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,o=n.height,r=n.scrollToAlignment,a=n.scrollToCell,i=n.width,l=this.state,s=l.scrollLeft,c=l.scrollPositionChangeReason,u=l.scrollTop;c===Em&&(s>=0&&s!==t.scrollLeft&&s!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=s),u>=0&&u!==t.scrollTop&&u!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=u)),o===e.height&&r===e.scrollToAlignment&&a===e.scrollToCell&&i===e.width||this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var e=this.props,t=e.autoHeight,n=e.cellCount,o=e.cellLayoutManager,r=e.className,a=e.height,i=e.horizontalOverscanSize,l=e.id,s=e.noContentRenderer,c=e.style,u=e.verticalOverscanSize,d=e.width,m=this.state,p=m.isScrolling,h=m.scrollLeft,g=m.scrollTop;(this._lastRenderedCellCount!==n||this._lastRenderedCellLayoutManager!==o||this._calculateSizeAndPositionDataOnNextUpdate)&&(this._lastRenderedCellCount=n,this._lastRenderedCellLayoutManager=o,this._calculateSizeAndPositionDataOnNextUpdate=!1,o.calculateSizeAndPositionData());var f=o.getTotalSize(),b=f.height,v=f.width,_=Math.max(0,h-i),y=Math.max(0,g-u),k=Math.min(v,h+d+i),E=Math.min(b,g+a+u),S=a>0&&d>0?o.cellRenderers({height:E-y,isScrolling:p,width:k-_,x:_,y}):[],w={boxSizing:"border-box",direction:"ltr",height:t?"auto":a,position:"relative",WebkitOverflowScrolling:"touch",width:d,willChange:"transform"},C=b>a?this._scrollbarSize:0,I=v>d?this._scrollbarSize:0;return w.overflowX=v+C<=d?"hidden":"auto",w.overflowY=b+I<=a?"hidden":"auto",cn.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:zd("ReactVirtualized__Collection",r),id:l,onScroll:this._onScroll,role:"grid",style:km({},w,{},c),tabIndex:0},n>0&&cn.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:b,maxHeight:b,maxWidth:v,overflow:"hidden",pointerEvents:p?"none":"",width:v}},S),0===n&&s())}},{key:"_enablePointerEventsAfterDelay",value:function(){var e=this;this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=setTimeout((function(){(0,e.props.isScrollingChange)(!1),e._disablePointerEventsTimeoutId=null,e.setState({isScrolling:!1})}),150)}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,n=e.scrollLeft,o=e.scrollTop,r=e.totalHeight,a=e.totalWidth;this._onScrollMemoizer({callback:function(e){var n=e.scrollLeft,o=e.scrollTop,i=t.props,l=i.height;(0,i.onScroll)({clientHeight:l,clientWidth:i.width,scrollHeight:r,scrollLeft:n,scrollTop:o,scrollWidth:a})},indices:{scrollLeft:n,scrollTop:o}})}},{key:"_setScrollPosition",value:function(e){var t=e.scrollLeft,n=e.scrollTop,o={scrollPositionChangeReason:Em};t>=0&&(o.scrollLeft=t),n>=0&&(o.scrollTop=n),(t>=0&&t!==this.state.scrollLeft||n>=0&&n!==this.state.scrollTop)&&this.setState(o)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 0!==e.cellCount||0===t.scrollLeft&&0===t.scrollTop?e.scrollLeft!==t.scrollLeft||e.scrollTop!==t.scrollTop?{scrollLeft:null!=e.scrollLeft?e.scrollLeft:t.scrollLeft,scrollTop:null!=e.scrollTop?e.scrollTop:t.scrollTop,scrollPositionChangeReason:Em}:null:{scrollLeft:0,scrollTop:0,scrollPositionChangeReason:Em}}}]),t}(cn.PureComponent);Hr(Sm,"defaultProps",{"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0}),Sm.propTypes={},Md(Sm);const wm=Sm;var Cm=function(){function e(t){var n=t.height,o=t.width,r=t.x,a=t.y;Ur(this,e),this.height=n,this.width=o,this.x=r,this.y=a,this._indexMap={},this._indices=[]}return Vr(e,[{key:"addCellIndex",value:function(e){var t=e.index;this._indexMap[t]||(this._indexMap[t]=!0,this._indices.push(t))}},{key:"getCellIndices",value:function(){return this._indices}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y," ").concat(this.width,"x").concat(this.height)}}]),e}(),Im=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;Ur(this,e),this._sectionSize=t,this._cellMetadata=[],this._sections={}}return Vr(e,[{key:"getCellIndices",value:function(e){var t=e.height,n=e.width,o=e.x,r=e.y,a={};return this.getSections({height:t,width:n,x:o,y:r}).forEach((function(e){return e.getCellIndices().forEach((function(e){a[e]=e}))})),Object.keys(a).map((function(e){return a[e]}))}},{key:"getCellMetadata",value:function(e){var t=e.index;return this._cellMetadata[t]}},{key:"getSections",value:function(e){for(var t=e.height,n=e.width,o=e.x,r=e.y,a=Math.floor(o/this._sectionSize),i=Math.floor((o+n-1)/this._sectionSize),l=Math.floor(r/this._sectionSize),s=Math.floor((r+t-1)/this._sectionSize),c=[],u=a;u<=i;u++)for(var d=l;d<=s;d++){var m="".concat(u,".").concat(d);this._sections[m]||(this._sections[m]=new Cm({height:this._sectionSize,width:this._sectionSize,x:u*this._sectionSize,y:d*this._sectionSize})),c.push(this._sections[m])}return c}},{key:"getTotalSectionCount",value:function(){return Object.keys(this._sections).length}},{key:"toString",value:function(){var e=this;return Object.keys(this._sections).map((function(t){return e._sections[t].toString()}))}},{key:"registerCell",value:function(e){var t=e.cellMetadatum,n=e.index;this._cellMetadata[n]=t,this.getSections(t).forEach((function(e){return e.addCellIndex({index:n})}))}}]),e}();function xm(e){var t=e.align,n=void 0===t?"auto":t,o=e.cellOffset,r=e.cellSize,a=e.containerSize,i=e.currentOffset,l=o,s=l-a+r;switch(n){case"start":return l;case"end":return s;case"center":return l-(a-r)/2;default:return Math.max(s,Math.min(l,i))}}var Tm=function(e){function t(e,n){var o;return Ur(this,t),(o=$r(this,qr(t).call(this,e,n)))._cellMetadata=[],o._lastRenderedCellIndices=[],o._cellCache=[],o._isScrollingChange=o._isScrollingChange.bind(Kr(o)),o._setCollectionViewRef=o._setCollectionViewRef.bind(Kr(o)),o}return Xr(t,e),Vr(t,[{key:"forceUpdate",value:function(){void 0!==this._collectionView&&this._collectionView.forceUpdate()}},{key:"recomputeCellSizesAndPositions",value:function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()}},{key:"render",value:function(){var e=C({},this.props);return cn.createElement(wm,C({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},e))}},{key:"calculateSizeAndPositionData",value:function(){var e=this.props,t=function(e){for(var t=e.cellCount,n=e.cellSizeAndPositionGetter,o=[],r=new Im(e.sectionSize),a=0,i=0,l=0;l<t;l++){var s=n({index:l});if(null==s.height||isNaN(s.height)||null==s.width||isNaN(s.width)||null==s.x||isNaN(s.x)||null==s.y||isNaN(s.y))throw Error("Invalid metadata returned for cell ".concat(l,":\n        x:").concat(s.x,", y:").concat(s.y,", width:").concat(s.width,", height:").concat(s.height));a=Math.max(a,s.y+s.height),i=Math.max(i,s.x+s.width),o[l]=s,r.registerCell({cellMetadatum:s,index:l})}return{cellMetadata:o,height:a,sectionManager:r,width:i}}({cellCount:e.cellCount,cellSizeAndPositionGetter:e.cellSizeAndPositionGetter,sectionSize:e.sectionSize});this._cellMetadata=t.cellMetadata,this._sectionManager=t.sectionManager,this._height=t.height,this._width=t.width}},{key:"getLastRenderedIndices",value:function(){return this._lastRenderedCellIndices}},{key:"getScrollPositionForCell",value:function(e){var t=e.align,n=e.cellIndex,o=e.height,r=e.scrollLeft,a=e.scrollTop,i=e.width,l=this.props.cellCount;if(n>=0&&n<l){var s=this._cellMetadata[n];r=xm({align:t,cellOffset:s.x,cellSize:s.width,containerSize:i,currentOffset:r,targetIndex:n}),a=xm({align:t,cellOffset:s.y,cellSize:s.height,containerSize:o,currentOffset:a,targetIndex:n})}return{scrollLeft:r,scrollTop:a}}},{key:"getTotalSize",value:function(){return{height:this._height,width:this._width}}},{key:"cellRenderers",value:function(e){var t=this,n=e.height,o=e.isScrolling,r=e.width,a=e.x,i=e.y,l=this.props,s=l.cellGroupRenderer,c=l.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:n,width:r,x:a,y:i}),s({cellCache:this._cellCache,cellRenderer:c,cellSizeAndPositionGetter:function(e){var n=e.index;return t._sectionManager.getCellMetadata({index:n})},indices:this._lastRenderedCellIndices,isScrolling:o})}},{key:"_isScrollingChange",value:function(e){e||(this._cellCache=[])}},{key:"_setCollectionViewRef",value:function(e){this._collectionView=e}}]),t}(cn.PureComponent);Hr(Tm,"defaultProps",{"aria-label":"grid",cellGroupRenderer:function(e){var t=e.cellCache,n=e.cellRenderer,o=e.cellSizeAndPositionGetter,r=e.indices,a=e.isScrolling;return r.map((function(e){var r=o({index:e}),i={index:e,isScrolling:a,key:e,style:{height:r.height,left:r.x,position:"absolute",top:r.y,width:r.width}};return a?(e in t||(t[e]=n(i)),t[e]):n(i)})).filter((function(e){return!!e}))}}),Tm.propTypes={},(function(e){function t(e,n){var o;return Ur(this,t),(o=$r(this,qr(t).call(this,e,n)))._registerChild=o._registerChild.bind(Kr(o)),o}return Xr(t,e),Vr(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.columnMaxWidth,o=t.columnMinWidth,r=t.columnCount,a=t.width;n===e.columnMaxWidth&&o===e.columnMinWidth&&r===e.columnCount&&a===e.width||this._registeredChild&&this._registeredChild.recomputeGridSize()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.columnMaxWidth,o=e.columnMinWidth,r=e.columnCount,a=e.width,i=o||1,l=n?Math.min(n,a):a,s=a/r;return s=Math.max(i,s),s=Math.min(l,s),s=Math.floor(s),t({adjustedWidth:Math.min(a,s*r),columnWidth:s,getColumnWidth:function(){return s},registerChild:this._registerChild})}},{key:"_registerChild",value:function(e){if(e&&"function"!=typeof e.recomputeGridSize)throw Error("Unexpected child type registered; only Grid/MultiGrid children are supported.");this._registeredChild=e,this._registeredChild&&this._registeredChild.recomputeGridSize()}}]),t}(cn.PureComponent)).propTypes={};var Pm=function(e){function t(e,n){var o;return Ur(this,t),(o=$r(this,qr(t).call(this,e,n)))._loadMoreRowsMemoizer=Hd(),o._onRowsRendered=o._onRowsRendered.bind(Kr(o)),o._registerChild=o._registerChild.bind(Kr(o)),o}return Xr(t,e),Vr(t,[{key:"resetLoadMoreRowsCache",value:function(e){this._loadMoreRowsMemoizer=Hd(),e&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){return(0,this.props.children)({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(e){var t=this,n=this.props.loadMoreRows;e.forEach((function(e){var o=n(e);o&&o.then((function(){var n;(n={lastRenderedStartIndex:t._lastRenderedStartIndex,lastRenderedStopIndex:t._lastRenderedStopIndex,startIndex:e.startIndex,stopIndex:e.stopIndex}).startIndex>n.lastRenderedStopIndex||n.stopIndex<n.lastRenderedStartIndex||t._registeredChild&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n="function"==typeof e.recomputeGridSize?e.recomputeGridSize:e.recomputeRowHeights;n?n.call(e,t):e.forceUpdate()}(t._registeredChild,t._lastRenderedStartIndex)}))}))}},{key:"_onRowsRendered",value:function(e){var t=e.startIndex,n=e.stopIndex;this._lastRenderedStartIndex=t,this._lastRenderedStopIndex=n,this._doStuff(t,n)}},{key:"_doStuff",value:function(e,t){var n,o=this,r=this.props,a=r.isRowLoaded,i=r.minimumBatchSize,l=r.rowCount,s=r.threshold,c=function(e){for(var t=e.isRowLoaded,n=e.minimumBatchSize,o=e.rowCount,r=e.stopIndex,a=[],i=null,l=null,s=e.startIndex;s<=r;s++)t({index:s})?null!==l&&(a.push({startIndex:i,stopIndex:l}),i=l=null):(l=s,null===i&&(i=s));if(null!==l){for(var c=Math.min(Math.max(l,i+n-1),o-1),u=l+1;u<=c&&!t({index:u});u++)l=u;a.push({startIndex:i,stopIndex:l})}if(a.length)for(var d=a[0];d.stopIndex-d.startIndex+1<n&&d.startIndex>0;){var m=d.startIndex-1;if(t({index:m}))break;d.startIndex=m}return a}({isRowLoaded:a,minimumBatchSize:i,rowCount:l,startIndex:Math.max(0,e-s),stopIndex:Math.min(l-1,t+s)}),u=(n=[]).concat.apply(n,ea(c.map((function(e){return[e.startIndex,e.stopIndex]}))));this._loadMoreRowsMemoizer({callback:function(){o._loadUnloadedRanges(c)},indices:{squashedUnloadedRanges:u}})}},{key:"_registerChild",value:function(e){this._registeredChild=e}}]),t}(cn.PureComponent);Hr(Pm,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15}),Pm.propTypes={};var Rm,Om,Am=(Om=Rm=function(e){function t(){var e,n;Ur(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return Hr(Kr(n=$r(this,(e=qr(t)).call.apply(e,[this].concat(r)))),"Grid",void 0),Hr(Kr(n),"_cellRenderer",(function(e){var t=e.parent,o=e.rowIndex,r=e.style,a=e.isScrolling,i=e.isVisible,l=e.key,s=n.props.rowRenderer,c=Object.getOwnPropertyDescriptor(r,"width");return c&&c.writable&&(r.width="100%"),s({index:o,style:r,isScrolling:a,isVisible:i,key:l,parent:t})})),Hr(Kr(n),"_setRef",(function(e){n.Grid=e})),Hr(Kr(n),"_onScroll",(function(e){var t=e.clientHeight,o=e.scrollHeight,r=e.scrollTop;(0,n.props.onScroll)({clientHeight:t,scrollHeight:o,scrollTop:r})})),Hr(Kr(n),"_onSectionRendered",(function(e){var t=e.rowOverscanStartIndex,o=e.rowOverscanStopIndex,r=e.rowStartIndex,a=e.rowStopIndex;(0,n.props.onRowsRendered)({overscanStartIndex:t,overscanStopIndex:o,startIndex:r,stopIndex:a})})),n}return Xr(t,e),Vr(t,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(e){var t=e.alignment,n=e.index;return this.Grid?this.Grid.getOffsetForCell({alignment:t,rowIndex:n,columnIndex:0}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,n=e.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:n,columnIndex:t})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,o=e.rowIndex,r=void 0===o?0:o;this.Grid&&this.Grid.recomputeGridSize({rowIndex:r,columnIndex:n})}},{key:"recomputeRowHeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:e,columnIndex:0})}},{key:"scrollToPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:e})}},{key:"scrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:e})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.noRowsRenderer,o=e.scrollToIndex,r=e.width,a=zd("ReactVirtualized__List",t);return cn.createElement(am,C({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:a,columnWidth:r,columnCount:1,noContentRenderer:n,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:o}))}}]),t}(cn.PureComponent),Hr(Rm,"propTypes",null),Om);Hr(Am,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:im,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});const Nm=function(e,t,n,o,r){return"function"==typeof n?function(e,t,n,o,r){for(var a=n+1;t<=n;){var i=t+n>>>1;r(e[i],o)>=0?(a=i,n=i-1):t=i+1}return a}(e,void 0===o?0:0|o,void 0===r?e.length-1:0|r,t,n):function(e,t,n,o){for(var r=n+1;t<=n;){var a=t+n>>>1;e[a]>=o?(r=a,n=a-1):t=a+1}return r}(e,void 0===n?0:0|n,void 0===o?e.length-1:0|o,t)};function Mm(e,t,n,o,r){this.mid=e,this.left=t,this.right=n,this.leftPoints=o,this.rightPoints=r,this.count=(t?t.count:0)+(n?n.count:0)+o.length}var Dm=Mm.prototype;function zm(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function Bm(e,t){var n=Km(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function Lm(e,t){var n=e.intervals([]);n.push(t),Bm(e,n)}function Fm(e,t){var n=e.intervals([]),o=n.indexOf(t);return o<0?0:(n.splice(o,1),Bm(e,n),1)}function Gm(e,t,n){for(var o=0;o<e.length&&e[o][0]<=t;++o){var r=n(e[o]);if(r)return r}}function Hm(e,t,n){for(var o=e.length-1;o>=0&&e[o][1]>=t;--o){var r=n(e[o]);if(r)return r}}function jm(e,t){for(var n=0;n<e.length;++n){var o=t(e[n]);if(o)return o}}function Um(e,t){return e-t}function Wm(e,t){return e[0]-t[0]||e[1]-t[1]}function Vm(e,t){return e[1]-t[1]||e[0]-t[0]}function Km(e){if(0===e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(Um);var o=t[t.length>>1],r=[],a=[],i=[];for(n=0;n<e.length;++n){var l=e[n];l[1]<o?r.push(l):o<l[0]?a.push(l):i.push(l)}var s=i,c=i.slice();return s.sort(Wm),c.sort(Vm),new Mm(o,Km(r),Km(a),s,c)}function $m(e){this.root=e}Dm.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e},Dm.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?Lm(this,e):this.left.insert(e):this.left=Km([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?Lm(this,e):this.right.insert(e):this.right=Km([e]);else{var n=Nm(this.leftPoints,e,Wm),o=Nm(this.rightPoints,e,Vm);this.leftPoints.splice(n,0,e),this.rightPoints.splice(o,0,e)}},Dm.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(t-1)?Fm(this,e):2===(a=this.left.remove(e))?(this.left=null,this.count-=1,1):(1===a&&(this.count-=1),a):0;if(e[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(t-1)?Fm(this,e):2===(a=this.right.remove(e))?(this.right=null,this.count-=1,1):(1===a&&(this.count-=1),a):0;if(1===this.count)return this.leftPoints[0]===e?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===e){if(this.left&&this.right){for(var n=this,o=this.left;o.right;)n=o,o=o.right;if(n===this)o.right=this.right;else{var r=this.left,a=this.right;n.count-=o.count,n.right=o.left,o.left=r,o.right=a}zm(this,o),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?zm(this,this.left):zm(this,this.right);return 1}for(r=Nm(this.leftPoints,e,Wm);r<this.leftPoints.length&&this.leftPoints[r][0]===e[0];++r)if(this.leftPoints[r]===e)for(this.count-=1,this.leftPoints.splice(r,1),a=Nm(this.rightPoints,e,Vm);a<this.rightPoints.length&&this.rightPoints[a][1]===e[1];++a)if(this.rightPoints[a]===e)return this.rightPoints.splice(a,1),1;return 0},Dm.queryPoint=function(e,t){return e<this.mid?this.left&&(n=this.left.queryPoint(e,t))?n:Gm(this.leftPoints,e,t):e>this.mid?this.right&&(n=this.right.queryPoint(e,t))?n:Hm(this.rightPoints,e,t):jm(this.leftPoints,t);var n},Dm.queryInterval=function(e,t,n){var o;return e<this.mid&&this.left&&(o=this.left.queryInterval(e,t,n))||t>this.mid&&this.right&&(o=this.right.queryInterval(e,t,n))?o:t<this.mid?Gm(this.leftPoints,t,n):e>this.mid?Hm(this.rightPoints,e,n):jm(this.leftPoints,n)};var qm=$m.prototype;qm.insert=function(e){this.root?this.root.insert(e):this.root=new Mm(e[0],null,null,[e],[e])},qm.remove=function(e){if(this.root){var t=this.root.remove(e);return 2===t&&(this.root=null),0!==t}return!1},qm.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)},qm.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)},Object.defineProperty(qm,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(qm,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});var Ym,Xm,Zm=function(){function e(){Ur(this,e),Hr(this,"_columnSizeMap",{}),Hr(this,"_intervalTree",new $m(null)),Hr(this,"_leftMap",{})}return Vr(e,[{key:"estimateTotalHeight",value:function(e,t,n){var o=e-this.count;return this.tallestColumnSize+Math.ceil(o/t)*n}},{key:"range",value:function(e,t,n){var o=this;this._intervalTree.queryInterval(e,e+t,(function(e){var t=Lr(e,3),r=t[0],a=(t[1],t[2]);return n(a,o._leftMap[a],r)}))}},{key:"setPosition",value:function(e,t,n,o){this._intervalTree.insert([n,n+o,e]),this._leftMap[e]=t;var r=this._columnSizeMap,a=r[t];r[t]=void 0===a?n+o:Math.max(a,n+o)}},{key:"count",get:function(){return this._intervalTree.count}},{key:"shortestColumnSize",get:function(){var e=this._columnSizeMap,t=0;for(var n in e){var o=e[n];t=0===t?o:Math.min(t,o)}return t}},{key:"tallestColumnSize",get:function(){var e=this._columnSizeMap,t=0;for(var n in e){var o=e[n];t=Math.max(t,o)}return t}}]),e}();function Jm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Qm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jm(n,!0).forEach((function(t){Hr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jm(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ep=(Xm=Ym=function(e){function t(){var e,n;Ur(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return Hr(Kr(n=$r(this,(e=qr(t)).call.apply(e,[this].concat(r)))),"state",{isScrolling:!1,scrollTop:0}),Hr(Kr(n),"_debounceResetIsScrollingId",void 0),Hr(Kr(n),"_invalidateOnUpdateStartIndex",null),Hr(Kr(n),"_invalidateOnUpdateStopIndex",null),Hr(Kr(n),"_positionCache",new Zm),Hr(Kr(n),"_startIndex",null),Hr(Kr(n),"_startIndexMemoized",null),Hr(Kr(n),"_stopIndex",null),Hr(Kr(n),"_stopIndexMemoized",null),Hr(Kr(n),"_debounceResetIsScrollingCallback",(function(){n.setState({isScrolling:!1})})),Hr(Kr(n),"_setScrollingContainerRef",(function(e){n._scrollingContainer=e})),Hr(Kr(n),"_onScroll",(function(e){var t=n.props.height,o=e.currentTarget.scrollTop,r=Math.min(Math.max(0,n._getEstimatedTotalHeight()-t),o);o===r&&(n._debounceResetIsScrolling(),n.state.scrollTop!==r&&n.setState({isScrolling:!0,scrollTop:r}))})),n}return Xr(t,e),Vr(t,[{key:"clearCellPositions",value:function(){this._positionCache=new Zm,this.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.rowIndex;null===this._invalidateOnUpdateStartIndex?(this._invalidateOnUpdateStartIndex=t,this._invalidateOnUpdateStopIndex=t):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,t),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,t))}},{key:"recomputeCellPositions",value:function(){var e=this._positionCache.count-1;this._positionCache=new Zm,this._populatePositionCache(0,e),this.forceUpdate()}},{key:"componentDidMount",value:function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()}},{key:"componentDidUpdate",value:function(e,t){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback(),this.props.scrollTop!==e.scrollTop&&this._debounceResetIsScrolling()}},{key:"componentWillUnmount",value:function(){this._debounceResetIsScrollingId&&Qd(this._debounceResetIsScrollingId)}},{key:"render",value:function(){var e,t=this,n=this.props,o=n.autoHeight,r=n.cellCount,a=n.cellMeasurerCache,i=n.cellRenderer,l=n.className,s=n.height,c=n.id,u=n.keyMapper,d=n.overscanByPixels,m=n.role,p=n.style,h=n.tabIndex,g=n.width,f=n.rowDirection,b=this.state,v=b.isScrolling,_=b.scrollTop,y=[],k=this._getEstimatedTotalHeight(),E=this._positionCache.shortestColumnSize,S=this._positionCache.count,w=0;if(this._positionCache.range(Math.max(0,_-d),s+2*d,(function(n,o,r){var l;void 0===e?(w=n,e=n):(w=Math.min(w,n),e=Math.max(e,n)),y.push(i({index:n,isScrolling:v,key:u(n),parent:t,style:(l={height:a.getHeight(n)},Hr(l,"ltr"===f?"left":"right",o),Hr(l,"position","absolute"),Hr(l,"top",r),Hr(l,"width",a.getWidth(n)),l)}))})),E<_+s+d&&S<r)for(var C=Math.min(r-S,Math.ceil((_+s+d-E)/a.defaultHeight*g/a.defaultWidth)),I=S;I<S+C;I++)e=I,y.push(i({index:I,isScrolling:v,key:u(I),parent:this,style:{width:a.getWidth(I)}}));return this._startIndex=w,this._stopIndex=e,cn.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:zd("ReactVirtualized__Masonry",l),id:c,onScroll:this._onScroll,role:m,style:Qm({boxSizing:"border-box",direction:"ltr",height:o?"auto":s,overflowX:"hidden",overflowY:k<s?"hidden":"auto",position:"relative",width:g,WebkitOverflowScrolling:"touch",willChange:"transform"},p),tabIndex:h},cn.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:k,maxWidth:"100%",maxHeight:k,overflow:"hidden",pointerEvents:v?"none":"",position:"relative"}},y))}},{key:"_checkInvalidateOnUpdate",value:function(){if("number"==typeof this._invalidateOnUpdateStartIndex){var e=this._invalidateOnUpdateStartIndex,t=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(e,t),this.forceUpdate()}}},{key:"_debounceResetIsScrolling",value:function(){var e=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&Qd(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=em(this._debounceResetIsScrollingCallback,e)}},{key:"_getEstimatedTotalHeight",value:function(){var e=this.props,t=e.cellCount,n=e.cellMeasurerCache,o=e.width,r=Math.max(1,Math.floor(o/n.defaultWidth));return this._positionCache.estimateTotalHeight(t,r,n.defaultHeight)}},{key:"_invokeOnScrollCallback",value:function(){var e=this.props,t=e.height,n=e.onScroll,o=this.state.scrollTop;this._onScrollMemoized!==o&&(n({clientHeight:t,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:o}),this._onScrollMemoized=o)}},{key:"_invokeOnCellsRenderedCallback",value:function(){this._startIndexMemoized===this._startIndex&&this._stopIndexMemoized===this._stopIndex||((0,this.props.onCellsRendered)({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex)}},{key:"_populatePositionCache",value:function(e,t){for(var n=this.props,o=n.cellMeasurerCache,r=n.cellPositioner,a=e;a<=t;a++){var i=r(a),l=i.left,s=i.top;this._positionCache.setPosition(a,l,s,o.getHeight(a))}}}],[{key:"getDerivedStateFromProps",value:function(e,t){return void 0!==e.scrollTop&&t.scrollTop!==e.scrollTop?{isScrolling:!0,scrollTop:e.scrollTop}:null}}]),t}(cn.PureComponent),Hr(Ym,"propTypes",null),Xm);function tp(){}Hr(ep,"defaultProps",{autoHeight:!1,keyMapper:function(e){return e},onCellsRendered:tp,onScroll:tp,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:150,style:{},tabIndex:0,rowDirection:"ltr"}),Md(ep);var np=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ur(this,e),Hr(this,"_cellMeasurerCache",void 0),Hr(this,"_columnIndexOffset",void 0),Hr(this,"_rowIndexOffset",void 0),Hr(this,"columnWidth",(function(e){var n=e.index;t._cellMeasurerCache.columnWidth({index:n+t._columnIndexOffset})})),Hr(this,"rowHeight",(function(e){var n=e.index;t._cellMeasurerCache.rowHeight({index:n+t._rowIndexOffset})}));var o=n.cellMeasurerCache,r=n.columnIndexOffset,a=void 0===r?0:r,i=n.rowIndexOffset,l=void 0===i?0:i;this._cellMeasurerCache=o,this._columnIndexOffset=a,this._rowIndexOffset=l}return Vr(e,[{key:"clear",value:function(e,t){this._cellMeasurerCache.clear(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"clearAll",value:function(){this._cellMeasurerCache.clearAll()}},{key:"hasFixedHeight",value:function(){return this._cellMeasurerCache.hasFixedHeight()}},{key:"hasFixedWidth",value:function(){return this._cellMeasurerCache.hasFixedWidth()}},{key:"getHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._cellMeasurerCache.getHeight(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"getWidth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._cellMeasurerCache.getWidth(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"has",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._cellMeasurerCache.has(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"set",value:function(e,t,n,o){this._cellMeasurerCache.set(e+this._rowIndexOffset,t+this._columnIndexOffset,n,o)}},{key:"defaultHeight",get:function(){return this._cellMeasurerCache.defaultHeight}},{key:"defaultWidth",get:function(){return this._cellMeasurerCache.defaultWidth}}]),e}();function op(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function rp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?op(n,!0).forEach((function(t){Hr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):op(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ap=function(e){function t(e,n){var o;Ur(this,t),Hr(Kr(o=$r(this,qr(t).call(this,e,n))),"state",{scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1}),Hr(Kr(o),"_deferredInvalidateColumnIndex",null),Hr(Kr(o),"_deferredInvalidateRowIndex",null),Hr(Kr(o),"_bottomLeftGridRef",(function(e){o._bottomLeftGrid=e})),Hr(Kr(o),"_bottomRightGridRef",(function(e){o._bottomRightGrid=e})),Hr(Kr(o),"_cellRendererBottomLeftGrid",(function(e){var t=e.rowIndex,n=Ld(e,["rowIndex"]),r=o.props,a=r.cellRenderer,i=r.fixedRowCount;return t===r.rowCount-i?cn.createElement("div",{key:n.key,style:rp({},n.style,{height:20})}):a(rp({},n,{parent:Kr(o),rowIndex:t+i}))})),Hr(Kr(o),"_cellRendererBottomRightGrid",(function(e){var t=e.columnIndex,n=e.rowIndex,r=Ld(e,["columnIndex","rowIndex"]),a=o.props,i=a.cellRenderer,l=a.fixedColumnCount,s=a.fixedRowCount;return i(rp({},r,{columnIndex:t+l,parent:Kr(o),rowIndex:n+s}))})),Hr(Kr(o),"_cellRendererTopRightGrid",(function(e){var t=e.columnIndex,n=Ld(e,["columnIndex"]),r=o.props,a=r.cellRenderer,i=r.columnCount,l=r.fixedColumnCount;return t===i-l?cn.createElement("div",{key:n.key,style:rp({},n.style,{width:20})}):a(rp({},n,{columnIndex:t+l,parent:Kr(o)}))})),Hr(Kr(o),"_columnWidthRightGrid",(function(e){var t=e.index,n=o.props,r=n.columnCount,a=n.fixedColumnCount,i=n.columnWidth,l=o.state,s=l.scrollbarSize;return l.showHorizontalScrollbar&&t===r-a?s:"function"==typeof i?i({index:t+a}):i})),Hr(Kr(o),"_onScroll",(function(e){var t=e.scrollLeft,n=e.scrollTop;o.setState({scrollLeft:t,scrollTop:n});var r=o.props.onScroll;r&&r(e)})),Hr(Kr(o),"_onScrollbarPresenceChange",(function(e){var t=e.horizontal,n=e.size,r=e.vertical,a=o.state,i=a.showHorizontalScrollbar,l=a.showVerticalScrollbar;if(t!==i||r!==l){o.setState({scrollbarSize:n,showHorizontalScrollbar:t,showVerticalScrollbar:r});var s=o.props.onScrollbarPresenceChange;"function"==typeof s&&s({horizontal:t,size:n,vertical:r})}})),Hr(Kr(o),"_onScrollLeft",(function(e){var t=e.scrollLeft;o._onScroll({scrollLeft:t,scrollTop:o.state.scrollTop})})),Hr(Kr(o),"_onScrollTop",(function(e){var t=e.scrollTop;o._onScroll({scrollTop:t,scrollLeft:o.state.scrollLeft})})),Hr(Kr(o),"_rowHeightBottomGrid",(function(e){var t=e.index,n=o.props,r=n.fixedRowCount,a=n.rowCount,i=n.rowHeight,l=o.state,s=l.scrollbarSize;return l.showVerticalScrollbar&&t===a-r?s:"function"==typeof i?i({index:t+r}):i})),Hr(Kr(o),"_topLeftGridRef",(function(e){o._topLeftGrid=e})),Hr(Kr(o),"_topRightGridRef",(function(e){o._topRightGrid=e}));var r=e.deferredMeasurementCache,a=e.fixedColumnCount,i=e.fixedRowCount;return o._maybeCalculateCachedStyles(!0),r&&(o._deferredMeasurementCacheBottomLeftGrid=i>0?new np({cellMeasurerCache:r,columnIndexOffset:0,rowIndexOffset:i}):r,o._deferredMeasurementCacheBottomRightGrid=a>0||i>0?new np({cellMeasurerCache:r,columnIndexOffset:a,rowIndexOffset:i}):r,o._deferredMeasurementCacheTopRightGrid=a>0?new np({cellMeasurerCache:r,columnIndexOffset:a,rowIndexOffset:0}):r),o}return Xr(t,e),Vr(t,[{key:"forceUpdateGrids",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,o=e.rowIndex,r=void 0===o?0:o;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,n):n,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,r):r}},{key:"measureAllCells",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,o=e.rowIndex,r=void 0===o?0:o,a=this.props,i=a.fixedColumnCount,l=a.fixedRowCount,s=Math.max(0,n-i),c=Math.max(0,r-l);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:n,rowIndex:c}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:s,rowIndex:c}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:n,rowIndex:r}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:s,rowIndex:r}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(!0)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.scrollLeft,n=e.scrollTop;if(t>0||n>0){var o={};t>0&&(o.scrollLeft=t),n>0&&(o.scrollTop=n),this.setState(o)}this._handleInvalidatedGridSize()}},{key:"componentDidUpdate",value:function(){this._handleInvalidatedGridSize()}},{key:"render",value:function(){var e=this.props,t=e.onScroll,n=e.onSectionRendered,o=(e.onScrollbarPresenceChange,e.scrollLeft,e.scrollToColumn),r=(e.scrollTop,e.scrollToRow),a=Ld(e,["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"]);if(this._prepareForRender(),0===this.props.width||0===this.props.height)return null;var i=this.state,l=i.scrollLeft,s=i.scrollTop;return cn.createElement("div",{style:this._containerOuterStyle},cn.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(a),this._renderTopRightGrid(rp({},a,{onScroll:t,scrollLeft:l}))),cn.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(rp({},a,{onScroll:t,scrollTop:s})),this._renderBottomRightGrid(rp({},a,{onScroll:t,onSectionRendered:n,scrollLeft:l,scrollToColumn:o,scrollToRow:r,scrollTop:s}))))}},{key:"_getBottomGridHeight",value:function(e){return e.height-this._getTopGridHeight(e)}},{key:"_getLeftGridWidth",value:function(e){var t=e.fixedColumnCount,n=e.columnWidth;if(null==this._leftGridWidth)if("function"==typeof n){for(var o=0,r=0;r<t;r++)o+=n({index:r});this._leftGridWidth=o}else this._leftGridWidth=n*t;return this._leftGridWidth}},{key:"_getRightGridWidth",value:function(e){return e.width-this._getLeftGridWidth(e)}},{key:"_getTopGridHeight",value:function(e){var t=e.fixedRowCount,n=e.rowHeight;if(null==this._topGridHeight)if("function"==typeof n){for(var o=0,r=0;r<t;r++)o+=n({index:r});this._topGridHeight=o}else this._topGridHeight=n*t;return this._topGridHeight}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t}),this.forceUpdate()}}},{key:"_maybeCalculateCachedStyles",value:function(e){var t=this.props,n=t.columnWidth,o=t.enableFixedColumnScroll,r=t.enableFixedRowScroll,a=t.height,i=t.fixedColumnCount,l=t.fixedRowCount,s=t.rowHeight,c=t.style,u=t.styleBottomLeftGrid,d=t.styleBottomRightGrid,m=t.styleTopLeftGrid,p=t.styleTopRightGrid,h=t.width,g=e||a!==this._lastRenderedHeight||h!==this._lastRenderedWidth,f=e||n!==this._lastRenderedColumnWidth||i!==this._lastRenderedFixedColumnCount,b=e||l!==this._lastRenderedFixedRowCount||s!==this._lastRenderedRowHeight;(e||g||c!==this._lastRenderedStyle)&&(this._containerOuterStyle=rp({height:a,overflow:"visible",width:h},c)),(e||g||b)&&(this._containerTopStyle={height:this._getTopGridHeight(this.props),position:"relative",width:h},this._containerBottomStyle={height:a-this._getTopGridHeight(this.props),overflow:"visible",position:"relative",width:h}),(e||u!==this._lastRenderedStyleBottomLeftGrid)&&(this._bottomLeftGridStyle=rp({left:0,overflowX:"hidden",overflowY:o?"auto":"hidden",position:"absolute"},u)),(e||f||d!==this._lastRenderedStyleBottomRightGrid)&&(this._bottomRightGridStyle=rp({left:this._getLeftGridWidth(this.props),position:"absolute"},d)),(e||m!==this._lastRenderedStyleTopLeftGrid)&&(this._topLeftGridStyle=rp({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},m)),(e||f||p!==this._lastRenderedStyleTopRightGrid)&&(this._topRightGridStyle=rp({left:this._getLeftGridWidth(this.props),overflowX:r?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},p)),this._lastRenderedColumnWidth=n,this._lastRenderedFixedColumnCount=i,this._lastRenderedFixedRowCount=l,this._lastRenderedHeight=a,this._lastRenderedRowHeight=s,this._lastRenderedStyle=c,this._lastRenderedStyleBottomLeftGrid=u,this._lastRenderedStyleBottomRightGrid=d,this._lastRenderedStyleTopLeftGrid=m,this._lastRenderedStyleTopRightGrid=p,this._lastRenderedWidth=h}},{key:"_prepareForRender",value:function(){this._lastRenderedColumnWidth===this.props.columnWidth&&this._lastRenderedFixedColumnCount===this.props.fixedColumnCount||(this._leftGridWidth=null),this._lastRenderedFixedRowCount===this.props.fixedRowCount&&this._lastRenderedRowHeight===this.props.rowHeight||(this._topGridHeight=null),this._maybeCalculateCachedStyles(),this._lastRenderedColumnWidth=this.props.columnWidth,this._lastRenderedFixedColumnCount=this.props.fixedColumnCount,this._lastRenderedFixedRowCount=this.props.fixedRowCount,this._lastRenderedRowHeight=this.props.rowHeight}},{key:"_renderBottomLeftGrid",value:function(e){var t=e.enableFixedColumnScroll,n=e.fixedColumnCount,o=e.fixedRowCount,r=e.rowCount,a=e.hideBottomLeftGridScrollbar,i=this.state.showVerticalScrollbar;if(!n)return null;var l=i?1:0,s=this._getBottomGridHeight(e),c=this._getLeftGridWidth(e),u=this.state.showVerticalScrollbar?this.state.scrollbarSize:0,d=a?c+u:c,m=cn.createElement(am,C({},e,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:n,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:s,onScroll:t?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,r-o)+l,rowHeight:this._rowHeightBottomGrid,style:this._bottomLeftGridStyle,tabIndex:null,width:d}));return a?cn.createElement("div",{className:"BottomLeftGrid_ScrollWrapper",style:rp({},this._bottomLeftGridStyle,{height:s,width:c,overflowY:"hidden"})},m):m}},{key:"_renderBottomRightGrid",value:function(e){var t=e.columnCount,n=e.fixedColumnCount,o=e.fixedRowCount,r=e.rowCount,a=e.scrollToColumn,i=e.scrollToRow;return cn.createElement(am,C({},e,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,t-n),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(e),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,r-o),rowHeight:this._rowHeightBottomGrid,scrollToColumn:a-n,scrollToRow:i-o,style:this._bottomRightGridStyle,width:this._getRightGridWidth(e)}))}},{key:"_renderTopLeftGrid",value:function(e){var t=e.fixedColumnCount,n=e.fixedRowCount;return t&&n?cn.createElement(am,C({},e,{className:this.props.classNameTopLeftGrid,columnCount:t,height:this._getTopGridHeight(e),ref:this._topLeftGridRef,rowCount:n,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(e)})):null}},{key:"_renderTopRightGrid",value:function(e){var t=e.columnCount,n=e.enableFixedRowScroll,o=e.fixedColumnCount,r=e.fixedRowCount,a=e.scrollLeft,i=e.hideTopRightGridScrollbar,l=this.state,s=l.showHorizontalScrollbar,c=l.scrollbarSize;if(!r)return null;var u=s?1:0,d=this._getTopGridHeight(e),m=this._getRightGridWidth(e),p=s?c:0,h=d,g=this._topRightGridStyle;i&&(h=d+p,g=rp({},this._topRightGridStyle,{left:0}));var f=cn.createElement(am,C({},e,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,t-o)+u,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:h,onScroll:n?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:r,scrollLeft:a,style:g,tabIndex:null,width:m}));return i?cn.createElement("div",{className:"TopRightGrid_ScrollWrapper",style:rp({},this._topRightGridStyle,{height:d,width:m,overflowX:"hidden"})},f):f}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.scrollLeft!==t.scrollLeft||e.scrollTop!==t.scrollTop?{scrollLeft:null!=e.scrollLeft&&e.scrollLeft>=0?e.scrollLeft:t.scrollLeft,scrollTop:null!=e.scrollTop&&e.scrollTop>=0?e.scrollTop:t.scrollTop}:null}}]),t}(cn.PureComponent);function ip(e){var t=e.className,n=e.columns,o=e.style;return cn.createElement("div",{className:t,role:"row",style:o},n)}Hr(ap,"defaultProps",{classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{},hideTopRightGridScrollbar:!1,hideBottomLeftGridScrollbar:!1}),ap.propTypes={},Md(ap),(function(e){function t(e,n){var o;return Ur(this,t),(o=$r(this,qr(t).call(this,e,n))).state={clientHeight:0,clientWidth:0,scrollHeight:0,scrollLeft:0,scrollTop:0,scrollWidth:0},o._onScroll=o._onScroll.bind(Kr(o)),o}return Xr(t,e),Vr(t,[{key:"render",value:function(){var e=this.props.children,t=this.state,n=t.clientHeight,o=t.clientWidth,r=t.scrollHeight,a=t.scrollLeft,i=t.scrollTop,l=t.scrollWidth;return e({clientHeight:n,clientWidth:o,onScroll:this._onScroll,scrollHeight:r,scrollLeft:a,scrollTop:i,scrollWidth:l})}},{key:"_onScroll",value:function(e){var t=e.clientHeight,n=e.clientWidth,o=e.scrollHeight,r=e.scrollLeft,a=e.scrollTop,i=e.scrollWidth;this.setState({clientHeight:t,clientWidth:n,scrollHeight:o,scrollLeft:r,scrollTop:a,scrollWidth:i})}}]),t}(cn.PureComponent)).propTypes={},ip.propTypes=null;const lp={ASC:"ASC",DESC:"DESC"};function sp(e){var t=e.sortDirection,n=zd("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":t===lp.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":t===lp.DESC});return cn.createElement("svg",{className:n,width:18,height:18,viewBox:"0 0 24 24"},t===lp.ASC?cn.createElement("path",{d:"M7 14l5-5 5 5z"}):cn.createElement("path",{d:"M7 10l5 5 5-5z"}),cn.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}function cp(e){var t=e.dataKey,n=e.label,o=e.sortBy,r=e.sortDirection,a=o===t,i=[cn.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:"string"==typeof n?n:null},n)];return a&&i.push(cn.createElement(sp,{key:"SortIndicator",sortDirection:r})),i}function up(e){var t=e.className,n=e.columns,o=e.index,r=e.key,a=e.onRowClick,i=e.onRowDoubleClick,l=e.onRowMouseOut,s=e.onRowMouseOver,c=e.onRowRightClick,u=e.rowData,d=e.style,m={"aria-rowindex":o+1};return(a||i||l||s||c)&&(m["aria-label"]="row",m.tabIndex=0,a&&(m.onClick=function(e){return a({event:e,index:o,rowData:u})}),i&&(m.onDoubleClick=function(e){return i({event:e,index:o,rowData:u})}),l&&(m.onMouseOut=function(e){return l({event:e,index:o,rowData:u})}),s&&(m.onMouseOver=function(e){return s({event:e,index:o,rowData:u})}),c&&(m.onContextMenu=function(e){return c({event:e,index:o,rowData:u})})),cn.createElement("div",C({},m,{className:t,key:r,role:"row",style:d}),n)}sp.propTypes={},cp.propTypes=null,up.propTypes=null;var dp=function(e){function t(){return Ur(this,t),$r(this,qr(t).apply(this,arguments))}return Xr(t,e),t}(cn.Component);function mp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function pp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mp(n,!0).forEach((function(t){Hr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mp(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Hr(dp,"defaultProps",{cellDataGetter:function(e){var t=e.dataKey,n=e.rowData;return"function"==typeof n.get?n.get(t):n[t]},cellRenderer:function(e){var t=e.cellData;return null==t?"":String(t)},defaultSortDirection:lp.ASC,flexGrow:0,flexShrink:1,headerRenderer:cp,style:{}}),dp.propTypes={};var hp=function(e){function t(e){var n;return Ur(this,t),(n=$r(this,qr(t).call(this,e))).state={scrollbarWidth:0},n._createColumn=n._createColumn.bind(Kr(n)),n._createRow=n._createRow.bind(Kr(n)),n._onScroll=n._onScroll.bind(Kr(n)),n._onSectionRendered=n._onSectionRendered.bind(Kr(n)),n._setRef=n._setRef.bind(Kr(n)),n}return Xr(t,e),Vr(t,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(e){var t=e.alignment,n=e.index;return this.Grid?this.Grid.getOffsetForCell({alignment:t,rowIndex:n}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,n=e.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:n,columnIndex:t})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,o=e.rowIndex,r=void 0===o?0:o;this.Grid&&this.Grid.recomputeGridSize({rowIndex:r,columnIndex:n})}},{key:"recomputeRowHeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:e})}},{key:"scrollToPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:e})}},{key:"scrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:e})}},{key:"getScrollbarWidth",value:function(){if(this.Grid){var e=(0,Zr.findDOMNode)(this.Grid),t=e.clientWidth||0;return(e.offsetWidth||0)-t}return 0}},{key:"componentDidMount",value:function(){this._setScrollbarWidth()}},{key:"componentDidUpdate",value:function(){this._setScrollbarWidth()}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,o=t.className,r=t.disableHeader,a=t.gridClassName,i=t.gridStyle,l=t.headerHeight,s=t.headerRowRenderer,c=t.height,u=t.id,d=t.noRowsRenderer,m=t.rowClassName,p=t.rowStyle,h=t.scrollToIndex,g=t.style,f=t.width,b=this.state.scrollbarWidth,v=r?c:c-l,_="function"==typeof m?m({index:-1}):m,y="function"==typeof p?p({index:-1}):p;return this._cachedColumnStyles=[],cn.Children.toArray(n).forEach((function(t,n){var o=e._getFlexStyleForColumn(t,t.props.style);e._cachedColumnStyles[n]=pp({overflow:"hidden"},o)})),cn.createElement("div",{"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-colcount":cn.Children.toArray(n).length,"aria-rowcount":this.props.rowCount,className:zd("ReactVirtualized__Table",o),id:u,role:"grid",style:g},!r&&s({className:zd("ReactVirtualized__Table__headerRow",_),columns:this._getHeaderColumns(),style:pp({height:l,overflow:"hidden",paddingRight:b,width:f},y)}),cn.createElement(am,C({},this.props,{"aria-readonly":null,autoContainerWidth:!0,className:zd("ReactVirtualized__Table__Grid",a),cellRenderer:this._createRow,columnWidth:f,columnCount:1,height:v,id:void 0,noContentRenderer:d,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:b,scrollToRow:h,style:pp({},i,{overflowX:"hidden"})})))}},{key:"_createColumn",value:function(e){var t=e.column,n=e.columnIndex,o=e.isScrolling,r=e.parent,a=e.rowData,i=e.rowIndex,l=this.props.onColumnClick,s=t.props,c=s.cellDataGetter,u=s.cellRenderer,d=s.className,m=s.columnData,p=s.dataKey,h=s.id,g=u({cellData:c({columnData:m,dataKey:p,rowData:a}),columnData:m,columnIndex:n,dataKey:p,isScrolling:o,parent:r,rowData:a,rowIndex:i}),f=this._cachedColumnStyles[n],b="string"==typeof g?g:null;return cn.createElement("div",{"aria-colindex":n+1,"aria-describedby":h,className:zd("ReactVirtualized__Table__rowColumn",d),key:"Row"+i+"-Col"+n,onClick:function(e){l&&l({columnData:m,dataKey:p,event:e})},role:"gridcell",style:f,title:b},g)}},{key:"_createHeader",value:function(e){var t,n,o,r,a,i=e.column,l=e.index,s=this.props,c=s.headerClassName,u=s.headerStyle,d=s.onHeaderClick,m=s.sort,p=s.sortBy,h=s.sortDirection,g=i.props,f=g.columnData,b=g.dataKey,v=g.defaultSortDirection,_=g.disableSort,y=g.headerRenderer,k=g.id,E=g.label,S=!_&&m,w=zd("ReactVirtualized__Table__headerColumn",c,i.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:S}),C=this._getFlexStyleForColumn(i,pp({},u,{},i.props.headerStyle)),I=y({columnData:f,dataKey:b,disableSort:_,label:E,sortBy:p,sortDirection:h});if(S||d){var x=p!==b?v:h===lp.DESC?lp.ASC:lp.DESC,T=function(e){S&&m({defaultSortDirection:v,event:e,sortBy:b,sortDirection:x}),d&&d({columnData:f,dataKey:b,event:e})};a=i.props["aria-label"]||E||b,r="none",o=0,t=T,n=function(e){"Enter"!==e.key&&" "!==e.key||T(e)}}return p===b&&(r=h===lp.ASC?"ascending":"descending"),cn.createElement("div",{"aria-label":a,"aria-sort":r,className:w,id:k,key:"Header-Col"+l,onClick:t,onKeyDown:n,role:"columnheader",style:C,tabIndex:o},I)}},{key:"_createRow",value:function(e){var t=this,n=e.rowIndex,o=e.isScrolling,r=e.key,a=e.parent,i=e.style,l=this.props,s=l.children,c=l.onRowClick,u=l.onRowDoubleClick,d=l.onRowRightClick,m=l.onRowMouseOver,p=l.onRowMouseOut,h=l.rowClassName,g=l.rowGetter,f=l.rowRenderer,b=l.rowStyle,v=this.state.scrollbarWidth,_="function"==typeof h?h({index:n}):h,y="function"==typeof b?b({index:n}):b,k=g({index:n}),E=cn.Children.toArray(s).map((function(e,r){return t._createColumn({column:e,columnIndex:r,isScrolling:o,parent:a,rowData:k,rowIndex:n,scrollbarWidth:v})})),S=zd("ReactVirtualized__Table__row",_),w=pp({},i,{height:this._getRowHeight(n),overflow:"hidden",paddingRight:v},y);return f({className:S,columns:E,index:n,isScrolling:o,key:r,onRowClick:c,onRowDoubleClick:u,onRowRightClick:d,onRowMouseOver:m,onRowMouseOut:p,rowData:k,style:w})}},{key:"_getFlexStyleForColumn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="".concat(e.props.flexGrow," ").concat(e.props.flexShrink," ").concat(e.props.width,"px"),o=pp({},t,{flex:n,msFlex:n,WebkitFlex:n});return e.props.maxWidth&&(o.maxWidth=e.props.maxWidth),e.props.minWidth&&(o.minWidth=e.props.minWidth),o}},{key:"_getHeaderColumns",value:function(){var e=this,t=this.props,n=t.children;return(t.disableHeader?[]:cn.Children.toArray(n)).map((function(t,n){return e._createHeader({column:t,index:n})}))}},{key:"_getRowHeight",value:function(e){var t=this.props.rowHeight;return"function"==typeof t?t({index:e}):t}},{key:"_onScroll",value:function(e){var t=e.clientHeight,n=e.scrollHeight,o=e.scrollTop;(0,this.props.onScroll)({clientHeight:t,scrollHeight:n,scrollTop:o})}},{key:"_onSectionRendered",value:function(e){var t=e.rowOverscanStartIndex,n=e.rowOverscanStopIndex,o=e.rowStartIndex,r=e.rowStopIndex;(0,this.props.onRowsRendered)({overscanStartIndex:t,overscanStopIndex:n,startIndex:o,stopIndex:r})}},{key:"_setRef",value:function(e){this.Grid=e}},{key:"_setScrollbarWidth",value:function(){var e=this.getScrollbarWidth();this.setState({scrollbarWidth:e})}}]),t}(cn.PureComponent);Hr(hp,"defaultProps",{disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanIndicesGetter:im,overscanRowCount:10,rowRenderer:up,headerRowRenderer:ip,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}}),hp.propTypes={};var gp=[],fp=null,bp=null;function vp(){bp&&(bp=null,document.body&&null!=fp&&(document.body.style.pointerEvents=fp),fp=null)}function _p(){vp(),gp.forEach((function(e){return e.__resetIsScrolling()}))}function yp(e){e.currentTarget===window&&null==fp&&document.body&&(fp=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),function(){bp&&Qd(bp);var e=0;gp.forEach((function(t){e=Math.max(e,t.props.scrollingResetTimeInterval)})),bp=em(_p,e)}(),gp.forEach((function(t){t.props.scrollElement===e.currentTarget&&t.__handleWindowScrollEvent()}))}function kp(e,t){gp.some((function(e){return e.props.scrollElement===t}))||t.addEventListener("scroll",yp),gp.push(e)}function Ep(e,t){(gp=gp.filter((function(t){return t!==e}))).length||(t.removeEventListener("scroll",yp),bp&&(Qd(bp),vp()))}var Sp,Cp,Ip=function(e){return e===window},xp=function(e){return e.getBoundingClientRect()};function Tp(e,t){if(e){if(Ip(e)){var n=window,o=n.innerHeight,r=n.innerWidth;return{height:"number"==typeof o?o:0,width:"number"==typeof r?r:0}}return xp(e)}return{height:t.serverHeight,width:t.serverWidth}}function Pp(e){return Ip(e)&&document.documentElement?{top:"scrollY"in window?window.scrollY:document.documentElement.scrollTop,left:"scrollX"in window?window.scrollX:document.documentElement.scrollLeft}:{top:e.scrollTop,left:e.scrollLeft}}function Rp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var Op=function(){return"undefined"!=typeof window?window:void 0},Ap=(Cp=Sp=function(e){function t(){var e,n;Ur(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return Hr(Kr(n=$r(this,(e=qr(t)).call.apply(e,[this].concat(r)))),"_window",Op()),Hr(Kr(n),"_isMounted",!1),Hr(Kr(n),"_positionFromTop",0),Hr(Kr(n),"_positionFromLeft",0),Hr(Kr(n),"_detectElementResize",void 0),Hr(Kr(n),"_child",void 0),Hr(Kr(n),"state",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rp(n,!0).forEach((function(t){Hr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rp(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Tp(n.props.scrollElement,n.props),{isScrolling:!1,scrollLeft:0,scrollTop:0})),Hr(Kr(n),"_registerChild",(function(e){!e||e instanceof Element||console.warn("WindowScroller registerChild expects to be passed Element or null"),n._child=e,n.updatePosition()})),Hr(Kr(n),"_onChildScroll",(function(e){var t=e.scrollTop;if(n.state.scrollTop!==t){var o=n.props.scrollElement;o&&("function"==typeof o.scrollTo?o.scrollTo(0,t+n._positionFromTop):o.scrollTop=t+n._positionFromTop)}})),Hr(Kr(n),"_registerResizeListener",(function(e){e===window?window.addEventListener("resize",n._onResize,!1):n._detectElementResize.addResizeListener(e,n._onResize)})),Hr(Kr(n),"_unregisterResizeListener",(function(e){e===window?window.removeEventListener("resize",n._onResize,!1):e&&n._detectElementResize.removeResizeListener(e,n._onResize)})),Hr(Kr(n),"_onResize",(function(){n.updatePosition()})),Hr(Kr(n),"__handleWindowScrollEvent",(function(){if(n._isMounted){var e=n.props.onScroll,t=n.props.scrollElement;if(t){var o=Pp(t),r=Math.max(0,o.left-n._positionFromLeft),a=Math.max(0,o.top-n._positionFromTop);n.setState({isScrolling:!0,scrollLeft:r,scrollTop:a}),e({scrollLeft:r,scrollTop:a})}}})),Hr(Kr(n),"__resetIsScrolling",(function(){n.setState({isScrolling:!1})})),n}return Xr(t,e),Vr(t,[{key:"updatePosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.scrollElement,t=this.props.onResize,n=this.state,o=n.height,r=n.width,a=this._child||Zr.findDOMNode(this);if(a instanceof Element&&e){var i=function(e,t){if(Ip(t)&&document.documentElement){var n=document.documentElement,o=xp(e),r=xp(n);return{top:o.top-r.top,left:o.left-r.left}}var a=Pp(t),i=xp(e),l=xp(t);return{top:i.top+a.top-l.top,left:i.left+a.left-l.left}}(a,e);this._positionFromTop=i.top,this._positionFromLeft=i.left}var l=Tp(e,this.props);o===l.height&&r===l.width||(this.setState({height:l.height,width:l.width}),t({height:l.height,width:l.width}))}},{key:"componentDidMount",value:function(){var e=this.props.scrollElement;this._detectElementResize=pm(),this.updatePosition(e),e&&(kp(this,e),this._registerResizeListener(e)),this._isMounted=!0}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.scrollElement,o=e.scrollElement;o!==n&&null!=o&&null!=n&&(this.updatePosition(n),Ep(this,o),kp(this,n),this._unregisterResizeListener(o),this._registerResizeListener(n))}},{key:"componentWillUnmount",value:function(){var e=this.props.scrollElement;e&&(Ep(this,e),this._unregisterResizeListener(e)),this._isMounted=!1}},{key:"render",value:function(){var e=this.props.children,t=this.state,n=t.isScrolling,o=t.scrollTop,r=t.scrollLeft,a=t.height,i=t.width;return e({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:a,isScrolling:n,scrollLeft:r,scrollTop:o,width:i})}}]),t}(cn.PureComponent),Hr(Sp,"propTypes",null),Cp);Hr(Ap,"defaultProps",{onResize:function(){},onScroll:function(){},scrollingResetTimeInterval:150,scrollElement:Op(),serverHeight:0,serverWidth:0});const Np=(0,i.memo)((e=>{const[t,n]=(0,i.useState)(!1),[o,r]=(0,i.useState)(Math.random());return(0,i.useEffect)((()=>{n(!0)}),[]),(0,s.useEffectDeep)((()=>{r(Math.random)}),[e.list]),(0,i.createElement)("div",{className:"kubio-predefined-layouts__virtual-grid"},t&&(0,i.createElement)(Mp,C({key:o},e)))})),Mp=(0,i.memo)((e=>{var t;let{list:n,onSelect:o,ListItemComponent:r}=e;const a=(0,i.useRef)(),[l,c]=(0,i.useState)(Math.random()),[u,d]=(0,i.useState)(Dp()),m=(0,i.useMemo)((()=>{const e=u;let t=0,o=0;const r=[];return n.forEach((n=>{0===t&&(r[o]=[]),r[o][t]=n,t===e-1?(t=0,o++):t++})),r}),[n,u,l]),h=(0,i.useCallback)((e=>{let{columnIndex:t,key:n,rowIndex:a,style:l}=e;const s=m[a][t];return s?(0,i.createElement)("div",{key:n,style:l},(0,i.createElement)(r,{key:s.uniqueId,value:s,onSelect:o})):(0,i.createElement)(i.Fragment,null)}),[m,l]),g=(0,i.useMemo)((()=>{const e=document.querySelector(".kubio-predefined-layouts__modal-layout__list");if(!e)return null;const t=window.getComputedStyle(e),n=parseInt(t.paddingLeft)+parseInt(t.paddingRight),o=parseInt(t.paddingTop)+parseInt(t.paddingBottom),r=e.clientWidth-n,a=e.clientHeight-o-5,i=r/u;return{containerWidth:r,containerHeight:a,columnWidth:i,columnHeight:i}}),[u,l]),f=null===(t=p().get(m,"0",[]))||void 0===t?void 0:t.length,b=(0,i.useCallback)((()=>{const e=Dp();e!==u&&d(e),c(Math.random())}),[u,d,c]),v=(0,s.useDebounce)(b,50);return(0,i.useEffect)((()=>(window.addEventListener("resize",v),()=>{window.removeEventListener("resize",v)})),[v]),(0,i.createElement)("div",{ref:a,className:"kubio-predefined-layouts__virtual-grid__inner"},g&&(0,i.createElement)(am,{key:l,cellRenderer:h,columnCount:f,columnWidth:g.columnWidth,rowCount:m.length,rowHeight:g.columnHeight,height:g.containerHeight,width:g.containerWidth}))})),Dp=()=>{const e=document.querySelector(".kubio-predefined-layouts__virtual-grid");if(e)return parseInt(getComputedStyle(e).getPropertyValue("--number-columns"))},zp=e=>e.preventDefault(),Bp=(0,i.memo)((e=>{let{title:t,onClose:n=p().noop,className:o,children:r,...a}=e;const l=(0,i.useRef)(),c=(0,i.useMemo)((()=>document.querySelector(".kubio-predefined-layouts__popup-slot")),[]),u=(0,i.useCallback)((e=>{var t;null!=e&&null!==(t=e.target)&&void 0!==t&&t.closest(".kubio-predefined-layouts__inner-modal")||n()}),[n]);return(0,s.useOnClickOutside)(l,u),(0,i.createPortal)((0,i.createElement)("div",C({className:x()("kubio-predefined-layouts__inner-modal__overlay",o),onClick:zp,onMouseDown:zp},a),(0,i.createElement)("div",{className:"kubio-predefined-layouts__inner-modal",ref:l},(0,i.createElement)("div",{className:" components-modal__content"},(0,i.createElement)("div",{className:"components-modal__header"},(0,i.createElement)("div",{className:"components-modal__header-heading-container"},(0,i.createElement)("h1",{className:"components-modal__header-heading"},t)),(0,i.createElement)(k.Button,{onClick:n,icon:uo,label:(0,T.__)("Close dialog","kubio")})),r))),c)})),Lp=(0,i.memo)((()=>(0,i.createElement)("div",{className:"kubio-predefined-layouts__loading-overlay"},(0,i.createElement)(k.Icon,{icon:Y.KubioLoader}),";"))),Fp=(0,i.memo)((e=>{let{searchPlaceholder:t=(0,T.__)("Find a starter site…","kubio")}=e;return(0,i.createElement)(Wh.Sidebar,null,(0,i.createElement)(Wh.Sidebar.Header,null),(0,i.createElement)(Wh.Sidebar.Content,null,(0,i.createElement)(zh.Slot,null),(0,i.createElement)(Pd,{placeholder:t}),(0,i.createElement)(kd,null)))})),Gp=(0,i.memo)((e=>{let{value:t={},onSelect:n}=e;const{screenshot:o,isPro:r,label:a,slug:l,uniqueId:s,relatedDemoSite:c}=t,u=(0,i.useMemo)((()=>!r&&c?null==c?void 0:c.screenshot:o),[s,r,o,c]),d=p().get(c,"slug");return(0,i.createElement)(xd,{screenshot:u,label:a,isPack:!0,uniqueId:s,isPro:r,onClick:()=>{n(t)},favoriteType:"demoSite",favoriteId:l,relatedFavoriteId:d})}));var Hp=n(246),jp=n.n(Hp);const Up=(0,i.memo)((e=>{let{list:t,onSelect:n}=e;const o=(0,i.useRef)(),[r,a]=(0,i.useState)(1),l=(0,i.useMemo)((()=>{let e=20*r;return e=Math.min(t.length,e),t.slice(0,e)}),[r,t]),c=(0,i.useCallback)((()=>{const e=r+1;20*e-20>t.length||a(e)}),[a,r,t]),u=(0,s.useDebounce)(c,100),d=(0,i.useMemo)((()=>t.length!==l.length),[l,t]);return(0,i.createElement)("div",{className:"kubio-predefined-layouts__screenshot-list kubio-predefined-layouts__screenshot-list--infinite-list",ref:o},(0,i.createElement)(jp(),{pageStart:0,initialLoad:!1,useWindow:!1,loadMore:u,hasMore:d,threshold:2e3,loader:(0,i.createElement)("div",{className:"loader",key:0})},l.map(((e,t)=>(0,i.createElement)(Gp,{key:e.slug+"__"+t,value:e,onSelect:n})))))})),Wp=()=>{const{onSelectDemo:e}=cf(),{list:t}=tf(),n=(0,i.useCallback)((t=>{e(null==t?void 0:t.slug)}),[e]);return(0,i.createElement)(Wh.Page.Content,null,(0,i.createElement)(Up,{list:t,onSelect:n}))},Vp=(0,i.memo)((()=>{const{currentDemoSite:e}=cf();return(0,i.createElement)(Wh.Sidebar,{className:"kubio-predefined-layouts__preview-page__sidebar"},(0,i.createElement)(Wh.Sidebar.Header,null,(0,T.__)("Import Starter Site","kubio")),(0,i.createElement)(Wh.Sidebar.Content,null,(0,i.createElement)(xd,C({showAnimationAtLoad:!0},e,{showFavorite:!1,showLabel:!1}))),(0,i.createElement)(Wh.Sidebar.Footer,null,(0,i.createElement)("div",{className:"d-flex justify-content-end align-items-center"},(0,i.createElement)("a",{href:null==e?void 0:e.preview,target:"_blank",rel:"noreferrer"},(0,T.__)("Preview starter site","kubio")))))})),Kp={ACTIVE:(0,T.__)("Active","kubio"),INSTALLED:(0,T.__)("Installed","kubio"),NOT_INSTALLED:(0,T.__)("Not installed","kubio")},$p=p().get(window,["kubioUtilsData","plugins_states"],{}),qp=(0,i.memo)((()=>{const{currentDemoSite:e}=cf(),t=(0,i.useMemo)((()=>{const t=p().get(e,"plugins",[]);return Array.isArray(t)?t.map((e=>{const t=p().get($p,null==e?void 0:e.slug),n=p().get(Kp,t);return{...e,statusLabel:n}})):[]}),[e]);return(0,i.createElement)(i.Fragment,null,t.map((e=>{let{slug:t,label:n,statusLabel:o}=e;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)("li",{key:t,className:"kubio-predefined-layouts__demo-site-import-page__plugin"},(0,i.createElement)("div",{className:"d-flex justify-content-between"},(0,i.createElement)("span",{className:"d-flex align-items-center"},n),(0,i.createElement)("span",{className:"kubio-predefined-layouts__demo-site-import-page__plugin__status"},o))),(0,i.createElement)("hr",null))})))})),Yp=(0,i.memo)((()=>{const{currentDemoSite:e}=cf(),t=!p().isEmpty(null==e?void 0:e.plugins);return(0,i.createElement)("div",{className:"kubio-predefined-layouts__demo-site-import-page__import-panel"},(0,i.createElement)("div",null,(0,i.createElement)("div",{className:"kubio-predefined-layouts__demo-site-import-page__import-panel__title"},(0,T.__)("You are about to import a demo site","kubio")),(0,i.createElement)("ul",null,(0,i.createElement)("li",null,(0,T.__)("Current pages will be moved to trash. You can restore the content back at any time.","kubio")),(0,i.createElement)("li",null,(0,T.__)("Posts, pages, images, widgets, menus and other theme settings will get imported.","kubio")),(0,i.createElement)("li",{className:"text-danger"},(0,T.__)("Your current design will be completely overwritten by the new template. This process is irreversible. If you wish to be able to go back to the current design,please create a backup of your site before proceedingwith the import.","kubio")))),t&&(0,i.createElement)("div",null,(0,i.createElement)("div",{className:"kubio-predefined-layouts__demo-site-import-page__import-panel__title"},(0,T.__)("The following plugins will be installed as they are part of the demo","kubio")),(0,i.createElement)("ul",{className:"kubio-predefined-layouts__demo-site-import-page__plugins-list"},(0,i.createElement)(qp,null))))})),Xp=(0,i.memo)((()=>{const{currentDemoSite:e}=cf(),t=null==e?void 0:e.label;return(0,i.createElement)(Wh.Page.Content,null,(0,i.createElement)(Wh.Page.Content.Title,null,(0,i.createElement)("span",{className:"kubio-predefined-layouts__preview-page__content__title__name"},t)),(0,i.createElement)(Yp,null))})),Zp=(0,i.memo)((()=>{const{currentDemoSite:e,setShowDemoSiteImportPage:t}=cf(),{baseUrl:n}=(0,w.useSelect)((e=>{const{url:t}=e("core").getEntityRecord("root","site")||{};return{baseUrl:t}}),[]),o=(0,s.useUnloadStoreEntities)(),r=(0,s.useResetUndoStack)(),a=(0,i.useCallback)((()=>{o(),r()}),[o,r]),l=(0,i.useMemo)((()=>!0),[])&&(null==e?void 0:e.isPro)?Nr.ProItem:k.Button,c=(0,i.useCallback)((()=>{t(!1)}),[t]),u=(0,i.useCallback)((async()=>{if(!(null==e?void 0:e.slug))return;const t=new URL(`${n}/wp-admin/admin.php`),o=t.searchParams;o.set("page","kubio-get-started"),o.set("tab","demo-sites"),o.set("import",null==e?void 0:e.slug);const r=t.toString();a(),document.location.href=r}),[e]);return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(Wh.Page.Footer,null,(0,i.createElement)("div",{className:" d-flex w-100 justify-content-end align-items-center"},(0,i.createElement)(k.Button,{isSecondary:!0,onClick:c},(0,T.__)("Cancel","kubio")),(0,i.createElement)(l,{tag:k.Button,isPrimary:!0,urlArgs:{source:"templates_gallery",content:null==e?void 0:e.label},onClick:u},(0,T.__)("Import full starter site","kubio")))))})),Jp=(0,i.memo)((e=>(0,i.createElement)(i.Fragment,null,(0,i.createElement)(Wh,C({},e,{className:"kubio-predefined-layouts__demo-site-import-page",sidebar:(0,i.createElement)(Vp,null),pageContent:(0,i.createElement)(Xp,null),pageFooter:(0,i.createElement)(Zp,null)}))))),Qp=(0,i.memo)((e=>{const{selectedDemoSlug:t,showDemoSiteImportPage:n}=cf(),{list:o}=tf();return(0,i.createElement)(i.Fragment,null,t&&(0,i.createElement)($g,e),n&&(0,i.createElement)(Jp,null),(0,i.createElement)(Wh,C({},e,{className:"kubio-predefined-layouts__demo-list-page",items:o,sidebar:(0,i.createElement)(Fp,null),pageContent:(0,i.createElement)(Wp,null),emptyContent:(0,T.__)("No Starter Site Found","kubio")})))})),eh=(0,i.memo)((e=>{let{children:t}=e;const{rawDemoList:n}=cf(),{favoritesDataByType:o}=ff(),r=(0,i.useMemo)((()=>null===o?n:p().isEmpty(o)?[]:n.filter((e=>!!p().get(o,["demoSite",null==e?void 0:e.slug])))),[n,o]),a=(0,i.useMemo)((()=>{const e=p().cloneDeep(r),t=[];return e.forEach((e=>{const{isPro:n,relatedDemoSite:o}=e;o?!n&&t.push(e):t.push(e)})),t}),[r]),l=(0,i.useMemo)((()=>({list:a})),[a]);return(0,i.createElement)(qg.Provider,{value:l},t)})),th=(0,i.memo)((e=>(0,i.createElement)(sf,null,(0,i.createElement)(eh,null,(0,i.createElement)(Qg,null,(0,i.createElement)(Qp,e)))))),nh=(0,i.memo)((e=>{let{value:t={},onSelect:n}=e;const{screenshot:o,isPro:r,label:a,slug:l,uniqueId:s,demoSiteSlug:c,id:u,type:d}=t,m=(0,i.useMemo)((()=>{const e=(e=>p().get(Ou,["demoSitesListBySlug",e]))(c);return`STARTER SITE: ${null==e?void 0:e.label}`}),[c]),h=(0,i.useMemo)((()=>({favoriteType:`demo-${d}`,favoriteId:u})),[d,u]);return(0,i.createElement)("div",{className:"kubio-predefined-layouts__demo-part-list-page__item",onClick:()=>{n(t)}},(0,i.createElement)(xd,C({screenshot:o,label:a,uniqueId:s,isPro:r},h)),(0,i.createElement)("div",{className:"kubio-predefined-layouts__demo-part-list-page__item__pack-label",onClick:e=>e.stopPropagation()},m))})),oh=(0,i.memo)((e=>{let{list:t,onSelect:n}=e;return(0,i.createElement)(Np,{list:t,onSelect:n,ListItemComponent:nh})})),rh=()=>{const{onSelectDemo:e}=cf(),{list:t}=tf(),n=(0,i.useCallback)((t=>{e(null==t?void 0:t.demoSiteSlug,t)}),[e]);return(0,i.createElement)(Wh.Page.Content,null,(0,i.createElement)(oh,{list:t,onSelect:n}))},ah=(0,i.memo)((e=>{const{selectedDemoSlug:t,showDemoSiteImportPage:n,demoPartsIsLoaded:o}=cf(),{list:r}=tf();return(0,i.createElement)(i.Fragment,null,t&&(0,i.createElement)($g,e),n&&(0,i.createElement)(Jp,null),(0,i.createElement)(Wh,C({},e,{className:"kubio-predefined-layouts__demo-part-list-page",isLoading:!o,items:r,sidebar:(0,i.createElement)(Fp,{searchPlaceholder:(0,T.__)("Find a page…","kubio")}),pageContent:(0,i.createElement)(rh,null),emptyContent:(0,T.__)("No Page Found","kubio")})))})),ih=(0,i.memo)((e=>{let{children:t}=e;const{rawDemoList:n,demosPartsPerSlug:o}=cf(),{favoritesDataByType:r}=ff(),a=(0,i.useMemo)((()=>{let e=[];return n.forEach((t=>{let{slug:n,isPro:r,relatedDemoSite:a}=t;if(a){if(r)return;const t=n,i=null==a?void 0:a.slug,l=p().get(o,t,[]),s=p().get(o,i,[]);e=e.concat(l,s)}else{const t=p().get(o,n,[]);e=e.concat(t)}})),e}),[n,o]),l=(0,i.useMemo)((()=>null===r?a:p().isEmpty(r)?[]:a.filter((e=>{const{type:t,id:n}=e,o=[`demo-${t}`,n];return!!p().get(r,o)}))),[a,r]),s=(0,i.useMemo)((()=>({list:l})),[l]);return(0,i.createElement)(qg.Provider,{value:s},t)})),lh=(0,i.memo)((e=>(0,i.createElement)(sf,null,(0,i.createElement)(ih,null,(0,i.createElement)(Qg,null,(0,i.createElement)(ah,e)))))),sh=(0,i.memo)((e=>{let{value:t={},onSelect:n,onLoad:o}=e;const{screenshot:r,isProOnFree:a,label:l,name:s,categoryLabelWithIndex:c}=t,u=(0,i.useRef)(),d=a,m=d?Nr.ProItem:xd;let p={};return d&&(p={urlArgs:{source:"templates_gallery",content:l}}),(0,i.createElement)(Nr.ProModalTextContext.Provider,{value:(0,T.__)("This section is available only in the PRO version.","kubio")},(0,i.createElement)(m,C({tag:xd,ref:u,title:l,screenshot:r,label:c,uniqueId:s,isPro:a,isLandscape:!0,onClick:()=>n(t),favoriteType:"section",favoriteId:s,onLoad:o,addImageType:!1},p)))})),ch=(0,i.createContext)({}),uh=(0,i.memo)((e=>{let{children:t,filterByPublicTag:n=!0,activeTag:o,setActiveTag:r}=e;const[a,l]=dh(p().noop,"content"),[s]=dh(p().noop,"header"),[c]=dh(p().noop,"footer"),{favoritesDataByType:u}=ff(),{initialParams:d,activePage:g}=sd(),f=p().get(d,["sections","internalTag"]),{isFrontPage:b}=(0,w.useSelect)((e=>{const{getIsFrontPage:t=p().noop}=e("kubio/edit-site")||{};return{isFrontPage:t()}}),[]),v=p().get(d,[g,"categoryType"],"kubio-content"),_=(0,i.useMemo)((()=>s.concat(a,c)),[s,a,c]),y=(0,i.useMemo)((()=>_.filter((e=>{if(!v)return!0;const t=p().get(e,"categories.0"),n=t.split("/")[0];return(!b||t!==h.INNER_HEADERS_CATEGORY)&&n===v})).filter((e=>!(f&&!((null==e?void 0:e.internalTags)||[]).includes(f))&&!!(0,q.isPatternAvailableInCurrentTheme)(e)))),[_,v,b,f]),k=(0,i.useMemo)((()=>null===u?y:p().isEmpty(u)?[]:y.filter((e=>!!p().get(u,["section",null==e?void 0:e.name])))),[y,u]),E=(0,i.useMemo)((()=>{const e={};return k.map(((t,n)=>{var o;let r=t.screenshot;!r&&t.isCustomSection&&(r="data:image/svg+xml,"+`<svg background='#fff' xmlns='http://www.w3.org/2000/svg' width='400'  height='250'>\t<rect x='0' y='0' width='400' height='250' fill='white'></rect>\t<text x='50%' y="50%" fill='#a6adb5' dominant-baseline='middle' font-family='Open Sans, Arial, Helvetica, sans-serif' text-anchor='middle'>\t\t${t.title}\t</text></svg>`.replace(/"/g,"'").replace(/>\s{1,}</g,"><").replace(/\s{2,}/g," ").replace(/[\r\n%#()<>?[\\\]^`{|}]/g,encodeURIComponent));const a=null===(o=(0,m.find)(l,{name:p().get(t,"categories.0")}))||void 0===o?void 0:o.label;p().get(e,a)?e[a]++:e[a]=1;const i=`${a} #${e[a]}`;return{...t,label:t.title,categoryLabelWithIndex:i,screenshot:r}})).filter((e=>{const t=(null==e?void 0:e.publicTags)||[];return!(n&&o!==q.ALL_TAG&&!t.includes(o))})).sort(((e,t)=>0+e.isProPattern-t.isProPattern))}),[l,k,o]),S=(0,i.useMemo)((()=>l.map((e=>{let{name:t,label:n}=e;return{label:n,value:t}}))),[l]),C=(0,i.useCallback)(((e,t)=>{const n=e=>null==e?void 0:e.toLowerCase().replace("#",""),o=n(t);return e.filter((e=>{var t,r,a,i;let{label:l,categoryLabelWithIndex:s}=e;return(null===(t=n(l))||void 0===t||null===(r=t.includes)||void 0===r?void 0:r.call(t,o))||(null===(a=n(s))||void 0===a||null===(i=a.includes)||void 0===i?void 0:i.call(a,o))}))}),[]),I=(0,i.useMemo)((()=>({list:E,categories:S,filterFunction:C})),[E,S,C]),x=(0,i.useMemo)((()=>({activeTag:o,setActiveTag:r})),[o,r]);return(0,i.createElement)(ch.Provider,{value:x},(0,i.createElement)(qg.Provider,{value:I},t))})),dh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"content";const{patternCategories:n,patterns:o}=(0,w.useSelect)((e=>{const{getSettings:n}=e("core/block-editor");return{patterns:n().__experimentalBlockPatterns.filter((e=>e.isGutentagPattern&&0===e.name.indexOf(`kubio-${t}`))),patternCategories:n().__experimentalBlockPatternCategories}}),[t]),r=(0,i.useMemo)((()=>{const e={};n.forEach(((t,n)=>{let{name:o}=t;return e[o]=n}));const t=o.map(((t,n)=>{const o=p().get(t,"categories[0]"),r=e[o];return{...t,arrayIndex:n,categoryIndex:r}}));return p().orderBy(t,["categoryIndex","arrayIndex"],["asc","asc"])}),[o,n]),a=(0,i.useCallback)(((t,n)=>{const o=t.isGutentagPattern?(0,q.transformTemplateToBlock)(n):(0,m.map)(n,(e=>(0,Mr.cloneBlock)(e)));e(o,t)}),[]);return[r,n,a]},mh=()=>(0,i.useContext)(ch),ph=()=>{const{activeTag:e,setActiveTag:t}=mh();return(0,i.createElement)(uh,{activeTag:e,setActiveTag:t,filterByPublicTag:!1},(0,i.createElement)(Qg,null,(0,i.createElement)(hh,null)))},hh=()=>{const{list:e}=tf(),{activeTag:t,setActiveTag:n}=mh(),o=(0,i.useMemo)((()=>{const t=new Set;return e.forEach((e=>{(e.publicTags||[]).forEach((e=>t.add(e)))})),[...t]}),[e]);return(0,i.createElement)(i.Fragment,null,!!o.length&&(0,i.createElement)(q.KubioSectionsTags,{activeTag:t,setActiveTag:n,availableTagSlugs:o}))},gh=(0,i.memo)((e=>{let{list:t,onSelect:n}=e;const o=(0,i.useRef)(),[r,a]=(0,i.useState)(1),l=(0,i.useMemo)((()=>{let e=40*r;return e=Math.min(t.length,e),t.slice(0,e).map(((e,t)=>({...e,__internalId:t})))}),[r,t]),c=(0,i.useCallback)((()=>{a((e=>{const n=e+1;return 40*n-40>t.length?e:n}))}),[t]),u=(0,s.useDebounce)(c,100),d=(0,i.useMemo)((()=>t.length!==l.length),[l,t]),{onRestartMasonry:m}=(e=>{let{containerRef:t}=e;const n=(0,i.useRef)({}),o=(0,i.useRef)({}),r=(0,i.useRef)(0),a="data-masonry-loaded",l=(0,i.useRef)(0),c=(0,i.useRef)(!1),[u,d]=(0,i.useState)(!1),m=(0,i.useRef)(!1),p=(0,i.useCallback)((e=>{if("top"!==e.propertyName)return;const t=e.target;l.current>0&&l.current--,t.removeEventListener("transitionend",p),0===l.current&&c.current&&d(!0)}),[]),h=(0,i.useCallback)((()=>{if(0!==l.current||m.current)return c.current=!0,void(m.current=!1);m.current=!0;const e=t.current.children[0],i=o.current,s=n.current,u=r.current,d=Array.from(e.children).filter((e=>!e.hasAttribute(a)&&e.querySelector("img").hasAttribute("data-is-loaded"))),h=t.current,g=e.offsetHeight;e.style.paddingTop=`${g}px`;const f=e.clientWidth,{getComputedStyle:b}=h.ownerDocument.defaultView,v=parseInt(b(h).getPropertyValue("--number-columns")),_=f/v;d.forEach(((e,t)=>{const n=u+t,o=Math.floor(n/v);void 0===s[o]&&(s[o]=0);const r=0!==o?s[o-1]:0,i=e.offsetHeight+r;if(i>s[o]&&(s[o]=i),n>=v){const t=s[o-1];e.style.top=`${t}px`}else e.style.top=0;const l=n%v*_;e.style.left=`${l}px`,e.style.width=`${_}px`,e.style.position="absolute",e.setAttribute(a,!0)})),d.forEach(((e,t)=>{const n=u+t,o=e.querySelector(".kubio-predefined-layouts__screenshot-preview__parent");let r;if(n>=v){const e=i[n-v];r=`${e}px`,i[n]=e+o.offsetHeight+30}else i[n]=o.offsetHeight+30,r="0.1px";e.style.top!==r&&(l.current++,e.addEventListener("transitionend",p)),e.style.top=r}));let y=0;for(let e=0;e<v;e++){const t=d[d.length-1-e];if(!t)continue;const n=t.offsetHeight+parseFloat(t.style.top);y<n&&(y=n)}r.current+=d.length,e.style.paddingTop=`${y}px`,m.current=!1}),[t,p]);(0,i.useEffect)((()=>{u&&(d(!1),h())}),[u]);const g=(0,i.useCallback)((()=>{n.current={},o.current={},r.current=0;const e=t.current.children[0];e.style.paddingTop="0",Array.from(e.children).forEach((e=>{e.hasAttribute(a)&&e.removeAttribute(a),e.style.left="",e.style.top="",e.style.width="",e.style.position=""})),h()}),[t,h]),f=(0,s.useDebounce)(g,50);return(0,i.useEffect)((()=>(window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f)})),[f]),{onRestartMasonry:h}})({containerRef:o}),p=(0,s.useDebounce)((0,i.useCallback)(m,[]),500);return(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",{className:"kubio-predefined-layouts__screenshot-list kubio-predefined-layouts__screenshot-list--infinite-list",ref:o},(0,i.createElement)(jp(),{pageStart:0,initialLoad:!1,useWindow:!1,loadMore:u,hasMore:d,threshold:2e3,loader:(0,i.createElement)(i.Fragment,null)},l.map(((e,t)=>(0,i.createElement)(sh,{onLoad:p,key:e.name+"__"+t,value:e,index:t,onSelect:n})))),(0,i.createElement)(ph,null)))})),fh=()=>{const{list:e}=tf(),{initialParams:t,activePage:n}=sd(),o=p().get(t,[n,"onActionFunc"]),{insertBlocks:r}=(0,w.useDispatch)("core/block-editor"),{contentClientId:a,nrOfBlocksInsideContent:l,patternCategories:c,sectionNameAndIdHooks:u}=(0,w.useSelect)((e=>{var t;const{getBlocks:n,getBlockOrder:o,getClientIdsWithDescendants:r,getBlock:a}=e("core/block-editor"),{__experimentalBlockPatternCategories:i}=e("core/block-editor").getSettings(),l=n()||[],s=(0,q.findBlockByName)(l,"core/post-content"),c=null==s?void 0:s.clientId;return{patternCategories:i,contentClientId:c,nrOfBlocksInsideContent:null===(t=o(c))||void 0===t?void 0:t.length,sectionNameAndIdHooks:{getClientIdsWithDescendants:r,getBlock:a}}}),[]),{onClose:d=p().noop}=sd(),g=(0,i.useCallback)((async e=>{var t;const n=null==e?void 0:e.content;let o=(0,q.transformTemplateToBlock)(n);o=function(e){var t,n,o;let{block:r,pattern:a,patternCategories:i,hooks:l}=e;const{categories:s}=a,c=null!==(t=null==s?void 0:s[0])&&void 0!==t?t:"__undefined__category__",u=null!==(n=null===(o=(0,m.find)(i,{name:c}))||void 0===o?void 0:o.label)&&void 0!==n?n:"Custom Section",{anchor:d,name:p}=(0,q.getNextSectionNameAndId)(u,l);return"kubio/section"===r.name&&(r={...r,attributes:{...r.attributes,anchor:d,attrs:{...r.attributes.attrs,name:p}}}),r}({pattern:e,block:o,hooks:u,patternCategories:c});let i=l;var s;-1!==e.categories.indexOf(h.HERO_ACCENT_CATEGORY)&&(i=0),await r((0,q.cleanFontFamilyFromBlocks)(o),i,a,!1),d(),null!==(t=o)&&void 0!==t&&t.clientId&&Gu(null===(s=o)||void 0===s?void 0:s.clientId)}),[a,l,r,d,c,u]),f=(0,s.useDeepMemo)((()=>Ru().generate()),[e]),b=(0,i.useCallback)((async e=>{o?(o(e),d()):g(e)}),[o,d,g]);return(0,i.createElement)(Wh.Page.Content,null,(0,i.createElement)(gh,{key:f,list:e,onSelect:b}))},bh="https://s3.us-west-2.amazonaws.com/static-assets.kubiobuilder.com/assets/predesigned-layouts/no+elements+found.png",vh="https://s3.us-west-2.amazonaws.com/static-assets.kubiobuilder.com/assets/predesigned-layouts/no+elements+found+favorites.png";[bh,vh].forEach((e=>{(new Image).src=e}));const _h=(0,i.memo)((e=>{let{children:t}=e;const{activePage:n}=sd(),o=t||(0,T.__)("NO ELEMENTS FOUND","kubio"),r=(0,i.useMemo)((()=>n===ad?vh:bh),[n]);return(0,i.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list--empty-content"},(0,i.createElement)("img",{src:r}),o)})),yh=(0,i.memo)((e=>{let{children:t}=e;const{activePage:n}=sd(),{activeTag:o,setActiveTag:r}=mh(),a=(0,i.useMemo)((()=>n===ad?vh:bh),[n]);return(0,i.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list--empty-content"},(0,i.createElement)(q.KubioSectionsTags,{activeTag:o,setActiveTag:r}),(0,i.createElement)("img",{src:a}),(0,T.__)("No Section Found","kubio"))})),kh=(0,i.memo)((e=>{const{list:t}=tf(),n=!window.kubioPatternsRegistered;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(Wh,C({},e,{className:"kubio-predefined-layouts__sections-page",isLoading:n,items:t,sidebar:(0,i.createElement)(Fp,{searchPlaceholder:(0,T.__)("Find a section…","kubio")}),pageContent:(0,i.createElement)(fh,null),EmptyContentComponent:yh})))})),Eh=(0,i.memo)((e=>{const{initialParams:t,activePage:n}=sd(),o=p().get(t,["sections","tag"],q.ALL_TAG),[r,a]=(0,i.useState)(o);return(0,i.createElement)(uh,{activeTag:r,setActiveTag:a},(0,i.createElement)(Qg,null,(0,i.createElement)(kh,e)))})),Sh=(0,i.createContext)({value:null}),wh=(0,i.memo)((e=>{let{children:t}=e;const{previousActivePage:n}=sd(),[o,r]=(0,i.useState)(n),a=(0,i.useMemo)((()=>({activeTab:o,setActiveTab:r})),[o,r]);return(0,i.createElement)(Sh.Provider,{value:a},t)})),Ch=()=>(0,i.useContext)(Sh),Ih=id.filter((e=>{let{value:t}=e;return t!==ad})),xh=(0,i.memo)((()=>{const{activeTab:e,setActiveTab:t}=Ch(),{initialParams:n}=sd(),o=p().get(n,"disabledPages",[]);return(0,i.createElement)(P.ToggleGroup,{value:e,onChange:t,disabledOptions:o,options:Ih})})),Th=(0,i.memo)((()=>(0,i.createElement)(zh.Fill,null,(0,i.createElement)(xh,null)))),Ph=(0,i.memo)((e=>{const{activeTab:t}=Ch(),n=(0,i.useMemo)((()=>p().get(Oh,t,i.Fragment)),[t]);return(0,i.createElement)("div",{className:"kubio-predefined-layouts__favorite-page"},(0,i.createElement)(n,e),(0,i.createElement)(Th,null))})),Rh=(0,i.memo)((e=>(0,i.createElement)(wh,null,(0,i.createElement)(gf,null,(0,i.createElement)(Ph,e))))),Oh={[nd]:th,[od]:lh,[rd]:Eh,[ad]:Rh},Ah=(0,i.memo)((e=>{const{activePage:t,onClose:n,showLoadingOverlay:o}=sd(),r=(0,i.useRef)(),a=(0,i.useMemo)((()=>p().get(Oh,t,i.Fragment)),[t]),l=(0,i.useCallback)((()=>{n()}),[n]);return(0,s.useOnClickOutside)(r,l),(0,i.createElement)("div",{ref:r,className:"kubio-predefined-layouts__pages-container position-relative"},(0,i.createElement)(a,e),(0,i.createElement)("div",{className:"kubio-predefined-layouts__popup-slot"}),o&&(0,i.createElement)(Lp,null))})),Nh=(0,i.memo)((e=>{let{children:t}=e;const n=t||(0,T.__)("Kubio Library","kubio");return(0,i.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__sidebar__header"},(0,i.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__sidebar__header__inner"},n))})),Mh=(0,i.memo)((e=>{let{children:t}=e;return(0,i.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__sidebar__content"},t)})),Dh=(0,i.memo)((e=>{let{children:t}=e;return(0,i.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__sidebar__footer"},t)})),zh=(0,k.createSlotFill)("PredefinedLayoutsSidebarTop"),Bh=(0,i.memo)((e=>{let{children:t,className:n}=e;return(0,i.createElement)("div",{className:x()("kubio-predefined-layouts__modal-layout__sidebar",n)},t)}));Bh.Header=Nh,Bh.Content=Mh,Bh.Footer=Dh;const Lh=(0,i.memo)((e=>{let{children:t}=e;return(0,i.createElement)("div",null,t)})),Fh=(0,i.memo)((()=>{const{activePage:e,setActivePage:t,initialParams:n}=sd(),o=p().get(n,"disabledPages",[]);return(0,i.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__pages-switcher"},(0,i.createElement)(P.ToggleGroup,{value:e,onChange:t,disabledOptions:o,options:id}))})),Gh=(0,i.memo)((e=>{let{children:t}=e;return(0,i.createElement)(i.Fragment,null,t)})),Hh=(0,i.memo)((e=>{let{children:t}=e;return(0,i.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list__title"},t)})),jh=(0,i.memo)((e=>{let{children:t}=e;return(0,i.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list__footer"},t)})),Uh=(0,i.memo)((()=>(0,i.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list--loading-content"},(0,i.createElement)(k.Icon,{icon:Y.KubioLoader})))),Wh=(0,i.memo)((e=>{let{items:t,sidebar:n,pageContent:o,pageFooter:r,className:a,isLoading:l=!1,emptyContent:s,EmptyContentComponent:c=_h}=e;const{onClose:u}=sd();let d;if(Array.isArray(t)){const e=!(null==t?void 0:t.length);d=l?(0,i.createElement)(Uh,null):e?(0,i.createElement)(c,null,s):o}else d=o;return(0,i.createElement)("div",{className:x()("kubio-predefined-layouts__modal-layout",a)},n,(0,i.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list__container"},(0,i.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__header"},(0,i.createElement)(Fh,null),(0,i.createElement)(k.Button,{className:"kubio-predefined-layouts__modal-layout__close",onClick:u,icon:De,size:12,label:(0,T.__)("Close","kubio")})),(0,i.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list"},(0,i.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list__left-gradient"}),d),r))}));Wh.Page=Lh,Wh.Page.Content=Gh,Wh.Page.Footer=jh,Wh.Page.Content.Title=Hh,Wh.Sidebar=Bh;const Vh=(0,i.memo)((e=>{let{onSelectDemo:t}=e;const{activePage:n}=sd(),o=(0,i.useMemo)((()=>{switch(n){case nd:return(0,T.__)("Back to Starter Sites","kubio");case od:return(0,T.__)("Back to Pages","kubio")}return(0,T.__)("Back","kubio")}),[n]);return(0,i.createElement)(Wh.Sidebar.Header,null,(0,i.createElement)(k.Button,{className:"kubio-predefined-layouts__preview-page__sidebar__back",icon:(0,i.createElement)(k.Dashicon,{icon:"redo"}),onClick:()=>t(null)},o))})),Kh=(0,i.createContext)({text:null,isDisabled:!1}),$h=(0,i.memo)((()=>(0,i.createElement)("div",null,(0,T.__)("You can't import page content","kubio")))),qh=(0,i.memo)((e=>{let{children:t}=e;const{selectedDemoPart:n}=$u(),o=ug(n),{currentPostIsPage:r}=(0,w.useSelect)((e=>{const{getPage:t=p().noop}=e("kubio/edit-site")||{},n=t(),{postType:o}=(null==n?void 0:n.context)||{};return{currentPostIsPage:"page"===o}}),[]),a=p().isEmpty(n),l=(0,i.useMemo)((()=>{const e=o.find((e=>{let{isCurrentPageTemplate:t}=e;return t})),t=o.find((e=>{let{isSelectedDemoPart:t}=e;return t}));return t&&null!=t&&t.isDisabled?{text:t.noticeText,isDisabled:t.isDisabled}:e&&"page"===(null==n?void 0:n.type)||"page"===(null==n?void 0:n.type)&&!r?{text:mg,isDisabled:!0}:{text:$h,isDisabled:a}}),[o,n,r]);return(0,i.createElement)(Kh.Provider,{value:l},t)})),Yh=()=>(0,i.useContext)(Kh),Xh=["attachment","kubio_changeset"],Zh=e=>{let{onComplete:t=m.noop,closeModal:n=m.noop,entityName:o=(0,T.__)("other","kubio"),ModalComponent:r=k.Modal,modalProps:a={},changeReadyState:l=!0,changePage:c=!0}=e;const d=(0,s.useUnloadStoreEntities)(),p=(0,s.useResetUndoStack)(),h=(0,f.useSetGlobalSessionProp)("ready"),[g,v]=(0,i.useState)(!1),{hasDirtyEntities:_,entitiesToSave:y}=(0,w.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t}=e("core");return{hasDirtyEntities:t().filter((e=>{let{kind:t,name:n}=e;return"postType"===t&&!Xh.includes(n)})).length>0,entitiesToSave:t()}})),{saveEditedEntityRecord:E}=(0,w.useDispatch)("core"),{setIsNavigationPanelOpened:S,setPage:I}=(0,w.useDispatch)(io),[,x]=(0,b.useAIData)(),P=(0,i.useCallback)((()=>{S(!1),l&&(h(!1),c&&I(null));const{requestIdleCallback:e}=window;e((()=>{d(),p(),(0,s.removeCachedAllMergedAttributes)(),x(null),e(t)})),(0,u.doAction)("kubio.editor.page-changed")}),[S,l,I,h,d,p,x,t]);return(0,i.useEffect)((()=>{_||P()}),[P,_]),(0,i.createElement)(i.Fragment,null,_&&(0,i.createElement)(r,C({title:(0,T.__)("You have unsaved changes","kubio"),onRequestClose:n},a),(0,i.createElement)("p",null,(0,i.createElement)("span",{dangerouslySetInnerHTML:{__html:(0,T.sprintf)(// translators: %s: page name
(0,T.__)("You are being redirected to <strong>%s</strong> page.","kubio"),o)}}),(0,i.createElement)("br",null),(0,T.__)("Would you like to save these changes or discard them?","kubio")),(0,i.createElement)(k.ButtonGroup,{className:"h-template-part-modal__button-group"},(0,i.createElement)(k.Button,{isLink:!0,onClick:()=>{P()}},(0,T.__)("Discard changes","kubio")),(0,i.createElement)(k.Button,{isPrimary:!0,onClick:()=>{v(!0),(()=>{const e=y.map((e=>{let{kind:t,name:n,key:o}=e;return E(t,n,o)}));return Promise.all(e)})().then((()=>{P(),v(!1)}))},isBusy:g,disabled:g},(0,T.__)("Save changes","kubio")))))},Jh=(0,i.memo)((e=>{let{onClose:t=p().noop,children:n}=e;const[o,r]=(0,i.useState)(!1),[,a]=(0,f.useGlobalSessionProp)("displayingEmptyPageChecked"),l=(0,i.useMemo)((()=>({onClose:t})),[t]),s=(0,i.useCallback)((()=>{r(!0),a(!0)}),[a]);return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(Zh,{onComplete:s,onClose:t,ModalComponent:Bp,modalProps:l,changeReadyState:!1}),o&&n)})),{memo:Qh,useState:eg}=n(9307),tg=Qh((e=>{let{actionLabel:t,description:n,NoticeActionComponent:o,onClose:r=p().noop,onAction:a=p().noop,onShowAction:l=p().noop,fromPopup:s=!1,...c}=e;const[u,d]=eg(!1),m=(0,i.useCallback)((()=>{r(),d(!1)}),[r,d]),h=e=>{e.stopPropagation(),e.preventDefault(),l(),d(!0)};return(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",{className:"kubio-predefined-layouts__disabled-notice__description"},n),(0,i.createElement)("div",null,!s&&(0,i.createElement)("a",{className:"kubio-predefined-layouts__disabled-notice__action",onClick:h},t),s&&(0,i.createElement)(k.Button,{isSecondary:!0,onClick:h},t)),u&&(0,i.createElement)(Jh,{onClose:m},(0,i.createElement)(o,C({onAction:a},c))))})),ng=(0,i.memo)((e=>{let{onAction:t,templateSlug:n,thirdPartyUrl:o=null}=e;const r=(0,i.useRef)(!1),{storeData:a}=(0,w.useSelect)((e=>{var t;const{storeData:n={}}=null===(t=e(s.TEMPLATE_STORE_NAME))||void 0===t?void 0:t.getTemplateData();return{storeData:n}}),[]),{createErrorNotice:l}=(0,s.useKubioNotices)(),{setTemplate:c=p().noop}=(0,w.useDispatch)("kubio/edit-site")||{},u=(0,f.useSetGlobalSessionProp)("ready"),{onClose:d}=sd(),m=(0,i.useCallback)((()=>{if(!o)return void l((0,T.__)("Could not redirect to the page you selected","kubio"));const e=document.createElement("a");e.setAttribute("href",o),document.body.append(e),e.click()}),[o,l]),h=(0,i.useMemo)((()=>{const e=(null==a?void 0:a.templates)||[],t=e=>{var t;const n=null==e||null===(t=e.id)||void 0===t?void 0:t.split("//");return p().get(n,"[1]")};if(Array.isArray(n)){let o=null;return p().reverse(n).forEach((n=>{if(o)return;const r=e.find((e=>t(e)===n));r&&(o=r)})),o}return e.find((e=>t(e)===n))}),[null==a?void 0:a.templates]),g=(0,i.useCallback)((()=>{r.current||(r.current=!0,u(!1),t(),d(),h?c(h.id,h.slug,!0):m())}),[h,c,t,r,d,u]);return(0,i.useEffect)((()=>{g()}),[]),(0,i.createElement)(i.Fragment,null)})),og=()=>{const{siteUrl:e}=(0,w.useSelect)((e=>{const{getSettings:t=p().noop}=e("kubio/edit-site"),{siteUrl:n}=t()||{};return{siteUrl:n}}),[]);return e},rg=e=>{const t=og();return(0,i.useMemo)((()=>{try{const n=new URL(`${t}wp-admin/admin.php`),o=n.searchParams;return o.append("page","kubio"),o.append("pageURL",e),n.toString()}catch(e){return null}}),[e])},ag=(0,i.memo)((e=>{const{blogLink:t}=(0,w.useSelect)((e=>{const{getEditedEntityRecord:t}=e("core"),{getSettings:n=p().noop}=e("kubio/edit-site"),o=t("root","site");let r;if("page"===(null==o?void 0:o.show_on_front)){const e=t("postType","page",parseInt(null==o?void 0:o.page_for_posts));r=p().get(e,"link",null)}else{const{siteUrl:e}=n()||{};r=e}return{blogLink:r}}),[]),n=rg(t);return(0,i.createElement)(tg,C({description:(0,T.__)("This content can be imported only on the blog template","kubio"),actionLabel:(0,T.__)("Switch to the blog template","kubio"),templateSlug:Qu,NoticeActionComponent:ng,thirdPartyUrl:n},e))})),ig=(0,i.memo)((e=>{let{onAction:t,firstPost:n}=e;const o=(0,i.useRef)(!1),{createErrorNotice:r}=(0,s.useKubioNotices)(),{setTemplate:a=p().noop}=(0,w.useDispatch)("kubio/edit-site")||{},l=(0,f.useSetGlobalSessionProp)("ready"),{onClose:c}=sd(),{setPage:u}=(0,w.useDispatch)(h.STORE_KEY),d=(0,i.useCallback)((()=>{!o.current&&n&&(o.current=!0,l(!1),t(),c(),u({type:n.type,slug:n.slug,path:(0,di.getPathAndQueryString)(n.link),context:{postType:n.type,postId:n.id}}))}),[n,a,t,o,c,l]);return(0,i.useEffect)((()=>{d()}),[]),(0,i.createElement)(i.Fragment,null)})),lg=(0,i.memo)((e=>{const{firstPost:t}=(0,w.useSelect)((e=>{const{getEntityRecords:t}=e("core"),n=t("postType","post",{per_page:1});return{firstPost:p().get(n,"0")}}),[]);return(0,i.createElement)(tg,C({description:(0,T.__)("This content can be imported only on the singe post template","kubio","kubio"),actionLabel:(0,T.__)("Switch to the singe post template","kubio"),firstPost:t,NoticeActionComponent:ig},e))})),sg=(0,i.memo)((e=>{const t=og(),n=rg(`${t}?s=search-page`);return(0,i.createElement)(tg,C({description:(0,T.__)("This content can be imported only on the search template","kubio"),actionLabel:(0,T.__)("Switch to the search template","kubio"),templateSlug:"search",thirdPartyUrl:n,NoticeActionComponent:ng},e))})),cg=(0,i.memo)((e=>{const t=og(),n=rg(`${t}page-no-found`);return(0,i.createElement)(tg,C({description:(0,T.__)("This content can be imported only on the 404 template","kubio"),actionLabel:(0,T.__)("Switch to the 404 template","kubio"),templateSlug:"404",thirdPartyUrl:n,NoticeActionComponent:ng},e))})),ug=e=>{const{fseTemplateSlug:t,page:n}=(0,w.useSelect)((e=>{const{getPage:t=p().noop,getTemplateId:n=p().noop}=e("kubio/edit-site")||{},o=t(),r=n()||"";return{page:o,fseTemplateSlug:p().get(r.split("//"),"[1]")}}),[]),o=(0,f.useGetGlobalSessionProp)("urlBasedTemplatesMap",{})[null==n?void 0:n.path],r=t||o,a=(e=>{let{templateSlug:t,selectedDemoPart:n={}}=e;const{type:o,slug:r}=n;let a=!1;const i="template"===o&&(null==Qu?void 0:Qu.includes(r)),l=Qu.includes(t);return a=i&&!l,{type:"blog",noticeText:ag,isDisabled:a,isCurrentPageTemplate:l,isSelectedDemoPart:i}})({templateSlug:r,selectedDemoPart:e}),i=(e=>{let{templateSlug:t,selectedDemoPart:n={}}=e;const{type:o,slug:r}=n;let a=!1;const i="template"===o&&(null==Ju?void 0:Ju.includes(r)),l=Ju.includes(t);return a=i&&!l,{type:"single",noticeText:lg,isDisabled:a,isCurrentPageTemplate:l,isSelectedDemoPart:i}})({templateSlug:r,selectedDemoPart:e}),l=(e=>{let{templateSlug:t,selectedDemoPart:n={}}=e;const{type:o,slug:r}=n;let a=!1;const i="search"===t,l="template"===o&&"search"===r;return a=l&&!i,{type:"search",noticeText:sg,isDisabled:a,isCurrentPageTemplate:i,isSelectedDemoPart:l}})({templateSlug:r,selectedDemoPart:e}),s=(e=>{let{templateSlug:t,selectedDemoPart:n={}}=e;const{type:o,slug:r}=n;let a=!1;const i="404"===t,l="template"===o&&"404"===r;return a=l&&!i,{type:"404",noticeText:cg,isDisabled:a,isCurrentPageTemplate:i,isSelectedDemoPart:l}})({templateSlug:r,selectedDemoPart:e});return[i,a,l,s]},dg=(0,i.memo)((e=>{let{onAction:t}=e;const{saveEntityRecord:n,editEntityRecord:o,saveEditedEntityRecord:r}=(0,w.useDispatch)("core"),{setPage:a}=(0,w.useDispatch)(h.STORE_KEY),l=(0,i.useRef)(!1),{createErrorNotice:c}=(0,s.useKubioNotices)(),u=(0,f.useSetGlobalSessionProp)("ready"),{onClose:d}=sd(),m=(0,i.useCallback)((async()=>{if(l.current)return;l.current=!0,u(!1),t(),d();const e={title:"Kubio page",status:"publish"};try{var i;const t=await n("postType","page",e);if(!t)return;const l=p().capitalize(null==t||null===(i=t.slug)||void 0===i?void 0:i.replaceAll("-"," "));await o("postType","page",t.id,{title:l}),await r("postType","page",t.id),a({type:t.type,slug:t.slug,path:(0,di.getPathAndQueryString)(t.link),context:{postType:t.type,postId:t.id}})}catch(e){c((0,T.__)("Could not create new page","kubio"))}}),[a,t,d,n,c,o]);return(0,i.useEffect)((()=>{m()}),[]),(0,i.createElement)(i.Fragment,null)})),mg=(0,i.memo)((e=>(0,i.createElement)(tg,C({description:(0,T.__)("This content can be imported only on a page","kubio"),actionLabel:(0,T.__)("Create new page","kubio"),NoticeActionComponent:dg},e)))),pg=(0,i.memo)((e=>{let{onAction:t=p().noop,...n}=e;const{text:o,isDisabled:r}=Yh();return(0,i.createElement)("div",{className:"kubio-predefined-layouts__disabled-notice__outer"},o&&r&&(0,i.createElement)("div",{className:"kubio-predefined-layouts__disabled-notice"},(0,i.createElement)(o,C({onAction:t},n))))})),hg=(0,i.memo)((()=>(0,i.createElement)(Wh.Sidebar.Footer,null,(0,i.createElement)(pg,null)))),gg=(0,i.memo)((()=>(0,i.createElement)("div",{className:"kubio-predefined-layouts__preview-page__sidebar__content--is-loading"},(0,i.createElement)(k.Icon,{icon:Y.KubioLoader}),";"))),fg=(0,i.memo)((e=>{let{currentDemoSite:t,selectedDemoPart:n}=e;const o=null==t?void 0:t.preview,r=(0,i.useRef)(),a=(0,i.useMemo)((()=>{const{pagePreviewUrl:e}=n||{};return e||o}),[o,n]);return(0,i.createElement)(i.Fragment,null,(0,i.createElement)("a",{ref:r,href:a,target:"_blank",className:"kubio-predefined-layouts__preview-page__sidebar__preview-button",rel:"noreferrer"},(0,i.createElement)(k.Icon,{icon:Y.PreviewIcon})),(0,i.createElement)(P.ModalTooltip,{anchorRef:r},(0,T.__)("Live Preview","kubio")))})),bg=(0,i.memo)((e=>{let{selectedDemoPart:t,currentDemoSite:n,demoPartsIsLoaded:o,currentDemoParts:r}=e;const[a,l]=(0,i.useState)(!1),{uniqueId:s}=t||{},c=(0,i.createElement)(fg,{currentDemoSite:n,selectedDemoPart:t});return(0,i.useEffect)((()=>{t&&!a&&(l(!0),function(e,t){if(!Array.isArray(e)||!t)return;const n=new Image;n.onload=()=>{e.filter((e=>e.uniqueId!==(null==t?void 0:t.uniqueId))).forEach((e=>{(new Image).src=e.screenshotFull}))},n.src=null==t?void 0:t.screenshotFull}(r,t))}),[t]),(0,i.createElement)(Wh.Sidebar.Content,null,o&&(0,i.createElement)(xd,C({key:s,showFull:!0,showAnimationAtLoad:!0,labelSlot:c,showFavorite:!1,addUniquePreviewAttribute:!1},t)),!o&&(0,i.createElement)(gg,null))})),vg=(0,i.memo)((()=>{const{selectedDemoPart:e,demoPartsIsLoaded:t,currentDemoParts:n}=$u(),{currentDemoSite:o,onSelectDemo:r}=cf();return(0,i.createElement)(Wh.Sidebar,{className:"kubio-predefined-layouts__preview-page__sidebar"},(0,i.createElement)(Vh,{onSelectDemo:r}),(0,i.createElement)(bg,{selectedDemoPart:e,currentDemoSite:o,demoPartsIsLoaded:t,currentDemoParts:n}),(0,i.createElement)(hg,null))})),_g=(0,i.memo)((e=>{let{colorPalette:t}=e;const n=(0,i.useMemo)((()=>t.map((e=>{let{color:t}=e;return`rgb(${t.join(",")}`}))),[t]);return(0,i.createElement)("td",{className:"kubio-predefined-layouts__color-palette-previewer__list"},n.map(((e,t)=>(0,i.createElement)(P.ColorIndicator,{key:t,value:e}))))})),yg=(0,i.memo)((e=>{let{colorPalette:t}=e;return(0,i.createElement)("tr",{className:"kubio-predefined-layouts__color-palette-previewer"},(0,i.createElement)("td",null,(0,T.__)("Starter site colors","kubio")),t&&(0,i.createElement)(_g,{colorPalette:t}))})),kg=["h1","h2","h3","h4","h5","h6","p"],Eg=[{label:"Heading 1",holder:"h1"},{label:"Heading 2",holder:"h2"},{label:"Heading 3",holder:"h3"},{label:"Heading 4",holder:"h4"},{label:"Heading 5",holder:"h5"},{label:"Heading 6",holder:"h6"},{label:"Paragraph",holder:"p"}],Sg=(0,i.memo)((e=>{let{typography:t}=e;const n=(0,i.useMemo)((()=>{const e=p().get(t,"holders",{});return p().pick(e,kg)}),[t]),o=(0,i.useCallback)((e=>{const t=p().get(n,e);if(!t)return{};const o=Fl.typographyConfig.getTypographyCss(t,null,!1);return p().omit(o,"color")}),[n]);return t?(0,i.createElement)("td",{className:"kubio-predefined-layouts__typography-previewer__text-container"},Eg.map((e=>{let{label:t,holder:r}=e;const a=o(r);return(0,i.createElement)(wg,{key:r,style:a,holder:r,styleByHolder:n},t)}))):(0,i.createElement)(i.Fragment,null)})),wg=(0,i.memo)((e=>{let{children:t,styleByHolder:n,holder:o,style:r}=e;const a=(0,i.useRef)(),l=(0,i.useMemo)((()=>{const e=p().get(n,o),{family:t,weight:r,size:a}=e;return`${t}, ${r}, ${null==a?void 0:a.value}${null==a?void 0:a.unit}`}),[n,o]);return(0,i.createElement)(i.Fragment,null,(0,i.createElement)("span",{className:"kubio-predefined-layouts__typography-previewer__text",style:r,ref:a},t),(0,i.createElement)("span",{className:"kubio-predefined-layouts__typography-previewer__text-separator"},", "),(0,i.createElement)(P.ModalTooltip,{anchorRef:a},l))})),Cg=(0,i.memo)((e=>{let{typography:t}=e;return(0,i.createElement)("tr",{className:"kubio-predefined-layouts__typography-previewer"},(0,i.createElement)("td",null,(0,T.__)("Starter site typography","kubio")),(0,i.createElement)(Sg,{typography:t}))})),Ig=(0,i.memo)((e=>{let{isOpen:t}=e;const[n,o]=(0,i.useState)(),{selectedDemoPart:r}=$u();(0,i.useEffect)((()=>{!async function(){const e=await async function(e){const t=["demoPartsContentById","page"===(null==e?void 0:e.type)?"pages":"templates",null==e?void 0:e.id],n=p().get(Ou,t);return Du(null==n?void 0:n.globalDataId)}(r);e&&o(e)}()}),[r]);const a=(0,i.useMemo)((()=>null==n?void 0:n.colors),[n]),l=(0,i.useMemo)((()=>p().get(n,"globalStyle.style.descendants.body.typography")),[n]),s=(0,i.useRef)(),c=(0,i.useMemo)((()=>{var e;return t?{height:`${null==s||null===(e=s.current)||void 0===e?void 0:e.offsetHeight}px`}:{height:0}}),[t]),u=(0,i.useMemo)((()=>{const e=[];return p().get(n,["fonts","google"],[]).forEach((t=>{let{family:n}=t;e.includes(n)||e.push(n)})),e}),[n]);return(0,i.createElement)(xg.Fill,null,(0,i.createElement)("div",{className:"kubio-predefined-layouts__preview-page__advanced-settings__control",style:c},(0,i.createElement)("div",{ref:s,className:"kubio-predefined-layouts__preview-page__advanced-settings__control__inner"},(0,i.createElement)("table",{className:"kubio-predefined-layouts__preview-page__advanced-settings__global-data"},(0,i.createElement)("tbody",null,(0,i.createElement)(yg,{colorPalette:a}),(0,i.createElement)(Cg,{typography:l}))))),(0,i.createElement)(Sd,{fontsToLoad:u}))})),xg=(0,k.createSlotFill)("PredefinedLayoutsAdvancedSettings"),Tg=(0,i.memo)((()=>{const{shouldConvertGlobalColors:e,setShouldConvertGlobalColors:t}=md();return(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",{className:"kubio-predefined-layouts__preview-page__advanced-settings"},(0,i.createElement)(P.ToggleControl,{label:(0,T.__)("Replace global styles","kubio"),value:e,onChange:t})),(0,i.createElement)(Ig,{isOpen:e}))})),Pg=(0,i.memo)((e=>{let{value:t={},onSelect:n,selected:o}=e;const{screenshot:r,isPro:a,label:l,uniqueId:s,type:c,id:u}=t,d=s===(null==o?void 0:o.uniqueId),m=(0,i.useMemo)((()=>({favoriteType:`demo-${c}`,favoriteId:u})),[c,u]);return(0,i.createElement)("div",{className:x()("kubio-predefined-layouts__preview-page__item",{"kubio-predefined-layouts__preview-page__item--selected":d}),onClick:()=>{n(t)}},(0,i.createElement)(xd,C({isPro:a,screenshot:r,label:l,uniqueId:s},m)))})),Rg=(0,i.memo)((e=>{let{list:t,value:n,onSelect:o}=e;return(0,i.createElement)(Id,{list:t},(e=>(0,i.createElement)(Pg,{key:e.slug,value:e,selected:n,onSelect:o})))})),Og=e=>{(0,i.useEffect)((()=>{if(!e)return;const t=document.querySelector(`[data-unique-id="${null==e?void 0:e.uniqueId}"]`);t&&(function(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}(t)||t.scrollIntoView({block:"center"}))}),[e])},Ag=(0,i.memo)((()=>{const{currentDemoParts:e,setSelectedDemoPart:t,selectedDemoPart:n}=$u();return Og(n),(0,i.createElement)(Rg,{list:e,onSelect:t,value:n})})),Ng=(0,i.memo)((()=>{const{currentDemoSite:e,onSelectDemo:t}=cf(),{currentDemoParts:n,relatedDemoParts:o,setSelectedDemoPart:r,selectedDemoPart:a}=$u(),l=!!o,s=null==e?void 0:e.relatedDemoSite;Og(a);const c=(0,i.useMemo)((()=>null!=e&&e.isPro?e:s),[e,s]),u=(0,i.useMemo)((()=>e===c?s:e),[e,c]),d=(0,i.useMemo)((()=>e.isPro?n:e.isPro||o?!e.isPro&&null!=e&&e.relatedDemoSite&&o?o:void 0:n),[n,e,o]),m=(0,i.useMemo)((()=>l&&n&&o?d===n?o:n:null),[l,d]),p=(0,i.useMemo)((()=>n===d),[d,n]),h=!p,g=(0,i.useCallback)((e=>{p?r(e):t(null==c?void 0:c.slug,e)}),[r,p,c]),f=(0,i.useCallback)((e=>{h?r(e):t(null==u?void 0:u.slug,e)}),[r,h,u]);return o?(0,i.createElement)(i.Fragment,null,(0,i.createElement)(Rd,{label:(0,T.__)("FREE","kubio")}),(0,i.createElement)(Rg,{list:m,onSelect:f,value:a}),(0,i.createElement)(Rd,{label:(0,T.__)("PRO","kubio"),className:"kubio-predefined-layouts__free-pro-separator--second"}),(0,i.createElement)(Rg,{list:d,onSelect:g,value:a})):(0,i.createElement)(i.Fragment,null)})),Mg=(0,i.memo)((()=>{const{currentDemoSite:e}=cf(),t=null==e?void 0:e.label,n=(0,i.useMemo)((()=>!(null==e||!e.relatedDemoSite)),[e])?Ng:Ag;return(0,i.createElement)(Wh.Page.Content,null,(0,i.createElement)(Wh.Page.Content.Title,null,(0,i.createElement)("div",{className:"kubio-predefined-layouts__preview-page__content__title"},(0,i.createElement)("div",{className:"d-flex justify-content-between align-items-center"},(0,i.createElement)("span",{className:"kubio-predefined-layouts__preview-page__content__title__name"},t),(0,i.createElement)(Tg,null)),(0,i.createElement)(xg.Slot,null))),(0,i.createElement)(n,null))})),Dg="content",zg="fullPage",Bg="fullStarterSite",Lg=[{label:(0,T.__)("Content","kubio"),value:Dg,description:(0,T.__)("The selected starter site content will be added after your existing sections","kubio"),image:"https://s3.us-west-2.amazonaws.com/static-assets.kubiobuilder.com/assets/predesigned-layouts/content.png"},{label:(0,T.__)("Full page","kubio"),value:zg,description:(0,T.__)("Your header, content and footer will be all replaced with the ones from the selected page","kubio"),image:"https://s3.us-west-2.amazonaws.com/static-assets.kubiobuilder.com/assets/predesigned-layouts/full+page.png"},{label:(0,T.__)("Full starter site","kubio"),value:Bg,description:(0,T.__)("All content will be replaced with the selected full starter site","kubio"),image:"https://s3.us-west-2.amazonaws.com/static-assets.kubiobuilder.com/assets/predesigned-layouts/full+site.png"}],Fg=(0,i.memo)((e=>{let{value:t,label:n,description:o,image:r,isActive:a,onClick:l,isDisabled:s=!1,isFreeOnPro:c=!1,urlArgs:u}=e;const d=(0,i.useMemo)((()=>[{label:n,value:t}]),[n,t]),m=(0,i.useMemo)((()=>a?t:null),[a,t]),p=(0,i.useCallback)((()=>{s||l()}),[l,s]),h=(0,i.useMemo)((()=>c?Nr.ProItem:Gg),[c]),g=(0,i.useMemo)((()=>c?{tag:Gg,urlArgs:{urlArgs:u}}:{}),[c]);return(0,i.createElement)(h,C({className:x()("kubio-predefined-layouts__preview-page__import-popup__card",{"kubio-predefined-layouts__preview-page__import-popup__card--active":a,"kubio-predefined-layouts__preview-page__import-popup__card--disabled":s}),onClick:p},g),(0,i.createElement)("img",{className:"kubio-predefined-layouts__preview-page__import-popup__card__image",src:r}),(0,i.createElement)("div",{className:"kubio-predefined-layouts__preview-page__import-popup__card__label"},(0,i.createElement)(k.RadioControl,{options:d,selected:m})),(0,i.createElement)("div",{className:"kubio-predefined-layouts__preview-page__import-popup__card__description"},o),s&&(0,i.createElement)("div",{className:"kubio-predefined-layouts__preview-page__import-popup__card__disabled-overlay"}))})),Gg=(0,i.memo)((0,i.forwardRef)(((e,t)=>{let{children:n,...o}=e;return(0,i.createElement)("div",C({},o,{ref:t}),n)}))),Hg=(0,i.memo)((e=>{let{onClose:t,onImportContent:n,onImportFullPage:o,onImportStarterSite:r,isFreeBuild:a,currentTemplateIsClassic:l,currentDemoSite:s,selectedDemoPart:c}=e;const u=(0,i.useMemo)((()=>l?zg:Dg),[l]),[d,m]=(0,i.useState)(u),p=(0,i.useCallback)((e=>{e!==d&&m(e)}),[d,m]),h=(0,i.useMemo)((()=>Lg.map((e=>{const t={};return e.value===zg&&a&&!l&&(t.isFreeOnPro=!0,t.urlArgs={source:"templates_gallery",content:null==s?void 0:s.label}),e.value===Dg&&l&&(t.isDisabled=!0),{...e,...t}}))),[Lg,l,a,s,c]);return(0,i.createElement)(Bp,{title:(0,i.createElement)(jg,null),onClose:t},(0,i.createElement)("div",{className:"kubio-predefined-layouts__preview-page__import-popup"},(0,i.createElement)("div",{className:"kubio-predefined-layouts__preview-page__import-popup__list"},h.map((e=>(0,i.createElement)(Fg,C({key:e.value},e,{isActive:d===e.value,onClick:()=>p(e.value)}))))),(0,i.createElement)("div",{className:"kubio-predefined-layouts__preview-page__import-popup__footer d-flex justify-content-end"},(0,i.createElement)(k.Button,{isPrimary:!0,onClick:()=>{switch(d){case Dg:return void n();case zg:return void o();case Bg:t(),r()}}},(0,T.__)("Import selection","kubio")))))})),jg=(0,i.memo)((()=>(0,i.createElement)("span",{style:{fontWeight:"700"}},(0,T.__)("What to import:","kubio")))),{memo:Ug}=n(9307),Wg=Ug((e=>{let{onClose:t}=e;const[n,o]=(0,i.useState)(!1),r=(0,i.useCallback)((()=>{o(!0)}),[o]),a=(0,i.useMemo)((()=>{if(n)return"invisible"}),[n]);return(0,i.createElement)(Bp,{title:(0,i.createElement)("div",null,(0,T.__)("This content can't be imported here","kubio")),onClose:t,className:a},(0,i.createElement)(pg,{onAction:t,onClose:t,onShowAction:r,fromPopup:!0}))})),Vg=(0,i.memo)((()=>{const{selectedDemoPart:e}=$u(),[t,n]=(0,i.useState)(!1),[o,r]=(0,i.useState)(!1),a=(0,i.useCallback)((()=>{n(!1)}),[n]),{currentDemoSite:l,setShowDemoSiteImportPage:s}=cf(),{importDemoPart:c,isImporting:u,whatToImport:d,setWhatToImport:m}=md(),{isDisabled:h}=Yh(),{type:g,isPro:f}=e||{},{isClassicTemplate:b}=(0,w.useSelect)((e=>{const{getTemplateId:t=p().noop}=e("kubio/edit-site")||{};return{isClassicTemplate:!t()}})),v="template"===g&&b,_=(0,i.useMemo)((()=>!0),[]),y=_&&f,E=y?Nr.ProItem:k.Button,S=_&&(null==l?void 0:l.isPro),I=S?Nr.ProItem:k.Button;let P={};y&&(P={urlArgs:{source:"templates_gallery",content:null==l?void 0:l.label}});let R={};S&&(R={urlArgs:{source:"templates_gallery",content:null==l?void 0:l.label}});const O=(0,i.useCallback)((()=>{s(!0)}),[s]),A=(0,i.useCallback)((()=>{m(qu),setTimeout((()=>{c()}),0)}),[m,c]),N=(0,i.useCallback)((()=>{m(Yu),setTimeout((()=>{c()}),0)}),[m,c]),M=(0,i.useCallback)((()=>{h?r(!0):n(!0)}),[h,n,r]);return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(Wh.Page.Footer,null,(0,i.createElement)("div",{className:x()("kubio-predefined-layouts__preview-page__footer d-flex w-100 align-items-center justify-content-end")},(0,i.createElement)("div",{className:"kubio-predefined-layouts__preview-page__footer__buttons"},(0,i.createElement)(Nr.ProModalTextContext.Provider,{value:(0,T.__)("This page is only available in the PRO version of Kubio. Please select a free page to import or upgrade to the PRO version.","kubio")},(0,i.createElement)(E,C({tag:k.Button,isPrimary:!0,onClick:M,isBusy:u},P,{propPopoverClass:"kubio-pro-popover-large"}),(0,T.__)("Import","kubio"))),(0,i.createElement)(Nr.ProModalTextContext.Provider,{value:(0,T.__)("This starter site is only available in the PRO version of Kubio. Please select a free starter site to import or upgrade to the PRO version.","kubio")},(0,i.createElement)(I,C({tag:k.Button,isSecondary:!0,onClick:O},R),(0,T.__)("Import full starter site","kubio")))))),t&&(0,i.createElement)(Hg,{currentTemplateIsClassic:v,currentDemoSite:l,selectedDemoPart:e,isFreeBuild:_,onClose:a,onImportContent:A,onImportFullPage:N,onImportStarterSite:O}),o&&(0,i.createElement)(Wg,{onClose:()=>r(!1)}))})),Kg=(0,i.memo)((e=>{const{currentDemoParts:t,demoPartsIsLoaded:n}=$u(),{demoPartThatIsImporting:o}=md();return(0,i.createElement)(i.Fragment,null,o&&(0,i.createElement)(yd,null),(0,i.createElement)(Wh,C({},e,{isLoading:!n,className:"kubio-predefined-layouts__preview-page",items:t,sidebar:(0,i.createElement)(vg,null),pageContent:(0,i.createElement)(Mg,null),pageFooter:(0,i.createElement)(Vg,null)})))})),$g=(0,i.memo)((e=>(0,i.createElement)(Ku,null,(0,i.createElement)(dd,null,(0,i.createElement)(qh,null,(0,i.createElement)(Kg,e)))))),qg=(0,i.createContext)({list:[],categories:null,filterFunction:null}),Yg=(0,i.createContext)({list:[]}),Xg=(0,i.createContext)({searchString:"",setSearchString:null}),Zg=(0,i.createContext)({categoriesList:[],selectedCategory:null,setSelectedCategory:null}),Jg=[],Qg=(0,i.memo)((e=>{let{children:t}=e;const{list:n,categories:o=Jg,filterFunction:r=null}=ef(),{selectedCategory:a,setSelectedCategory:l}=of(),{searchString:s,setSearchString:c}=nf(),{initialParams:u,activePage:d}=sd(),m="all",h=p().get(u,[d,"category"],m);let g,f,b,v;if(l)g=a,f=l;else{const[e,t]=(0,i.useState)(h);g=e,f=t}if(c)b=s,v=c;else{const[e,t]=(0,i.useState)("");b=e,v=t}const _=(0,i.useMemo)((()=>{if(p().isEmpty(o))return{};const e={};return o.forEach((t=>{let{label:n,value:o}=t;e[o]=n})),e}),[o]),y=(0,i.useMemo)((()=>r&&"function"==typeof r?r(n,b):rf(n,b)),[b,n,r]),{resultedCategories:k,nrOfItemsPerCategory:E}=(0,i.useMemo)((()=>{let e=[{value:m,label:"All"}];const t={[m]:y.length};if(y.forEach((n=>{const o=(null==n?void 0:n.categories)||[];o.forEach((n=>{const r=e.map((e=>e.value));if(o.forEach((e=>{t[e]?t[e]++:t[e]=1})),r.includes(n))return;let a;p().get(_,n)?a=p().get(_,n):(a=p().startCase(n.replace("-"," & ")).trim(),a=a.replace(" "," & "));const i={value:n,label:a};e.push(i)}))})),!p().isEmpty(o)){const t=o.map((e=>{let{value:t}=e;return t}));e=p().orderBy(e,(e=>p().indexOf(t,e.value)))}return{resultedCategories:e,nrOfItemsPerCategory:t}}),[y,_,o]),S=(0,i.useMemo)((()=>y.filter((e=>g===m||((null==e?void 0:e.categories)||[]).includes(g)))),[g,m,y]),w=(0,i.useMemo)((()=>({searchString:b,setSearchString:v})),[b,v]),C=(0,i.useMemo)((()=>({categoriesList:k,selectedCategory:g,setSelectedCategory:f,nrOfItemsPerCategory:E})),[k,g,f,E]),I=(0,i.useMemo)((()=>({list:S})),[S]);return(0,i.useEffect)((()=>{h&&(k.find((e=>e.value===h))||f(m))}),[]),(0,i.createElement)(Yg.Provider,{value:I},(0,i.createElement)(Xg.Provider,{value:w},(0,i.createElement)(Zg.Provider,{value:C},t)))})),ef=()=>(0,i.useContext)(qg),tf=()=>(0,i.useContext)(Yg),nf=()=>(0,i.useContext)(Xg),of=()=>(0,i.useContext)(Zg),rf=(e,t)=>{if(!t)return e;const n=t.toLowerCase();return e.filter((e=>{let{label:t}=e;return t.toLowerCase().includes(n)}))},af={selectedDemoSlug:null,onSelectDemo:p().noop,setSelectedDemoSlug:p().noop,currentDemoSite:null,selectedDemoPartId:null,setSelectedDemoPartId:p().noop},lf=(0,i.createContext)(af),sf=e=>{let{children:t}=e;const[n,o]=(0,i.useState)(),[r,a]=(0,i.useState)([]),[l,s]=(0,i.useState)({}),[c,u]=(0,i.useState)(!1),[d,m]=(0,i.useState)(),[p,h]=(0,i.useState)(!1);(0,i.useEffect)((()=>{!async function(){const e=await Fu();a(e)}()}),[]),(0,i.useEffect)((()=>{!async function(){const e=await Bu();s(e),u(!0)}()}),[]);const g=(0,i.useCallback)(((e,t)=>{m(t),o(e)}),[o,m]),f=(0,i.useMemo)((()=>r.find((e=>e.slug===n))),[n,r]),b=(0,i.useMemo)((()=>({rawDemoList:r,selectedDemoSlug:n,onSelectDemo:g,setSelectedDemoSlug:o,currentDemoSite:f,initialDemoPart:d,setInitialDemoPart:m,demosPartsPerSlug:l,demoPartsIsLoaded:c,showDemoSiteImportPage:p,setShowDemoSiteImportPage:h})),[r,n,g,o,f,d,m,l,c,p,h]);return(0,i.createElement)(lf.Provider,{value:b},t)},cf=()=>(0,i.useContext)(lf),uf=(0,i.createContext)({favoritesDataByType:{},onAddToFavorites:p().noop}),df="kubio_favorites",mf=(0,i.memo)((e=>{let{children:t}=e;const[n,o]=(0,i.useState)({}),r=(0,w.useSelect)((e=>{const{getEntityRecords:t,getEditedEntityRecord:n}=e("core");return(t("postType",df,{per_page:-1})||[]).map((e=>n("postType",df,e.id)))}),[]),{saveEntityRecord:a,editEntityRecord:l}=(0,w.useDispatch)("core"),s=(0,i.useRef)(!1),c=(0,i.useMemo)((()=>p().get(r,"0")),[r]),u=(0,i.useMemo)((()=>{try{const e=p().get(c,"content","{}");return JSON.parse(e)}catch(e){return{}}}),[c]);(0,i.useEffect)((()=>{p().isEqual(u,n)||o(u)}),[u]);const d=(0,i.useCallback)((async()=>{const e={title:"Favorites data",status:"publish",content:JSON.stringify({})};return await a("postType",df,e)}),[a]),m=(0,i.useCallback)((async(e,t,r)=>{var a,i;if(s.current)return;s.current=!0;let u=c;if(p().isEmpty(u)&&(u=await d()),null===(a=u)||void 0===a||!a.id)return void(s.current=!1);const m=p().cloneDeep(n);Array.isArray(t)||(t=[t]),t.forEach((t=>{!1===p().get(m,e,!1)&&p().set(m,e,{}),r?p().set(m,`${e}.${t}`,!0):p().unset(m,`${e}.${t}`)})),o(m);const h={content:JSON.stringify(m)};l("postType",df,null===(i=u)||void 0===i?void 0:i.id,h),s.current=!1}),[d,s,c,n]),h=(0,i.useMemo)((()=>({favoritesDataByType:n,onAddToFavorites:m})),[n]);return(0,i.createElement)(uf.Provider,{value:h},t)})),pf=()=>(0,i.useContext)(uf),hf=(0,i.createContext)({favoritesDataByType:null}),gf=(0,i.memo)((e=>{let{children:t}=e;const{favoritesDataByType:n}=pf(),o=(0,i.useMemo)((()=>({favoritesDataByType:n})),[n]);return(0,i.createElement)(hf.Provider,{value:o},t)})),ff=()=>(0,i.useContext)(hf),bf=(0,i.memo)((e=>{let{buttonIconOnly:t=!1}=e;const[n,o]=(0,i.useState)(!1),[r,a]=(0,i.useState)({}),l=(0,i.useRef)(),c=(0,i.useCallback)((()=>{a({}),o(!n)}),[n,o]),{createErrorNotice:u}=(0,s.useKubioNotices)(),d=(0,i.useCallback)((e=>{"blur"!==(null==e?void 0:e.type)&&o(!1)}),[o]),m=(0,i.useCallback)((e=>{const t=(null==e?void 0:e.detail)||{};a(t),o(!0)}),[o]);(0,i.useEffect)((()=>(document.body.addEventListener("openTemplateGallery",m),()=>{document.body.removeEventListener("openTemplateGallery",m)})),[m]);const p=(0,i.useCallback)((()=>{u((0,T.__)("Something went wrong","kubio"))}),[u]);return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.Button,{ref:l,onClick:c,isPrimary:!0,icon:Y.PredesignedLayoutsIcon,className:x()("kubio-predefined-layouts__button",{"kubio-predefined-layouts__button--icon-only":t}),label:(0,T.__)("Templates Gallery","kubio"),showTooltip:!0},t?null:(0,T.__)("Templates Gallery","kubio")),(0,i.createElement)(Ws.ErrorBoundary,{FallbackComponent:vf,onReset:()=>{o(!1)},onError:p},(0,i.createElement)(mf,null,n&&(0,i.createElement)(k.Modal,{className:"kubio-predefined-layouts__modal",onRequestClose:d},(0,i.createElement)(ld,{onClose:d,initialParams:r},(0,i.createElement)(Ah,null))))))})),vf=e=>{let{error:t,resetErrorBoundary:n}=e;return(0,i.useEffect)((()=>{n()}),[]),(0,i.createElement)(i.Fragment,null)},_f=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M20.5 16h-.7V8c0-1.1-.9-2-2-2H6.2c-1.1 0-2 .9-2 2v8h-.7c-.8 0-1.5.7-1.5 1.5h20c0-.8-.7-1.5-1.5-1.5zM5.7 8c0-.3.2-.5.5-.5h11.6c.3 0 .5.2.5.5v7.6H5.7V8z"})),yf=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M17 4H7c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H7c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h10c.3 0 .5.2.5.5v12zm-7.5-.5h4V16h-4v1.5z"})),kf=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M15 4H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H9c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h6c.3 0 .5.2.5.5v12zm-4.5-.5h2V16h-2v1.5z"}));var Ef=n(1874),Sf=n.n(Ef);let wf=null,Cf=Math.random();function If(e){let t=Sf().replace("{message}",(0,T.__)("Generating preview…","kubio"));t=t.replace("{svg_image}",(0,i.renderToString)(Y.KubioLoader)),e.write(t),e.title=(0,T.__)("Generating preview…","kubio"),e.close()}function xf(){wf=window.open("",(0,T.__)("Generating preview…","kubio")+Cf++)}const Tf={PREVIEW:"preview",DRAFT:"draft"},Pf=[{kind:"kubio",name:"menu"},{kind:"root",name:"site"}];var Rf=n(6255),Of=n.n(Rf);const Af=[{title:(0,T.__)("Desktop","kubio"),name:"Desktop",icon:_f},{title:(0,T.__)("Tablet","kubio"),name:"Tablet",icon:yf},{title:(0,T.__)("Mobile","kubio"),name:"Mobile",icon:kf}],Nf=e=>{let{deviceType:t,setDeviceType:n}=e;const{isDirty:o}=(0,w.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t}=e("core");return{isDirty:t().length>0}})),r=(()=>{const{getDirtyEntityRecords:e,getAutosaves:t,getEntityRecordEdits:n,getEditedEntityRecord:o}=(0,w.useSelect)((e=>({getDirtyEntityRecords:e("core").__experimentalGetDirtyEntityRecords,getAutosaves:e("core").getAutosaves,getEntityRecordEdits:e("core").getEntityRecordEdits,getEditedEntityRecord:e("core").getEditedEntityRecord}))),{saveEditedEntityRecord:r}=(0,w.useDispatch)("core");return async function(a){var i;let{autosaveType:l=Tf.PREVIEW}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=[];s=a||e();const c=s.filter((e=>{let{kind:t,name:n}=e;return!(0,m.find)(Pf,{kind:t,name:n})})),d=s.filter((e=>{let{kind:t,name:n,key:o}=e;return!(0,m.find)(c,{kind:t,name:n,key:o})})),p=c.map((e=>{let{kind:t,name:n,key:a}=e;const i=o(t,n,a);let s;if(null!=i&&i.blocks)s=(0,Mr.serialize)(i.blocks);else{if("string"!=typeof(null==i?void 0:i.content))return null;s=null==i?void 0:i.content}return-1!==["wp_template","wp_template_part","page","post","product"].indexOf(i.type)?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"publish",{fieldsToOmit:n=["blocks"],type:o=Tf.PREVIEW}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ci()({path:"kubio/v1/save-entity",method:"POST",data:{postData:(0,m.omit)({...e,id:e.id||e.wp_id},["selectionStart","selectionEnd"].concat(n)),type:o,status:t}})}({...i,content:s},"autosave",{type:l}):r(t,n,a,{isAutosave:!0})})),h=d.map((e=>{let{kind:t,name:o,key:r}=e;return{kind:t,name:o,key:r,...n(t,o,r)}})),g=null===(i=e())||void 0===i?void 0:i.filter((e=>{let{name:t}=e;return"page"===t||"post"===t})).reduce(((e,t)=>{let{key:n,name:r,kind:a}=t;const i=o(a,r,n);return{...e,[n]:null==i?void 0:i.template}}),{});return Promise.all(p).then((e=>{const n=c.map(((n,o)=>{let{name:r,key:a}=n;return e[o]?{id:e[o].ID||e[o].id,parent:e[o].post_parent||e[o].parent,data:e[o]}:(0,m.last)(t(r,a))}));return Promise.all(n).then((e=>{const t=e.filter(Boolean).map((e=>{let{id:t,parent:n}=e;return{id:t,parent:n}}));return{updatesRecords:e.map((e=>null==e?void 0:e.data)),autosaves:t,customEntities:h,pageTemplatesMap:g,customData:(0,u.applyFilters)("kubio/custom-preview-data",{})}}))}))}})(),{saveChangeset:a}=(()=>{const[e,t]=(0,f.useGlobalSessionProp)("previewChangest",{}),n=(0,w.useSelect)((e=>{var t;return null===(t=e("core/block-editor").getSettings())||void 0===t?void 0:t.changeset_uuid}));(0,i.useEffect)((()=>{e.id||!n||e.isLoading||(t({...e,isLoading:!0}),ci()({path:(0,di.addQueryArgs)("/wp/v2/kubio/preview-changeset/",{slug:n})}).then((e=>{e&&e.length&&t({...e[0],isLoading:!1})})))}),[e,t,n]);const o=(0,i.useCallback)((()=>{e.id&&window.navigator.sendBeacon&&window.navigator.sendBeacon(`${window.ajaxurl}?action=kubio-delete-changeset&uuid=${e.slug}`)}),[e.id]);return(0,i.useEffect)((()=>(window.addEventListener("beforeunload",o),()=>window.removeEventListener("beforeunload",o))),[e.id]),{saveChangeset:async o=>{let r=e;return r.id||(r=await ci()({path:(0,di.addQueryArgs)("/wp/v2/kubio/preview-changeset/",{slug:n})}),t(r)),await ci()({path:`/wp/v2/kubio/preview-changeset/${r.id}`,method:"POST",data:{...(0,m.pick)(e,["title","slug","type"]),content:JSON.stringify((0,m.omit)(o,"updatesRecords"))}}),n}}})(),{currentPageURL:l}=(0,w.useSelect)((e=>{const t=e(h.STORE_KEY).getPage(),n=p().get(t,"link"),o=p().get(t,"path"),r=n||o;return{currentPageURL:(null!=r?r:"").replace(/\/$/,"")}})),s=(0,w.useSelect)((e=>()=>{const{getSelectedBlockClientIds:t}=e(y.store),n=t();return n.length?n[0]:""})),{hideInsertionPoint:c}=(0,w.useDispatch)("core/block-editor"),d=e=>()=>{n(e),c()},g=(0,f.useBlocksOwnerDocument)();return(0,i.useEffect)((()=>{const e=(0,q.getPreviewElementByModelId)(s(),g);e&&t&&Of()(e)}),[t]),(0,i.createElement)("div",{className:"kubio-preview-options"},Af.map((e=>{let{name:n,title:o,icon:r}=e;return(0,i.createElement)(k.Button,{key:n,icon:r,isPressed:n===t,label:o,onClick:d(n)})})),""!==l&&(0,i.createElement)(k.Button,{onClick:async e=>{let{}=e;const t=(()=>{wf&&!wf.closed||xf();try{If(wf.document)}catch(e){xf(),If(wf.document)}return setTimeout((function(){wf.focus()}),100),wf})();let n="saved";const i=`${Ru().generate()}-${Ru().generate()}`;if(o){const e=await r();n=await a(e)}t.location=(0,di.addQueryArgs)(l,{"kubio-preview":n,"kubio-random":i})}},(0,T.__)("Preview","kubio")))},Mf=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M15.6 6.5l-1.1 1 2.9 3.3H8c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.3-.5h9.2L14.5 15l1.1 1.1 4.6-4.6-4.6-5z"})),Df=window.wp.keycodes;function zf(){const e=(0,w.useSelect)((e=>e("core").hasRedo())),{redo:t}=(0,w.useDispatch)("core");return(0,i.createElement)(k.Button,{icon:Mf,label:(0,T.__)("Redo","kubio"),shortcut:Df.displayShortcut.primaryShift("z"),"aria-disabled":!e,onClick:e?t:void 0})}const Bf=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M18.3 11.7c-.6-.6-1.4-.9-2.3-.9H6.7l2.9-3.3-1.1-1-4.5 5L8.5 16l1-1-2.7-2.7H16c.5 0 .9.2 1.3.5 1 1 1 3.4 1 4.5v.3h1.5v-.2c0-1.5 0-4.3-1.5-5.7z"}));function Lf(){const e=(0,w.useSelect)((e=>e("core").hasUndo())),{undo:t}=(0,w.useDispatch)("core");return(0,i.createElement)(k.Button,{icon:Bf,label:(0,T.__)("Undo","kubio"),shortcut:Df.displayShortcut.primary("z"),"aria-disabled":!e,onClick:e?t:void 0})}const Ff="IS_AI_PAGE_GENERATING_"+Ru().generate(),Gf=()=>(0,f.useGlobalSessionProp)(Ff),Hf=(0,i.memo)((e=>{let{onClose:t}=e;const n=(0,q.isAdvancedMode)()?(0,T.__)("Switch to quick mode","kubio"):(0,T.__)("Switch to advanced mode","kubio");return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.MenuGroup,{className:"kubio-block-settings-control"},(0,i.createElement)(k.MenuItem,{tag:k.MenuItem,onClick:()=>{t(),(0,q.toggleAdvancedMode)()}},n)))})),jf=(0,E.createHigherOrderComponent)((e=>t=>{const{isSelected:n}=t;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(e,t),n&&(0,i.createElement)(y.BlockSettingsMenuControls,null,(e=>{let{onClose:t}=e;return(0,i.createElement)(Hf,{onClose:t})})))}));(0,u.addFilter)("editor.BlockListBlock","kubio.withToggleAdvancedMode",jf,9999);const Uf=()=>{const{kubioEditorMode:e}=(0,w.useSelect)((e=>{const{getKubioEditorMode:t}=e("kubio/edit-site");return{kubioEditorMode:t()}})),{setKubioEditorMode:t}=(0,w.useDispatch)("kubio/edit-site");return(0,i.createElement)("div",{className:"kubio-easy-mode-toggle"},(0,i.createElement)(P.ToggleControl,{label:(0,T.__)("Advanced Mode","kubio"),value:e===h.EASY_MODE_VALUES.full,onChange:e=>{t(e?h.EASY_MODE_VALUES.full:h.EASY_MODE_VALUES.simple)}}))};function Wf(e){let{openEntitiesSavedStates:t}=e;const{deviceType:n,isEditorSidebarOpened:o,shortcut:r,getBlockSelectionStart:a,isListViewOpen:l,listViewShortcut:c,isAICapabilityEnabled:u}=(0,w.useSelect)((e=>{const{__experimentalGetPreviewDeviceType:t,isFeatureActive:n,getEditedPostType:o,getEditedPostId:r,isInserterOpened:a,getTemplateId:i,getTemplatePartId:l,getEntity:s,getPage:c,getShowOnFront:u,isListViewOpened:d,isAICapabilityEnabled:m}=e(h.STORE_KEY),{getEntityRecord:p}=e("core"),{__experimentalGetTemplateInfo:g}=e("core/editor"),f=i(),b=l(),v=o(),_=p("postType",v,r());let y;var k;y="wp_template"===v?null!=_&&_.title?null==_||null===(k=_.title)||void 0===k?void 0:k.raw:g(_).title:null==_?void 0:_.slug;const{getShortcutRepresentation:E}=e("core/keyboard-shortcuts");return{isListViewOpen:d(),deviceType:t(),entityTitle:y,hasFixedToolbar:n("fixedToolbar"),template:_,templateType:v,isInserterOpen:a(),templateId:f,templatePartId:b,entity:s(),page:c(),showOnFront:u(),isEditorSidebarOpened:e(h.STORE_KEY).isEditorSidebarOpened(),shortcut:E("core/edit-post/toggle-sidebar"),getBlockSelectionStart:e("core/block-editor").getBlockSelectionStart,listViewShortcut:E("kubio/edit-site/toggle-list-view"),isAICapabilityEnabled:m()}}),[]),{__experimentalSetPreviewDeviceType:d,openSidebar:b,closeSidebar:v}=(0,w.useDispatch)(h.STORE_KEY),{hideInsertionPoint:_}=(0,w.useDispatch)("core/block-editor"),y=(0,i.useCallback)((e=>{_(),d(e)}),[]),S=(0,E.useViewportMatch)("medium"),C=o?()=>{v(),N(!1)}:()=>{b(a()?"block-inspector":"document"),N(!1)},I=(0,s.usePageTitle)(),{isNavigationOpened:P}=(0,w.useSelect)(h.STORE_KEY),{setIsNavigationPanelOpened:R,openNavigationPanelToMenu:A,setIsListViewOpened:N}=(0,w.useDispatch)(h.STORE_KEY),{uiVersion:M}=(0,g.useUIVersion)(),D=(0,i.useCallback)((()=>{N(!l)}),[N,l]);let z=!0;2===M&&(z=!1);const B=(0,f.useGetGlobalSessionProp)("ready",!1),L=(0,m.get)(window,["kubioUtilsData","enable_starter_sites"],!0),[F,G]=(0,i.useState)(!1),[,H]=Gf(),{isPage:j,isBlog:U}=(0,w.useSelect)((e=>{const{getPage:t=p().noop,getIsBlogPage:n=p().noop}=e("kubio/edit-site")||{},o=t();return{isPage:"page"===p().get(o,"context.postType"),isBlog:n()}}),[]),W=!j||U;return(0,i.createElement)("div",{className:"edit-site-header"},(0,i.createElement)("div",{className:"edit-site-header_start"},(0,i.createElement)("div",{className:"edit-site-header__toolbar"},S&&(0,i.createElement)(i.Fragment,null,1===M&&(0,i.createElement)(Xo,null),(0,i.createElement)(Lf,null),(0,i.createElement)(zf,null),(0,i.createElement)(k.Button,{className:"edit-site-header-toolbar__list-view-toggle",icon:Ss,isPressed:l/* translators: button label text should, if possible, be under 16 characters. */,label:(0,T.__)("List View","kubio"),onClick:D,shortcut:c}),B&&L&&(0,i.createElement)(bf,{buttonIconOnly:u}),u&&(0,i.createElement)(k.Tooltip,{text:W?(0,T.__)("This page does not support AI generation!","kubio"):(0,T.__)("AI page generation","kubio")},(0,i.createElement)(k.Button,{icon:Y.KubioAI,className:x()("kubio-ai-button-in-header kubio-ai-button",W&&"kubio-ai-button__disabled"),onClick:()=>!W&&G(!0)},(0,T.__)("Generate page","kubio"))),F&&(0,i.createElement)(oo,{onFinish:()=>{G(!1),H(!0)},onCancel:()=>G(!1),isRegenerate:!0})),!1)),(0,i.createElement)("div",{className:"edit-site-header_center"},(0,i.createElement)("div",{className:"edit-site-document-actions"},(0,i.createElement)("div",{className:"edit-site-document-actions__title-wrapper"},(0,i.createElement)(k.Button,{className:"edit-site-document-actions__title",onClick:()=>{P()?R(!1):A(2===M?"kubio-content-area-postType-page":Cs)},isPressed:P(),iconPosition:"right",showTooltip:!0,label:P()?(0,T.__)("Close the site content panel","kubio"):(0,T.__)("Change page","kubio")},(0,i.createElement)(k.Flex,{align:"center",justify:"center"},(0,i.createElement)(k.FlexItem,{className:"edit-site-document-entity-title"},(0,i.createElement)("span",{className:"kubio-entity-title-text",dangerouslySetInnerHTML:{__html:(0,T.sprintf)(// translators: Editing current page
(0,T.__)("Editing: %s","kubio"),(0,T.sprintf)('<span class="kubio-entity-title-name">%s</span>',(0,q.fromHtmlEntities)(null!=I?I:(0,T.__)("Page","kubio"))))}})),(0,i.createElement)(k.FlexItem,null,(0,i.createElement)(k.Icon,{icon:Y.SwitchPages,size:22}))))))),(0,i.createElement)("div",{className:"edit-site-header_end"},(0,i.createElement)("div",{className:"edit-site-header__actions"},(0,i.createElement)(Uf,null),(0,i.createElement)(Nf,{deviceType:n,setDeviceType:y}),(0,i.createElement)(Ds,{openEntitiesSavedStates:t}),z&&(0,i.createElement)(k.Button,{icon:O,label:(0,T.__)("Settings","kubio"),onClick:C,isPressed:o,"aria-expanded":o,className:"kubio-secondary-panel-toggler",shortcut:r}),(0,i.createElement)(Lo.Slot,{scope:"kubio/edit-site"}),(0,i.createElement)(Us,null))))}function Vf(e){let{openEntitiesSavedStates:t}=e;const{__experimentalGetDirtyEntityRecords:n,isSavingEntityRecord:o}=(0,w.useSelect)(S.store),{redo:r,undo:a}=(0,w.useDispatch)(S.store);return(0,Or.useShortcut)("kubio/edit-site/save",(e=>{e.preventDefault();const r=n(),a=!!r.length;!r.some((e=>o(e.kind,e.name,e.key)))&&a&&t()})),(0,Or.useShortcut)("kubio/edit-site/undo",(e=>{a(),e.preventDefault()})),(0,Or.useShortcut)("kubio/edit-site/redo",(e=>{r(),e.preventDefault()})),null}Vf.Register=function(){const{registerShortcut:e}=(0,w.useDispatch)(Or.store);return(0,i.useEffect)((()=>{e({name:"kubio/edit-site/save",category:"global",description:(0,T.__)("Save your changes.","kubio"),keyCombination:{modifier:"primary",character:"s"}}),e({name:"kubio/edit-site/undo",category:"global",description:(0,T.__)("Undo your last changes.","kubio"),keyCombination:{modifier:"primary",character:"z"}}),e({name:"kubio/edit-site/redo",category:"global",description:(0,T.__)("Redo your last undo.","kubio"),keyCombination:{modifier:"primaryShift",character:"z"}}),e({name:"kubio/edit-site/toggle-list-view",category:"global",description:(0,T.__)("Open the block list view.","kubio"),keyCombination:{modifier:"access",character:"o"}})}),[e]),null};const Kf=Vf,$f=e=>{let{children:t,templateId:n,templateType:o,page:r}=e;const[a,l]=(0,i.useState)(!1),[s,c]=(0,i.useState)(!1),u=pi(),[d,m]=(0,f.useGlobalSessionProp)("thirdPartyBlockInstalled",!1),{createSuccessNotice:p}=(0,w.useDispatch)("core/notices");(0,i.useEffect)((()=>{l(u)}),[u,n,o,r]);const h=(0,i.useCallback)((()=>{s||l(!1)}),[s]),g=(0,i.useCallback)((async()=>{c(!0);try{await ui()}catch(e){}m(!0),p((0,T.__)("Kubio blog templates were imported successfully! Refresh the editor to enjoy the full site editing experience","kubio"),{isDismissible:!0,actions:[{label:(0,T.__)("Refresh page now","kubio"),onClick:()=>window.location.reload()}]}),l(!1)}),[]);return(0,i.createElement)(i.Fragment,null,a&&!d&&(0,i.createElement)(k.Modal,{title:(0,T.__)("💫 Start with the Kubio blog!","kubio"),onRequestClose:h,shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,isDismissible:!s},(0,i.createElement)("p",null,(0,T.__)("Kubio comes with a fully customizable blog area for your site.","kubio"),(0,i.createElement)("br",null),(0,T.__)("Would you like to use the Kubio blog templates? ","kubio")),(0,i.createElement)(k.ButtonGroup,{className:"h-template-part-modal__button-group"},!s&&(0,i.createElement)(k.Button,{isLink:!0,onClick:h},(0,T.__)("Maybe later","kubio")),(0,i.createElement)(k.Button,{isPrimary:!0,isBusy:s,onClick:g},!s&&(0,T.__)("Import Kubio blog","kubio"),s&&(0,T.__)("Importing Kubio blog…","kubio")))),t)},qf="__experimentalMainDashboardButton",{Fill:Yf,Slot:Xf}=(0,k.createSlotFill)(qf),Zf=Yf;Zf.Slot=e=>{let{children:t}=e;return(0,s.useSlotHasFills)(qf)?(0,i.createElement)(Xf,{bubblesVirtually:!0}):t};const Jf=Zf,Qf=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M12 4L4 7.9V20h16V7.9L12 4zm6.5 14.5H14V13h-4v5.5H5.5V8.8L12 5.7l6.5 3.1v9.7z"})),eb=(0,i.memo)((e=>{let{message:t,withFooter:n=!0}=e;return(0,i.createPortal)((0,i.createElement)("div",{className:"kubio-ai-page-generator-overlay"},(0,i.createElement)(k.Flex,{align:"center",justify:"center"},(0,i.createElement)(k.FlexBlock,null,(0,i.createElement)(In,{className:"kubio-ai-logo-animated kubio-ai-logo-colored",icon:Y.KubioAI}),(0,i.createElement)("h2",null,t))),n&&(0,i.createElement)("div",{className:"kubio-ai-page-generator-overlay__footer"},(0,i.createElement)("p",{dangerouslySetInnerHTML:{__html:(0,T.sprintf)(// translators: %s is the url to pexels
(0,T.__)("The media items like photos and videos are provided by %s","kubio"),"<a href='https://www.pexels.com/' target='_blank'>Pexels</a>")}}))),window.document.body)})),tb=e=>{var t;let{setIsModalVisible:n}=e;const{saveEntityRecord:o}=(0,w.useDispatch)("core"),r=(0,f.useSetGlobalSessionProp)("ready"),[,a]=(0,f.useGlobalSessionProp)("displayingEmptyPageChecked"),[l,s]=(0,i.useState)(!0),{setPage:c,setIsNavigationPanelOpened:d}=(0,w.useDispatch)(io),[m,p]=(0,i.useState)(null),[h,g]=(0,i.useState)(!1),[b,v]=(0,i.useState)(!1),[,_]=Gf(),y=(0,w.useSelect)((e=>e(io).getAvailablePageTemplates().map((e=>e.value)).find((e=>e.endsWith("full-width")))||"page")),k=(0,i.useCallback)((()=>{m&&(c({type:m.type,slug:m.slug,path:(0,di.getPathAndQueryString)(m.link),context:{postType:m.type,postId:m.id}}),v(!1),d(!1),a(!1),(0,u.addAction)("kubio.editorIsReady","kubio.editorIsReady.setIsAIGeneratingStarted",(function(){(0,u.removeAction)("kubio.editorIsReady","kubio.editorIsReady.setIsAIGeneratingStarted"),_(!0)})),setTimeout((()=>r(!0)),5e3),n(!1))}),[m,c,d,a,n,_,r]);return(0,i.createElement)(i.Fragment,null,l&&(0,i.createElement)(oo,{onFinish:async e=>{let{pageContext:t}=e;v(!0),s(!1);const{title:n}=t,r=await o("postType","page",{title:n,status:"publish",template:y,meta:{saved_in_kubio:!0},kubio_ai_page_context:t});r&&(v(!1),g(!0),p(r))},onCancel:()=>n(!1),checkPageType:!1,isNewPageWizard:!0}),b&&(0,i.createElement)(eb,{message:(0,T.__)("Creating new page…","kubio"),withFooter:!1}),h&&(0,i.createElement)(Zh,{onComplete:k,closeModal:()=>g(!1),entityName:null==m||null===(t=m.title)||void 0===t?void 0:t.rendered}))},nb=e=>{let{onNewAiPage:t,onNewKubioPage:n,showButton:o=!0,initialModalIsVisible:r=!1,title:a=(0,T.__)("How would you like to create your new page?","kubio"),description:l=(0,T.__)("Choose one of the two methods below for creating your new page.","kubio"),onCancel:s=p().noop}=e;const[c,u]=(0,i.useState)(r);return!(0,w.useSelect)((e=>e(sl.Ls).isAICapabilityEnabled()),[])&&o?(0,i.createElement)(k.Button,{className:"kubio-navigation-new-page__button",icon:Pn,variant:"primary",iconSize:24,onClick:()=>n()},(0,T.__)("New Page","kubio")):(0,i.createElement)(i.Fragment,null,o&&(0,i.createElement)(k.Button,{className:"kubio-navigation-new-page__button",icon:Pn,variant:"primary",iconSize:24,onClick:()=>u(!0)},(0,T.__)("New Page","kubio")),c&&(0,i.createElement)(k.Modal,{title:(0,T.__)("Add page","kubio"),onRequestClose:()=>{u(!1),s()},className:"kubio-navigation-new-page__modal"},(0,i.createElement)("div",{className:"kubio-navigation-new-page__modal__content"},(0,i.createElement)("h2",{className:"kubio-navigation-new-page__modal__title"},a),(0,i.createElement)("span",{className:"kubio-navigation-new-page__modal__description"},l),(0,i.createElement)("div",{className:"kubio-navigation-new-page__modal__cards"},(0,i.createElement)(ob,{icon:Y.KubioLogo,title:(0,T.__)("Create from scratch","kubio"),description:(0,T.__)("Build your page by hand starting from a blank canvas. This option is recommended for advanced users who wish to create their own, custom design.","kubio"),onClick:()=>{u(!1),n()}}),(0,i.createElement)(ob,{icon:Y.KubioAI,iconClassName:"kubio-ai-logo-animated kubio-ai-logo-colored",title:(0,T.__)("Generate with Kubio AI","kubio"),description:(0,T.__)("Get a head start by letting Kubio Al generate a first draft of the page for you. Then you can further customize the page to your liking.","kubio"),onClick:()=>{u(!1),t()}})))))},ob=e=>{let{icon:t,title:n,description:o,onClick:r,iconClassName:a}=e;return(0,i.createElement)("div",{className:"kubio-navigation-new-page__modal__card",onClick:r},(0,i.createElement)(k.Icon,{className:x()("kubio-navigation-new-page__modal__card__icon",a),icon:t}),(0,i.createElement)("h2",{className:"kubio-navigation-new-page__modal__card__title"},n),(0,i.createElement)("span",{className:"kubio-navigation-new-page__modal__card__description"},o))},rb=(0,i.createElement)(R.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,i.createElement)(R.Path,{d:"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h12c.3 0 .5.2.5.5v12zM7 11h2V9H7v2zm0 4h2v-2H7v2zm3-4h7V9h-7v2zm0 4h7v-2h-7v2z"})),ab=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M20 5h-5.7c0-1.3-1-2.3-2.3-2.3S9.7 3.7 9.7 5H4v2h1.5v.3l1.7 11.1c.1 1 1 1.7 2 1.7h5.7c1 0 1.8-.7 2-1.7l1.7-11.1V7H20V5zm-3.2 2l-1.7 11.1c0 .1-.1.2-.3.2H9.1c-.1 0-.3-.1-.3-.2L7.2 7h9.6z"})),ib=e=>{let{post:t,onCloseModal:n,onClickDuplicate:o}=e;const[r,a]=(0,i.useState)(!1),{createErrorNotice:l,createSuccessNotice:c}=(0,s.useKubioNotices)(),[u,d]=(0,i.useState)(""),{saveEntityRecord:m}=(0,w.dispatch)("core"),p=async(e,n,r)=>{a(!0);const i={title:r||u,status:"publish",content:null==t?void 0:t.content,excerpt:null==t?void 0:t.excerpt,meta:{...(null==t?void 0:t.meta)||{},saved_in_kubio:!0},template:null==t?void 0:t.template};let s=!1;try{s=await m(e,n,i),c((0,T.sprintf)((0,T.__)("%s saved successfully!","kubio"),i.title))}catch(e){console.error(e),l((0,T.sprintf)((0,T.__)("An error occurred. %s was not saved!","kubio"),i.title))}s&&o(s)};return(0,i.createElement)(k.Modal,{title:(0,T.__)("Duplicate page","kubio"),onRequestClose:e=>{e.stopPropagation(),n()},className:"block-editor-block-new-entity-modal",shouldCloseOnEsc:!r,shouldCloseOnClickOutside:!r,isDismissible:!r},(0,i.createElement)("div",{className:"popover__content"},(0,i.createElement)(P.InputControl,{value:u,onChange:e=>d(e),label:(0,T.__)("Title","kubio"),autoFocus:!0,onKeyPress:e=>{"Enter"===e.key&&p("postType",t.type,e.target.value)}}),(0,i.createElement)(k.__experimentalSpacer,{margin:3}),(0,i.createElement)(k.Button,{isPrimary:!0,isBusy:r,disabled:""===u,onClick:()=>{p("postType",t.type)},className:"add-button"},(0,T.__)("Duplicate page","kubio"))))},lb=e=>{var t,n;let{post:o,onCloseModal:r}=e;const[a,l]=(0,i.useState)(!1),{createErrorNotice:c,createSuccessNotice:u}=(0,s.useKubioNotices)();return(0,i.createElement)(k.Modal,{title:(0,T.__)("Delete ","kubio")+(null==o||null===(t=o.title)||void 0===t?void 0:t.raw)+(0,T.__)(" page?","kubio"),onRequestClose:e=>{e.stopPropagation(),r()},className:"block-editor-block-new-entity-modal",shouldCloseOnEsc:!a,shouldCloseOnClickOutside:!a,isDismissible:!a},(0,i.createElement)("p",null,(0,i.createElement)("span",{dangerouslySetInnerHTML:{__html:(0,T.sprintf)(// translators: %s: page name
(0,T.__)("The <strong>%s</strong> page will be moved in the trash.","kubio"),null==o||null===(n=o.title)||void 0===n?void 0:n.raw)}}),(0,i.createElement)("br",null),(0,T.__)("You can recover it later from WP Admin -> Pages -> Trash","kubio")),(0,i.createElement)(k.ButtonGroup,{className:"h-template-part-modal__button-group"},(0,i.createElement)(k.Button,{isLink:!0,onClick:r},(0,T.__)("Cancel","kubio")),(0,i.createElement)(k.Button,{isPrimary:!0,onClick:async()=>{l(!0),await sb(o,c,u),r()}},(0,T.__)("Delete","kubio"))))},sb=(e,t,n)=>{var o;const r=e.id,a=null==e||null===(o=e.title)||void 0===o?void 0:o.raw;try{(0,w.dispatch)("core").deleteEntityRecord("postType",e.type,parseInt(r)),n(a+(0,T.__)(" moved to trash!","kubio"))}catch(e){t((0,T.sprintf)(//translators: $s is the page name
(0,T.__)("An error occurred. %s was not saved","kubio"),a))}},cb=e=>{var t;const n=e.taxonomy?e.name:null==e||null===(t=e.title)||void 0===t?void 0:t.rendered,o=document.createElement("div");return o.innerHTML=n,o.textContent||o.innerText||""};function ub(e){let{item:t}=e;const{setPage:n,setIsNavigationPanelOpened:o}=(0,w.useDispatch)(io),{page_for_posts:r,page_on_front:a,show_on_front:l,wooCommercePagesIds:s,isActive:c}=(0,w.useSelect)((e=>{var n,o,r,a,i;const{page_for_posts:l,page_on_front:s,show_on_front:c}=e("core").getEditedEntityRecord("root","site"),u=null===(n=e("core/block-editor").getSettings())||void 0===n||null===(o=n.kubioBasicWooCommerce)||void 0===o?void 0:o.pagesIds,{getPage:d,getTemplateId:m,getTemplatePartId:p}=e(io),h=[null===(r=d())||void 0===r||null===(a=r.context)||void 0===a||null===(i=a.postId)||void 0===i?void 0:i.toString(),m(),p()].filter(Boolean);return{page_for_posts:l,page_on_front:s,show_on_front:c,wooCommercePagesIds:Object.values(u||{}),isActive:h.includes(t.id.toString())}}),[]),{duplicateContainerRef:u,delContainerRef:d}=(0,i.useRef)(),[m,p]=(0,i.useState)(!1),[h,g]=(0,i.useState)(!1),[b,v]=(0,i.useState)(!1),[_,y]=(0,i.useState)({}),[,E]=(0,f.useGlobalSessionProp)("displayingEmptyPageChecked"),S=(0,i.useCallback)((()=>{const{type:e,slug:r,link:a,id:i}=null!=_&&_.id?_:t;n({type:e,slug:r,path:(0,di.getPathAndQueryString)(a),context:{postType:e,postId:i}}),E(!0),o(!1)}),[_,t,n,E,o]),C=(0,i.useCallback)((()=>{c||v(!0)}),[c]),I=(0,i.useCallback)((()=>{p(!0)}),[]),P=(0,i.useCallback)((()=>{g(!0)}),[]);if(!t)return null;const R=cb(t)||(0,T.__)("(no title)","kubio");let O,A;"page"===l&&a===t.id&&(O=(0,i.createElement)(k.Icon,{title:(0,T.__)("Homepage","kubio"),icon:Qf,size:18})),"page"===l&&r===t.id&&(O=(0,i.createElement)(k.Icon,{title:(0,T.__)("Posts page","kubio"),icon:rb,size:18})),-1!==s.indexOf(t.id)&&(O=(0,i.createElement)(k.Icon,{title:(0,T.__)("Posts page","kubio"),icon:Y.WooCommerceSmallLogo,size:18}));const N=a!==t.id&&!c;"page"===l&&"page"===t.type&&r!==t.id&&(A=(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.DropdownMenu,{className:"kubio-more-menu",icon:Bs,label:(0,T.__)("More tools & options","kubio"),popoverProps:{className:"edit-site-kubio-more-menu__content edit-site-more-menu__content",position:"bottom left",isAlternate:!0},toggleProps:{tooltipPosition:"bottom"}},(e=>{let{onClose:t}=e;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.MenuGroup,null,(0,i.createElement)(k.MenuItem,{icon:Y.DuplicateItemIcon,ref:u,onClick:e=>{e.preventDefault(),I(e),t()},role:"menuitemcheckbox"},(0,T.__)("Duplicate","kubio")),N&&(0,i.createElement)(k.MenuItem,{icon:ab,ref:d,onClick:e=>{e.preventDefault(),P(e),t()},role:"menuitemcheckbox"},(0,T.__)("Delete","kubio"))))})),m&&(0,i.createElement)(ib,{post:t,onCloseModal:()=>{p(!1)},onClickDuplicate:e=>{y(e),p(!1),v(!0)}}),h&&(0,i.createElement)(lb,{post:t,onCloseModal:()=>{g(!1)}})));const M=x()("edit-site-navigation-panel__content-item",{"kubio-navigation-item-active":c});return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.__experimentalNavigationItem,{className:M,item:`${t.taxonomy||t.type}-${t.id}`,title:R},(0,i.createElement)(k.Button,{onClick:C},O&&(0,i.createElement)("span",{className:"components-navigation__item-badge"},O),(0,i.createElement)("span",{className:"components-truncate components-text components-navigation__item-title"},R)),A),b&&(0,i.createElement)(Zh,{onComplete:S,closeModal:()=>v(!1),entityName:R}))}const db=e=>(0,m.deburr)(e).replace(/^\//,"").toLowerCase(),mb=(e,t)=>-1!==db(e).indexOf(db(t));function pb(e){let{item:t,icon:n}=e;const{title:o,description:r,isActive:a}=(0,w.useSelect)((e=>{var n,o,r,a;const{getPage:i,getTemplateId:l,getTemplatePartId:s}=e(io),c=[null===(n=i())||void 0===n||null===(o=n.context)||void 0===o||null===(r=o.postId)||void 0===r?void 0:r.toString(),l(),s()].filter(Boolean);return{..."wp_template"===t.type?e("core/editor").__experimentalGetTemplateInfo(t):{title:(null==t||null===(a=t.title)||void 0===a?void 0:a.rendered)||(null==t?void 0:t.slug),description:""},isActive:c.includes(t.id.toString())}}),[]),{setTemplate:l,setTemplatePart:s,setIsNavigationPanelOpened:c,setPage:u}=(0,w.useDispatch)(io),[d,m]=(0,i.useState)(!1),p=(0,i.useCallback)((()=>{a||m(!0)}),[m,a]),[,h]=(0,f.useGlobalSessionProp)("displayingEmptyPageChecked");if(!t)return null;const g=x()("edit-site-navigation-panel__template-item",{"kubio-navigation-item-active":a});return(0,i.createElement)(k.__experimentalNavigationItem,{className:g,item:`${t.type}-${t.id}`,title:o,icon:n},(0,i.createElement)(k.Button,{onClick:p},(0,i.createElement)("span",{className:"edit-site-navigation-panel__info-wrapper"},(0,i.createElement)("div",{className:"edit-site-navigation-panel__template-item-title"},"draft"===t.status&&(0,i.createElement)("em",null,(0,T.__)("[Draft]","kubio")),o),r&&(0,i.createElement)("div",{className:"edit-site-navigation-panel__template-item-description"},r))),d&&(0,i.createElement)(Zh,{onComplete:()=>{"wp_template"===t.type?l(t.id,t.slug,!0):s(t.id),h(!1),c(!1)},closeModal:()=>m(!1),entityName:o,changePage:!1}))}function hb(e){let{items:t,search:n}=e;const o=(null==t?void 0:t.length)>0?t[0].type:null,r=(0,w.useSelect)((e=>{if("wp_template"===o){const{__experimentalGetTemplateInfo:n}=e("core/editor");return t.map((e=>({slug:e.slug,...n(e)})))}return(t||[]).map((e=>{var t,n;return{slug:e.slug,title:null===(t=e.title)||void 0===t?void 0:t.rendered,description:null===(n=e.excerpt)||void 0===n?void 0:n.rendered}}))}),[t,o]),a=(0,i.useMemo)((()=>null===t||0===n.length?[]:t.filter((e=>{let{slug:t}=e;const{title:o,description:a}=r.find((e=>e.slug===t));return mb(t,n)||mb(o,n)||mb(a,n)}))),[t,r,n]),l="wp_template"===o||"wp_template_part"===o?pb:ub;return(0,i.createElement)(k.__experimentalNavigationGroup,{title:(0,T.__)("Search results","kubio")},(0,m.map)(a,(e=>(0,i.createElement)(l,{item:e,key:`${e.type}-${e.id}`}))))}const gb=e=>{let{kind:t="postType",entity:n,title:o,hasSearch:r=!0,parentMenu:a=Cs}=e;const{search:l,searchQuery:c,onSearch:u,isDebouncing:d}=function(){const[e,t]=(0,i.useState)(""),[n,o]=(0,i.useState)(""),[r,a]=(0,i.useState)(!1);(0,i.useEffect)((()=>{a(!1)}),[n]);const l=(0,i.useCallback)((0,m.debounce)(o,75),[o]);return{search:e,searchQuery:n,isDebouncing:r,onSearch:(0,i.useCallback)((e=>{t(e),l(e),a(!0)}),[t,a,l])}}(),g=(0,w.useRegistry)(),{resetSelection:b}=g.dispatch(y.store),{setPage:v,setIsNavigationPanelOpened:_}=(0,w.useDispatch)(h.STORE_KEY),{saveEntityRecord:E}=(0,w.dispatch)("core"),{items:S,showOnFront:C,pageForPosts:I,pageOnFront:P,isResolved:R,siteURL:O}=(0,w.useSelect)((e=>{const{getEntityRecords:o,getEditedEntityRecord:r,hasFinishedResolution:a,getEntityRecord:i}=e("core"),l=[t,n,{search:c,status:"publish,private",per_page:50}],s=a("getEntityRecords",l),{page_for_posts:u,page_on_front:d}=e("core").getEditedEntityRecord("root","site");let p=o(...l);return"postType"===t&&"page"===n&&(0,m.isArray)(p)&&(p=[i("postType","page",d),i("postType","page",u),...p].filter(Boolean),p=(0,m.uniqBy)(p,(e=>parseInt(null==e?void 0:e.id)))),{items:p,isResolved:s,showOnFront:r("root","site").show_on_front,siteURL:e("core/block-editor").getSettings().siteUrl||"/",pageForPosts:u,pageOnFront:d,getEntityRecord:i}}),[c,n,t]),[A,N]=(0,i.useState)(""),[M,D]=(0,i.useState)(!1),[z,B]=(0,i.useState)(!1),[L,F]=(0,i.useState)(!1),[G,H]=(0,i.useState)({}),[,j]=(0,f.useGlobalSessionProp)("displayingEmptyPageChecked"),U=(0,i.useCallback)((()=>{D(!1),B(!0)}),[B]),W=async(e,t)=>{F(!0);const n={title:A,status:"publish",template:Y,meta:{saved_in_kubio:!0}},o=await E(e,t,n);o&&(H(o),U(),F(!1),N(""))},{availableTemplates:V,isKubioTheme:K}=(0,w.useSelect)((e=>{const t=e(h.STORE_KEY),{getSettings:n}=e(y.store);return{availableTemplates:t.getAvailablePageTemplates(),isKubioTheme:n().isKubioTheme}}),[]),{templates:$,defaultTemplate:q}=(0,s.useDeepMemo)((()=>{let e,t=V;return K?(e=p().find(t,{value:"kubio-full-width"})?"kubio-full-width":"full-width",t=V):(e="",(0,m.find)(t,{value:e})||(e=p().find(t,{value:"kubio-full-width"})?"kubio-full-width":"full-width")),{defaultTemplate:e,templates:t}}),[V,K]),[Y,X]=(0,i.useState)(q),Z=(0,s.useDeepMemo)((()=>{const e=$.reduce(((e,t)=>{const n=t.source||"custom";return{...e,[n]:[...e[n]||[],t]}}),{}),t=[];return p().forEach(h.templateGroupPriorities,(function(n){var o;null!==(o=e[n])&&void 0!==o&&o.length&&(t.push({value:"template-group-"+n,label:h.templateGroups[n],disabled:!0}),p().forEach(e[n],(function(e){t.push(e)})))})),t}),[$]),[J,Q]=(0,i.useState)(!1),ee=(0,i.useCallback)((()=>{Q(!1),v({type:"page",path:O,context:{queryContext:{page:1}}}),j(!1),_(!1)}),[j,_,v,O]),te=(0,f.useSetGlobalSessionProp)("ready"),ne=(0,i.useCallback)((()=>{G&&(v({type:G.type,slug:G.slug,path:(0,di.getPathAndQueryString)(G.link),context:{postType:G.type,postId:G.id}}),F(!1),j(!1),_(!1),setTimeout((()=>te(!0)),5e3))}),[G,v,j,_,te]),oe=!R||l&&d,[re,ae]=(0,i.useState)(!1);let ie=(0,i.createElement)(i.Fragment,null);"postType"===t&&"page"===n&&(ie=(0,i.createElement)(i.Fragment,null,M&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.Modal,{title:(0,T.__)("Add page","kubio"),onRequestClose:()=>{D(!1)},className:"block-editor-block-new-entity-modal",shouldCloseOnEsc:!L,shouldCloseOnClickOutside:!L,isDismissible:!L},(0,i.createElement)("div",{className:"popover__content"},(0,i.createElement)(k.__experimentalInputControl,{value:A,onChange:e=>N(e),label:(0,T.__)("Title","kubio"),autoFocus:!0,onKeyPress:e=>{"Enter"===e.key&&W(t,n)}}),(0,i.createElement)(k.__experimentalSpacer,{margin:3}),(0,i.createElement)(k.SelectControl,{value:Y,onChange:e=>X(e),label:(0,T.__)("Template","kubio"),options:Z}),(0,i.createElement)(k.__experimentalSpacer,{margin:6}),(0,i.createElement)(k.Button,{isPrimary:!0,isBusy:L,disabled:L||""===A.trim(),onClick:()=>{b(0,0,null),W(t,n)},className:"add-button"},(0,T.__)("Add page","kubio"))))),z&&(0,i.createElement)(Zh,{onComplete:ne,closeModal:()=>B(!1),entityName:A})));const le=p().sortBy(S,(e=>"page"!==C||I!==e.id&&P!==e.id?1:0));return(0,i.createElement)(k.__experimentalNavigationMenu,{menu:`kubio-content-area-${t}-${n}`,title:o,parentMenu:a,hasSearch:r,onSearch:u,search:l,isSearchDebouncing:d||!R,titleAction:(0,i.createElement)(i.Fragment,null,"page"===n&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)(nb,{onNewKubioPage:()=>D(!0),onNewAiPage:()=>ae(!0)}),re&&(0,i.createElement)(tb,{setIsModalVisible:ae})),ie),className:x()("kubio-nav-menu-heading",{"kubio-nav-menu-heading--page":"page"===n})},l&&!d&&(0,i.createElement)(hb,{items:le,search:l,disableFilter:!0}),!l&&(0,i.createElement)(i.Fragment,null,"posts"===C&&(0,i.createElement)(k.__experimentalNavigationItem,{item:"post-/",title:(0,T.__)("All Posts","kubio"),onClick:()=>Q(!0)},(0,i.createElement)(k.Button,{className:"components-button css-1g713f0 ejwewyf3"},(0,i.createElement)(k.Flex,{align:"center"},(0,i.createElement)(k.FlexItem,null,(0,i.createElement)(k.Icon,{icon:Qf,size:18})),(0,i.createElement)(k.FlexBlock,null,(0,i.createElement)("span",null,(0,T.__)("All Posts","kubio"))),J&&(0,i.createElement)(Zh,{onComplete:ee,closeModal:()=>B(!1),entityName:A})))),null==le?void 0:le.map((e=>(0,i.createElement)(ub,{item:e,key:`${e.type||e.taxonomy}-${e.id}`})))),oe&&(0,i.createElement)(k.__experimentalNavigationItem,{title:(0,T.__)("Loading…","kubio"),isText:!0}))};function fb(e){let{onActivateMenu:t,activeMenu:n}=e;const{page:o}=(0,w.useSelect)((e=>({page:e(h.STORE_KEY).getPage()})),[]),r=(0,i.useMemo)((()=>{var e,t;return[{kind:"postType",entity:"page",title:(0,T.__)("Pages","kubio")},{kind:"postType",entity:"post",title:(0,T.__)("Posts","kubio")},{kind:"taxonomy",entity:"category",title:(0,T.__)("Categories","kubio")},...(null===(e=window)||void 0===e||null===(t=e.kubioEditSiteSettings)||void 0===t?void 0:t.postTypes.filter((e=>"kubio_section"!==e.entity)))||[]]}),[]);return(0,i.createElement)(k.__experimentalNavigation,{activeItem:o&&`content-${o.path}`,activeMenu:n,onActivateMenu:e=>{t(e)}},n===Cs&&(0,i.createElement)(Jf.Slot,null,(0,i.createElement)(k.__experimentalNavigationBackButton,{backButtonLabel:(0,T.__)("Dashboard","kubio"),className:"edit-site-navigation-panel__back-to-dashboard",href:"index.php"})),(0,i.createElement)(k.__experimentalNavigationMenu,{title:(0,T.__)("Site Content","kubio")},null==r?void 0:r.map((e=>{let{kind:t,entity:n,title:o}=e;return(0,i.createElement)(k.__experimentalNavigationItem,{title:o,navigateToMenu:`kubio-content-area-${t}-${n}`,key:`${t}-${n}`})}))),null==r?void 0:r.map((e=>(0,i.createElement)(gb,C({},e,{key:`${e.kind}-${e.entity}`})))))}function bb(e){let{menu:t,title:n,templateParts:o}=e;return(0,i.createElement)(k.__experimentalNavigationMenu,{menu:t,title:n,parentMenu:Is,isEmpty:!o||0===o.length},(0,m.map)(o,(e=>(0,i.createElement)(pb,{item:e,key:`wp_template_part-${e.id}`}))))}function vb(){const[e,t]=(0,i.useState)(""),n=(0,i.useCallback)((e=>{t(e)})),{isLoading:o,templateParts:r,templatePartsByArea:a}=(0,w.useSelect)((e=>{const t=e(S.store).getEntityRecords("postType","wp_template_part"),n=t||[],o=(0,m.groupBy)(n.map((e=>({...e,area:e.area||"uncategorized"}))),"area");return{isLoading:null===t,templateParts:n,templatePartsByArea:o}}),[]);return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.__experimentalNavigationMenu,{menu:Is,title:(0,T.__)("Template Parts","kubio"),parentMenu:Cs,hasSearch:!0,onSearch:n,search:e},e&&(0,i.createElement)(hb,{items:r,search:e}),!e&&Ms.map((e=>{let{title:t,menu:n}=e;return(0,i.createElement)(k.__experimentalNavigationItem,{key:`template-parts-navigate-to-${n}`,navigateToMenu:n,title:t,hideIfTargetMenuEmpty:!0})})),!e&&o&&(0,i.createElement)(k.__experimentalNavigationItem,{title:(0,T.__)("Loading…","kubio"),isText:!0})),Ms.map((e=>{let{area:t,menu:n,title:o}=e;return(0,i.createElement)(bb,{key:`template-parts-menu-${n}`,menu:n,title:o,templateParts:a[t]})})))}function _b(){const{defaultTemplateTypes:e,templates:t,classicThemePrimaryTemplates:n}=(0,w.useSelect)((e=>{const{getSettings:t}=e(io),n=e("core").getEntityRecords("postType","wp_template");return{defaultTemplateTypes:t().defaultTemplateTypes,classicThemePrimaryTemplates:t().classicThemePrimaryTemplates,templates:n}}),[]),{addTemplate:o}=(0,w.useDispatch)(io),r=(0,m.map)(t,"slug"),a=(0,m.filter)(e,(e=>(0,m.includes)((0,m.uniq)([...ws,...n]),e.slug)&&!(0,m.includes)(r,e.slug)));return a.length?(0,i.createElement)(k.DropdownMenu,{className:"edit-site-navigation-panel__new-template-dropdown",icon:null,label:(0,T.__)("Add Template","kubio"),popoverProps:{noArrow:!1},toggleProps:{children:(0,i.createElement)(k.Button,{isPrimary:!0,icon:Pn,iconPosition:"right",className:"kubio-new-page-btn",label:(0,T.__)("New","kubio")},(0,T.__)("New","kubio"))}},(t=>{let{onClose:n}=t;return(0,i.createElement)(k.NavigableMenu,{className:"edit-site-navigation-panel__new-template-popover"},(0,i.createElement)(k.MenuGroup,{label:(0,T.__)("Add Template","kubio")},(0,m.map)(a,(t=>{let{title:r,description:a,slug:l}=t;return(0,i.createElement)(k.MenuItem,{info:a,key:l,onClick:()=>{(t=>{const{title:n,description:r}=(0,m.find)(e,{slug:t});o({content:"__KUBIO_REPLACE_WITH_APPROPRIATE_CONTENT__",excerpt:r,slug:t.toString(),status:"publish",title:n,kubio_template_source:"kubio-custom"})})(l),n()}},r)}))))})):null}function yb(e){let{menu:t,title:n,templates:o,parentMenu:r}=e;const a=!o||0===o.length;return!a&&(0,i.createElement)(k.__experimentalNavigationMenu,{menu:t,title:n,parentMenu:r,isEmpty:a},(0,m.map)(o,(e=>(0,i.createElement)(pb,{item:e,key:`wp_template-${e.id}`}))))}const kb=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"custom";return!!e&&(null==e?void 0:e.filter((e=>{let{kubio_template_source:n="custom"}=e;return n===t})))};function Eb(e){let{title:t,templates:n,menu:o,hasAdd:r=!0,parentMenu:a=xs}=e;const l=(0,i.useMemo)((()=>{const e={},t=kb(n,"kubio"),o=kb(n,"theme"),r=!!n&&(0,m.difference)(n,[...t,...o]);return t&&t.length&&(e.kubio=t),o&&o.length&&(e.theme=o),r&&r.length&&(e.custom=o),e}),[n]),s=Object.keys(l).length<=1;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.__experimentalNavigationMenu,{menu:o,title:t,titleAction:r&&(0,i.createElement)(_b,null),parentMenu:a},s&&(0,i.createElement)(i.Fragment,null,(0,m.map)(n,(e=>(0,i.createElement)(pb,{item:e,key:`wp_template-${e.id}`,icon:Y.KubioLogo})))),!s&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.__experimentalNavigationItem,{navigateToMenu:`${o}--${Ns}`,title:(0,T.__)("Kubio templates","kubio"),hideIfTargetMenuEmpty:!0}),(0,i.createElement)(k.__experimentalNavigationItem,{navigateToMenu:`${o}--${As}`,title:(0,T.__)("Theme templates","kubio"),hideIfTargetMenuEmpty:!0}),(0,i.createElement)(k.__experimentalNavigationItem,{navigateToMenu:`${o}--${Os}`,title:(0,T.__)("Custom templates","kubio"),hideIfTargetMenuEmpty:!0}))),(0,i.createElement)(yb,{menu:`${o}--${Ns}`,title:(0,T.__)("Kubio templates","kubio"),templates:l.kubio,parentMenu:o}),(0,i.createElement)(yb,{menu:`${o}--${As}`,title:(0,T.__)("Theme templates","kubio"),templates:l.theme,parentMenu:o}),(0,i.createElement)(yb,{menu:`${o}--${Os}`,title:(0,T.__)("Custom templates","kubio"),templates:l.custom,parentMenu:o}))}function Sb(){var e,t,n,o,r,a;const[l,c]=(0,i.useState)(""),u=(0,i.useCallback)((e=>{c(e)})),{templates:d}=(0,w.useSelect)((e=>{const{getEntityRecords:t}=e(S.store);return{templates:t("postType","wp_template",{per_page:-1})}}),[]),m=(0,i.useMemo)((()=>(d||[]).reduce(((e,t)=>{let n="general";const o=t.slug;return(0,s.currentTemplateIsPage)(o)&&(n="page"),(0,s.currentTemplateIsPost)(o)&&(n="post"),{...e,[n]:[...e[n]||[],t]}}),{})),[d]);return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.__experimentalNavigationMenu,{menu:xs,title:(0,T.__)("Templates","kubio"),titleAction:(0,i.createElement)(_b,null),parentMenu:Cs,hasSearch:!0,onSearch:u,search:l},l&&(0,i.createElement)(hb,{items:d,search:l}),!l&&(0,i.createElement)(i.Fragment,null,!(null===(e=m.page)||void 0===e||!e.length)&&(0,i.createElement)(k.__experimentalNavigationItem,{navigateToMenu:Ps,title:(0,T.__)("Page templates","kubio"),hideIfTargetMenuEmpty:!0}),!(null===(t=m.post)||void 0===t||!t.length)&&(0,i.createElement)(k.__experimentalNavigationItem,{navigateToMenu:Rs,title:(0,T.__)("Post templates","kubio"),hideIfTargetMenuEmpty:!0}),!(null===(n=m.general)||void 0===n||!n.length)&&(0,i.createElement)(k.__experimentalNavigationItem,{navigateToMenu:Ts,title:(0,T.__)("General templates","kubio"),hideIfTargetMenuEmpty:!0})),!l&&null===d&&(0,i.createElement)(k.__experimentalNavigationItem,{title:(0,T.__)("Loading…","kubio"),isText:!0})),!(null===(o=m.page)||void 0===o||!o.length)&&(0,i.createElement)(Eb,{menu:Ps,title:(0,T.__)("Page templates","kubio"),templates:m.page,hasAdd:!1,category:"page"}),!(null===(r=m.post)||void 0===r||!r.length)&&(0,i.createElement)(Eb,{menu:Rs,title:(0,T.__)("Post templates","kubio"),templates:m.post,category:"post",hasAdd:!1}),!(null===(a=m.general)||void 0===a||!a.length)&&(0,i.createElement)(Eb,{menu:Ts,title:(0,T.__)("General templates","kubio"),templates:m.general,hasAdd:!1,category:"general"}))}function wb(e){let{activeMenu:t,onActivateMenu:n}=e;const{postId:o,postType:r}=(0,w.useSelect)((e=>{const{getEditedPostType:t,getEditedPostId:n}=e(io);return{postId:n(),postType:t()}}),[]);return(0,i.createElement)(k.__experimentalNavigation,{activeItem:`${r}-${o}`,activeMenu:t,onActivateMenu:e=>{n(e)}},(0,i.createElement)(k.__experimentalNavigationMenu,{title:(0,T.__)("Advanced","kubio")},(0,i.createElement)(k.__experimentalNavigationItem,{title:(0,T.__)("Templates","kubio"),navigateToMenu:xs}),(0,i.createElement)(k.__experimentalNavigationItem,{title:(0,T.__)("Template Parts","kubio"),navigateToMenu:Is}),(0,i.createElement)(Sb,{activeMenu:t}),(0,i.createElement)(vb,null)))}const Cb=e=>{let{isOpen:t}=e;const[n,o]=(0,i.useState)(Cs),[r,a]=(0,i.useState)(Cs),{siteTitle:l,openedMenu:s}=(0,w.useSelect)((e=>{const{getEntityRecord:t}=e("core");return{siteTitle:(t("root","__unstableBase",void 0)||{}).name,openedMenu:e(io).getNavigationMenu()}}),[]),c=(0,i.useRef)();(0,i.useEffect)((()=>{t&&c.current.focus()}),[r]);const u=(0,E.usePrevious)(t);(0,i.useEffect)((()=>{s&&t&&!u&&o(s)}),[n,t,s]);const{setIsNavigationPanelOpened:d}=(0,w.useDispatch)(io);return(0,i.createElement)("div",{className:x()("edit-site-navigation-panel",{"is-open":t}),ref:c,tabIndex:"-1",onKeyDown:e=>{e.keyCode===Df.ESCAPE&&(e.stopPropagation(),d(!1))}},(0,i.createElement)("div",{className:"edit-site-navigation-panel__inner"},(0,i.createElement)("div",{className:"edit-site-navigation-panel__site-title-container"},(0,i.createElement)(k.Flex,null,(0,i.createElement)(k.FlexBlock,null,(0,i.createElement)("div",{className:"edit-site-navigation-panel__site-title"},l)),(0,i.createElement)(k.FlexItem,null,(0,i.createElement)(k.Tooltip,{text:(0,T.__)("Close panel","kubio")},(0,i.createElement)(k.Button,{className:"kubio-edit-site-navigation-panel__close-button",icon:De,onClick:()=>d(!1)}))))),(0,i.createElement)("div",{className:"edit-site-navigation-panel__scroll-container"},r===Cs&&(0,i.createElement)(fb,{onActivateMenu:o,activeMenu:n}),n===Cs&&(0,i.createElement)(wb,{activeMenu:r,onActivateMenu:a}))))},Ib=function(e){let{isOpen:t}=e;const{isActive:n}=(0,w.useSelect)((e=>{const{isFeatureActive:t}=e(h.STORE_KEY);return{isActive:t("fullscreenMode")}}),[]),{setIsNavigationPanelOpened:o}=(0,w.useDispatch)(h.STORE_KEY);if(!n)return null;const r=(0,i.createElement)(k.Icon,{size:"36px",icon:Y.HamburgerMenu});return(0,i.createElement)("div",{className:"edit-site-navigation-toggle"+(t?" is-open":"")},(0,i.createElement)(k.Button,{className:"edit-site-navigation-toggle__button has-icon",label:(0,T.__)("Toggle navigation","kubio"),onClick:()=>o(!t),showTooltip:!0},r))},{Fill:xb,Slot:Tb}=(0,k.createSlotFill)("EditSiteNavigationPanelPreview");function Pb(){const e=(0,w.useSelect)((e=>e(io).isNavigationOpened()));return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(Ib,{isOpen:e}),e&&(0,i.createElement)(Cb,{isOpen:e}),(0,i.createElement)(Tb,null))}const Rb=()=>{const e=(0,w.useSelect)((e=>e(d.store).getNotices().filter((e=>"snackbar"===e.type)).map((e=>({...e,className:`is-${e.status}`})))),[]),{removeNotice:t}=(0,w.useDispatch)(d.store);return(0,i.createPortal)((0,i.createElement)(k.SnackbarList,{className:"components-editor-notices__snackbar edit-site-notices",notices:e,onRemove:t}),document.body)};function Ob(){const{setIsListViewOpened:e}=(0,w.useDispatch)(h.STORE_KEY),{clearSelectedBlock:t,selectBlock:n}=(0,w.useDispatch)(y.store),o=(0,E.useFocusOnMount)("firstElement"),r=(0,E.useFocusReturn)(),a=`edit-site-editor__list-view-panel-label-${(0,E.useInstanceId)(Ob)}`;return(0,i.createElement)("div",{"aria-labelledby":a,className:"edit-site-editor__list-view-panel",onKeyDown:function(t){t.keyCode!==Df.ESCAPE||t.defaultPrevented||e(!1)}},(0,i.createElement)("div",{className:"edit-site-editor__list-view-panel-header"},(0,i.createElement)("strong",{id:a},(0,T.__)("List view","kubio")),(0,i.createElement)(k.Button,{icon:uo,label:(0,T.__)("Close list view sidebar","kubio"),onClick:()=>e(!1)})),(0,i.createElement)("div",{className:"edit-site-editor__list-view-panel-content",ref:(0,E.useMergeRefs)([r,o])},(0,i.createElement)(y.__experimentalListView,{onSelect:async function(e){await t(),n(e,-1)},showNestedBlocks:!0,__experimentalFeatures:!0,__experimentalPersistentListViewFeatures:!0})))}function Ab(){const{setTemplate:e,setTemplatePart:t,showHomepage:n,setPage:o}=(0,w.useDispatch)(h.STORE_KEY),{siteUrl:r,state:a}=window.kubioEditSiteSettings;(0,i.useEffect)((()=>{var i,l,s,c;const d=window.location.href;let m=(0,di.getQueryArg)(d,"postId")||(null==a||null===(i=a.entity)||void 0===i||null===(l=i.context)||void 0===l?void 0:l.postId);m=isNaN(parseInt(m))?m:parseInt(m);const p=(0,di.getQueryArg)(d,"pageURL");if(!m&&!p)return void n();const h=(0,di.getQueryArg)(d,"postType")||(null==a||null===(s=a.entity)||void 0===s||null===(c=s.context)||void 0===c?void 0:c.postType);if(p)o({path:p});else if("wp_template"===h)e(m);else if("wp_template_part"===h)t(m);else if(h){var g,f,b;const e=(null==a||null===(g=a.entity)||void 0===g||null===(f=g.context)||void 0===f?void 0:f.postId)===m?null==a||null===(b=a.entity)||void 0===b?void 0:b.path:`${r}?p=${m}`;o({context:{postType:h,postId:m},path:e})}else n();(0,u.doAction)("kubio.afterEntitySet")}),[]);const l=function(){const e=(0,i.useRef)(),t=(0,w.useSelect)((e=>{var t,n;const{getEditedPostType:o,getEditedPostId:r,getPage:a}=e(h.STORE_KEY),i=a();let l=r(),s=o();return null!=i&&null!==(t=i.context)&&void 0!==t&&t.postId&&null!=i&&null!==(n=i.context)&&void 0!==n&&n.postType&&(l=i.context.postId,s=i.context.postType),l&&s?{postId:l,postType:s,page:i}:{page:i}}));return J()(e.current,t)||(e.current=t),e.current}();return(0,i.useEffect)((()=>{const e=(0,di.removeQueryArgs)(window.location.href,"postType","postId","pageURL"),{page:t,...n}=l,o=l?(0,di.addQueryArgs)(e,n):e;window.history.replaceState({},"",o)}),[l]),null}const Nb=(0,i.createContext)({}),Mb=[(0,Wo.getNamesOfBlocks)().HEADER,(0,Wo.getNamesOfBlocks)().FOOTER,(0,Wo.getNamesOfBlocks)().SIDEBAR,"core/template-part","core/post-content"],Db=()=>(0,i.useContext)(Nb),zb=e=>{let{children:t,blockContext:n,templateId:o,templateType:r,page:a}=e;const l=(0,i.useRef)([]),[s,c]=(0,i.useState)(!1),d=(0,f.useSetGlobalSessionProp)("ready"),p=(0,f.useGetGlobalSessionProp)("ready",!1),h=(0,i.useRef)(p),{entitiesFinished:g,postLoaded:b,isEmptyPost:v,isPost:_,postEntity:y,isChangingPage:k}=(0,w.useSelect)((e=>{const{getEditedEntityRecord:t,hasFinishedResolution:n}=e("core"),{getCurrentPostType:a,getCurrentPostId:i,isChangingPage:s}=e(sl.Ls),c=!(!p&&o&&r)||l.current.reduce(((e,n)=>{let{theme:o,slug:r,content:a}=n,i=!0;var l;return a||(i=!o||!r||!(0,m.isUndefined)(null===(l=t("postType","wp_template_part",`${o}//${r}`))||void 0===l?void 0:l.content)),e&&i}),!0);let u=!0;const d=a(),h=i();let g,f=!1,b=!1;var v;return d&&h&&(["wp_template","wp_template_part"].includes(d)||(f=!0,b=t("postType",d,h),g=null===(v=b)||void 0===v?void 0:v.content,u=!(0,m.isUndefined)(g)&&n("getEditedEntityRecord",["postType",d,h]))),{entitiesFinished:c||u,postLoaded:u,postEntity:b,isEmptyPost:d&&h&&!(0,m.isUndefined)(g)&&(0,m.isString)(g)&&!(g.includes("\x3c!-- wp:")||g.includes("\x3c!--wp:")),isPost:f,isChangingPage:s()}}),[l.current.length,p,n,o,o]),S=(0,E.useDebounce)((0,i.useCallback)((()=>{c(!0)}),[]),200),C=(0,i.useCallback)((e=>{d(e),e&&window.requestIdleCallback((()=>{if(d(e),top.kubioStartTime){const e=Math.floor(performance.now()-top.kubioStartTime)/1e3;console.log("Kubio ready in: "+e+" seconds"),top.kubioStartTime=null}(0,u.doAction)("kubio.editorIsReady")}))}),[d]),I=(0,i.useCallback)((e=>{h.current!==e&&e&&(0,Fl.updateAllStyleManagers)((()=>{C(e)}))}),[]),x=(0,E.useDebounce)(I,500),T=(0,E.useDebounce)((0,i.useCallback)((()=>{I(!0),c(!0)}),[]),2e3),P=(0,E.useDebounce)((0,i.useCallback)((()=>{I(!0),c(!0)}),[]),1e4);(0,i.useEffect)((()=>{(0,m.debounce)(I,15e3)}),[]);const{editEntityRecord:R}=(0,w.useDispatch)("core");(0,i.useEffect)((()=>{const e=y.content;_&&e&&"function"!=typeof e&&!y.blocks&&R("postType",y.type,y.id,{blocks:(0,Mr.parse)(e)},{undoIgnore:!0})}),[_,y,v,R]);const O=(0,E.usePrevious)(p);(0,i.useEffect)((()=>{h.current=p,O&&!p&&(c(!1),l.current=[])}),[p,O]),(0,i.useLayoutEffect)((()=>{if(!k&&!p)if(g){if(P.cancel(),T.cancel(),x.cancel(),_&&b&&v)return void T(!0);if(_)return void x(s);x(!0)}else T.cancel(),P(!0)}),[b,_,v,g,s,p,a,o,r,P,T,x,k]);const A=(0,i.useCallback)(((e,t)=>{let{theme:n,slug:o}=t;Mb.includes(e)&&(n&&o?(0,m.find)(l.current,{theme:n,slug:o})||l.current.push({theme:n,slug:o}):"core/post-content"===e&&l.current.push({content:!0})),S()}),[S]),N=(0,i.useMemo)((()=>({isReady:p,markAsLoaded:A})),[p,A]);return(0,i.createElement)(Nb.Provider,{value:N},t)},Bb=(0,E.createHigherOrderComponent)((e=>t=>{const{markAsLoaded:n,isReady:o}=Db();return(0,i.useLayoutEffect)((()=>{o||n(t.name,t.attributes)}),[o,n,t.attributes,t.name]),(0,i.createElement)(e,t)}),"BlockListEditorStateReady");function Lb(){return function(){const[e,t]=(0,_.useGlobalStylesOutput)(),{getSettings:n}=(0,w.useSelect)(io),{updateSettings:o}=(0,w.useDispatch)(io);(0,i.useEffect)((()=>{var r;if(p().isEmpty(e)||p().isEmpty(t))return;const a=n(),i=(null==a||null===(r=a.styles)||void 0===r?void 0:r.filter((e=>!e.isGlobalStyles||"base-layout"===e.__unstableType)))||[],l=(0,q.mergeNoArrays)({},a,{styles:[...i,...e],__experimentalFeatures:t});o(l)}),[e,t])}(),null}(0,u.addFilter)("editor.BlockListBlock","kubio/style/BlockListEditorStateReady",(0,E.compose)([Bb]),1);const Fb=e=>(0,s.convertTemplateFormatToBlock)([e]).map((e=>(0,q.refreshBlockStyleRefs)(e))),{getClientIdsWithDescendants:Gb,getBlock:Hb}=(0,w.select)("core/block-editor"),jb=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=(0,b.getFromGenerationSession)("sectionsGeneratedAnchors",new Set),o=Gb().filter((e=>!t.includes(e))).map((e=>{var t,n;return null===(t=Hb(e))||void 0===t||null===(n=t.attributes)||void 0===n?void 0:n.anchor})).filter(Boolean).concat([...n]),r=(0,q.slugify)(e);let a=0,i=r;for(;-1!==o.indexOf(i);)a++,i=`${r}-${a}`;n.add(i),(0,b.setInGenerationSession)("sectionsGeneratedAnchors",n);let l=a?`${e} ${a}`:e;return l=l.split(" ").map(m.upperFirst).join(" "),{name:l,anchor:i}},Ub=async e=>{let{section:t,pageTitle:n,siteContext:o,pageContext:r,generateAnchorAndName:a=!0}=e;const i=(0,l.sectionCategoryToLabel)(t.category);let s,c,u;const{name:d,anchor:m}=a?jb(i):{};try{[u,c]=await(0,b.fillSectionTemplate)({...t,pageTitle:n,siteContext:o,pageContext:r,label:d,anchor:m}),s=Fb(u),s=Wb(s,o,r)}catch(e){throw e}return[s,c]},Wb=(e,t,n)=>(e=(0,q.cleanFontFamilyFromBlocks)(e),(0,q.walkBlocks)(e,(o=>(0,u.applyFilters)("kubio.ai.generateSectionBlocks.afterBlockGenerated",o,t,n,e))),e),{NAVIGATION:Vb,NAVIGATION_TOP_BAR:Kb,NAVIGATION_ITEMS:$b,NAVIGATION_STICKY_ITEMS:qb}=(0,Wo.getNamesOfBlocks)(),Yb=async function(e){let{pageContext:t,siteContext:n,pageTitle:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=e.map((e=>(0,Mr.cloneBlock)(e)));const r=[];return(0,s.walkBlockTree)(e,(async e=>{[Kb,$b,qb].includes(e.name)&&r.push((async()=>{try{const[r]=await Ub({section:{category:Kb===e.name?"navigation-top-bar":"navigation",template:(0,q.transformBlockToTemplate)(e)},pageTitle:o,siteContext:n,pageContext:t}),{attributes:a,innerBlocks:i}=r[0];p().set(e,"attributes",a),p().set(e,"innerBlocks",i)}catch(t){X.Log.error(`Kubio AI section generation error - navigation section: ${e.name}`,t,e)}}))})),await Promise.allSettled(r.map((e=>e()))),e},Xb=async e=>{let{sectionCategory:t,pageContext:n,siteContext:o,pageTitle:r,replaceBlocks:a,block:i}=e;try{const e=(0,q.transformBlockToTemplate)(i);if(i.name===Vb){const[e]=await Yb([i],{pageTitle:r,siteContext:o,pageContext:n});return void a(i.clientId,e,0)}const[l]=await Ub({section:{category:t,template:e},pageContext:n,siteContext:o,pageTitle:r,includeContent:!1});a(i.clientId,l,0)}catch(e){X.Log.error("headerInnerBlocksReplaceContent",e)}},Zb=()=>(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.Icon,{className:"kubio-ai-logo-animated kubio-ai-logo-colored",icon:Y.KubioAI})),Jb=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=null==e?void 0:e.querySelector(`[data-block="${t}"]`);if(r)if(n)if(o){const t=e.createElement("div");t.classList.add("kubio-ai-generating-section-overlay"),r.append(t),(0,s.reactRender)((0,i.createElement)(Zb,null),t)}else{const e=r.querySelector(".kubio-ai-generating-section-overlay");e&&((0,s.reactUnmount)(e),e.remove())}else r.classList[o?"add":"remove"]("kubio-ai-is-generating")},{HEADER:Qb,FOOTER:ev,SECTION:tv,COLUMN:nv,IMAGE:ov}=(0,Wo.getNamesOfBlocks)(),rv=[Qb,ev,tv,nv,ov],av=e=>{const{ownerDocument:t}=(0,s.useOwnerDocumentContext)(),[n,o]=(0,i.useState)(!1),r=(0,w.useSelect)((()=>{const t=(0,w.select)("core/block-editor").getBlock(e);return!!t&&rv.includes(t.name)}),[e]);return[n,(0,i.useCallback)((n=>{o(n),Jb(t,e,r,n)}),[e,r,t])]},{NAVIGATION:iv,HERO:lv}=(0,Wo.getNamesOfBlocks)(),sv=async(e,t,n,o)=>{let r=[];const a=(()=>{const{getEntityRecords:e}=(0,w.select)("core");return(e("postType","wp_template_part",{per_page:-1})||[]).find((e=>{let{kubio_template_source:t,slug:n}=e;return"kubio"===t&&["header",""].includes(n)}))||null})();if(!a)return;const i=p().get(e,"2",[]),l=(0,m.cloneDeep)(i.find((e=>e[0]===iv)));let s=(0,m.cloneDeep)(i.find((e=>e[0]===lv)));if(l&&(r=Wb(r.concat((0,m.castArray)(Fb(l))),n,o)),s){s=(0,u.applyFilters)("kubio.ai.generateSectionBlocks.beforeBlockGenerated",s);const[e]=await Ub({section:{category:"hero",template:s},pageTitle:t,siteContext:n,pageContext:o});r=r.concat((0,m.castArray)(e))}if((0,m.isEmpty)(r))return;const c={blocks:r,content:e=>{let{blocks:t=[]}=e;return(0,Mr.__unstableSerializeAndClean)(t)}},{editEntityRecord:d}=(0,w.dispatch)("core");d("postType","wp_template_part",a.id,c)},cv=async(e,t)=>{let{clientId:n,sectionCategory:o,pageContext:r,siteContext:a,pageTitle:i,replaceBlocks:l,clearSelectedBlock:s=m.noop,setAIData:c=m.noop,summary:u="",currentSectionCloudId:d=null,usedSections:p=null}=e,h=[];p&&p.items.has(n)&&(h=[...p.items.get(n)]);try{if(!t){X.Log.info(`Used sections: ${h.join()||"N/A"} | Section id: ${d}`);const e=(0,b.getPageContentSectionTemplate)({category:o,siteContext:a,returnAll:!0,skipIds:(0,m.isNumber)(d)?[d]:[]});let n=null;const r=e.filter((e=>!h.includes(e.cloudPresetId)));if(r.length)n=r[0],h.push(n.cloudPresetId);else{const t=h.shift();n=e.find((e=>e.cloudPresetId===t))||e[0]}(0,m.isNumber)(d)&&!h.includes(d)&&h.push(d),t=n.template}const[e]=await Ub({section:{category:o,template:t,summary:u},pageContext:r,siteContext:a,pageTitle:i});l(n,e);const g=e[0].clientId;if(p){const e=new Map(p.items);e.delete(n),e.set(g,(0,m.uniq)(h)),p.setItems(e)}if(r.isFrontPage&&"cta"===o){const t=(0,m.cloneDeep)(a);(0,m.set)(t,["cta","pattern"],{category:o,template:e.map(q.transformBlockToTemplate),summary:u}),c(t,"siteContext"),(0,b.saveAiGeneralSettings)(t)}window.requestIdleCallback((()=>{s(g)}))}catch(e){X.Log.error("contentSectionReplaceDesign",e)}},{NAVIGATION:uv}=(0,Wo.getNamesOfBlocks)(),dv=async e=>{let{sectionCategory:t,pageContext:n,siteContext:o,pageTitle:r,replaceBlocks:a,block:i,includeContent:l=!0,shouldReplaceBlock:s=!0}=e;try{const e=(0,q.transformBlockToTemplate)(i),[c]=await Ub({section:{category:t,template:e},pageContext:n,siteContext:o,pageTitle:r,includeContent:l});return s&&a(i.clientId,c,0),c[0]}catch(e){X.Log.error("footerInnerBlocksReplaceContent",e)}},{HEADER:mv,FOOTER:pv}=(0,Wo.getNamesOfBlocks)(),{HEADER:hv,FOOTER:gv}=(0,Wo.getNamesOfBlocks)(),fv=e=>{const{getClientIdsWithDescendants:t,getBlock:n,getBlockIndex:o}=(0,w.select)("core/block-editor"),{updateBlockAttributes:r,__unstableMarkLastChangeAsPersistent:a}=(0,w.dispatch)("core/block-editor"),i=t().map(n).find((e=>"hero-accent"===(0,m.get)(e,["attributes","kubioAI","meta","category"])));if(i&&0===o(i.clientId)){const t=(0,m.cloneDeep)(i.attributes.kubio);(0,m.set)(t,"style.descendants.inner.margin.top.value",e?-170:0),(0,m.set)(t,"props.overlapSection",e),(0,m.set)(t,"hash",Ru().generate()),a(),r(i.clientId,{kubio:t})}},bv=()=>{const{dataHelper:e,...t}=(()=>{const{dataHelper:e}=(0,s.useKubioBlockContext)(),t=e.clientId,[{pageContext:n,siteContext:o,pageTitle:r},a]=(0,b.useAIData)(),{replaceBlocks:c,replaceInnerBlocks:u,selectBlock:d,clearSelectedBlock:h}=(0,w.useDispatch)("core/block-editor"),{block:g,innerBlocks:f,isFrontPage:v}=(0,w.useSelect)((e=>{const{getBlockParentsByBlockName:n,getBlock:o}=e("core/block-editor"),{getIsFrontPage:r=p().noop}=e("kubio/edit-site")||{},a=o((0,m.first)(n(t,[mv,pv])||[])||t);return{block:a,innerBlocks:e("core/block-editor").getBlocks(a.clientId),isFrontPage:r()}}),[t]),_=(0,i.useMemo)((()=>{let t=(e.getAttribute("anchor","section")||"section").replace(/\-\d+/,"");return t=(0,l.normalizeCategorySlug)(t),e.getAttribute("kubioAI.meta.category",t)}),[e]);return(0,i.useMemo)((()=>({clientId:g.clientId,sectionCategory:_,pageContext:n,siteContext:o,pageTitle:r,replaceBlocks:c,replaceInnerBlocks:u,block:g,innerBlocks:f,name:g.name,selectBlock:d,clearSelectedBlock:h,isFrontPage:v,dataHelper:e,setAIData:a})),[g,_,n,o,r,c,u,f,d,h,v,e,a])})(),[n,o]=(0,f.useGlobalSessionProp)("kubioAISurpriseMeUsedItems",new Map),r=(0,i.useMemo)((()=>({...t,usedSections:{items:n,setItems:o}})),[o,t,n]),[a,c]=av(r.clientId),{clearSelectedBlock:u}=(0,w.useDispatch)("core/block-editor"),d=(0,i.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a)return;const n=p().merge({},r,t);u(),c(!0);const o=(0,b.initGenerationSession)();try{switch(n.name){case hv:const{pair:t,overlappable:o}=await async function(e){let{clientId:t,pageContext:n,siteContext:o,pageTitle:r,replaceInnerBlocks:a,clearSelectedBlock:i=m.noop,isFrontPage:l=!0,pairPattern:s,usedSections:c=null}=e,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,d=null;const p=c&&c.items.get(t)||[];try{const{navigation:e,hero:h,pairCloudPresetId:g,name:f,overlappable:v}=(0,b.getPageHederTemplate)(u,l,{skipSlugs:p});X.Log.info(`Skipping headers: ${p.join()||"N/A"}`),p.includes(f)||p.push(f);const _=g?(0,b.findPattern)("*",{findBy:{cloudPresetId:g},skipSlugs:p}):null;d=s||_;let y=[];if(e){const t=(0,m.cloneDeep)(e);y=await Yb(Fb(t),{pageTitle:r,siteContext:o,pageContext:n})}const[k]=await Ub({section:{category:"hero",template:h},pageTitle:r,siteContext:o,pageContext:n});return y=Wb(y,o,n),await a(t,[...y,...k].filter(Boolean)),c&&(c.items.set(t,p),c.setItems(new Map(c.items))),i(),{pair:d,overlappable:v}}catch(e){X.Log.error("headerReplaceDesign",e)}return{pair:d}}(n,e);n.isFrontPage&&t&&(await sv((0,m.get)(t,["content","2"],[]),n.pageTitle,n.siteContext,n.pageContext),fv(o||n.overlappable));break;case gv:await async function(e){let{clientId:t,pageContext:n,siteContext:o,pageTitle:r,replaceInnerBlocks:a,replaceBlocks:i,selectBlock:l=m.noop,isFrontPage:s=!0}=e,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const e="footer",s=c||(0,b.getPageFooterTemplate)(o),u=Fb(s)[0].innerBlocks,d=[];for(let t=0;t<u.length;t++){const a=u[t],l=await dv({sectionCategory:e,pageContext:n,siteContext:o,pageTitle:r,replaceBlocks:i,block:a,includeContent:!0,shouldReplaceBlock:!0});d.push(l)}await a(t,d),l(t)}catch(e){X.Log.error("footerReplaceDesign",e)}}(n,e);break;default:await cv(n,e)}}catch(e){X.Log.error("replaceDesign",e)}finally{o()}c(!1)}),[u,a,r,c]),g=(0,i.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(a)return;u(),c(!0);const t=(0,b.initGenerationSession)(),n=p().merge({},r,e);try{switch(n.name){case hv:await(async e=>{let{sectionCategory:t,pageContext:n,siteContext:o,pageTitle:r,replaceBlocks:a,innerBlocks:i,clearSelectedBlock:l=m.noop}=e;const s=i.filter((e=>e.name!==Vb)),c=i.filter((e=>[Vb].includes(e.name)));for(let e=0;e<s.length;e++){const i=s[e];await Xb({sectionCategory:t,pageContext:n,siteContext:o,pageTitle:r,replaceBlocks:a,block:i})}for(let e=0;e<c.length;e++){const i=c[e];await Xb({sectionCategory:t,pageContext:n,siteContext:o,pageTitle:r,replaceBlocks:a,block:i})}l()})(n);break;case gv:await(async e=>{let{sectionCategory:t,pageContext:n,siteContext:o,pageTitle:r,replaceBlocks:a,innerBlocks:i}=e;for(let e=0;e<i.length;e++){const l=i[e];await dv({sectionCategory:t,pageContext:n,siteContext:o,pageTitle:r,replaceBlocks:a,block:l,includeContent:!1})}})(n);break;default:await(async e=>{let{clientId:t,sectionCategory:n,pageContext:o,siteContext:r,pageTitle:a,replaceBlocks:i,block:l,setAIData:s=m.noop,summary:c=""}=e;try{const e=(0,q.transformBlockToTemplate)(l),u=await(async e=>{let{section:t,pageTitle:n,siteContext:o,pageContext:r,includeContent:a=!0,clientId:i}=e;const l=t.category.replaceAll(".",""),{name:s,anchor:c}=jb(l,[i]),[u]=await(0,b.rephraseSectionTemplate)({...t,pageTitle:n,siteContext:o,pageContext:r,label:s,anchor:c,includeContent:a});let d=Fb(u);return d=Wb(d,o,r),d})({section:{category:n,template:e,summary:c},pageContext:o,siteContext:r,pageTitle:a,includeContent:!0,clientId:t});if(i(t,u),o.isFrontPage&&"cta"===n){const e=(0,m.cloneDeep)(r);(0,m.set)(e,["cta","pattern"],{category:n,template:u.map(q.transformBlockToTemplate),summary:c}),s(e,"siteContext"),(0,b.saveAiGeneralSettings)(e)}}catch(e){X.Log.error("contentSectionReplaceContent",e)}})(n)}}catch(e){X.Log.error("replaceDesign",e)}finally{t()}c(!1)}),[u,a,r,c]),v=(0,i.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(a)return;const t=(()=>{switch(r.name){case hv:return"kubio-header";case gv:return"kubio-footer";default:return"kubio-content"}})(),n=(0,m.get)(r,"sectionCategory","section"),o="kubio-header"!==t||r.isFrontPage?"section"===n||"kubio-content"!==t?void 0:`${t}/${n}`:h.INNER_HEADERS_CATEGORY;let i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=(0,m.cloneDeep)(e.content),o=e.categories[0].split("/")[1],r=e.pairCloudPresetId?(0,b.findPattern)("*",{findBy:{cloudPresetId:e.pairCloudPresetId}}):null;try{await d(n,{sectionCategory:o,pairPattern:r,summary:t,overlappable:[...e.publicTags||[],...e.internalTags||[]].includes("overlappable")})}catch(e){X.Log.error("replaceDesign",e)}};if(e){const t=i;i=n=>e(n,t)}const l={page:"sections",disabledPages:["starterSite","pages"],sections:{categoryType:t,category:o,internalTag:h.AI_READY_TAG,onActionFunc:i}};(0,q.onOpenTemplateGalleryWithParams)(l)}),[a,r,d]);return{replaceDesign:d,replaceContent:g,replaceDesignFromGallery:v,dataHelper:e}},vv=e=>new Promise((t=>{setTimeout(t,e)})),_v="generating",yv="generated";class kv{constructor(e,t,n,o,r){Hr(this,"insertBlocks",void 0),Hr(this,"queue",[]),Hr(this,"insertedSections",[]),Hr(this,"queuedSections",new Map),Hr(this,"preCreatedSections",{}),Hr(this,"pageTitle",void 0),Hr(this,"siteContext",void 0),Hr(this,"pageContext",void 0),this.pageTitle=t,this.siteContext=n,this.pageContext=o,this.notify=r,this.insertBlocks=e}initialize(e){for(const t of e)this.queuedSections.set(t.slug,{id:Ru().generate(),category:t.category,section:t,inserted:!1,blocks:null}),this.queue.push(t.slug)}async generateSection(e){const t=this.queuedSections.get(e),n=this.preCreatedSections[t.category];if(n)return t.status=_v,X.Log.info((0,T.sprintf)("Start generating - %s",e)),t.blocks=n.map(q.transformTemplateToBlock),void(t.status=yv);try{t.status=_v,X.Log.info((0,T.sprintf)("Start generating - %s",e));const[n]=await Ub({section:t.section,pageTitle:this.pageTitle,siteContext:this.siteContext,pageContext:this.pageContext,generateAnchorAndName:!1});t.blocks=n,t.status=yv,this.queuedSections.set(e,t)}catch(n){this.queue.map(((t,n)=>t===e?n:-1)).filter((e=>e>=0)).forEach((e=>this.queue.splice(e,1))),X.Log.error("Kubio AI section generation error",n,t.section)}}async generate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&this.notify((0,T.__)("Preparing page content","kubio")),this.preCreatedSections=t;const n=(0,q.getBackendData)("kubioAIParallelCalls",3),o=(0,m.chunk)(this.queue,n);for(const t of o)await this.executeChunk(t,e)}async executeChunk(e,t){await vv(t?1e3:0),await Promise.allSettled(e.map(((e,t)=>this.generateSection(e,t))))}getInsertedSections(){return this.insertedSections}async insert(){const e=this.queue[0],t=this.queuedSections.get(e);if(this.notify(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,T.sprintf)(// translators: %s section name
(0,T.__)('Generating "%s" section',"kubio"),(0,l.sectionCategoryToLabel)(e))}(t.category)),t.status!==yv)return await vv(500),await this.insert();const n={...t,blocks:t.blocks.map((e=>{const t=(0,Mr.cloneBlock)((0,m.cloneDeep)(e)),n=(0,m.get)(e,"attributes.kubioAI.meta.category","section"),o=(0,l.sectionCategoryToLabel)(n),{name:r,anchor:a}=jb(o);return(0,m.set)(t,"attributes.anchor",a),(0,m.set)(t,"attributes.attrs.name",r),t}))};return this.insertedSections.push(n),this.queue.shift(),await this.insertBlocks(n.blocks),this.queue.length?(await vv(500),await this.insert()):void 0}}const Ev=(0,m.debounce)(q.scrollIntoView,300),{NAVIGATION:Sv,HERO:wv}=(0,Wo.getNamesOfBlocks)(),Cv=["home","about","features","portfolio","pricing","team","contact"],Iv=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e=ne(e).toHsl();const o=n||t,r=t;return ne({...e,l:Math.floor(Math.random()*(o-r+1)+r)}).toHexString()},xv=()=>{const[e,t]=(0,i.useState)(!1),[n,o]=(0,i.useState)((0,T.__)("Generating…","kubio")),r=(0,f.useBlocksOwnerDocument)(),{setItems:a}=(0,za.usePrimaryMenuBlockEditor)(),{createErrorNotice:l}=(0,s.useKubioNotices)(),{postContentClientId:c,getHeaderClientId:d,getBlocks:p,isFSETemplate:_,themeSlug:y}=(0,w.useSelect)((e=>{var t;const{getClientIdsWithDescendants:n,getBlock:o,getBlocks:r}=e("core/block-editor"),{currentPageHasFSETemplate:a}=e(h.STORE_KEY),i=a(),l=e=>{const t=(0,m.castArray)(e),r=n().map((e=>o(e))).find((e=>t.includes(e.name)));return null==r?void 0:r.clientId};return{isFSETemplate:i,getBlocks:r,postContentClientId:i?l("core/post-content"):null,getHeaderClientId:()=>l("kubio/header"),getCurrentHeaderStructure:()=>{const e={};return p(l("kubio/header")).forEach((t=>{t.name===wv&&(e.hero=(0,q.transformBlockToTemplate)(t)),t.name===Sv&&(e.navigation=(0,q.transformBlockToTemplate)(t))})),e},themeSlug:null===(t=e("core").getCurrentTheme())||void 0===t?void 0:t.template}}),[]),{insertBlocks:k,replaceInnerBlocks:E,clearSelectedBlock:C}=(0,w.useDispatch)("core/block-editor"),{editEntityRecord:I,saveEntityRecord:x}=(0,w.useDispatch)("core"),{setLogoImage:P}=(0,v.useSiteLogoImages)(),[R,O]=Gf(),[A,N]=(0,b.useAIData)(),{globalStyle:M}=(0,v.useGlobalDataStyle)(),{setPalette:D}=(0,v.useGlobalDataColors)(),[,z]=(0,S.useEntityProp)("root","site","title"),B=(0,w.useSelect)((e=>{var t,n;const{getPage:o,getEntity:r}=e(h.STORE_KEY),a=(null===(t=o())||void 0===t?void 0:t.link)||null,i=(null===(n=r())||void 0===n?void 0:n.path)||null;return(a||i||"").replace(/\/$/,"")}),[]),L=(0,i.useCallback)((async e=>{await k(e,p(c).length,null===c?"":c,!1),await new Promise((t=>{setTimeout((()=>{Ev(null==r?void 0:r.querySelector(`[data-block="${e[0].clientId}"]`),{block:"center",onScrollEnd:()=>(0,m.delay)(t,200)})}),300)}))}),[r,p,c,k]),F=(0,i.useRef)(null),G=(0,i.useCallback)((e=>{const t=F.current;t&&top.requestIdleCallback((()=>{setTimeout((()=>{Ev(null==r?void 0:r.querySelector(`[data-block="${t}"]`),{block:"start",smooth:!0,onScrollEnd:e})}),500)}))}),[r]),H=(0,i.useCallback)((()=>{const e=c;return C(),E(e,[])}),[C,c,E]),j=(0,i.useCallback)((e=>{const t=d();E(t,e)}),[d,E]),{frontPageEntity:U}=A,W=(0,i.useCallback)((async e=>{var t;const{pageContext:n,siteContext:o,pageTitle:r,record:a,isFrontPage:i}=e;await I("postType",a.type,a.id,{meta:{saved_in_kubio:!0},title:r,kubio_ai_page_context:n}),null!==(t=o.website_logo)&&void 0!==t&&t.id&&P(o.website_logo.id),i&&o.business_name&&z(o.business_name)}),[I,P,z]),V=(0,i.useCallback)((async e=>{const t=[],{siteContext:n,isFrontPage:r=!1,isRegenerate:i=!1,isMultiPage:l=!1}=e;if(r&&!i&&l){o((0,T.__)("Generating site structure ","kubio"));const e=await(0,b.generateSiteStructure)({siteContext:(0,m.omit)(n,"otherPages")});if(e.length)for(const n of e)t.push(await x("postType","page",{title:n,status:"publish",template:"full-width"}));const r=[U,...t].filter(Boolean);if(r.length){const e=(0,za.generateItemInitialData)(),t=r.map(((t,n)=>({...e,id:e.id-n,type:"post_type",object:"page",objectId:t.id,label:t.title.rendered,order:n+1})));a(t)}}return(0,m.uniq)([...n.otherPages||[],...t],"id").map((e=>({id:e.id,title:(0,m.isString)(e.title)?e.title:e.title.rendered})))}),[U,x,a]),K=(0,i.useCallback)((e=>{const t=(0,za.generateItemInitialData)();if(e.length){const n=e.filter((e=>Cv.includes(e.category))).map(((e,n)=>{const o=(0,m.get)(e.blocks,[0,"attributes","anchor"]),r=(0,m.get)(e.blocks,[0,"attributes","attrs","name"]);return{...t,id:t.id-1-n,objectId:t.id-1-n,url:`${B}/#${o}`,label:r,order:n+2}})),o=[U?{...t,id:t.id,type:"post_type",object:"page",objectId:U.id,label:U.title.rendered,order:1}:null,...n];a(o.filter(Boolean))}}),[B,U,a]),$=(0,i.useCallback)((async e=>{var t,n;const{siteContext:r,isFrontPage:a=!1}=e;let i=(null==r?void 0:r.siteMood)||h.SITE_MOOD_VALUES.NEUTRAL,l="organization",s="both",c="",u="";const d={pattern:a?null:null===(t=e.siteContext)||void 0===t||null===(n=t.cta)||void 0===n?void 0:n.pattern,text:""};if(a){o((0,T.__)("Determine the website particularities","kubio"));try{const{mood:e,websiteSubject:t,ownerType:n,clientType:o,cta:a,coreBusiness:p}=await(0,b.determineSiteMood)({siteContext:(0,m.omit)(r,"otherPages")});i=e,l=n,s=o,u=p,d.text=a,c=t}catch(e){X.Log.error("Unable to determine site mood with AI",e)}}return X.Log.info(`Site mood is: ${i}`),{siteMood:i,cta:d,ownerType:l,clientType:s,websiteSubject:c,coreBusiness:u}}),[]),Y=(0,i.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const{pageContext:n,siteContext:r,pageTitle:a}=e;o((0,T.__)("Generating page structure","kubio"));let i=await(0,b.getPageSectionsTemplates)({pageTitle:a,siteContext:r,pageContext:{...n,sortSections:!0}});if((0,m.isEmpty)(i)&&t)i=await Y(e,t-1);else if((0,m.isEmpty)(i)){const e=(0,T.__)("There was an error with the KubioAI services. If the error persists, please contact support","kubio");throw new b.AIApiError(e,{cause:"empty_page_structure"})}return i}),[]),Z=(0,i.useCallback)((async(e,t)=>{const{pageContext:n,pageTitle:r,siteContext:a,isFrontPage:i=!1}=e;if(!i)return;let l=(0,m.sample)(h.colorPalettes.filter((e=>e.mood===t)));try{o((0,T.__)("Blending colors for an exceptional color palette","kubio"));const e=await(0,b.generateColorScheme)({pageContext:n,siteContext:a,pageTitle:r,mood:t});l={colors:[...e,Iv(e[1],98,100),Iv(e[0],5,10)]}}catch(e){X.Log.error("Error determining site colors",e)}l&&D(l.colors),X.Log.info(`Picked color palette mood is: ${l.label}`)}),[D]),J=(0,f.useSetGlobalSessionProp)("aiFrontPageHeroImageVariantsData"),Q=(0,i.useCallback)((async(e,t)=>{if(!_)return;const{pageContext:n,pageTitle:r,siteContext:a,isFrontPage:i=!1,isRegenerate:l}=e;if(!i)return;o((0,T.__)("Crafting an engaging website header","kubio"));let s,c=null,d=null,m=null,p=null,h=!0;l||(s=(0,b.getPageHederTemplate)(null,!0,{tag:[`theme-${y}`]})),s||(s=(0,b.getPageHederTemplate)(null,!0,{tag:[t]})),c=s.navigation,d=s.hero,m=s.bodyStyle,p=s.pairTemplate,h=s.overlappable,(0,b.setInGenerationSession)("currentHeaderIsOverlappable",h),d=(0,u.applyFilters)("kubio.ai.generateSectionBlocks.beforeBlockGenerated",d);const[g,f]=await Promise.allSettled([c?Yb(Fb(c),{pageContext:n,siteContext:a,pageTitle:r}):new Promise((e=>e([]))),Ub({section:{category:"hero",template:d},pageTitle:r,siteContext:a,pageContext:n})]),v=await g.value,[k]=await f.value;if(p)try{sv(p,r,a,{...n,isFrontPage:!1})}catch(e){X.Log.error("Generating inner header error",e)}return m&&top.requestIdleCallback((()=>{setTimeout((()=>{M.setStyle("",m,{styledComponent:"body",media:"desktop",mergeData:!1})}),10)})),i&&Pv({heroBlock:k[0],setAiFrontPageHeroImageVariantsData:J}),j([...v,...k]),k[0].clientId}),[_,j,y,M,J]),ee=(0,f.useSetGlobalSessionProp)("showAiPostGenerateInterface"),te=(0,i.useCallback)((async()=>{const{pageContext:e,siteContext:n,pageTitle:r,isFrontPage:a=!1,isMultiPage:i}=A;t(!0),F.current=null,await W(A);const l=await V(A),{siteMood:s,clientType:c,cta:u,ownerType:d,websiteSubject:p,coreBusiness:h}=await $(A),g={...A,siteContext:{...n,otherPages:l,isMultiPage:i,siteMood:s,clientType:c,cta:u,ownerType:d,websiteSubject:p,coreBusiness:h},pageContext:{...e,isFrontPage:a}},f=new kv(L,r,g.siteContext,g.pageContext,o);let v=await Y(g);if(a){const e=v.find((e=>"cta"===e.category));g.siteContext.cta.pattern=(0,m.cloneDeep)(e)}if(v=((e,t)=>{const{isFrontPage:n,siteContext:o}=t,r=o.cta.pattern||null;if(e=[...e],!r)return e;if(n){const t=(0,m.findIndex)(e,(e=>"features"===e.category));t>=0&&e.splice(t+1,0,r)}else e=e.map((e=>"cta"===e.category?{...r,slug:"website-main-cta-section"}:e));return e})(v,g),await H(),f.initialize(v),f.generate(a,{cta:a?null:(0,m.get)(g,"siteContext.cta.pattern.template",null)}),F.current=await Q(g,s),await Z(g,s),await f.insert(),_){const e=(0,b.getFromGenerationSession)("currentHeaderIsOverlappable",null);null!==e&&fv(e)}t(!1),O(!1);const y=f.getInsertedSections();if(a&&_&&(document.body.classList.toggle("kubio-ai-will-show-front-page-wizard",!0),i||K(y)),a){const e=y.find((e=>"cta"===e.category));e&&(g.siteContext.cta.pattern.template=e.blocks.map(q.transformBlockToTemplate))}F.current||(F.current=(0,m.get)(y,["0","blocks","0","clientId"])),a&&((0,b.saveAiGeneralSettings)(g.siteContext),N(g)),G((()=>{a&&_&&top.requestIdleCallback((()=>{setTimeout((()=>{ee(!0)}),300)}))}))}),[A,W,V,$,L,Y,H,Q,Z,_,O,G,ee,K,N]),[ne]=(0,b.useAIServiceInfo)(),oe=(0,i.useRef)(!1);return(0,g.useEffectAsync)((async()=>{if(!A.record||!R||!0===oe.current)return;if(null===c&&_)return;if(ne.remainingCredits<ne.perPageCredits)return(0,u.doAction)("kubio.ai.zero_credits",{type:"page_generation"}),t(!1),void O(!1);const e=performance.now(),n=(0,b.initGenerationSession)();try{(0,u.addFilter)("kubio.dismissZeroCreditsModal","kubio.dismissZeroCreditsModal.pageGeneration",(()=>!0)),document.body.classList.add("kubio-ai-is-page-generating"),oe.current=!0,await te()}catch(e){e instanceof b.AIApiError?X.Log.error("Page generation: AI API Error",e):(X.Log.error("Page generation: JS Error",e),l((0,T.__)("KUBIO AI: There was an unknown error. If it persists, please contact support","kubio"),{duration:3e3}))}finally{t(!1),O(!1),oe.current=!1,n(),document.body.classList.remove("kubio-ai-is-page-generating"),X.Log.success("Generation time: "+Math.ceil((performance.now()-e)/100)/10),(0,u.removeFilter)("kubio.dismissZeroCreditsModal","kubio.dismissZeroCreditsModal.pageGeneration")}}),[ne,A,O,l,te,_,c]),(0,i.createElement)(i.Fragment,null,e&&(0,i.createElement)(eb,{message:n}))},Tv=e=>{e.forEach((e=>{(new window.Image).src=e}))},Pv=e=>{let{heroBlock:t,setAiFrontPageHeroImageVariantsData:n}=e;const o=(0,m.get)(t,["attributes"]),r=(0,m.get)(o,["kubio","style","descendants","outer","background"]),a=(0,m.get)(r,"type"),i=(e,t)=>e.filter((e=>e.split("?")[0]!==t.split("?")[0])),l={perPage:11};if("image"===a){const e=(0,m.get)(r,["image","0","source","url"]),a=(0,m.get)(o,["kubioAI","imageTerms"]);(0,b.searchImages)({...l,search:a,initialImage:e}).then((o=>{const r=i(o.items,e);n({currentValue:e,variants:r,clientId:t.clientId,blockName:t.name}),Tv(r)})).catch((e=>{console.error(e),n(null)}))}else{const e=(0,q.findBlockByName)(t,"kubio/image");if(e){const t=(0,m.get)(e,["attributes","url"]),o=(0,m.get)(e,["attributes","kubioAI","imageTerms"]);(0,b.searchImages)({...l,search:o,initialImage:t}).then((o=>{const r=i(o.items,t);n({currentValue:t,variants:r,clientId:e.clientId,blockName:e.name}),Tv(r)})).catch((e=>{console.error(e),n(null)}))}else n(null)}},Rv=()=>{const[e]=Gf(),t=(0,f.useGetGlobalSessionProp)("ready"),[n,o]=(0,i.useState)(),r=(0,s.useDebounce)((0,i.useCallback)((e=>o(e)),[]),300);return(0,i.useLayoutEffect)((()=>{t&&e&&r(!0)}),[t,e,r]),(0,i.createElement)(i.Fragment,null,n&&(0,i.createElement)(xv,null))},Ov=()=>{const[e,t]=(0,i.useState)(!0),[,n]=Gf(),o=(0,f.useGetGlobalSessionProp)("ready");return(0,w.useSelect)((e=>e(h.STORE_KEY).isAICapabilityEnabled()),[])&&o&&e&&(0,i.createElement)(oo,{onFinish:()=>{t(!1),n(!0)},onCancel:()=>t(!1),isFrontPage:!0,startWithAIFrontPage:!0})},Av=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z"})),Nv=7500,Mv=(0,i.memo)((()=>(0,i.createElement)(k.Icon,{icon:Y.DashiconCheckedIcon,className:"kubio-comparison-check-icon"}))),Dv=()=>(0,Nr.upgradeToPro)({source:"ai_upgrade_modal",content:"ai_upgrade_modal"}),zv=(0,i.memo)((()=>(0,i.createElement)(k.Icon,{icon:Y.DashiconUncheckedIcon,className:"kubio-comparison-close-icon"}))),Bv=e=>{let{children:t}=e;return(0,i.createElement)("div",{className:"kubio-comparison-tooltip"},t)},Lv=["attachment","kubio_changeset"],Fv=()=>{const[e]=(0,b.useAIServiceInfo)(),{aiImageCost:t=150,aiSectionCost:n=30}=e;return(0,i.createElement)(Bv,null,(0,i.createElement)("p",null,(0,T.sprintf)(// translators: %s is the number of credits
(0,T.__)("With %s credits you'll benefit of:","kubio"),Intl.NumberFormat().format(Nv))),(0,i.createElement)("ul",null,(0,i.createElement)("li",null,(0,T.sprintf)(// translators: %d is the number
(0,T.__)("%d full page generations","kubio"),Math.ceil(Nv/(10*n)))),(0,i.createElement)("li",null,(0,T.sprintf)(// translators: %d is the number
(0,T.__)("%d page sections generations","kubio"),Math.ceil(Nv/n))),(0,i.createElement)("li",null,(0,T.sprintf)(// translators: %d is the number
(0,T.__)("%d text generations","kubio"),Math.ceil(750))),(0,i.createElement)("li",null,(0,T.sprintf)(// translators: %d is the number
(0,T.__)("%d image generations","kubio"),Math.ceil(Nv/t)))),(0,i.createElement)("p",null,(0,T.__)("The numbers provided are approximations and may vary based on the size and complexity of the generated content","kubio")))},Gv=[{label:(0,T.__)("Generate pages with AI","kubio"),free:(0,T.__)("Homepage only","kubio"),pro:(0,T.__)("Multiple pages","kubio")},{label:(0,T.__)("Regenerate page section","kubio"),free:(0,i.createElement)(Mv,null),pro:(0,i.createElement)(Mv,null)},{label:(0,T.__)("Search images on Pexels","kubio"),free:(0,i.createElement)(Mv,null),pro:(0,i.createElement)(Mv,null)},{label:(0,T.__)("Generate images with AI","kubio"),free:(0,i.createElement)(zv,null),pro:(0,i.createElement)(Mv,null)},{label:(0,T.__)("Kubio AI credits","kubio"),tooltip:()=>(0,i.createElement)(Fv,null),free:500,pro:(0,T.sprintf)(// translators: %s is the amount of credits, e.g 7500
(0,T.__)("Starting from %s","kubio"),Intl.NumberFormat().format(Nv))},{label:(0,T.__)("Design variety on AI generated pages","kubio"),free:(0,T.__)("Limited","kubio"),pro:(0,T.__)("Full","kubio")},{label:(0,T.__)("Customize footer text","kubio"),free:(0,i.createElement)(zv,null),pro:(0,i.createElement)(Mv,null)},{label:(0,T.__)("Sticky navigation","kubio"),free:(0,i.createElement)(zv,null),pro:(0,i.createElement)(Mv,null)},{label:(0,T.__)("High converting navigation layouts","kubio"),tooltip:()=>(0,i.createElement)(Bv,null,(0,T.__)("Navigation layouts containing “call to action” buttons that will lead to better conversion rates.","kubio")),free:(0,i.createElement)(zv,null),pro:(0,i.createElement)(Mv,null)},{label:(0,T.__)("Beautiful hero sections","kubio"),free:"9",pro:"35+"},{label:(0,T.__)("Different hero image for each page","kubio"),free:(0,i.createElement)(zv,null),pro:(0,i.createElement)(Mv,null)},{label:(0,T.__)("Newsletter subscription forms","kubio"),free:(0,i.createElement)(zv,null),pro:(0,i.createElement)(Mv,null)},{label:(0,T.__)("Pricing tables","kubio"),free:(0,i.createElement)(zv,null),pro:(0,i.createElement)(Mv,null)},{label:(0,T.__)("Technical support","kubio"),free:(0,T.__)("Best effort","kubio"),pro:(0,T.__)("Priority support","kubio")}];let Hv=(0,i.createElement)(i.Fragment,null);Hv=e=>{let{onCancel:t}=e;const[n,o]=(0,i.useState)(!1),[r,a]=(0,i.useState)(!1),l=(0,i.useRef)(),{hasDirtyEntities:c,entitiesToSave:u}=(0,w.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t}=e("core");return{hasDirtyEntities:t().filter((e=>{let{kind:t,name:n}=e;return"postType"===t&&!Lv.includes(n)})).length>0,entitiesToSave:t()}})),{saveEditedEntityRecord:d}=(0,w.useDispatch)("core"),p=(0,s.useUnloadStoreEntities)(),h=(0,i.useCallback)((()=>{p(),window.location=(0,q.getBackendData)("wpAdminUpgradePage")}),[p]),g=(0,i.useCallback)((async()=>{o(!0);const e=u.map((e=>{let{kind:t,name:n,key:o}=e;return d(t,n,o)}));await Promise.all(e),window.location=(0,q.getBackendData)("wpAdminUpgradePage")}),[u,d]),f=(0,i.useCallback)((()=>{c?a(!0):window.location=(0,q.getBackendData)("wpAdminUpgradePage")}),[c]);return(0,i.createElement)("div",{className:"kubio-ai-zero-credits-upgrade"},(0,i.createElement)("div",{className:"kubio-ai-zero-credits-upgrade__content"},(0,i.createElement)("div",{className:"kubio-ai-zero-credits-upgrade__close-modal"},(0,i.createElement)(k.Button,{icon:De,onClick:t})),(0,i.createElement)(k.Flex,null,(0,i.createElement)(k.FlexBlock,{className:"kubio-ai-zero-credits-upgrade__content-column"},(0,i.createElement)("div",{className:"kubio-ai-zero-credits-upgrade__content-column__content"},(0,i.createElement)(k.Icon,{icon:Y.KubioAI,className:"kubio-ai-logo-colored kubio-ai-logo-animated"}),(0,i.createElement)("h1",null,(0,T.__)("Looks like you have used all your free Kubio AI credits.","kubio")),(0,i.createElement)("p",null,(0,T.__)("To continue generating website content with Kubio AI you will need to upgrade to Kubio PRO.","kubio")),(0,i.createElement)("p",null,(0,T.__)("You can also continue using the Kubio builder for free and you can keep the generated content, but you won't be able to enjoy the AI features anymore.","kubio")),(0,i.createElement)("p",null,(0,T.__)("On the right, you can see a few advantages offered by the PRO version.","kubio")),(0,i.createElement)(k.Flex,{className:"buttons-wrapper",justify:"flex-start"},(0,i.createElement)(k.Button,{variant:"primary",onClick:Dv,className:"kubio-ai-button"},(0,T.__)("Upgrade to PRO","kubio")),(0,i.createElement)(k.Button,{onClick:t,className:"kubio-ai-button-tertiary"},(0,T.__)("Maybe later","kubio"))),(0,i.createElement)(k.Flex,{align:"center",className:"kubio-zero-credits-already-purchased-wrapper"},(0,i.createElement)("span",null,(0,T.__)("Already purchased?","kubio")),(0,i.createElement)(k.Button,{ref:l,onClick:f,variant:"link",className:"kubio-ai-button-link is-small kubio-ai-activate-pro"},(0,T.__)("Activate PRO now","kubio")),r&&(0,i.createElement)(k.Popover,{inline:!0,anchor:l.current,placement:"top",offset:10,focusOnMount:!1,className:"kubio-ai-wizard-confirmation",shift:!0,flip:!0,onClose:()=>!n&&a(!1)},(0,i.createElement)(k.Flex,{className:"kubio-ai-wizard-confirmation__message",align:"flex-start",direction:"column"},(0,i.createElement)("h3",null,(0,T.__)("The current page has unsaved changes","kubio")),(0,i.createElement)("p",null,(0,T.__)("The Kubio PRO license activation process will take you to the WordPress admin area and the page you are currently editing has unsaved changes.","kubio")),(0,i.createElement)("p",null,(0,T.__)("Would you like to save these changes or discard them?","kubio"))),(0,i.createElement)(k.Flex,{justify:"flex-start",gap:5},(0,i.createElement)(k.Button,{className:"kubio-ai-button-tertiary has-text",onClick:h},(0,T.__)("Discard & activate","kubio")),(0,i.createElement)(k.Button,{className:"kubio-ai-button has-text",isBusy:n,onClick:g},(0,T.__)("Save & activate","kubio"))))))),(0,i.createElement)(k.FlexBlock,{className:"kubio-ai-zero-credits-upgrade__bg-column"},(0,i.createElement)("table",null,(0,i.createElement)("thead",null,(0,i.createElement)("tr",null,(0,i.createElement)("th",{className:"clear-border"}),(0,i.createElement)("th",{className:"kubio-comparison-header-free"},(0,T.__)("FREE","kubio")),(0,i.createElement)("th",{className:"kubio-comparison-header-pro"},(0,T.__)("PRO","kubio")))),(0,i.createElement)("tbody",null,Gv.map((e=>(0,i.createElement)("tr",{key:e.label},(0,i.createElement)("th",{className:"label-column"},(0,i.createElement)("span",null,!e.tooltip&&(0,i.createElement)("span",null,e.label),!!e.tooltip&&(0,i.createElement)(k.Tooltip,{delay:100,className:"kubio-comparison-tooltip-title",placement:"right",text:(0,m.isFunction)(e.tooltip)?e.tooltip():e.tooltip},(0,i.createElement)("span",{className:"item-has-tooltip"},e.label,(0,i.createElement)(k.Icon,{className:"tooltip-icon",icon:Av}))))),(0,i.createElement)("td",{className:"content-column"},e.free),(0,i.createElement)("td",{className:"content-column content-column--pro"},e.pro))))))))))};const jv=()=>{const e=(0,i.useRef)({}),[t,n]=(0,i.useState)(!1),o=(0,i.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(0,u.applyFilters)("kubio.dismissZeroCreditsModal",!1)){switch(t.type||"general"){case"page_generation":e.current={title:(0,T.__)("Credit status","kubio"),message:(0,T.__)("You currently do not have enough credits to generate a new page. To continue using this feature, please consider purchasing more credits.","kubio")};break;case"general":e.current={title:(0,T.__)("Credit status","kubio"),message:(0,T.__)("You currently do not have enough credits. To continue using this feature, please consider purchasing more credits","kubio")}}n(!0)}}),[]);(0,s.useAddWPAction)("kubio.ai.zero_credits",o);const[r,a]=(0,b.useAIServiceInfo)(),{createSuccessNotice:l}=(0,s.useKubioNotices)(),c=(0,i.useCallback)((async()=>{n(!1);try{const{remaining_credits:e=0,per_page_credits:t=30}=await(0,b.getAIInfo)();a({...r,state:"ready",remainingCredits:e,perPageCredits:t}),l((0,T.__)("Credit status updated!","kubio"),{type:"snackbar",duration:3e3})}catch(e){X.Log.error("Zero credits modal",e)}}),[r,l,a]),d=(0,i.useCallback)((()=>{n(!1)}),[]);return t&&(0,i.createElement)(k.Modal,{className:x()("kubio-ai-wizard-modal auto kubio-ai-zero-credits-upgrade-modal"),overlayClassName:"kubio-ai-zero-credits-upgrade__close-modal",__experimentalHideHeader:!0,title:null,isDismissible:!1},(0,i.createElement)(Hv,{message:e.current.message,refresh:c,onCancel:d}))},Uv=-1,Wv=()=>{const{isReady:e}=Db(),[t,n]=(0,i.useState)(0),[o,r]=(0,i.useState)(!1),[a,l]=Gf(),[s,c]=(0,f.useGlobalSessionProp)("displayingEmptyPageChecked",!0),u=(0,w.useSelect)((e=>e(h.STORE_KEY).isAICapabilityEnabled()),[]),{contentLength:d,isFrontPage:m,isPage:g}=(0,w.useSelect)((e=>{var t;const{getBlocks:n,getBlockOrder:o}=e("core/block-editor"),r=n()||[],{getIsFrontPage:a=p().noop,getPage:i=p().noop}=e("kubio/edit-site")||{},l=i()||{},s=(0,q.findBlockByName)(r,"core/post-content"),c=null==s?void 0:s.clientId;return{isFrontPage:a(),contentLength:null===(t=o(c))||void 0===t?void 0:t.length,isPage:"page"===p().get(l,"context.postType")}}));return(0,i.useEffect)((()=>{e&&n(0)}),[e]),(0,i.useLayoutEffect)((()=>{if(t!==Uv&&e&&u)if(a)n(Uv);else if(g&&!m)return d?void n(Uv):s?n(1):(n(Uv),void c(!1))}),[e,d,m,g,a,u,o,t,s]),(0,i.createElement)(i.Fragment,null,1===t&&(0,i.createElement)(nb,{showButton:!1,initialModalIsVisible:!0,onNewAiPage:()=>{n(Uv),r(!0)},onNewKubioPage:()=>{n(Uv)},onCancel:()=>{n(Uv)},title:(0,T.__)("Generate page content","kubio"),description:(0,T.__)("Choose a method to generate content for the current page","kubio")}),o&&(0,i.createElement)(oo,{onFinish:()=>{n(Uv),r(!1),l(!0)},onCancel:()=>{n(Uv),r(!1)},isRegenerate:!0,forceGenerateTitle:!0}))},Vv={secondarySidebar:(0,T.__)("Block Library","kubio"),drawer:(0,T.__)("Navigation Sidebar","kubio")},Kv=(0,E.createHigherOrderComponent)((e=>t=>{var n,o,r,a;let{initialSettings:l}=t;const{isFullscreenActive:c,sidebarIsOpened:u,settings:d,templateId:g,templateType:f,page:b,isNavigationOpen:v,isInserterOpen:_,isListViewOpen:y,isFSETemplate:k,currentSidebar:E}=(0,w.useSelect)((e=>{const{isFeatureActive:t,getSettings:n,getEditedPostType:o,getEditedPostId:r,getPage:a,isNavigationOpened:i,isListViewOpened:l,getEditorOpenedSidebar:s}=e(h.STORE_KEY),c=o(),u=r();return{isFullscreenActive:t("fullscreenMode"),sidebarIsOpened:e(h.STORE_KEY).isEditorSidebarOpened(),settings:n(),templateType:c,page:a(),templateId:u,isNavigationOpen:i(),isInserterOpen:e(h.STORE_KEY).getOpenedInserter(),isFSETemplate:!!u&&!!c,isListViewOpen:l(),currentSidebar:s()}}),[]),{postId:S,post:C,currentTemplateId:I,isKubioTheme:x}=(0,w.useSelect)((e=>{const t=p().get(b,["context","postId"]),n=p().get(b,["context","postType"]),{getEntityRecords:o,getEntityRecord:r}=e("core"),{getTemplateId:a=p().noop}=e("kubio/edit-site");if(!t||!n)return{postId:null,currentTemplateId:null,isKubioTheme:null,post:{}};let i;if(["wp_template","wp_template_part"].includes(n)){const e=o("postType",n,{wp_id:t});i=null==e?void 0:e[0]}else i=r("postType",n,parseInt(t));const l=a(),{getEditorSettings:s}=e(Rr.store);return{postId:t,currentTemplateId:l,isKubioTheme:s().supportsTemplateMode,post:i}}),[null==b||null===(n=b.context)||void 0===n?void 0:n.postId,null==b||null===(o=b.context)||void 0===o?void 0:o.postType]),{openSidebar:P}=(0,w.useDispatch)(h.STORE_KEY),{createInfoNotice:R}=(0,w.useDispatch)("core/notices");(0,i.useEffect)((()=>{P("document")}),[]);const{editEntityRecord:O}=(0,w.useDispatch)("core"),{updateEditorSettings:A,setupEditorState:N}=(0,w.useDispatch)("core/editor"),{defaultTemplateTypes:M}=d;(0,i.useEffect)((()=>{A({...l,defaultTemplateTypes:M})}),[M,l,A]),(0,i.useLayoutEffect)((()=>{const e=p().get(b,["context","postId"]),t=p().get(b,["context","postType"]);e&&t&&N({id:e,type:t})}),[null==b||null===(r=b.context)||void 0===r?void 0:r.postId,null==b||null===(a=b.context)||void 0===a?void 0:a.postType]),(0,i.useLayoutEffect)((()=>{var e;if(C&&"page"===C.type&&(null===(e=C.meta)||void 0===e||!e.saved_in_kubio)&&(0,m.isString)(I)){const e=x?"full-width":"kubio-full-width",t=I.includes(e),n=p().get(C,["content","raw"]),o=p().get(C,"template"),r=p().get(C,"id"),a=p().get(C,"type");!n&&t&&""===o&&((0,s.markLastChangeAsPersistent)(),O("postType",a,r,{template:e}),R((0,T.__)('New empty page detected. Page template was set to "Full Width"',"kubio"),{type:"snackbar"}))}}),[I,O,x,C,S]);const D={isListViewOpen:y,isFullscreenActive:c,sidebarIsOpened:u,templateId:g,templateType:f,page:b,isNavigationOpen:v,isInserterOpen:_,isFSETemplate:k,currentSidebar:E,startWithAIFrontPage:d.startWithAIFrontPage||!1,__experimentalGlobalStylesBaseStyles:d.__experimentalGlobalStylesBaseStyles,__experimentalGlobalStylesUserEntityId:d.__experimentalGlobalStylesUserEntityId};return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(e,D),(0,i.createElement)(Ab,null))}),"WithEditorCurrentEntity"),$v=(0,E.compose)(Kv,E.pure)((function(e){const{__experimentalGlobalStylesUserEntityId:t,sidebarIsOpened:n,templateId:o,templateType:r,page:a,isNavigationOpen:c,isInserterOpen:u,isListViewOpen:d,isFSETemplate:m,startWithAIFrontPage:p,currentSidebar:E}=e,{setPage:C}=(0,w.useDispatch)("core/editor"),I=(0,s.useActiveMedia)(),[P,R]=(0,i.useState)(!1),O=(0,i.useCallback)((()=>R(!0)),[]),A=(0,i.useCallback)((()=>{R(!1)}),[]);!function(){const{hasBlockSelection:e,isEditorSidebarOpened:t,isGlobalStyleEditing:n}=(0,w.useSelect)((e=>({hasBlockSelection:!!e("core/block-editor").getBlockSelectionStart(),isEditorSidebarOpened:e(h.STORE_KEY).isEditorSidebarOpened(),isGlobalStyleEditing:e(h.STORE_KEY).isGlobalStyleEditing()})),[]),{openSidebar:o}=(0,w.useDispatch)(h.STORE_KEY);(0,i.useEffect)((function(){t&&o(e?"block-inspector":n?"document/general-settings":"document")}),[e,t,n])}(),(()=>{const[e,t]=(0,i.useState)({}),[,n]=(0,xl.useCurrentInspectorTab)(),o=(0,w.useSelect)((e=>{const t=e("core/block-editor").getSelectedBlock();return{clientId:null==t?void 0:t.clientId,name:null==t?void 0:t.name}}));(0,i.useEffect)((()=>{(null==e?void 0:e.clientId)!==(null==o?void 0:o.clientId)&&(null==e?void 0:e.name)!==(null==o?void 0:o.name)&&(n("content"),t(o))}),[o,e,t,n])})();const N=(0,f.useGetGlobalSessionProp)("ready",!1),M=(0,i.useMemo)((()=>({...null==a?void 0:a.context,queryContext:[(null==a?void 0:a.context.queryContext)||{page:1},e=>C({...a,context:{...null==a?void 0:a.context,queryContext:{...null==a?void 0:a.context.queryContext,...e}}})]})),[a,C]);(0,i.useEffect)((()=>{c?document.body.classList.add("is-navigation-sidebar-open"):document.body.classList.remove("is-navigation-sidebar-open")}),[c]),(0,i.useEffect)((()=>(0,l.initializeGutentagPatterns)()),[]);const{uiVersion:D}=(0,g.useUIVersion)(),z=x()("kubio-sidebar",{"kubio-sidebar-hidden":(!n||u||d)&&1===D}),B=x()("kubio-secondary-sidebar",{"kubio-secondary-sidebar--closed":!(u||d),"kubio-secondary-sidebar-hidden":!(u||d)&&1===D}),{createErrorNotice:L}=(0,w.useDispatch)("core/notices");let F=(0,i.createElement)(i.Fragment,null),G=(0,i.createElement)(i.Fragment,null);N&&(2===D?G=(0,i.createElement)("div",{className:"kubio-sidebar-v2-wrapper"},d&&(0,i.createElement)("div",{className:"kubio-sidebar-list-view"},(0,i.createElement)(Ob,null)),(0,i.createElement)("div",{id:"kubio-main-sidebar",className:z,"data-sidebar-name":E},(0,i.createElement)(Ho.Slot,{scope:`${h.STORE_KEY}/sidebars`}),(0,i.createElement)(Rl,null)),(0,i.createElement)("div",{className:B},u&&(0,i.createElement)($o,null))):(F=(0,i.createElement)("div",{id:"kubio-main-sidebar",className:z},(0,i.createElement)(Ho.Slot,{scope:`${h.STORE_KEY}/sidebars`}),(0,i.createElement)(Rl,null)),G=(0,i.createElement)("div",{className:B},u&&(0,i.createElement)($o,null),d&&(0,i.createElement)(Ob,null))));const H=(0,i.createElement)(zb,{blockContext:M,templateId:o,templateType:r,page:a},(0,i.createElement)(b.AIDataProvider,null,(0,i.createElement)(v.KubioGlobalDataContextProvider,null,(0,i.createElement)(Na,null,(0,i.createElement)(_.GlobalStylesProvider,null,(0,i.createElement)(y.BlockContextProvider,{value:M},(0,i.createElement)(Lb,null),(0,i.createElement)(Kf.Register,null),(0,i.createElement)(Ol,null),(0,i.createElement)(Tr,null,(0,i.createElement)(Uo,{labels:Vv,drawer:(0,i.createElement)(Pb,null),sidebar:F,secondarySidebar:G,header:(0,i.createElement)(Wf,{openEntitiesSavedStates:O}),notices:(0,i.createElement)(Rb,null),content:(0,i.createElement)(i.Fragment,null,(0,i.createElement)(Rr.EditorNotices,null),m&&(0,i.createElement)(hs,null),!m&&(0,i.createElement)(gs,null),(0,i.createElement)(Kf,{openEntitiesSavedStates:O}),(0,i.createElement)("div",{id:"kubio-toolbar-boundary"})),actions:(0,i.createElement)(i.Fragment,null,(0,i.createElement)(Es,{isOpen:P,close:A})),footer:(0,i.createElement)(y.BlockBreadcrumb,null)})),(0,i.createPortal)((0,i.createElement)("div",{className:"kubio-popover-slot-container"},(0,i.createElement)(k.Popover.Slot,null),(0,i.createElement)(k.Popover.Slot,{name:"kubio-popover-slot"})),document.body),(0,i.createElement)(To.PluginArea,{onError:function(e){L((0,T.sprintf)(/* translators: %s: plugin name */(0,T.__)('The "%s" plugin has encountered an error and cannot be rendered.',"kubio"),e))}}),(0,i.createElement)(Rv,null))))),(0,i.createElement)(Wv,null),","));return(0,i.createElement)("div",{className:x()("kubio-editor-wrapper",`kubio-editor-wrapper--media-${I}`)},(0,i.createElement)(jo,{isActive:!0}),(0,i.createElement)(Rr.UnsavedChangesWarning,null),(0,i.createElement)(Or.ShortcutProvider,{style:{height:"100%"}},(0,i.createElement)(k.SlotFillProvider,null,(0,i.createElement)(S.EntityProvider,{kind:"root",type:"site"},m&&(0,i.createElement)(S.EntityProvider,{kind:"postType",type:r,id:o},(0,i.createElement)(S.EntityProvider,{kind:"postType",type:"wp_global_styles",id:t},H)),!m&&H))),N&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)(fs,null),(0,i.createElement)($f,{blockContext:M,templateId:o,templateType:r,page:a})),p&&(0,i.createElement)(Ov,null),(0,i.createElement)(jv,null))}));(0,u.addFilter)("editor.MediaUpload","kubio/edit-site/components/media-upload",(()=>wn.MediaUpload)),(0,u.addFilter)("editor.BlockEdit","kubio/advancedPanel",ki.withInspectorControlsAdvancedPanel);const qv=window.wp.dataControls,Yv={features:{fullscreenMode:!0}},Xv=(0,w.combineReducers)({features(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yv.features,t=arguments.length>1?arguments[1]:void 0;return"TOGGLE_FEATURE"===t.type?{...e,[t.feature]:!e[t.feature]}:e}}),Zv=(0,w.combineReducers)({preferences:Xv,deviceType:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Desktop",t=arguments.length>1?arguments[1]:void 0;return"SET_PREVIEW_DEVICE_TYPE"===t.type?t.deviceType:e},settings:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SETTINGS":return{...e,...t.settings};case"UPDATE_UI_VERSION":return ci()({path:(0,di.addQueryArgs)("/kubio/v1/update-ui-version",{version:t.version})}),{...e,kubioGlobalSettings:{...e.kubioGlobalSettings||{},editorUIVersion:t.version}};case"TOGGLE_AI_CAPABILITIES":return ci()({path:"/kubio/v1/update-enable-ai-capabilities",method:"POST",data:{value:t.value}}),{...e,kubioGlobalSettings:{...e.kubioGlobalSettings||{},enableAICapabilities:t.value}};case"UPDATE_EDITOR_MODE":return ci()({path:"/kubio/v1/update-editor-mode",method:"POST",data:{value:t.value}}),{...e,kubioGlobalSettings:{...e.kubioGlobalSettings||{},editorMode:t.value}}}return e},editedPost:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TEMPLATE":case"SET_PAGE":return{type:"wp_template",id:t.templateId,page:t.page};case"SET_PAGE_CONTENT":return{page:t.page};case"SET_TEMPLATE_PART":return{type:"wp_template_part",id:t.templatePartId,page:{context:{}}}}return e},homeTemplateId:function(e,t){return"SET_HOME_TEMPLATE"===t.type?t.homeTemplateId:e},navigationPanel:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{menu:Cs,isOpen:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_NAVIGATION_PANEL_TO_MENU":return{...e,isOpen:!0,menu:t.menu};case"SET_IS_NAVIGATION_PANEL_OPENED":return{...e,menu:t.isOpen?e.menu:Cs,isOpen:t.isOpen};case"SET_IS_INSERTER_OPENED":return{...e,menu:e.isOpen&&t.isOpen?Cs:e.menu,isOpen:!t.isOpen&&e.isOpen}}return e},blockInserterPanel:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_NAVIGATION_PANEL_TO_MENU":return!1;case"SET_IS_NAVIGATION_PANEL_OPENED":return!t.isOpen&&e;case"SET_IS_INSERTER_OPENED":return t.isOpen}return e},currentAncestor:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return"SET_CURRENT_ANCESTOR"===t.type?t.currentAncestor:e},templateId:function(e,t){switch(t.type){case"SET_TEMPLATE":case"ADD_TEMPLATE":case"SET_PAGE":case"SET_ENTITY":return t.templateId;case"SET_TEMPLATE_PART":return}return e},templatePartId:function(e,t){return"SET_TEMPLATE_PART"===t.type?t.templatePartId:e},templateType:function(e,t){switch(t.type){case"SET_TEMPLATE":case"ADD_TEMPLATE":case"SET_PAGE":case"SET_ENTITY":return"wp_template";case"SET_TEMPLATE_PART":return"wp_template_part"}return e},templateIds:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TEMPLATE":return[...e,t.templateId];case"REMOVE_TEMPLATE":return e.filter((e=>e!==t.templateId))}return e},templatePartIds:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]},page:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PAGE":case"SET_PAGE_CONTENT":case"SET_TEMPLATE":return t.page;case"SET_TEMPLATE_PART":return{context:{}}}return e},entity:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"SET_ENTITY"===t.type?t.entity:e},showOnFront:function(e){return e},subSidebars:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SUBSIDEBAR":return e[t.areaIdentifier]?e:{...e,[t.areaIdentifier]:t.sidebar};case"REMOVE_SUBSIDEBAR":return{...e,[t.areaIdentifier]:!1}}return e},globalStyleEditing:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{value:void 0,previousEntity:null},t=arguments.length>1?arguments[1]:void 0;return"TOGGLE_GLOBAL_STYLE_EDITING"===t.type?{...e,value:t.value,previousEntity:t.previousEntity}:e},openedInserter:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"TOGGLE_IS_INSERTER_OPEN"===t.type?(t.options=t.options||{},J()(e,t)?e:{value:null==t?void 0:t.value,clientId:null==t?void 0:t.rootClientId,options:(null==t?void 0:t.options)||{}}):e},isGutentagDebug:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"TOGGLE_GUTENTAG_DEBUG"===t.type?null==t?void 0:t.value:e},classicTemplate:function(e,t){switch(t.type){case"SET_PAGE":case"SET_PAGE_CONTENT":return{...e,id:null==t?void 0:t.classicTemplateId}}return e},listViewPanel:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_NAVIGATION_PANEL_TO_MENU":return!1;case"SET_IS_NAVIGATION_PANEL_OPENED":return!t.isOpen&&e;case"SET_IS_INSERTER_OPENED":return!t.value&&e;case"SET_IS_LIST_VIEW_OPENED":return t.isOpen}return e},aiInfo:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{remainingCredits:0},t=arguments.length>1?arguments[1]:void 0;return"UPDATE_AI_INFO"===t.type?(0,m.merge)(e,(0,m.cloneDeep)(t.value||{})):e},isChangingPage:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"SET_PAGE"===t.type&&(e=!!t.changingPage),e}}),{select:Jv,dispatch:Qv}=w.controls;function e_(e){return{type:"TOGGLE_FEATURE",feature:e}}function t_(e){return{type:"SET_PREVIEW_DEVICE_TYPE",deviceType:e}}function n_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function*(){const o={templateSlug:t};if(!t){const t=yield w.controls.resolveSelect("core","getEntityRecord","postType","wp_template",e);o.templateSlug=null==t?void 0:t.slug}return{type:"SET_TEMPLATE",templateId:e,page:{context:n?{}:o}}}()}function*o_(e){const t=yield w.controls.dispatch("core","saveEntityRecord","postType","wp_template",e);return{type:"SET_TEMPLATE",templateId:t.id,page:{context:{templateSlug:t.slug}}}}function*r_(e){yield(0,qv.apiFetch)({path:`/wp/v2/templates/${e}`,method:"DELETE"});const t=yield w.controls.select(h.STORE_KEY,"getPage");yield w.controls.dispatch(h.STORE_KEY,"setPage",t)}function a_(e){return{type:"SET_TEMPLATE_PART",templatePartId:e}}function i_(e){return{type:"SET_HOME_TEMPLATE",homeTemplateId:e}}function l_(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function*(o){if(null===e)return{type:"SET_PAGE",page:null,templateId:null,changingPage:!0};if(!e.path&&null!==(o=e.context)&&void 0!==o&&o.postId){const t=yield w.controls.resolveSelect("core","getEntityRecord","postType",e.context.postType||"post",e.context.postId);e.path=(0,di.getPathAndQueryString)(t.link)}if(!n)return void(yield{type:"SET_PAGE_CONTENT",page:e,classicTemplateId:""!==t?t:"page.php"});let r;if(!t&&n&&(r=yield w.controls.resolveSelect("core","__experimentalGetTemplateForLink",(0,di.addQueryArgs)(e.path,{_:Date.now()})),!r))return void(yield{type:"SET_PAGE",page:e,templateId:null});const a=t||r,{id:i,slug:l}=a;return yield{type:"SET_PAGE",page:l?{...e,context:{...e.context,templateSlug:l}}:e,templateId:i},i}()}function*s_(){const{show_on_front:e,page_on_front:t}=yield w.controls.resolveSelect("core","getEntityRecord","root","site"),{siteUrl:n}=yield w.controls.select(h.STORE_KEY,"getSettings"),o={path:n,context:"page"===e?{postType:"page",postId:t}:{}},r=yield*l_(o);if(!r)return{type:"GUTENTAG_NO_ACTION"};yield i_(r)}function c_(e){return{type:"OPEN_NAVIGATION_PANEL_TO_MENU",menu:e}}function u_(e){return{type:"SET_IS_NAVIGATION_PANEL_OPENED",isOpen:e}}function d_(e){return{type:"UPDATE_SETTINGS",settings:e}}function*m_(e){return yield Qv("core/interface","enableComplementaryArea",`${h.STORE_KEY}/sidebars`,`${h.STORE_KEY}/sidebar/${e}`)}function*p_(){return yield Qv("core/interface","enableComplementaryArea",`${h.STORE_KEY}/sidebars`,`${h.STORE_KEY}/sidebar/block-inserter`)}function h_(e){let{areaIdentifier:t,sidebar:n}=e;return function*(){return{type:"ADD_SUBSIDEBAR",sidebar:n,areaIdentifier:t}}()}function g_(e){let{areaIdentifier:t}=e;return function*(){return{type:"REMOVE_SUBSIDEBAR",areaIdentifier:t}}()}function*f_(){yield Qv("core/interface","disableComplementaryArea",`${h.STORE_KEY}/sidebars`)}function b_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function*(){return{type:"TOGGLE_GLOBAL_STYLE_EDITING",value:e,previousEntity:t}}()}function*v_(e){return{type:"TOGGLE_GUTENTAG_DEBUG",value:e}}function y_(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){return{type:"TOGGLE_IS_INSERTER_OPEN",value:e,rootClientId:t||!1,options:{closeOnSelect:!1,replace:!1,...n}}}()}function k_(e){return{type:"SET_CURRENT_ANCESTOR",currentAncestor:e}}function E_(e){return{type:"SET_IS_LIST_VIEW_OPENED",isOpen:e}}function S_(e){return{type:"UPDATE_UI_VERSION",version:e}}function w_(e){return{type:"UPDATE_EDITOR_MODE",value:e}}function C_(e){return{type:"TOGGLE_AI_CAPABILITIES",value:e}}function I_(e){return{type:"UPDATE_AI_INFO",value:e}}var x_,T_;function P_(e){return[e]}function R_(e){return!!e&&"object"==typeof e}function O_(){var e={clear:function(){e.head=null}};return e}function A_(e,t,n){var o;if(e.length!==t.length)return!1;for(o=n;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}function N_(e,t){var n,o;function r(){n=T_?new WeakMap:O_()}function a(){var n,r,a,i,l,s=arguments.length;for(i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];for(l=t.apply(null,i),(n=o(l)).isUniqueByDependants||(n.lastDependants&&!A_(l,n.lastDependants,0)&&n.clear(),n.lastDependants=l),r=n.head;r;){if(A_(r.args,i,1))return r!==n.head&&(r.prev.next=r.next,r.next&&(r.next.prev=r.prev),r.next=n.head,r.prev=null,n.head.prev=r,n.head=r),r.val;r=r.next}return r={val:e.apply(null,i)},i[0]=null,r.args=i,n.head&&(n.head.prev=r,r.next=n.head),n.head=r,r.val}return t||(t=P_),o=T_?function(e){var t,o,r,a,i=n,l=!0;for(t=0;t<e.length;t++){if(!R_(o=e[t])){l=!1;break}i.has(o)?i=i.get(o):(r=new WeakMap,i.set(o,r),i=r)}return i.has(x_)||((a=O_()).isUniqueByDependants=l,i.set(x_,a)),i.get(x_)}:function(){return n},a.getDependants=t,a.clear=r,r(),a}x_={},T_="undefined"!=typeof WeakMap;const M_=Object.values(s.defaultTemplatesByPostType).map((e=>`${e}.php`));function D_(e,t){return"fullscreenMode"===t||"fixedToolbar"!==t&&(0,m.get)(e.preferences.features,[t],!1)}function z_(e){return e.deviceType}const B_=(0,w.createRegistrySelector)((e=>()=>e("core").canUser("create","media"))),L_=N_(((e,t)=>{const n={...e.settings,outlineMode:!0,focusMode:D_(e,"focusMode"),hasFixedToolbar:D_(e,"fixedToolbar"),__experimentalSetIsInserterOpened:t};return B_(e)?(n.mediaUpload=t=>{let{onError:n,...o}=t;(0,wn.uploadMedia)({wpAllowedMimeTypes:e.settings.allowedMimeTypes,onError:e=>{let{message:t}=e;return n(t)},...o})},n):n}),(e=>[B_(e),e.settings,D_(e,"focusMode"),D_(e,"fixedToolbar")]));function F_(e){return e.homeTemplateId}function G_(e){var t;return null===(t=e.editedPost)||void 0===t?void 0:t.type}function H_(e){var t;return null===(t=e.editedPost)||void 0===t?void 0:t.id}function j_(e){return e.editedPost.page}function U_(e){return e.navigationPanel.isOpen}function W_(e){var t;return null===(t=e.navigationPanel)||void 0===t?void 0:t.menu}function V_(e){return e.blockInserterPanel}function K_(e){return e.templateId}function $_(e){return e.templatePartId}function q_(e){return e.templateType}function Y_(e){return e.templateIds}function X_(e){return e.templatePartIds}function Z_(e){return e.entity}function J_(e){return e.showOnFront}const Q_=(0,w.createRegistrySelector)((e=>function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const o=e("core/interface").getActiveComplementaryArea(`${h.STORE_KEY}/sidebars`);return n?o===`${h.STORE_KEY}/sidebar/${n}`:!(0,m.isEmpty)(o)}));function ey(e){var t;return null===(t=e.openedInserter)||void 0===t?void 0:t.value}function ty(e){var t;return null===(t=e.openedInserter)||void 0===t?void 0:t.clientId}function ny(e){var t,n;return!(null===(t=e.openedInserter)||void 0===t||null===(n=t.options)||void 0===n||!n.replace)}function oy(e){var t,n;return!(null===(t=e.openedInserter)||void 0===t||null===(n=t.options)||void 0===n||!n.closeOnSelect)}function ry(e){return e.currentAncestor}function ay(){return(0,w.select)("core/interface").getActiveComplementaryArea(`${h.STORE_KEY}/sidebars`)}function iy(e){return e.subSidebars}function ly(e){return e.globalStyleEditing.value}function sy(e){return e.globalStyleEditing.previousEntity}function cy(e){return e.isGutentagDebug}function uy(e){const{rootClientId:t,insertionIndex:n}=e.blockInserterPanel;return{rootClientId:t,insertionIndex:n}}function dy(e){return e.listViewPanel}const my=e=>{var t;const{templateId:n,templateType:o}=e;return n&&o&&(null===(t=(0,w.select)("core").getEditedEntityRecord("postType",o,n))||void 0===t?void 0:t.kubio_template_source)||null},py=e=>{var t;const n=null==e||null===(t=e.page)||void 0===t?void 0:t.context;let o=null;var r,a,i;o=null!=n&&n.postType&&null!=n&&n.postId?null!==(r=(0,w.select)("core").getEditedEntityRecord("postType",null==n?void 0:n.postType,null==n?void 0:n.postId).template)&&void 0!==r?r:null:null!==(a=null===(i=e.templateId)||void 0===i?void 0:i.split("//").pop())&&void 0!==a?a:null;const l=(0,w.select)("core").getEditedEntityRecord("root","site");if("page"===l.show_on_front&&l.page_on_front===parseInt(null==n?void 0:n.postId)){const e=((0,w.select)("core").getEntityRecords("postType","wp_template",{per_page:-1})||[]).map((e=>{let{id:t}=e;return t.split("//").pop()})).includes("front-page"),{classicHasFrontPageTemplate:t}=(0,w.select)("core/block-editor").getSettings();if(e||t)return"front-page"}return""===o&&(o="page"===(null==n?void 0:n.postType)?"page":"single"),o},hy=e=>{const t=py(e),n=(0,w.select)("core").getEntityRecords("postType","wp_template",{per_page:-1});return!!t&&(n||[]).map((e=>{let{id:t}=e;return t.split("//").pop()})).includes(t)},gy=e=>{var t;const n=null==e||null===(t=e.page)||void 0===t?void 0:t.context;return(null==n?void 0:n.postType)||null},fy=e=>{var t;const n=null==e||null===(t=e.page)||void 0===t?void 0:t.context;return(null==n?void 0:n.postId)||null},by=e=>{var t;const n=null==e||null===(t=e.page)||void 0===t?void 0:t.context,o=(0,w.select)("core").getEditedEntityRecord("root","site"),r=null==o?void 0:o.page_for_posts;return parseInt(r)===parseInt(null==n?void 0:n.postId)},vy=e=>{var t,n;const o=j_(e),r="front-page"===(null==o||null===(t=o.context)||void 0===t?void 0:t.templateSlug),a=(0,w.select)("core").getEditedEntityRecord("root","site"),i=null==a?void 0:a.page_on_front,l=null==o||null===(n=o.context)||void 0===n?void 0:n.postId,s="page"===a.show_on_front&&parseInt(i)===parseInt(l);return r||s},_y=e=>{const t=(0,w.select)("core").getEditedEntityRecord("root","site"),n=j_(e),o=p().get(n,"context",{}),{postType:r,postId:a}=o,i="page"===(null==t?void 0:t.show_on_front),l=null==t?void 0:t.page_on_front,s=i&&parseInt(l)===parseInt(a),c=i&&parseInt(null==t?void 0:t.page_for_posts)===parseInt(a);return"page"===r&&!c&&!s},yy=()=>{var e,t;const n=(null===(e=(0,w.select)("core").getEntityRecords("postType","wp_template",{per_page:-1}))||void 0===e?void 0:e.filter((e=>{let{slug:t}=e;return(0,s.currentTemplateIsPage)(t)})))||[],o=(null===(t=(0,w.select)("core/block-editor").getSettings())||void 0===t?void 0:t.classicThemeTemplates)||[],r=n.map((e=>{let{title:t,slug:n,kubio_template_source:o="custom"}=e;return{value:n,label:"kubio"===o?t.rendered.replace("Kubio","").trim():t.rendered,source:o}}));return Object.keys(o).forEach((e=>{const t=o[e];(0,m.find)(n,{slug:e.replace(".php","")})||r.push({value:M_.includes(e)?e.replace(".php",""):e,label:t,isClassicTemplate:!0,source:"theme"})})),r.forEach((e=>{"page"===e.value&&(e.value="")})),p().sortBy(r,["source","label"])};function ky(e){var t;return null==e||null===(t=e.classicTemplate)||void 0===t?void 0:t.id}function Ey(e){var t,n;const o=j_(e),r=p().get(o,"context",{}),{postType:a,postId:i}=r,l=null===(t=(0,w.select)("core/block-editor").getSettings())||void 0===t||null===(n=t.kubioBasicWooCommerce)||void 0===n?void 0:n.pagesIds;return"product"===a||Object.values(l||{}).includes(parseInt(i))}const Sy=N_((e=>{var t;const n=null===(t=e.settings)||void 0===t?void 0:t.kubioGlobalSettings;return(null==n?void 0:n.editorUIVersion)||1}),(e=>[e.settings])),wy=N_((e=>{var t;const n=null===(t=e.settings)||void 0===t?void 0:t.kubioGlobalSettings;return(null==n?void 0:n.enableAICapabilities)||!1}),(e=>[e.settings])),Cy=N_((e=>{var t;const n=null===(t=e.settings)||void 0===t?void 0:t.kubioGlobalSettings;return(null==n?void 0:n.editorMode)||"full"}),(e=>[e.settings])),Iy=e=>"simple"===Cy(e),xy=e=>e.aiInfo||{remainingCredits:0},Ty=e=>!0===e.isChangingPage;function Py(e){return e.canvasMode}const Ry={reducer:Zv,actions:r,selectors:a,controls:qv.controls,persist:["preferences"]},Oy=(0,i.forwardRef)(((e,t)=>{let{menuItems:n,toggleButton:o,onClose:r,onOpen:a,popoverProps:l,className:s}=e;const[c,u]=(0,i.useState)(!1),d=(0,i.useCallback)((e=>{u(e),e?null==a||a():null==r||r()}),[u,a,r]),m=(0,i.useRef)();return(0,i.useImperativeHandle)(t,(()=>({getPopupIsVisible:()=>c}))),(0,i.createElement)(P.DropdownWithHover,{className:x()("kubio-dropdown-with-hover__section-options",s),ref:m,onToggle:d,toggleElement:o,popoverProps:{className:"kubio-ai-design-section-button__dropdown__popup",...l}},(0,i.createElement)(Ay,{dropdownRef:m,menuItems:n}))})),Ay=e=>{let{dropdownRef:t,menuItems:n}=e;const o=p().get(t,["current","onClose"],p().noop);return(0,i.createElement)(k.MenuGroup,null,n.map(((e,t)=>{let{label:n,description:r,icon:a,onClick:l,className:s}=e;return(0,i.createElement)(k.MenuItem,{key:t,onClick:async()=>{await l(),o()}},(0,i.createElement)("div",{className:x()("kubio-ai-design-section-button__dropdown",s)},(0,i.createElement)("div",{className:"kubio-ai-design-section-button__dropdown__icon"},(0,i.createElement)(k.Icon,{icon:a})),(0,i.createElement)("div",{className:"kubio-ai-design-section-button__dropdown__content"},(0,i.createElement)("div",{className:"kubio-ai-design-section-button__dropdown__content__label"},n),(0,i.createElement)("div",{className:"kubio-ai-design-section-button__dropdown__content__description"},r))))})))},Ny=e=>{var t,n,o,r;let{setVisible:a,sectionRef:l,onChangeSection:s,askForSummary:c=!0,isNewSection:u=!1}=e;const{replaceDesign:d,replaceContent:m,dataHelper:p}=bv(),[h,g]=(0,i.useState)((()=>u?"":p.getAttribute("kubioAI.meta.summary",""))),f=(0,i.useRef)(!1),b=(0,i.useCallback)((async e=>{if(a(!1),!f.current)try{var t;switch(f.current=!0,null===(t=l.current)||void 0===t?void 0:t.type){case"surprise":await d(null,{summary:e,currentSectionCloudId:p.getAttribute("kubioAI.meta.cloudPresetId","")});break;case"regenerate":await m({summary:e});break;case"hand-pick":await l.current.insert(l.current.pattern,e)}}catch(e){X.Log.error("Generate section modal error",e)}finally{f.current=!1}}),[l,a,d,m]),v=(0,i.useCallback)((()=>b(h)),[b,h]);return(0,i.useEffect)((()=>{if(!c){const e=p.getAttribute("kubioAI.meta.summary","");b(e)}}),[b,p,c]),c?(0,i.createElement)(k.Modal,{className:"kubio-ai-wizard-modal kubio-generate-ai-section auto",title:(0,i.createElement)(k.Flex,null,(0,i.createElement)(k.FlexBlock,{className:"kubio-ai-wizard-modal__title"},(0,i.createElement)(k.Icon,{icon:Y.KubioAI,className:"kubio-ai-logo-colored kubio-ai-logo-animated"}),"hand-pick"===(null===(t=l.current)||void 0===t?void 0:t.type)?(0,T.__)("Generate new section AI","kubio"):(0,T.__)("Regenerate content","kubio")),(0,i.createElement)(k.FlexItem,null,(0,i.createElement)(k.Button,{onClick:()=>a(!1),icon:De,label:(0,T.__)("Close","kubio")}))),isDismissible:!1,onRequestClose:()=>{},shouldCloseOnClickOutside:!1},(0,i.createElement)(k.Flex,{className:"kubio-generate-ai-section__content",align:"normal"},(0,i.createElement)(k.Flex,{className:"kubio-generate-ai-section__content__section-preview",justify:"center"},(0,i.createElement)("div",{className:x()("section-preview-image-wrapper",(null===(n=l.current)||void 0===n?void 0:n.pattern)&&"ai-hand-picked-section")},(0,i.createElement)("img",{src:null!==(o=l.current)&&void 0!==o&&o.pattern?l.current.pattern.screenshot:(0,q.staticAssetURL)("ai-assets/placeholder.png"),alt:"placeholder"}))),(0,i.createElement)(k.Flex,{className:"kubio-generate-ai-section__content__summary-wrapper",direction:"column",gap:3.75},(0,i.createElement)(P.TextareaControl,{label:(0,T.__)("Write a brief description to Kubio AI about the new section's content.","kubio"),className:x()("kubio-ai-summary-field"),value:h,onChange:g,rows:6}),(0,i.createElement)(k.Flex,{justify:"flex-end",gap:2.5},"hand-pick"===(null===(r=l.current)||void 0===r?void 0:r.type)&&(0,i.createElement)(k.Button,{className:"kubio-ai-change-section",onClick:s},(0,T.__)("Change section","kubio")),(0,i.createElement)(k.Button,{className:"kubio-ai-button",onClick:v},(0,T.__)("Generate","kubio")))))):(0,i.createElement)(i.Fragment,null)},My=e=>{let{sectionClientId:t,insertBefore:n=!0,shouldUseSectionClientId:o=!1,aiIntermediateCallback:r=null}=e;const{newSectionIndex:a,parentClientId:l}=(0,w.useSelect)((e=>{const{getBlockIndex:r,getBlockRootClientId:a,getBlockOrder:i}=e("core/block-editor"),l=a(t);let s=r(t);return n||s++,o&&(s=i(t).length),{newSectionIndex:s,parentClientId:o?t:l}}),[t]),{insertBlock:c,replaceBlocks:u,selectBlock:d}=(0,w.useDispatch)("core/block-editor"),{ownerDocument:g}=(0,s.useOwnerDocumentContext)(),[{pageContext:f,siteContext:v,pageTitle:_}]=(0,b.useAIData)();return{onGenerateAiSection:(0,i.useCallback)((function(){let{onCallback:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const o=(0,m.cloneDeep)(t.content),r=(0,q.transformTemplateToBlock)(o);await c(r,a,l,!0),g.defaultView.requestIdleCallback((async()=>{const a=(0,b.initGenerationSession)();Jb(g,r.clientId,!0,!0);try{await cv({pageContext:f,siteContext:v,pageTitle:_,clientId:r.clientId,sectionCategory:t.categories.at(0).replace("kubio-content/",""),replaceBlocks:u,selectBlock:d,summary:n},o)}catch(e){throw e}finally{Jb(g,r.clientId,!0,!1),null==e||e()}a()}))};if(r){const e=t;t=t=>r(t,e)}const n={page:"sections",disabledPages:["starterSite","pages"],sections:{internalTag:h.AI_READY_TAG,categoryType:"kubio-content",onActionFunc:t}};(0,q.onOpenTemplateGalleryWithParams)(n)}),[r,c,a,g,f,_,l,u,d,v]),onInsertNormalSection:(0,i.useCallback)((()=>{const e={page:"sections",disabledPages:["starterSite","pages"],sections:{categoryType:"kubio-content",onActionFunc:async e=>{const t=(0,m.cloneDeep)(e.content);let n=(0,q.transformTemplateToBlock)(t);const{anchor:o,name:r}=(0,q.getNextSectionNameAndIdForPattern)(e);n=p().merge({},n,{attributes:{anchor:o,attrs:{name:r}}}),await c(n,a,l,!0)}}};(0,q.onOpenTemplateGalleryWithParams)(e)}),[c,a,l])}},Dy=(0,i.forwardRef)(((e,t)=>{const{sectionClientId:n,disabled:o,insertBefore:r=!0,blockTitle:a,hasSingleBlockType:l,dropdownRef:s,onDropdownClose:c,onDropdownOpen:u,onActionStarted:d,onActionEnded:m,...p}=e,g=l?(0,T.sprintf)(// translators: %s: the name of the block when there is only one
(0,T.__)("Add %s","kubio"),a):(0,T.__)("Add block","kubio"),f=(0,i.useRef)(),[b,v]=(0,i.useState)(!1),_=(0,i.useCallback)(((e,t)=>{f.current={type:"hand-pick",pattern:e,insert:t},v(!0)}),[]),{onGenerateAiSection:y,onInsertNormalSection:E}=My({sectionClientId:n,insertBefore:r,aiIntermediateCallback:_}),[S,I]=ao(),x=(0,w.useSelect)((e=>e(h.STORE_KEY).isAICapabilityEnabled()),[]),P=(0,i.useCallback)((function(){null==d||d(),I((()=>y({onCallback:()=>{null==m||m()}})))}),[I,y,d,m]),R=(0,i.useCallback)((()=>{v(!1),P()}),[P]),O=(0,i.useMemo)((()=>[x?{label:(0,T.__)("Generate a new AI section","kubio"),description:(0,T.__)("Choose a section and let Kubio AI generate your content.","kubio"),icon:Y.KubioAI,onClick:P}:null,{label:(0,T.__)("Select from templates gallery","kubio"),description:(0,T.__)("Choose a section and write your content.","kubio"),icon:Y.PredesignedLayoutsIcon,onClick:E,className:"kubio-select-from-template-gallery-button"}].filter(Boolean)),[x,P,E]),A=(0,i.createElement)("div",{className:"kubio-between-sections-inserter__container"},(0,i.createElement)(k.Button,C({ref:t,icon:Pn,label:g,isPrimary:!0,tooltipPosition:"bottom",className:"kubio-between-sections-inserter","aria-haspopup":!1,"aria-expanded":!1,disabled:o},p),(0,T.__)("Add section","kubio")));return(0,i.createElement)(i.Fragment,null,S,b&&(0,i.createElement)(Ny,{setVisible:v,sectionRef:f,onChangeSection:R,askForSummary:!0,isNewSection:!0}),(0,i.createElement)(Oy,{menuItems:O,toggleButton:A,ref:s,onClose:c,onOpen:u,popoverProps:{position:"bottom"}}))}));(0,u.addFilter)("kubio.BetweenSectionsInserter","BetweenSectionsInserter",(()=>Dy));const zy=(0,i.createContext)({}),By=()=>(0,i.useContext)(zy),Ly={imageSearch:{slug:"AI-IMAGE-SEARCH",label:(0,T.__)("AI Image","kubio")},imageGenerate:{slug:"AI-IMAGE-GENERATE",label:(0,T.__)("AI Image","kubio")}},Fy={generate:"GENERATE"},Gy=e=>{const t=Object.keys(Ly).filter((t=>Ly[t].slug===e));return t.length>0?Ly[t[0]].label:(0,T.__)("AI Image Editor","kubio")},Hy=e=>{let{classNames:t,children:n}=e;return(0,i.createElement)("div",{className:x()("kubio-ai-image-editor-sidebar",t)},n)},jy=e=>{let{children:t,classes:n=""}=e;return(0,i.createElement)("div",{className:`kubio-ai-image-editor-content ${n}`},t)},Uy=e=>{let{image:t,grid:n=4}=e;const{onSelectImageAction:o,editImageAction:r}=By();return(0,i.createElement)("div",{className:x()("kubio-ai-image-generator-single-image",`kubio-ai-single-image-grid-${n}`)},(0,i.createElement)("img",{src:t.filename,alt:""}),(0,i.createElement)("div",{className:"kubio-ai-image-overlay"},(0,i.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-button",variant:"primary",onClick:()=>{o(t.filename)}},(0,T.__)("Use this image","kubio")),(0,i.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action",onClick:()=>{r(t)}},(0,T.__)("Edit","kubio"))))},Wy=e=>{let{generatedImages:t}=e;return(0,i.createElement)("div",{className:`kubio-ai-generated-images kubio-ai-generated-images-${t.length}`},t&&t.map(((e,n)=>(0,i.createElement)(Uy,{image:e,key:n,grid:t.length}))))},Vy=e=>{let{generatedImages:t}=e;return(0,i.createElement)(Wy,{generatedImages:t})},Ky=e=>{let{label:t,onClick:n,isBusy:o,disabled:r,loadingMessage:a,infoMessage:l,variant:s="primary"}=e;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-sidebar-button",onClick:n,isBusy:o,disabled:r,variant:s},t),a&&o&&(0,i.createElement)("p",{className:"kubio-ai-info kubio-ai-info-loading"},a),l&&!o&&(0,i.createElement)("p",{className:"kubio-ai-info"},l))},$y=((0,T.__)("3D Model","kubio"),(0,T.__)("Analog Film","kubio"),(0,T.__)("Anime","kubio"),(0,T.__)("Cinematic","kubio"),(0,T.__)("Comic Book","kubio"),(0,T.__)("Digital Art","kubio"),(0,T.__)("Enhance","kubio"),(0,T.__)("Fantasy Art","kubio"),(0,T.__)("Isometric","kubio"),(0,T.__)("Line Art","kubio"),(0,T.__)("Low Poly","kubio"),(0,T.__)("Modeling Compound","kubio"),(0,T.__)("Neon Punk","kubio"),(0,T.__)("Origami","kubio"),(0,T.__)("Photographic","kubio"),(0,T.__)("Pixel Art","kubio"),(0,T.__)("Tile Texture","kubio"),()=>(0,q.getBackendData)("aiSDImageTypes",{})),qy=()=>(0,q.getBackendData)("aiSDImageStyles",{}),Yy=[{label:(0,T.__)("Square (1024x1024)","kubio"),value:"1024x1024"},{label:(0,T.__)("Landscape (1152x896)","kubio"),value:"1152x896"},{label:(0,T.__)("Wide Landscape (1216x832)","kubio"),value:"1216x832"},{label:(0,T.__)("Panoramic (1344x768)","kubio"),value:"1344x768"},{label:(0,T.__)("Tall portrait (768x1344)","kubio"),value:"768x1344"},{label:(0,T.__)("Portrait (832x1216)","kubio"),value:"832x1216"},{label:(0,T.__)("Compact portrait (896x1152)","kubio"),value:"896x1152"}],Xy=()=>{const[e,t]=(0,i.useState)(!1),{imagePrompt:n,setImagePrompt:o,isGenerating:r,setIsGenerating:a,initialImage:l,saveGeneratedImages:s,setEditorSection:c,aspectRatio:u,setAspectRatio:d,imageStyle:p,setImageStyle:h,imageType:g,setImageType:f,imageSize:b,numberOfImages:v,setNumberOfImages:_,setImageSizeFromOptions:y,aiCreditsPerImageCost:E}=By(),S=(0,i.useMemo)((()=>(0,m.map)($y(),((e,t)=>({label:e,value:t})))),[]),w=(0,i.useMemo)((()=>{const e=qy(),t={},n={value:"",label:(0,T.__)("None","kubio")};return Object.keys(e).forEach((o=>{t[o]=(0,m.map)(e[o],((e,t)=>({label:e,value:t}))),t[o].unshift(n)})),t}),[]);(0,i.useEffect)((()=>{var e;t(null!==(e=w[g])&&void 0!==e?e:"")}),[w,S,g]);const C=(0,i.useCallback)((async()=>!1),[u,g,n,b,p,l,r,v,c,s,a]);return(0,i.createElement)("div",{className:"kubio-ai-sidebar-controls"},(0,i.createElement)("p",{className:"kubio-ai-info"},(0,T.__)("Experiment with the latest generative AI and let your imagination define your images.","kubio")),(0,i.createElement)(k.TextareaControl,{onChange:o,value:n,label:(0,T.__)("Image Description","kubio"),useDebounce:!1}),(0,i.createElement)(k.RangeControl,{label:(0,T.__)("Samples","kubio"),value:v,min:1,max:4,initialPosition:1,withInputField:!0,onChange:_,className:"kubio-ai-range-with-help",help:(0,T.sprintf)(/* translators: %s is replaced with the number of credits */(0,T.__)("More samples will multiply the cost. Estimated cost: %s credits.","kubio"),E*v)}),(0,i.createElement)(k.SelectControl,{label:(0,T.__)("Size","kubio"),value:u,options:Yy,onChange:e=>{d(e),y(e)},size:"__unstable-large"}),(0,i.createElement)(k.SelectControl,{label:(0,T.__)("Image type","kubio"),value:g,options:S,onChange:e=>{var n;f(e),h(""),t(null!==(n=w[e])&&void 0!==n&&n)},size:"__unstable-large"}),(0,i.createElement)(k.SelectControl,{label:(0,T.__)("Image style","kubio"),value:p,options:e,onChange:h,size:"__unstable-large",disabled:!1===e}),(0,i.createElement)(Ky,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-sidebar-button",onClick:C,isBusy:r,disabled:r||0===n.length,variant:"primary",label:(0,T.__)("Generate image","kubio"),loadingMessage:(0,T.__)("Please wait, this may take a few minutes.","kubio"),infoMessage:(0,T.__)("All generated images will be saved in the Media Library.","kubio")}))},Zy=(0,Nr.isFreeVersion)()?Nr.proBadgeClasses.proItem:"",Jy=(0,Nr.isFreeVersion)()?`${Nr.proBadgeClasses.proItem}-wrapper`:"",Qy=()=>(0,Nr.isFreeVersion)()?(0,i.createElement)("span",{className:Nr.proBadgeClasses.badgeClass},(0,T.__)("PRO","kubio")):null,ek=()=>{const{editorTab:e,setEditorTab:t,backToSection:n}=By();return(0,i.createElement)("div",{className:"kubio-ai-image-editor-menu"},(0,i.createElement)(k.Button,{onClick:()=>{t(Ly.imageSearch.slug),n(Fy.imageSearch)},className:e===Ly.imageSearch.slug?"kubio-ai-button-tab":""},(0,T.__)("Search","kubio")),(0,i.createElement)(k.Button,{onClick:()=>{t(Ly.imageGenerate.slug),n(Fy.generate)},className:e===Ly.imageGenerate.slug?"kubio-ai-button-tab":""},(0,T.__)("Generate","kubio"),(0,i.createElement)(Qy,null)))},tk=()=>(0,i.createElement)("div",{className:"kubio-ai-image-results-empty"},(0,i.createElement)(k.Icon,{icon:Y.GenerateImageIcon}),(0,i.createElement)("p",null,(0,T.__)("Your results will appear here.","kubio"))),nk=()=>(0,i.createElement)("div",{className:x()("kubio-ai-image-generator-single-image","kubio-ai-single-image-grid-4")}),ok=e=>{let{urlArgs:t}=e;const n=(0,i.useCallback)((e=>{e.preventDefault(),(0,Nr.upgradeToPro)(t)}),[t]);return(0,i.createElement)("div",{className:"kubio-ai-pro-popup-background "},(0,i.createElement)("div",{className:"kubio-ai-generated-images"},(0,i.createElement)(nk,null),(0,i.createElement)(nk,null),(0,i.createElement)(nk,null),(0,i.createElement)(nk,null)),(0,i.createElement)("div",{className:"kubio-ai-pro-popup"},(0,i.createElement)("div",{className:"kubio-ai-pro-content"},(0,i.createElement)("h1",null,(0,T.__)("Generate awesome images with Kubio AI","kubio"))),(0,i.createElement)("img",{src:(0,q.staticAssetURL)("ai-assets/pro-img.png"),alt:"final-message"}),(0,i.createElement)("div",{className:"kubio-ai-pro-content upgrade-to-pro__content"},(0,i.createElement)("p",{className:"kubio-ai-pro-content-lead"},(0,T.__)("Hello there! 🌈 Did you know you can unlock a whole new world of creativity with Kubio PRO?","kubio")),(0,i.createElement)("ul",{className:"kubio-ai-pro-content-features"},(0,i.createElement)("li",null,(0,i.createElement)(k.Icon,{icon:A,size:16}),(0,T.__)("Generate new images by just writing a few words.","kubio")),(0,i.createElement)("li",null,(0,i.createElement)(k.Icon,{icon:A,size:16}),(0,T.__)("Create different kinds of images like paintings, 3D models, photographic, etc.","kubio")),(0,i.createElement)("li",null,(0,i.createElement)(k.Icon,{icon:A,size:16}),(0,T.__)("Easily adjust images using the generative fill feature.","kubio"))),(0,i.createElement)(k.Button,{className:"btn-upgrade",onClick:n},(0,Nr.getStringValueWithId)("pro.upgrade.label")))))},rk=e=>{let{generatedImages:t}=e;return(0,i.createElement)(i.Fragment,null,t.length>0?(0,i.createElement)(Vy,{generatedImages:t}):(0,i.createElement)(tk,null))},ak={source:"ai-image-generator",content:"ai-image-generator"},ik=()=>{const{generatedImages:e}=By();return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(Hy,{classNames:`${Jy}`},(0,i.createElement)(ek,null),(0,i.createElement)(Xy,null)),(0,i.createElement)(jy,{classes:e.length>0?"":"kubio-ai-image-results-empty-wrapper"},(0,Nr.isFreeVersion)()?(0,i.createElement)(ok,{urlArgs:ak}):(0,i.createElement)(rk,{generatedImages:e})))},lk=()=>{const{onSelectImageAction:e,currentSelectedImage:t}=By();return(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",{className:"kubio-ai-image-editor-img-holder"},(0,i.createElement)("div",{className:"kubio-ai-image-editor-si-wrapper"},(0,i.createElement)("span",null,(0,i.createElement)("img",{src:t.filename,alt:""})),(0,i.createElement)("div",{className:"kubio-ai-image-editor-action-overlay"},(0,i.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-button",variant:"primary",onClick:()=>{e(t.filename)}},(0,T.__)("Use this image","kubio"))))))},sk=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"m13.1 16-3.4-4 3.4-4 1.1 1-2.6 3 2.6 3-1.1 1z"})),ck=()=>{const{backToSection:e}=By();return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action kubio-ai-button-action-back",onClick:()=>{e(Fy.generate)},icon:sk},(0,T.__)("Generate an image","kubio")),(0,i.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-edit-action kubio-ai-button-edit-action-first",onClick:()=>{e(Fy.generativeFill)},icon:(0,i.createElement)(k.Dashicon,{icon:"admin-appearance"})},(0,i.createElement)("div",{className:"kubio-ai-button-edit-action-content"},(0,i.createElement)("h3",null,(0,T.__)("Generative Fill","kubio")),(0,i.createElement)("p",null,(0,T.__)("Use the brush to highlight an area of the image and specify the changes you want for that area.","kubio")))),(0,i.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-edit-action",onClick:()=>{e(Fy.variations)},icon:(0,i.createElement)(k.Dashicon,{icon:"format-gallery"})},(0,i.createElement)("div",{className:"kubio-ai-button-edit-action-content"},(0,i.createElement)("h3",null,(0,T.__)("Variations","kubio")),(0,i.createElement)("p",null,(0,T.__)("Describe the changes you would like to make for the current image.","kubio")))))},uk=()=>(0,i.createElement)(i.Fragment,null,(0,i.createElement)(Hy,null,(0,i.createElement)(ck,null)),(0,i.createElement)(jy,null,(0,i.createElement)(lk,null))),dk=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M10.8622 8.04053L14.2805 12.0286L10.8622 16.0167L9.72327 15.0405L12.3049 12.0286L9.72327 9.01672L10.8622 8.04053Z"})),mk=()=>{const{onSelectImageAction:e,backToSection:t,currentSelectedImage:n,prevImageAction:o,nextImageAction:r}=By();return(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",{className:"kubio-ai-image-editor-action-top-bar"},(0,i.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action kubio-ai-button-action-back",onClick:()=>{t(Fy.generate)},icon:sk},(0,T.__)("Back","kubio")),(0,i.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-button",variant:"primary",onClick:()=>{e(n.filename)}},(0,T.__)("Use this image","kubio"))),(0,i.createElement)("div",{className:"kubio-ai-image-editor-img-holder"},(0,i.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button kubio-ai-nav kubio-ai-prev",onClick:()=>{o(n.filename)},icon:sk},(0,T.__)("prev","kubio")),(0,i.createElement)("img",{src:n.filename,alt:""}),(0,i.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button kubio-ai-nav kubio-ai-next",onClick:()=>{r(n.filename)},icon:dk},(0,T.__)("next","kubio"))))},pk=()=>(0,i.createElement)(i.Fragment,null,(0,i.createElement)(Hy,null,(0,i.createElement)(Xy,null)),(0,i.createElement)(jy,null,(0,i.createElement)(mk,null))),hk=512,gk=async e=>{const t=new Image;return t.src=e,await t.decode(),t},fk=e=>64*Math.ceil(e/64),bk=(e,t,n)=>{let o=0,r=0;return fk(e)<=fk(t)?(r=512,o=fk(r*n)):(o=hk,r=fk(o*n)),[o,r]},vk=(e,t,n)=>{const o=bk(e,t,n);if(o[0]<hk){const e=hk-o[0];o[0]=hk,o[1]=fk(hk+e)}return o},_k=e=>{let{sectionTitle:t=(0,T.__)("Variations","kubio")}=e;const[n,o]=(0,i.useState)(!1),{imagePrompt:r,setImagePrompt:a,isGenerating:l,setIsGenerating:s,initialImage:c,aspectRatio:u,imageStyle:d,setImageStyle:p,imageSize:h,setImageSize:g,numberOfImages:f,setNumberOfImages:v,addImageVariations:_,currentSelectedImage:y,backToSection:E,imageType:S,setImageType:w,aiCreditsPerImageCost:C}=By();(0,i.useEffect)((()=>{(async()=>{if(c){const e=await gk(c);g(((e,t,n)=>{switch(n){case"auto":return((e,t)=>[fk(e),fk(t)])(e,t);case"4/3":return bk(e,t,4/3);case"3/4":return vk(e,t,3/4);case"3/2":return bk(e,t,1.5);case"16/9":return bk(e,t,16/9);case"9/16":return vk(e,t,9/16);default:return[hk,hk]}})(e.naturalWidth,e.naturalHeight,u))}})()}),[c,u,g]);const I=(0,i.useMemo)((()=>(0,m.map)($y(),((e,t)=>({label:e,value:t})))),[]),x=(0,i.useMemo)((()=>{const e=qy(),t={},n={value:"",label:(0,T.__)("None","kubio")};return Object.keys(e).forEach((o=>{t[o]=(0,m.map)(e[o],((e,t)=>({label:e,value:t}))),t[o].unshift(n)})),t}),[]);(0,i.useEffect)((()=>{var e;o(null!==(e=x[S])&&void 0!==e?e:"")}),[x,I,S]);const P=(0,i.useCallback)((async()=>{if(!l){s(!0);try{const e=await(0,b.aiImageVariations)({imagePrompt:r,currentSelectedImage:y.filename,imageSize:h,imageStyle:d,imageType:S,numberOfImages:f});e.length>0&&_(y.filename,e)}catch(e){console.log(e)}s(!1)}}),[l,s,r,y.filename,h,d,S,f,_]);return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action kubio-ai-button-action-back",onClick:()=>{E(Fy.edit)},icon:sk},(0,T.__)("Back","kubio")),(0,i.createElement)("div",{className:"kubio-ai-sidebar-heading"},(0,i.createElement)("div",{className:"kubio-ai-icon-holder"},(0,i.createElement)(k.Dashicon,{icon:"format-gallery"})),(0,i.createElement)("div",{className:"kubio-ai-text-holder"},(0,i.createElement)("h3",null,t),(0,i.createElement)("p",{className:"kubio-ai-heading-info"},(0,T.__)("Describe the changes you would like to make for the current image.","kubio")))),(0,i.createElement)(k.TextareaControl,{onChange:a,value:r,label:(0,T.__)("Description of changes","kubio"),useDebounce:!1}),(0,i.createElement)(k.RangeControl,{label:(0,T.__)("Samples","kubio"),value:f,min:1,max:4,initialPosition:1,withInputField:!0,onChange:v,className:"kubio-ai-range-with-help",help:(0,T.sprintf)(/* translators: %s is replaced with the number of credits */(0,T.__)("More samples will multiply the cost. Estimated cost: %s credits.","kubio"),C*f)}),(0,i.createElement)(k.SelectControl,{label:(0,T.__)("Image type","kubio"),value:S,options:I,onChange:e=>{var t;w(e),p(""),o(null!==(t=x[e])&&void 0!==t&&t)},size:"__unstable-large"}),(0,i.createElement)(k.SelectControl,{label:(0,T.__)("Image style","kubio"),value:d,options:n,onChange:p,size:"__unstable-large",disabled:!1===n}),(0,i.createElement)(Ky,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-sidebar-button",onClick:P,isBusy:l,disabled:l,variant:"primary",label:(0,T.__)("Create variations","kubio"),loadingMessage:(0,T.__)("Please wait, this may take a few minutes.","kubio"),infoMessage:(0,T.__)("All generated images will be saved in the Media Library.","kubio")}))},yk=e=>{let{grid:t=1}=e;const{currentSelectedImage:n}=By();return(0,i.createElement)("div",{className:x()("kubio-ai-image-generator-single-image","kubio-ai-original",`kubio-ai-single-image-grid-${t}`),"data-label":(0,T.__)("Original","kubio")},(0,i.createElement)("img",{src:n.filename,alt:""}))},kk=()=>{const{getImageVariations:e}=By(),t=e();return(0,i.createElement)("div",{className:`kubio-ai-generated-images kubio-ai-generated-images-${t.length+1}`},(0,i.createElement)(yk,{grid:t.length+1}),t.length>0&&t.map(((e,n)=>(0,i.createElement)(Uy,{image:e,key:n,grid:t.length+1}))))},Ek=()=>(0,i.createElement)(i.Fragment,null,(0,i.createElement)(Hy,null,(0,i.createElement)(_k,null)),(0,i.createElement)(jy,null,(0,i.createElement)(kk,null)));function Sk(e,t,n,o,r,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(o,r)}function wk(){return wk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},wk.apply(this,arguments)}var Ck={exports:{}};!function(e){var t=function(e){var t,n=Object.prototype,o=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,o){var r=t&&t.prototype instanceof f?t:f,a=Object.create(r.prototype),i=new T(o||[]);return a._invoke=function(e,t,n){var o=d;return function(r,a){if(o===p)throw new Error("Generator is already running");if(o===h){if("throw"===r)throw a;return R()}for(n.method=r,n.arg=a;;){var i=n.delegate;if(i){var l=C(i,n);if(l){if(l===g)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=u(e,t,n);if("normal"===s.type){if(o=n.done?h:m,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}(e,n,i),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",g={};function f(){}function b(){}function v(){}var _={};s(_,a,(function(){return this}));var y=Object.getPrototypeOf,k=y&&y(y(P([])));k&&k!==n&&o.call(k,a)&&(_=k);var E=v.prototype=f.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(r,a,i,l){var s=u(e[r],e,a);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(d).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,l)}))}l(s.arg)}var r;this._invoke=function(e,o){function a(){return new t((function(t,r){n(e,o,t,r)}))}return r=r?r.then(a,a):a()}}function C(e,n){var o=e.iterator[n.method];if(o===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=u(o,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;var a=r.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function n(){for(;++r<e.length;)if(o.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:R}}function R(){return{value:t,done:!0}}return b.prototype=v,s(E,"constructor",v),s(v,"constructor",b),b.displayName=s(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},S(w.prototype),s(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,o,r,a){void 0===a&&(a=Promise);var i=new w(c(t,n,o,r),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(E),s(E,l,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},e.values=P,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(o,r){return l.type="throw",l.arg=e,n.next=o,r&&(n.method="next",n.arg=t),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;x(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,o){return this.delegate={iterator:P(e),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(Ck);var Ik=Ck.exports,xk=function(e){var t=e.paths,n=e.id,o=e.strokeWidth,r=e.strokeColor,a=e.command,i=void 0===a?Pk:a;if(1===t.length){var l=t[0],s=l.x,c=l.y,u=o/2;return cn.createElement("circle",{key:n,id:n,cx:s,cy:c,r:u,stroke:r,fill:r})}var d=t.reduce((function(e,t,n,o){return 0===n?"M "+t.x+","+t.y:e+" "+i(t,n,o)}),"");return cn.createElement("path",{key:n,id:n,d,fill:"none",strokeLinecap:"round",stroke:r,strokeWidth:o})},Tk=function(e){var t,n,o,r,a=e.current,i=e.next,l=e.previous,s=e.reverse,c=(t=l||a,o=(n=i||a).x-t.x,r=n.y-t.y,{length:Math.sqrt(Math.pow(o,2)+Math.pow(r,2)),angle:Math.atan2(r,o)}),u=c.angle+(s?Math.PI:0),d=.2*c.length;return[a.x+Math.cos(u)*d,a.y+Math.sin(u)*d]},Pk=function(e,t,n){var o=null,r=null;switch(t){case 0:var a=Tk({current:e});o=a[0],r=a[1];break;case 1:var i=Tk({current:n[t-1],next:e});o=i[0],r=i[1];break;default:var l=Tk({current:n[t-1],previous:n[t-2],next:e});o=l[0],r=l[1]}var s=Tk({current:e,previous:n[t-1],next:n[t+1],reverse:!0});return"C "+o+","+r+" "+s[0]+","+s[1]+" "+e.x+", "+e.y},Rk=function(e){var t=e.id,n=e.paths;return cn.createElement(cn.Fragment,null,n.map((function(e,n){return cn.createElement(xk,{key:t+"__"+n,paths:e.paths,id:t+"__"+n,strokeWidth:e.strokeWidth,strokeColor:e.strokeColor,command:Pk})})))},Ok=function(e){return new Promise((function(t,n){var o=new Image;o.addEventListener("load",(function(){o.width>0&&t(o),n("Image not found")})),o.addEventListener("error",(function(e){return n(e)})),o.src=e,o.setAttribute("crossorigin","anonymous")}))};function Ak(e){var t,n=null==(t=e.firstChild)?void 0:t.cloneNode(!0),o=e.offsetWidth,r=e.offsetHeight;return n.setAttribute("viewBox","0 0 "+o+" "+r),n.setAttribute("width",o.toString()),n.setAttribute("height",r.toString()),{svgCanvas:n,width:o,height:r}}var Nk=cn.forwardRef((function(e,t){var n=e.paths,o=e.isDrawing,r=e.onPointerDown,a=e.onPointerMove,i=e.onPointerUp,l=e.id,s=void 0===l?"react-sketch-canvas":l,c=e.width,u=void 0===c?"100%":c,d=e.height,m=void 0===d?"100%":d,p=e.className,h=void 0===p?"react-sketch-canvas":p,g=e.canvasColor,f=void 0===g?"red":g,b=e.backgroundImage,v=void 0===b?"":b,_=e.exportWithBackgroundImage,y=void 0!==_&&_,k=e.preserveBackgroundImageAspectRatio,E=void 0===k?"none":k,S=e.allowOnlyPointerType,w=void 0===S?"all":S,C=e.style,I=void 0===C?{border:"0.0625rem solid #9c9c9c",borderRadius:"0.25rem"}:C,x=e.svgStyle,T=void 0===x?{}:x,P=cn.useRef(null),R=function(e){var t,n,o,r=null==(t=P.current)?void 0:t.getBoundingClientRect(),a=null!=(n=window.scrollX)?n:0,i=null!=(o=window.scrollY)?o:0;return r?{x:e.pageX-r.left-a,y:e.pageY-r.top-i}:{x:0,y:0}},O=function(e){"mouse"===e.pointerType&&0!==e.button||"all"!==w&&e.pointerType!==w||i()};cn.useImperativeHandle(t,(function(){return{exportImage:function(e){return new Promise(function(){var t,n=(t=Ik.mark((function t(n,o){var r,a,i,l,s,c,u,d;return Ik.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=P.current){t.next=4;break}throw Error("Canvas not rendered yet");case 4:return a=Ak(r),i=a.svgCanvas,l=a.width,s=a.height,c="data:image/svg+xml;base64,"+btoa(i.outerHTML),t.next=8,Ok(c);case 8:if(t.t0=t.sent,u=[t.t0],!y){t.next=21;break}return t.prev=11,t.next=14,Ok(v);case 14:d=t.sent,u.push(d),t.next=21;break;case 18:t.prev=18,t.t1=t.catch(11),console.warn("exportWithBackgroundImage props is set without a valid background image URL. This option is ignored");case 21:Promise.all(u).then((function(t){var o=document.createElement("canvas");o.setAttribute("width",l.toString()),o.setAttribute("height",s.toString());var r=o.getContext("2d");if(!r)throw Error("Canvas not rendered yet");t.reverse().forEach((function(e){r.drawImage(e,0,0)})),n(o.toDataURL("image/"+e))})).catch((function(e){throw e})),t.next=27;break;case 24:t.prev=24,t.t2=t.catch(0),o(t.t2);case 27:case"end":return t.stop()}}),t,null,[[0,24],[11,18]])})),function(){var e=this,n=arguments;return new Promise((function(o,r){var a=t.apply(e,n);function i(e){Sk(a,o,r,i,l,"next",e)}function l(e){Sk(a,o,r,i,l,"throw",e)}i(void 0)}))});return function(_x,e){return n.apply(this,arguments)}}())},exportSvg:function(){return new Promise((function(e,t){try{var n,o=null!=(n=P.current)?n:null;if(null!==o){var r,a,i=Ak(o).svgCanvas;if(y)return void e(i.outerHTML);null==(r=i.querySelector("#"+s+"__background"))||r.remove(),null==(a=i.querySelector("#"+s+"__canvas-background"))||a.setAttribute("fill",f),e(i.outerHTML)}t(new Error("Canvas not loaded"))}catch(e){t(e)}}))}}})),cn.useEffect((function(){return document.addEventListener("pointerup",O),function(){document.removeEventListener("pointerup",O)}}),[O]);var A=n.filter((function(e){return!e.drawMode})),N=0,M=n.reduce((function(e,t){return t.drawMode?(void 0===e[N]&&(e[N]=[]),e[N].push(t),e):(N+=1,e)}),[[]]);return cn.createElement("div",{role:"presentation",ref:P,className:h,style:wk({touchAction:"none",width:u,height:m},I),"touch-action":"none",onPointerDown:function(e){if(!("all"!==w&&e.pointerType!==w||"mouse"===e.pointerType&&0!==e.button)){var t=R(e);r(t)}},onPointerMove:function(e){if(o&&("all"===w||e.pointerType===w)){var t=R(e);a(t)}},onPointerUp:O},cn.createElement("svg",{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:wk({width:"100%",height:"100%"},T),id:s},cn.createElement("g",{id:s+"__eraser-stroke-group",display:"none"},cn.createElement("rect",{id:s+"__mask-background",x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),A.map((function(e,t){return cn.createElement(xk,{key:s+"__eraser-"+t,id:s+"__eraser-"+t,paths:e.paths,strokeColor:"#000000",strokeWidth:e.strokeWidth})}))),cn.createElement("defs",null,v&&cn.createElement("pattern",{id:s+"__background",x:"0",y:"0",width:"100%",height:"100%",patternUnits:"userSpaceOnUse"},cn.createElement("image",{x:"0",y:"0",width:"100%",height:"100%",xlinkHref:v,preserveAspectRatio:E})),A.map((function(e,t){return cn.createElement("mask",{id:s+"__eraser-mask-"+t,key:s+"__eraser-mask-"+t,maskUnits:"userSpaceOnUse"},cn.createElement("use",{href:"#"+s+"__mask-background"}),Array.from({length:A.length-t},(function(e,n){return n+t})).map((function(e){return cn.createElement("use",{key:e.toString(),href:"#"+s+"__eraser-"+e.toString()})})))}))),cn.createElement("g",{id:s+"__canvas-background-group"},cn.createElement("rect",{id:s+"__canvas-background",x:"0",y:"0",width:"100%",height:"100%",fill:v?"url(#"+s+"__background)":f})),M.map((function(e,t){return cn.createElement("g",{id:s+"__stroke-group-"+t,key:s+"__stroke-group-"+t,mask:"url(#"+s+"__eraser-mask-"+t+")"},cn.createElement(Rk,{id:s,paths:e}))}))))})),Mk=cn.forwardRef((function(e,t){var n=e.id,o=void 0===n?"react-sketch-canvas":n,r=e.width,a=void 0===r?"100%":r,i=e.height,l=void 0===i?"100%":i,s=e.className,c=void 0===s?"":s,u=e.canvasColor,d=void 0===u?"white":u,m=e.strokeColor,p=void 0===m?"red":m,h=e.backgroundImage,g=void 0===h?"":h,f=e.exportWithBackgroundImage,b=void 0!==f&&f,v=e.preserveBackgroundImageAspectRatio,_=void 0===v?"none":v,y=e.strokeWidth,k=void 0===y?4:y,E=e.eraserWidth,S=void 0===E?8:E,w=e.allowOnlyPointerType,C=void 0===w?"all":w,I=e.style,x=void 0===I?{border:"0.0625rem solid #9c9c9c",borderRadius:"0.25rem"}:I,T=e.svgStyle,P=void 0===T?{}:T,R=e.onChange,O=void 0===R?function(e){}:R,A=e.onStroke,N=void 0===A?function(e,t){}:A,M=e.withTimestamp,D=void 0!==M&&M,z=cn.createRef(),B=cn.useState(!0),L=B[0],F=B[1],G=cn.useState(!1),H=G[0],j=G[1],U=cn.useState([]),W=U[0],V=U[1],K=cn.useState([]),$=K[0],q=K[1],Y=cn.useState([]),X=Y[0],Z=Y[1],J=cn.useCallback((function(){var e,t,n=null!=(e=null==(t=X.slice(-1))?void 0:t[0])?e:null;null!==n?N(n,!n.drawMode):console.warn("No stroke found!")}),[H]);return cn.useEffect((function(){J()}),[H]),cn.useEffect((function(){O(X)}),[X]),cn.useImperativeHandle(t,(function(){return{eraseMode:function(e){F(!e)},clearCanvas:function(){V([].concat(X)),Z([])},undo:function(){if(0!==W.length)return Z([].concat(W)),void V([]);q((function(e){return[].concat(e,X.slice(-1))})),Z((function(e){return e.slice(0,-1)}))},redo:function(){0!==$.length&&(Z((function(e){return[].concat(e,$.slice(-1))})),q((function(e){return e.slice(0,-1)})))},exportImage:function(e){var t,n=null==(t=z.current)?void 0:t.exportImage;if(n)return n(e);throw Error("Export function called before canvas loaded")},exportSvg:function(){return new Promise((function(e,t){var n,o=null==(n=z.current)?void 0:n.exportSvg;o?o().then((function(t){e(t)})).catch((function(e){t(e)})):t(Error("Export function called before canvas loaded"))}))},exportPaths:function(){return new Promise((function(e,t){try{e(X)}catch(e){t(e)}}))},loadPaths:function(e){Z((function(t){return[].concat(t,e)}))},getSketchingTime:function(){return new Promise((function(e,t){D||t(new Error("Set 'withTimestamp' prop to get sketching time"));try{e(X.reduce((function(e,t){var n,o,r=null!=(n=t.startTimestamp)?n:0;return e+((null!=(o=t.endTimestamp)?o:0)-r)}),0))}catch(e){t(e)}}))},resetCanvas:function(){V([]),q([]),Z([])}}})),cn.createElement(Nk,{ref:z,id:o,width:a,height:l,className:c,canvasColor:d,backgroundImage:g,exportWithBackgroundImage:b,preserveBackgroundImageAspectRatio:_,allowOnlyPointerType:C,style:x,svgStyle:P,paths:X,isDrawing:H,onPointerDown:function(e){j(!0),q([]);var t={drawMode:L,strokeColor:L?p:"#000000",strokeWidth:L?k:S,paths:[e]};D&&(t=wk({},t,{startTimestamp:Date.now(),endTimestamp:0})),Z((function(e){return[].concat(e,[t])}))},onPointerMove:function(e){if(H){var t=X.slice(-1)[0],n=wk({},t,{paths:[].concat(t.paths,[e])});Z((function(e){return[].concat(e.slice(0,-1),[n])}))}},onPointerUp:function(){var e,t;if(H&&(j(!1),D)){var n=null!=(e=null==(t=X.slice(-1))?void 0:t[0])?e:null;if(null!==n){var o=wk({},n,{endTimestamp:Date.now()});Z((function(e){return[].concat(e.slice(0,-1),[o])}))}}}})}));const Dk=(0,i.createContext)({}),zk=()=>(0,i.useContext)(Dk),Bk=[{key:20,name:"20",className:"kubio-ai-stroke-option kubio-ai-stroke-20"},{key:30,name:"30",className:"kubio-ai-stroke-option kubio-ai-stroke-30"},{key:40,name:"40",className:"kubio-ai-stroke-option kubio-ai-stroke-40"},{key:50,name:"50",className:"kubio-ai-stroke-option kubio-ai-stroke-50"}],Lk=()=>{const{undoImageAction:e,redoImageAction:t,setStrokeSize:n,strokeSize:o,paintActions:r,resetCanvasAction:a,generatedImagesActions:l}=zk(),{onSelectImageAction:s,currentSelectedImage:c}=By();return(0,i.createElement)("div",{className:"kubio-image-editor-mask-editor-toolbar"},(0,i.createElement)("div",{className:"kubio-image-editor-toolbar-buttons"},(0,i.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action",onClick:e,icon:Bf,disabled:!l.undo,showTooltip:!0,title:(0,T.__)("Undo","kubio"),iconSize:24}),(0,i.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action",onClick:t,icon:Mf,disabled:!l.redo,showTooltip:!0,title:(0,T.__)("Redo","kubio"),iconSize:24}),(0,i.createElement)("div",{className:"kubio-ai-h-divider"}),(0,i.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action kubio-ai-button-action-revert",onClick:a,icon:Y.EraserIcon,disabled:!r.isDirty,showTooltip:!0,title:(0,T.__)("Clear drawing","kubio"),iconSize:16}),(0,i.createElement)(k.CustomSelectControl,{__nextUnconstrainedWidth:!0,hideLabelFromVision:!0,label:"Stroke Size",options:Bk,onChange:e=>{let{selectedItem:t}=e;n(t.key)},value:Bk.find((e=>e.key===o))}),(0,i.createElement)("div",{className:"kubio-ai-h-divider"}),(0,i.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-button",variant:"primary",onClick:()=>{s(c.filename)}},(0,T.__)("Use this image","kubio"))))},Fk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{radius:t=30}=e,n=btoa(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="${t}" height="${t}">\n        <path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z" fill-opacity="0.7" />\n    </svg>`),o=Math.floor(t/2)+1;return{cursor:`url("data:image/svg+xml;base64,${n}") ${o} ${o}, auto`,borderRadius:"100%"}},Gk=()=>{const{currentSelectedImage:e}=By(),{setImageSize:t,imageSize:n,strokeSize:o,canvasRef:r,onStrokeAction:a}=zk(),[l,s]=(0,i.useState)(Fk({radius:o})),[c,u]=(0,i.useState)([n[0],Math.min(512,n[1])]);(0,i.useEffect)((()=>{(async()=>{if(e){const n=await gk(e.filename);t([n.naturalWidth,n.naturalHeight])}})()}),[e.filename]),(0,i.useEffect)((()=>{const e=Math.min(550,n[1]),t=Math.round(n[0]*(e/n[1]));u([t,e])}),[n]),(0,i.useEffect)((()=>{s(Fk({radius:o}))}),[o]);const d=(0,i.useRef)();return(0,i.useEffect)((()=>{if(!d.current)return;const e=new window.MutationObserver((function(){const e=d.current.querySelector("#react-sketch-canvas__stroke-group-0");null==e||e.removeAttribute("mask")}));return e.observe(d.current,{childList:!0,subtree:!0}),()=>{e.disconnect()}}),[d.current]),(0,i.createElement)("div",{className:"kubio-ai-image-generative-editor",ref:d},n[0]>0&&(0,i.createElement)(Mk,{ref:r,width:c[0],height:c[1],strokeWidth:o,className:"kubio-ai-generative-editor",strokeColor:"black",backgroundImage:e.filename,canvasColor:"white",exportWithBackgroundImage:!1,style:l,onStroke:a}),(0,i.createElement)(Lk,null))},Hk=()=>(0,i.createElement)(i.Fragment,null,(0,i.createElement)(Gk,null)),jk=()=>{const[e,t]=(0,i.useState)(""),n=(0,i.useRef)(!1),{backToSection:o,isGenerating:r,setIsGenerating:a,currentSelectedImage:l,addImageVersion:s,setCurrentSelectedImage:c}=By(),{exportSketchImage:u,resetCanvasAction:d,addGeneratedImageToQueue:m}=zk(),p=(0,i.useCallback)((async()=>{if(!r){a(!0);try{const t=await(0,b.aiImageMask)({imagePrompt:e,currentSelectedImage:l.filename,maskImage:await u()});if(""!==t){const e=s(t[0]);d(),!1===n.current&&(n.current=e.currentImage,m(l)),m(e.newImage)}}catch(e){console.log(e)}a(!1)}}),[r,a,e,l,u,s,d,m]);return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action kubio-ai-button-action-back",onClick:()=>{!1!==n.current&&c(n.current),o("EDIT")},icon:sk},(0,T.__)("Back","kubio")),(0,i.createElement)("div",{className:"kubio-ai-sidebar-heading"},(0,i.createElement)("div",{className:"kubio-ai-icon-holder"},(0,i.createElement)(k.Dashicon,{icon:"admin-appearance"})),(0,i.createElement)("div",{className:"kubio-ai-text-holder"},(0,i.createElement)("h3",null,(0,T.__)("Generative Fill","kubio")),(0,i.createElement)("p",{className:"kubio-ai-heading-info"},(0,T.__)("Use the brush to highlight an area of the image and specify the changes you want for that area.","kubio")))),(0,i.createElement)(k.TextareaControl,{onChange:t,value:e,label:(0,T.__)("Description of changes","kubio"),useDebounce:!1}),(0,i.createElement)(Ky,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-sidebar-button",onClick:p,isBusy:r,disabled:r,variant:"primary",label:(0,T.__)("Generate fill","kubio"),loadingMessage:(0,T.__)("Please wait, this may take a few minutes.","kubio"),infoMessage:(0,T.__)("All generated images will be saved in the Media Library.","kubio")}))},Uk=()=>{const e=(()=>{const e={cursor:-1,queue:[]},t={undo:!1,redo:!1,isDirty:!1},n=(0,i.useRef)(!1),[o,r]=(0,i.useState)(30),[a,l]=(0,i.useState)([0,0]),[s,c]=(0,i.useState)(!1),{setCurrentSelectedImage:u}=By(),[d,m]=(0,i.useState)(e),[p,h]=(0,i.useState)(!1),[g,f]=(0,i.useState)(t),[b,v]=(0,i.useState)(t),[_,y]=(0,i.useState)(e),k=()=>{f({undo:d.cursor>-1,redo:d.cursor<d.queue.length-1,isDirty:!0})},E=e=>{const t=d;t.cursor=t.cursor+e,m((()=>t)),k()},S=()=>{m(e),f(t)},w=()=>{v({undo:_.cursor>0,redo:_.cursor<_.queue.length-1})},C=e=>{const t=_;t.cursor=t.cursor+e,y((()=>t)),u(t.queue[t.cursor]),w()};return{canvasRef:n,resetCanvasAction:()=>{S(),n.current.resetCanvas()},redoAction:()=>{E(1),n.current.redo()},undoAction:()=>{E(-1),n.current.undo()},strokeSize:o,setStrokeSize:r,exportSketchImage:async()=>{const e=await n.current.exportImage("png"),t=document.createElement("canvas");t.width=a[0],t.height=a[1];const o=t.getContext("2d");o.clearRect(0,0,t.width,t.height),o.fillStyle="white",o.fillRect(0,0,t.width,t.height);const r=new Image;return r.src=e,r.onload=function(){o.drawImage(r,0,0,a[0],a[1])},await r.decode(),t.toDataURL()},imageSize:a,setImageSize:l,onStrokeAction:()=>{if(!1===p)return void h(!0);const e=d;let t=e.queue;e.cursor=e.cursor>=-1?e.cursor+1:-1,e.cursor>-1&&(t=e.queue.slice(0,e.cursor)),t.push(1),e.queue=t,m(e),k(),h(!1)},paintActions:g,newImageGenerated:s,setNewImageGenerated:c,resetPaintQueue:S,clearCanvasAction:()=>{E(-1),n.current.clearCanvas()},undoImageAction:()=>{C(-1)},redoImageAction:()=>{C(1)},generatedImagesActions:b,addGeneratedImageToQueue:e=>{const t=_;let n=t.queue;t.cursor<t.queue.length-1&&(n=t.queue.slice(0,t.cursor+1)),n.push(e),t.cursor=n.length-1,t.queue=n,y((()=>t)),w()}}})();return(0,i.createElement)(Dk.Provider,{value:e},(0,i.createElement)(Hy,null,(0,i.createElement)(jk,null)),(0,i.createElement)(jy,null,(0,i.createElement)(Hk,null)))},Wk=(0,i.createContext)({}),Vk=()=>(0,i.useContext)(Wk),Kk={imagePrompt:"",imageSize:"medium",imageOrientation:"original",aiPrompt:"",initialSearch:!1},$k=()=>(0,i.createElement)("div",{className:"kubio-ai-image-results-empty"},(0,i.createElement)(k.Icon,{icon:Y.SearchImageIcon}),(0,i.createElement)("p",null,(0,T.__)("Your search results will appear here.","kubio"))),qk=e=>{let{image:t,saveImage:n,canSave:o}=e;const{isGenerating:r}=By();return(0,i.createElement)("div",{className:"kubio-ai-image-generator-single-image"},(0,i.createElement)("img",{src:t["src.medium"],alt:""}),(0,i.createElement)("div",{className:"kubio-ai-image-overlay"},(0,i.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-button",variant:"primary",isBusy:r,disabled:r,onClick:()=>{n(t.url,!0)}},(0,T.__)("Use this image","kubio")),(0,i.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action",onClick:()=>{n(t.url)},disabled:!o,isBusy:r},o?(0,T.__)("Save for later","kubio"):(0,T.__)("Saved","kubio"))))},Yk=()=>{const e=(0,i.useRef)(),{foundImages:t,foundImagePages:n,galleryPage:o,searchForImages:r,isSearching:a,savedImages:l,saveImage:s,imageSearchOptions:c}=Vk(),{isGenerating:u,setIsGenerating:d,onSelectImageAction:m}=By(),[p,h]=(0,i.useState)(!1);(0,i.useEffect)((()=>{h(o<n)}),[n,o]);const g=(0,i.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(u||l.has(e)){const n=l.get(e);t&&m(n,c.aiPrompt)}d(!0);try{const n=await(0,b.aiSearchedImageSave)({selectedImage:e});""!==n&&(s(e,n.url),t&&m(n.url,c.aiPrompt))}catch(e){console.log(e)}d(!1)}),[c.aiPrompt,u,m,s,l,d]);return(0,i.createElement)("div",{className:"kubio-ai-generated-images--infinite-list",ref:e},(0,i.createElement)("div",{className:"kubio-ai-search-images "},t.map(((e,t)=>(0,i.createElement)(qk,{image:e,key:t,saveImage:g,canSave:!l.has(e.url)})))),p&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",{className:"kubio-ai-more"},(0,i.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-load-more-button",variant:"primary",onClick:r,isBusy:a,disabled:a},(0,T.__)("Get more images","kubio"))),(0,i.createElement)("p",{className:"kubio-by-pexels",dangerouslySetInnerHTML:{__html:(0,T.sprintf)(// translators: %s is the url to pexels
(0,T.__)("The media items like photos and videos are provided by %s","kubio"),"<a href='https://www.pexels.com/' target='_blank'>Pexels</a>")}})))},Xk=[{value:"large",label:(0,T.__)("Large","kubio")},{value:"medium",label:(0,T.__)("Medium","kubio")},{value:"small",label:(0,T.__)("Small","kubio")},{value:"tiny",label:(0,T.__)("Tiny","kubio")}],Zk=[{value:"landscape",label:(0,T.__)("Landscape","kubio")},{value:"portrait",label:(0,T.__)("Portrait","kubio")},{value:"square",label:(0,T.__)("Square","kubio")},{value:"original",label:(0,T.__)("Same as current image","kubio")}],Jk=()=>{const{imageSearchOptions:e,setSearchOption:t,isSearching:n,setIsSearching:o,searchForImages:r}=Vk(),{isInitialSearch:a,setIsInitialSearch:l,initialPromptText:s,initialImage:c}=By();return(0,i.useEffect)((()=>{(async()=>{const n=await(async e=>{const t=await gk(e),n=t.width/t.height;switch(!0){case 1===n:return"square";case n>1:return"landscape";case n<1:return"portrait"}return"original"})(c);t("imageOrientation",n),!1===a&&""!==e.aiPrompt&&(o(!0),r(!1),l(!0),s.current="")})()}),[c]),(0,i.createElement)(i.Fragment,null,(0,i.createElement)("p",{className:"kubio-ai-info"},(0,T.__)("Easily search for free images from Pexels. Just type an image description and Kubio AI will extract search terms to find relevant images.","kubio")),(0,i.createElement)(k.TextareaControl,{onChange:e=>{t("imagePrompt",e)},value:e.imagePrompt,label:(0,T.__)("Image Description","kubio"),useDebounce:!1}),(0,i.createElement)(k.SelectControl,{label:(0,T.__)("Image Orientation","kubio"),value:e.imageOrientation,options:Zk,onChange:e=>{t("imageOrientation",e)},size:"__unstable-large"}),(0,i.createElement)(k.SelectControl,{label:(0,T.__)("Saved image size","kubio"),value:e.imageSize,options:Xk,onChange:e=>{t("imageSize",e)},size:"__unstable-large"}),(0,i.createElement)(Ky,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-sidebar-button",onClick:()=>{o(!0),r(!0)},isBusy:n,disabled:n||0===e.imagePrompt.length,variant:"primary",label:(0,T.__)("Search image","kubio"),loadingMessage:(0,T.__)("Please wait, this may take a few minutes.","kubio")}))},Qk=()=>{const{foundImagePages:e}=Vk();return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(Hy,null,(0,i.createElement)(ek,null),(0,i.createElement)(Jk,null)),(0,i.createElement)(jy,{classes:"kubio-ai-image-editor-content-search"},e>0?(0,i.createElement)(Yk,null):(0,i.createElement)($k,null)))},eE=e=>{let{onClose:t,initialImage:n,onSelectImage:o}=e;const r=By(),{setInitialImage:a,editorSection:l,editorTab:s}=r;a(n),r.onSelectImageAction=function(e){o(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:""),t()};const c=(()=>{const{initialImage:e,initialPromptText:t}=By(),[n,o]=(0,i.useState)(!1),[r,a]=(0,i.useState)([]),[l,s]=(0,i.useState)(1),[c,u]=(0,i.useState)(0),[d,m]=(0,i.useState)(new Map),[p,h]=(0,i.useState)({...Kk,imagePrompt:t.current,aiPrompt:t.current}),g=(e,t)=>{h((n=>(n[e]=t,{...n})))},f=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s(e.page+1),u(e.total_pages),a(!0===t?null==e?void 0:e.items:t=>t.concat(null==e?void 0:e.items))},v=(0,i.useCallback)((async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!n){o(!0);try{const n=await(0,b.aiSearchImages)({initialImage:e,page:l,search:p.imagePrompt,imageSize:p.imageSize,imageOrientation:p.imageOrientation,aiPrompt:t?"":p.aiPrompt});n&&(f(n,t),n.ai_query&&g("aiPrompt",n.ai_query))}catch(e){console.log(e)}o(!1)}}),[n,e,l,p.imagePrompt,p.imageSize,p.imageOrientation,p.aiPrompt]);return{imageSearchOptions:p,setSearchOption:g,isSearching:n,setIsSearching:o,setImageGallery:f,foundImages:r,galleryPage:l,foundImagePages:c,searchForImages:v,savedImages:d,setSavedImages:m,saveImage:(e,t)=>{m(d.set(e,t))}}})();return(0,i.createElement)(Wk.Provider,{value:c},(0,i.createElement)(k.Modal,{className:"kubio-ai-image-editor kubio-ai-wizard-modal",overlayClassName:"kubio-ai-close-modal",title:(0,i.createElement)(k.Flex,null,(0,i.createElement)(k.FlexBlock,{className:"kubio-ai-wizard-modal__title"},(0,i.createElement)(k.Icon,{icon:Y.KubioAI,className:"kubio-ai-logo-colored kubio-ai-logo-animated"}),Gy(s)),(0,i.createElement)(k.FlexItem,null,(0,i.createElement)(k.Button,{onClick:t,icon:De,label:(0,T.__)("Close","kubio")}))),isDismissible:!1},(0,i.createElement)("div",{className:x()("kubio-ai-image-editor-wrapper",Zy)},s===Ly.imageGenerate.slug&&(0,i.createElement)(i.Fragment,null,l===Fy.generate&&(0,i.createElement)(ik,null),l===Fy.edit&&(0,i.createElement)(uk,null),l===Fy.view&&(0,i.createElement)(pk,null),l===Fy.generativeFill&&(0,i.createElement)(Uk,null),l===Fy.variations&&(0,i.createElement)(Ek,null)),s===Ly.imageSearch.slug&&(0,i.createElement)(i.Fragment,null,l===Fy.imageSearch&&(0,i.createElement)(Qk,null)))))},tE=e=>{let{onClose:t,onSelectImage:n,initialImage:o,initialPrompt:r}=e;const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const[n,o]=(0,i.useState)(Fy.imageSearch),[r,a]=(0,i.useState)(Ly.imageSearch.slug),[l,s]=(0,i.useState)(""),[c,u]=(0,i.useState)(!1),[d,p]=(0,i.useState)(e),[h,g]=(0,i.useState)(),[f,v]=(0,i.useState)([]),_=m.noop,[y,k]=(0,i.useState)(1),[E,S]=(0,i.useState)("auto"),[w,C]=(0,i.useState)(""),[I,x]=(0,i.useState)("photographic"),[T,P]=(0,i.useState)([1024,1024]),R=(0,i.useRef)(t),[O,A]=(0,i.useState)(!1),[N]=(0,b.useAIServiceInfo)(),{aiImageCost:M=150}=N,D=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"filename";return f.findIndex((n=>n[t]===e))},z=function(e){return{filename:e,...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isVariation:!1,isVersion:!1}}};return{editorSection:n,setEditorSection:o,imagePrompt:l,setImagePrompt:s,isGenerating:c,setIsGenerating:u,initialImage:d,setInitialImage:p,generatedImages:f,setGeneratedImages:v,onSelectImageAction:_,editImageAction:e=>{g(e),o(Fy.edit)},viewImageAction:e=>{g(e),o(Fy.view)},currentSelectedImage:h,setCurrentSelectedImage:g,backToSection:e=>{o(e)},prevImageAction:e=>{const t=D(e);-1!==t&&g(0===t?f[f.length-1]:f[t-1])},nextImageAction:e=>{const t=D(e);-1!==t&&(t===f.length-1?g(f[0]):g(f[t+1]))},aspectRatio:E,setAspectRatio:S,imageStyle:w,setImageStyle:C,imageSize:T,setImageSize:P,numberOfImages:y,setNumberOfImages:k,replaceWithEditedImage:e=>{const t=D(h.filename);if(t>-1){const n=f[t];n.filename=e,g(n),v((e=>(e[t]=n,[...e])))}},saveGeneratedImages:e=>{const t=f;e.forEach((e=>{t.push(z(e))})),v(t)},addImageVariations:(e,t)=>{const n=f;return t.forEach((t=>{n.push(z(t,{isVariation:e}))})),n},getImageVariations:()=>f.filter((e=>e.isVariation===h.filename)),saveNewImage:e=>{const t=z(e);return v((e=>[...e,t])),t},imageType:I,setImageType:x,editorTab:r,setEditorTab:a,setImageSizeFromOptions:e=>{const t=e.split("x");P([t[0],t[1]])},addImageVersion:e=>{const t=f,n=z(e,{isVersion:h.filename});t.push(n);const o={newImage:n,currentImage:h};return v(t),g(n),o},getPreviousImageVersion:()=>{const e=f.find((e=>e.filename===h.filename));if(e){const t=f.find((t=>t.filename===e.isVersion));t&&g(t)}},initialPromptText:R,isInitialSearch:O,setIsInitialSearch:A,aiCreditsPerImageCost:M}}(o,r);return(0,i.createElement)(zy.Provider,{value:a},(0,i.createElement)(eE,{onClose:t,onSelectImage:n,initialImage:o}))},nE=e=>{let{initialImage:t,onChange:n,isSmallButton:o=!1,initialPrompt:r}=e;const a=(0,i.useRef)(),[l,s]=(0,i.useState)(""),[c,u]=ao(),d=(0,i.useCallback)((()=>{u((()=>{s((e=>!e))}))}),[u]);return(0,i.createElement)(i.Fragment,null,c,(0,i.createElement)(k.Button,{ref:a,isSmall:o,className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button",onClick:d,icon:Y.KubioAI}),l&&(0,i.createElement)(tE,{className:"kubio-options-popover",anchor:a.current,onClose:()=>s(!1),onSelectImage:n,initialImage:t,initialPrompt:r}))},{MULTIPLE_IMAGES:oE,IMAGE:rE}=(0,Wo.getNamesOfBlocks)(),aE=[oE,rE],iE=e=>{let{value:t,onChange:n,onlyImages:o=!0}=e;const r=(0,i.useRef)(),[a,l]=(0,i.useState)(""),[s,c]=ao(),u=(0,i.useCallback)((()=>{c((()=>{l((e=>!e))}))}),[c]),d=(0,w.useSelect)((e=>e(h.STORE_KEY).isAICapabilityEnabled()),[]);return o?(0,i.createElement)(i.Fragment,null,s,d&&(0,i.createElement)(k.MenuItem,{ref:r,onClick:u,icon:Y.KubioAI},(0,T.__)("Replace with AI","kubio")),a&&(0,i.createElement)(tE,{className:"kubio-options-popover",anchor:r.current,onClose:()=>l(!1),onSelectImage:(e,t)=>{n({url:e,id:"",caption:t})},initialImage:t})):(0,i.createElement)(i.Fragment,null)},lE=(0,E.createHigherOrderComponent)((e=>t=>(0,i.createElement)(i.Fragment,null,(0,i.createElement)(iE,t),(0,i.createElement)(e,t))),"withImageToolbar");(0,u.addFilter)("kubio.blockEditor.mediaReplaceFlow.afterUploadComponent","kubio.control.ImageToolbar",lE,4);const sE=e=>{let{value:t,BlockEdit:n,...o}=e;const[r,a]=ao(),l=(0,i.useRef)(),c=(0,i.useRef)(""),[u,d]=(0,i.useState)(!1),{dataHelper:p}=(0,s.useKubioBlockContext)(),h=p.getContextProp("activeImageId"),g=p.withChildren(),f=(0,m.get)(p,["localData","kubioAI","imageTerms"])||"",b=(0,i.useCallback)((()=>{a((()=>{d((e=>!e))}))}),[a]);return(0,i.useEffect)((()=>{p.blockName===rE&&(c.current=p.getAttribute("url"))}),[p]),(0,i.createElement)(i.Fragment,null,r,(0,i.createElement)(y.BlockControls,null,(0,i.createElement)(k.ToolbarGroup,{className:"kubio-toolbar-text-ai"},(0,i.createElement)(k.ToolbarButton,{name:"kubio-ai",icon:Y.KubioAI,title:(0,T.__)("Kubio AI","kubio"),className:"kubio-toolbar-text-ai",onClick:b}))),u&&(0,i.createElement)(tE,{className:"kubio-options-popover",anchor:l.current,onClose:()=>d(!1),onSelectImage:async e=>{if(p.blockName===rE)return p.setAttribute("url",e),void p.setAttribute("id",0);const t=g.find((e=>e.clientId===h)),n=await(async e=>{const t=await gk(e);return t.width/t.height})(e);t&&(t.setAttribute("url",e),t.setAttribute("id",0),t.setAttribute("aspectRatio",n))},initialImage:c.current,initialPrompt:f}),(0,i.createElement)(n,o))},cE=(0,E.createHigherOrderComponent)((e=>t=>{const{name:n}=t;return(0,w.useSelect)((e=>e(h.STORE_KEY).isAICapabilityEnabled()),[])&&aE.includes(n)?(0,i.createElement)(sE,C({BlockEdit:e},t)):(0,i.createElement)(e,t)}),"withKubioAIToolbarControls");(0,u.addFilter)("editor.BlockEdit","kubio/ai/with-toolbar-controls",cE,4);const uE=(0,E.createHigherOrderComponent)((e=>t=>{const{dataHelper:n}=(0,s.useKubioBlockContext)();if(!n)return(0,i.createElement)(e,t);const o=(0,m.get)(n,["localData","kubioAI","imageTerms"])||"",[r,a]=av(n.clientId),l=(0,i.useCallback)((e=>{let{url:t,type:l,onChange:s}=e;return"image"!==l?(0,i.createElement)(i.Fragment,null):(0,i.createElement)(nE,{isGenerating:r,setIsGenerating:a,initialImage:t,onChange:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";s({url:e,id:"",caption:t}),(0,m.set)(n,["localData","kubioAI","imageTerms"],t)},initialPrompt:o})}),[r,a,o,n]),c=(0,w.useSelect)((e=>e(h.STORE_KEY).isAICapabilityEnabled()),[]),u=t.hideAIImageButton||!1;return(0,i.createElement)(e,C({},t,{secondaryButton:c&&!u?l:void 0}))}),"withAIImageControls");(0,u.addFilter)("kubio.control.media-picker","kubio/control/ai-media-picker",uE,4);const{HERO:dE,HEADER:mE,NAVIGATION:pE}=(0,Wo.getNamesOfBlocks)(),hE=(0,E.createHigherOrderComponent)((e=>t=>{var n,o,r,a,l;const{replaceDesignFromGallery:s}=bv(),[c,d,p]=ao(),[g,f]=(0,i.useState)(!1),b=(0,i.useRef)(null),v=(0,i.useCallback)((()=>{b.current={type:"surprise"},f(!0)}),[]),_=(0,i.useCallback)((()=>{b.current={type:"regenerate"},f(!0)}),[b]),y=(0,i.useCallback)((()=>{s(((e,t)=>{b.current={type:"hand-pick",pattern:e,insert:t},f(!0)}))}),[s,b]),E=(0,i.useMemo)((()=>[{label:(0,T.__)("Surprise me","kubio"),description:(0,T.__)("Kubio AI chooses a section and writes the content for you.","kubio"),icon:Y.KubioAI,onClick:v},{label:(0,T.__)("Hand pick a design","kubio"),description:(0,T.__)("You choose a section, Kubio AI writes your content.","kubio"),icon:Y.PredesignedLayoutsIcon,onClick:y},{label:(0,T.__)("Regenerate content","kubio"),description:(0,T.__)("Kubio AI will keep the same design but regenerate the text and images.","kubio"),icon:Y.RegenerateContentIcon,onClick:_}]),[v,y,_]),S=null==t||null===(n=t.dataHelper)||void 0===n?void 0:n.blockName,I=null==t||null===(o=t.dataHelper)||void 0===o?void 0:o.clientId,{isUnlocked:x}=gE({clientId:I});let P=!1;const R=null==t||null===(r=t.dataHelper)||void 0===r||null===(a=r.getAttribute)||void 0===a?void 0:a.call(r,"kubioAI.meta.summary","");"regenerate"===(null===(l=b.current)||void 0===l?void 0:l.type)?P=!0:[dE,mE,pE].includes(S)||(P=!R);const O=(0,i.useCallback)((e=>{let{buttonBaseClass:t}=e;if(!(0,u.applyFilters)("kubio.section-ai-options.showRegenerateButton",!0,S))return(0,i.createElement)(i.Fragment,null);const n=!p||!x,o=(0,i.createElement)(k.Button,{className:`${t} kubio-ai-design-section-button kubio-ai-button`,icon:Y.KubioAI,label:(0,T.__)("Regenerate design","kubio"),onClick:x?d:m.noop},(0,T.__)("Regenerate","kubio"));return(0,i.createElement)(i.Fragment,null,n&&o,!n&&(0,i.createElement)(Oy,{menuItems:E,toggleButton:o,className:"kubio-dropdown-with-hover__section-options--ai"}))}),[d,p,E,S,x]),A=(0,w.useSelect)((e=>e(h.STORE_KEY).isAICapabilityEnabled()),[]);return(0,i.createElement)(i.Fragment,null,c,g&&(0,i.createElement)(Ny,{setVisible:f,sectionRef:b,onChangeSection:()=>{f(!1),y()},askForSummary:P}),(0,i.createElement)(e,C({},t,{beforeSettingsButton:A?O:void 0})))}),"withSectionHoverControls"),gE=e=>{let{clientId:t}=e;const{templatePartArea:n}=(0,w.useSelect)((e=>{const{getBlockRootClientId:n,getBlock:o}=e("core/block-editor"),r=o(n(t));return{templatePartArea:p().get({"kubio/header":"header","kubio/footer":"footer","kubio/sidebar":"sidebar"},null==r?void 0:r.name,!1)}}),[]);let{isUnlocked:o}=(0,s.useTemplatePartLock)(n);return n||(o=!0),{isUnlocked:o}};(0,u.addFilter)("kubio.components.section-hover-options","kubio/control/section-hover-controls",hE,4);const fE=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M5 11.25h14v1.5H5z"})),bE=(0,i.createElement)(R.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,i.createElement)(R.Path,{d:"M7 16.5h10V15H7v1.5zm0-9V9h10V7.5H7z"})),vE=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M6.13 5.5l1.926 1.927A4.975 4.975 0 007.025 10H5v1.5h2V13H5v1.5h2.1a5.002 5.002 0 009.8 0H19V13h-2v-1.5h2V10h-2.025a4.979 4.979 0 00-1.167-2.74l1.76-1.76-1.061-1.06-1.834 1.834A4.977 4.977 0 0012 5.5c-1.062 0-2.046.33-2.855.895L7.19 4.44 6.13 5.5zm2.37 5v3a3.5 3.5 0 107 0v-3a3.5 3.5 0 10-7 0z",fillRule:"evenodd",clipRule:"evenodd"})),_E=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{d:"M17.5 10h-1.7l-3.7 10.5h1.7l.9-2.6h3.9l.9 2.6h1.7L17.5 10zm-2.2 6.3 1.4-4 1.4 4h-2.8zm-4.8-3.8c1.6-1.8 2.9-3.6 3.7-5.7H16V5.2h-5.8V3H8.8v2.2H3v1.5h9.6c-.7 1.6-1.8 3.1-3.1 4.6C8.6 10.2 7.8 9 7.2 8H5.6c.6 1.4 1.7 2.9 2.9 4.4l-2.4 2.4c-.3.4-.7.8-1.1 1.2l1 1 1.2-1.2c.8-.8 1.6-1.5 2.3-2.3.8.9 1.7 1.7 2.5 2.5l.6-1.5c-.7-.6-1.4-1.3-2.1-2z"})),yE=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,i.createElement)(R.Path,{fillRule:"evenodd",d:"M6.863 13.644L5 13.25h-.5a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5H5L18 6.5h2V16h-2l-3.854-.815.026.008a3.75 3.75 0 01-7.31-1.549zm1.477.313a2.251 2.251 0 004.356.921l-4.356-.921zm-2.84-3.28L18.157 8h.343v6.5h-.343L5.5 11.823v-1.146z",clipRule:"evenodd"})),{HEADING:kE}=(0,Wo.getNamesOfBlocks)(),EE=e=>{let{title:t,subtitle:n,icon:o}=e;return(0,i.createElement)(k.Flex,{className:"text-ai-custom-label",direction:"column",gap:1.5,expanded:!0},(0,i.createElement)(k.Flex,{justify:"flex-start"},(0,i.createElement)(In,{icon:o,className:"text-ai-custom-label__icon"}),(0,i.createElement)("span",{className:"text-ai-custom-label__title"},t)),(0,i.createElement)("span",{className:"text-ai-custom-label__subtitle"},n))},SE=e=>{let{dataHelper:t,onClose:n,anchor:o,isGenerating:r,setIsGenerating:a}=e;const[l,s]=(0,i.useState)(""),[{pageTitle:c,siteContext:u,pageContext:d}]=(0,b.useAIData)(),m=(0,i.useCallback)((async()=>{a(!0),n();try{const e=await(0,b.prompt)({pageTitle:c,siteContext:u,pageContext:d,prompt:l,originalContent:t.getAttribute("content",""),short:t.block.name===kE});t.setAttribute("content",e)}catch(e){}a(!1)}),[t,l,n,d,c,a,u]);return(0,i.createElement)(k.Popover,{className:"kubio-options-popover kubio-text-ai-popover",anchor:o,onClose:n,offset:15},(0,i.createElement)(k.Flex,{direction:"column",align:"end",gap:3.75},(0,i.createElement)(k.FlexBlock,null,(0,i.createElement)(P.TextareaControl,{className:"kubio-ai-block-prompt-textarea",value:l,onChange:s,label:(0,i.createElement)(EE,{icon:Y.TextAiRegenerate,title:(0,T.__)("Regenerate","kubio"),subtitle:(0,T.__)("Write a new prompt and let the AI generate the content for you","kubio")}),cols:60,rows:4})),(0,i.createElement)(k.FlexItem,null,(0,i.createElement)(k.Button,{className:"kubio-ai-button",onClick:m,isBusy:r},(0,T.__)("Regenerate","kubio")))))},wE=e=>{let{dataHelper:t,onClose:n,anchor:o,isGenerating:r,setIsGenerating:a}=e;const[l,s]=(0,i.useState)("natural"),[{pageTitle:c,siteContext:u,pageContext:d}]=(0,b.useAIData)(),p=(0,i.useMemo)((()=>(0,m.map)((0,b.getContentLanguageStyles)(),((e,t)=>{let{label:n,description:o}=e;return{label:n,description:o,value:t}}))),[]),h=(0,i.useCallback)((async()=>{a(!0),n();try{const e=await(0,b.changeTextPrompt)({pageTitle:c,siteContext:u,pageContext:d,promptData:l,text:t.getAttribute("content",""),type:"tone"});t.setAttribute("content",e)}catch(e){}a(!1)}),[t,l,n,d,c,a,u]);return(0,i.createElement)(k.Popover,{className:"kubio-options-popover kubio-text-ai-popover",anchor:o,onClose:n,offset:15},(0,i.createElement)(k.Flex,{direction:"column",gap:3.75},(0,i.createElement)(k.FlexBlock,null,(0,i.createElement)(P.GutentagSelectControl,{label:(0,i.createElement)(EE,{icon:yE,title:(0,T.__)("Change tone","kubio"),subtitle:(0,T.__)("Select the tone you want to rewrite this text.","kubio")}),inlineLabel:!1,options:p,value:l,onChange:s,itemRenderer:e=>(0,i.createElement)("div",{className:"kubio-ai-language-style-select-item"},(0,i.createElement)("span",null,e.label),(0,i.createElement)("span",null,e.description))})),(0,i.createElement)(k.Button,{className:"kubio-ai-button",onClick:h,isBusy:r},(0,T.__)("Rewrite","kubio"))))},CE=e=>{let{dataHelper:t,onClose:n,anchor:o,isGenerating:r,setIsGenerating:a}=e;const[l,s]=(0,i.useState)("en_US"),[{pageTitle:c,siteContext:u,pageContext:d}]=(0,b.useAIData)(),p=(0,i.useMemo)((()=>(0,m.map)((0,b.getContentLanguages)(),((e,t)=>({label:e,value:t})))),[]),h=(0,i.useCallback)((async()=>{a(!0),n();try{const e=await(0,b.changeTextPrompt)({pageTitle:c,siteContext:u,pageContext:d,promptData:l,text:t.getAttribute("content",""),type:"translate"});t.setAttribute("content",e)}catch(e){}a(!1)}),[t,l,n,d,c,a,u]);return(0,i.createElement)(k.Popover,{className:"kubio-options-popover kubio-text-ai-popover",anchor:o,onClose:n,offset:15},(0,i.createElement)(k.Flex,{direction:"column",gap:3.75},(0,i.createElement)(k.FlexBlock,{expanded:!0},(0,i.createElement)(P.GutentagSelectControl,{label:(0,i.createElement)(EE,{icon:_E,title:(0,T.__)("Translate","kubio"),subtitle:(0,T.__)("In which language would you like to translate this text?","kubio")}),value:l,onChange:s,inlineLabel:!1,options:p})),(0,i.createElement)(k.Button,{className:"kubio-ai-button",onClick:h,isBusy:r},(0,T.__)("Translate","kubio"))))},{HEADING:IE,TEXT:xE}=(0,Wo.getNamesOfBlocks)(),TE=[IE,xE],PE=[{icon:fE,title:(0,T.__)("Make shorter","kubio"),action:"shorten"},{icon:bE,title:(0,T.__)("Make longer","kubio"),action:"lengthen"},{icon:vE,title:(0,T.__)("Fix spelling & grammar","kubio"),action:"fix"},{icon:Y.TextAiRegenerate,title:(0,T.__)("Regenerate","kubio"),action:"prompt"},{icon:_E,title:(0,T.__)("Translate","kubio"),action:"translate"},{icon:yE,title:(0,T.__)("Change tone","kubio"),action:"change-tone"}],RE=e=>{let{BlockEdit:t,...n}=e;const{dataHelper:o}=(0,s.useKubioBlockContext)(),{name:r,clientId:a}=n,[l,c]=av(a),[{pageContext:u,siteContext:d,pageTitle:m}]=(0,b.useAIData)(),p=(0,i.useRef)(),h=r===xE?"p":`h${o.getProp("level",2)}`,[g,f]=(0,i.useState)(!1),[v,_]=(0,i.useState)(!1),[E,S]=(0,i.useState)(!1),[w,C,I]=ao(),x=(0,i.useCallback)((async e=>{const{action:t}=e;if(!l){switch(c(!0),t){case"shorten":case"lengthen":case"fix":try{const e=await(0,b.processContent)({pageContext:u,siteContext:d,pageTitle:m,content:o.getAttribute("content",""),action:t,extras:{tag:h}});o.setAttribute("content",e)}catch(e){X.Log.error(`process-text: ${t}`,e)}break;case"prompt":f(!0);break;case"translate":_(!0);break;case"change-tone":S(!0)}c(!1)}}),[o,l,u,m,c,d,h]);return(0,i.createElement)(i.Fragment,null,w,(0,i.createElement)(y.BlockControls,{group:"block"},I&&(0,i.createElement)(k.ToolbarDropdownMenu,{ref:p,icon:Y.KubioAI,className:"kubio-toolbar-text-ai",label:(0,T.__)("Kubio AI","kubio"),controls:PE.map((e=>({...e,onClick:()=>x(e)}))),popoverProps:{className:"kubio-toolbar-text-ai__popover"}}),!I&&(0,i.createElement)(k.ToolbarButton,{ref:p,icon:Y.KubioAI,className:"kubio-toolbar-text-ai kubio-ai-button",label:(0,T.__)("Kubio AI","kubio"),onClick:C})),g&&(0,i.createElement)(SE,{anchor:p.current,onClose:()=>f(!1),dataHelper:o,isGenerating:l,setIsGenerating:c}),v&&(0,i.createElement)(CE,{anchor:p.current,onClose:()=>_(!1),dataHelper:o,isGenerating:l,setIsGenerating:c}),E&&(0,i.createElement)(wE,{anchor:p.current,onClose:()=>S(!1),dataHelper:o,isGenerating:l,setIsGenerating:c}),(0,i.createElement)(t,n))},OE=(0,E.createHigherOrderComponent)((e=>t=>{const{name:n}=t;return(0,w.useSelect)((e=>e(h.STORE_KEY).isAICapabilityEnabled()),[])&&TE.includes(n)?(0,i.createElement)(RE,C({BlockEdit:e},t)):(0,i.createElement)(e,t)}),"withKubioAIToolbarControls");(0,u.addFilter)("editor.BlockEdit","kubio/ai/with-toolbar-controls",OE,4),(0,u.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","contact-form",(e=>("kubio/contact"!==e.name||p().set(e,"attributes.kubio.props.autoSelectFormAtMount",!0),e)));const AE={facebook:"font-awesome/facebook-square",twitter:"font-awesome/square-x-twitter",youtube:"font-awesome/youtube-square",instagram:"font-awesome/instagram",tiktok:"font-awesome/tiktok",pinterest:"font-awesome/pinterest-square",whatsapp:"font-awesome/whatsapp",linkedin:"font-awesome/linkedin-square"},NE={"font-awesome":[{type:"square",items:AE},{type:"noneSquare",items:{facebook:"font-awesome/facebook",twitter:"font-awesome/twitter-x",youtube:"font-awesome/youtube-play",instagram:"font-awesome/instagram",tiktok:"font-awesome/tiktok",pinterest:"font-awesome/pinterest",whatsapp:"font-awesome/whatsapp",linkedin:"font-awesome/linkedin"}}],ionicons:[{type:"filled",items:{facebook:"ionicons/social-facebook",twitter:"ionicons/social-twitter",youtube:"ionicons/social-youtube",instagram:"ionicons/social-instagram",pinterest:"ionicons/social-pinterest",whatsapp:"ionicons/social-whatsapp",linkedin:"ionicons/social-linkedin"}},{type:"outlined",items:{facebook:"ionicons/social-facebook-outline",twitter:"ionicons/social-twitter-outline",youtube:"ionicons/social-youtube-outline",instagram:"ionicons/social-instagram-outline",pinterest:"ionicons/social-pinterest-outline",whatsapp:"ionicons/social-whatsapp-outline",linkedin:"ionicons/social-linkedin-outline"}}],"icons8-line-awesome":[{type:"normal",items:{facebook:"icons8-line-awesome/facebook",twitter:"icons8-line-awesome/twitter",youtube:"icons8-line-awesome/youtube-play",instagram:"icons8-line-awesome/instagram",pinterest:"icons8-line-awesome/pinterest",whatsapp:"icons8-line-awesome/whatsapp",linkedin:"icons8-line-awesome/linkedin"}}],socicon:[{type:"normal",items:{facebook:"socicon/facebook",twitter:"socicon/twitter",youtube:"socicon/youtube",instagram:"socicon/instagram",pinterest:"socicon/pinterest",whatsapp:"socicon/whatsapp",linkedin:"socicon/linkedin"}}],"foundation-icons":[{type:"normal",items:{facebook:"foundation-icons/social-facebook",twitter:"foundation-icons/social-twitter",youtube:"foundation-icons/social-youtube",instagram:"foundation-icons/social-instagram",pinterest:"foundation-icons/social-pinterest",linkedin:"foundation-icons/social-linkedin"}}],"simple-line-icons":[{type:"normal",items:{facebook:"simple-line-icons/social-facebook",twitter:"simple-line-icons/social-twitter",youtube:"simple-line-icons/social-youtube"}}],typicons:[{type:"normal",items:{facebook:"typicons/social-facebook",twitter:"typicons/social-twitter",youtube:"typicons/social-youtube",instagram:"typicons/social-instagram",pinterest:"typicons/social-pinterest",linkedin:"typicons/social-linkedin"}}]},ME=(()=>{const e={};return p().each(NE,((t,n)=>{t.forEach((t=>{let{items:n}=t;p().each(n,((t,o)=>{p().set(e,t,n)}))}))})),e})(),DE=AE,{SECTION:zE,SOCIAL_ICONS:BE}=(0,Wo.getNamesOfBlocks)(),LE=e=>{let{block:t,siteContext:n}=e;const o=p().get(n,"contact.socials",[]),r=(0,m.filter)(o,(e=>{let{url:t}=e;return!!t}));if(!o||p().isEmpty(o)||!r.length)return t;const a="attributes.icon.name",i=o.filter((e=>{let{url:t}=e;return t})),l=t.innerBlocks,s=l.filter((e=>{const t=p().get(e,a);return i.find((e=>{let{type:n}=e;return t.includes(n)}))})),c=[];let u=null;return i.forEach((e=>{let{type:t,url:n}=e;const o=s.find((e=>p().get(e,a).includes(t)));o?(p().set(o,"attributes.link.value",n),u=p().get(o,"attributes.icon.name")):c.push({type:t,url:n})})),c.forEach((e=>{let{type:t,url:n}=e;const o=l[l.length-1],r=p().cloneDeep((0,Mr.cloneBlock)(o));p().unset(r,"attributes.kubio.styleRef"),p().set(r,"attributes.link.value",n);const a=((e,t)=>{const n=p().get(ME,t),o=DE[e];return n?p().get(n,e,o):o})(t,u);p().set(r,"attributes.icon.name",a),s.push(r)})),t.innerBlocks=s,t};(0,u.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","social-icons",((e,t,n,o)=>{if(e.name!==BE)return e;const r=o[0];if(r.name===zE){const t=["contact","footer-section","footer"],n=p().get(r,"attributes.kubioAI.meta.category");if(!t.includes(n))return e}return LE({block:e,siteContext:t})})),(0,u.addFilter)("kubio.navigation.topBarBlockBeforeInsert","social-icons",((e,t)=>e.name!==BE?e:LE({block:e,siteContext:t})));const{ICON_LIST:FE}=(0,Wo.getNamesOfBlocks)(),GE={phone:{desc:"phone",icons:["phone","call"]},email:{desc:"mail",icons:["mail","envelope"]},address:{desc:"address",icons:["map","pin","home","house"]}},HE=(e,t)=>e.innerBlocks.find((e=>{if(p().get(e,"attributes.kubioAI.desc","").toLowerCase().includes(GE[t].desc))return!0;const n=p().get(e,"attributes.icon","").toLowerCase();for(const e of GE[t].icons)if(n.includes(e))return!0;return!1})),jE=e=>{let{block:t,siteContext:n}=e;const o=p().get(n,"contact"),r=p().get(o,"address","123, Main Street, City, Country");if(r){const e=HE(t,"address");e&&p().set(e,"attributes.text",r)}const a=p().get(o,"phone","+1 234 567 890");if(a){const e=HE(t,"phone");e&&p().set(e,"attributes.text",a)}const i=p().get(o,"email","email@example.com");if(i){const e=HE(t,"email");e&&p().set(e,"attributes.text",i)}return t};(0,u.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","iconsList",((e,t,n,o)=>e.name!==FE?e:jE({block:e,siteContext:t}))),(0,u.addFilter)("kubio.navigation.topBarBlockBeforeInsert","iconsList",((e,t)=>e.name!==FE?e:jE({block:e,siteContext:t}))),(0,u.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","kubio-map",((e,t)=>{if("kubio/map"!==e.name)return e;const n=(0,m.get)(t,["contact","address"]);return n&&(0,m.set)(e,"attributes.address",n),(0,m.set)(e,"attributes.zoom.value",15),e})),(0,u.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","logo",((e,t)=>{if("kubio/logo"!==e.name)return e;const n=(0,w.select)("core").getEditedEntityRecord("root","site");return((null==n?void 0:n.site_logo)||(null==n?void 0:n.sitelogo)||p().get(t,["website_logo","id"]))&&p().set(e,"attributes.kubio.props.layoutType","image"),e})),(0,u.addFilter)("kubio.ai.generateSectionBlocks.beforeBlockGenerated","hero",(e=>{if("kubio/hero"!==e[0])return e;const t=["1","kubio","style","descendants","outer","background"];return"slideshow"===p().get(e,[...t,"type"])&&(e=p().cloneDeep(e),p().unset(e,[...t,"slideshow"]),p().set(e,[...t,"type"],"image"),p().set(e,[...t,"image","0"],{source:{type:"image",url:""},position:{x:50,y:50}})),e})),(0,u.addFilter)("kubio.ai-filters","kubio-ai-filters",(()=>({useHandleInsert:My,useIsAISetupComplete:ao,GenerateSectionModal:Ny})));const UE=(0,i.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,i.createElement)(R.Path,{d:"M20 10c0-5.51-4.49-10-10-10C4.48 0 0 4.49 0 10c0 5.52 4.48 10 10 10 5.51 0 10-4.48 10-10zM7.78 15.37L4.37 6.22c.55-.02 1.17-.08 1.17-.08.5-.06.44-1.13-.06-1.11 0 0-1.45.11-2.37.11-.18 0-.37 0-.58-.01C4.12 2.69 6.87 1.11 10 1.11c2.33 0 4.45.87 6.05 2.34-.68-.11-1.65.39-1.65 1.58 0 .74.45 1.36.9 2.1.35.61.55 1.36.55 2.46 0 1.49-1.4 5-1.4 5l-3.03-8.37c.54-.02.82-.17.82-.17.5-.05.44-1.25-.06-1.22 0 0-1.44.12-2.38.12-.87 0-2.33-.12-2.33-.12-.5-.03-.56 1.2-.06 1.22l.92.08 1.26 3.41zM17.41 10c.24-.64.74-1.87.43-4.25.7 1.29 1.05 2.71 1.05 4.25 0 3.29-1.73 6.24-4.4 7.78.97-2.59 1.94-5.2 2.92-7.78zM6.1 18.09C3.12 16.65 1.11 13.53 1.11 10c0-1.3.23-2.48.72-3.59C3.25 10.3 4.67 14.2 6.1 18.09zm4.03-6.63l2.58 6.98c-.86.29-1.76.45-2.71.45-.79 0-1.57-.11-2.29-.33.81-2.38 1.62-4.74 2.42-7.1z"})),WE=function(e){let{icon:t}=e;if(!(0,w.useSelect)((e=>e(h.STORE_KEY).isFeatureActive("fullscreenMode")),[]))return null;const n=t||UE;return(0,i.createElement)(k.Button,{className:"edit-site-fullscreen-mode-close",icon:n,iconSize:36,href:"index.php",label:(0,T.__)("Back","kubio")})};function VE(e,t){(0,s.registerTemplateStore)(),t.__experimentalFetchLinkSuggestions=s.fetchLinkSuggestions,t.__experimentalSpotlightEntityBlocks=["core/template-part"];const n=new URLSearchParams(window.location.search);t.isGutentagDebug=!!n.get("kubio-debug");const o=t.state;delete t.state,o.settings=t,(0,c.registerCoreBlocks)(),(0,l.initFirebaseData)(),(0,m.isFunction)(c.__experimentalRegisterExperimentalCoreBlocks)&&(0,c.__experimentalRegisterExperimentalCoreBlocks)({enableFSEBlocks:!0});const r=$v;t.wpVersion&&document.body.classList.add("kubio-wp-"+t.wpVersion.replace(".","-")),async function(e){(0,w.registerStore)(io,{...Ry,initialState:e})}(o),(0,s.reactRender)((0,i.createElement)(i.StrictMode,null,(0,i.createElement)(r,{initialSettings:o.settings})),document.getElementById(e)),window.kubioToggleDebug=e=>{wp.data.dispatch("kubio/edit-site").toggleGutentagDebug(e)},top.kubioStartTime=performance.now(),(0,u.addAction)("kubio.editor.page-changed","kubio/editor/page-changed/restart-performance-timer",(()=>{top.kubioStartTime=performance.now()}))}})(),(window.kubio=window.kubio||{}).editor=o})();
