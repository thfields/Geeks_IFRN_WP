(()=>{var e={4184:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var a=r.apply(null,n);a&&e.push(a)}}else if("object"===i){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var l in n)o.call(n,l)&&n[l]&&e.push(l)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},1874:e=>{e.exports='<html> <head> <style>body,html{background:#f1f3f5}.content{display:flex;flex-direction:column;align-items:center;justify-items:center;justify-content:center;position:fixed;left:0;top:0;width:100vw;height:100vh}.container{text-align:center}.message{font-size:1.2rem;color:#15192b;font-family:-apple-system,BlinkMacSystemFont,\'Segoe UI\',Roboto,Oxygen-Sans,Ubuntu,Cantarell,\'Helvetica Neue\',sans-serif}#eKIDzSscbEO1{overflow:visible;width:120px!important;height:120px!important;max-width:120px!important;fill:#a4afb7!important}#eKIDzSscbEO3_tr{animation:eKIDzSscbEO3_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO3_tr__tr{0%{transform:translate(193.209984px,190.850067px) rotate(0)}12%{transform:translate(193.209984px,190.850067px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}20%{transform:translate(193.209984px,190.850067px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}52%{transform:translate(193.209984px,190.850067px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}60%{transform:translate(193.209984px,190.850067px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}68%{transform:translate(193.209984px,190.850067px) rotate(0)}100%{transform:translate(193.209984px,190.850067px) rotate(0)}}#eKIDzSscbEO5_tr{animation:eKIDzSscbEO5_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO5_tr__tr{0%{transform:translate(193.219933px,61.519987px) rotate(360deg)}20%{transform:translate(193.219933px,61.519987px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}28%{transform:translate(193.219933px,61.519987px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}84%{transform:translate(193.219933px,61.519987px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}92%{transform:translate(193.219933px,61.519987px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}100%{transform:translate(193.219933px,61.519987px) rotate(360deg)}}#eKIDzSscbEO7_tr{animation:eKIDzSscbEO7_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO7_tr__tr{0%{transform:translate(59.18501px,193.18499px) rotate(0)}28%{transform:translate(59.18501px,193.18499px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}36%{transform:translate(59.18501px,193.18499px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}68%{transform:translate(59.18501px,193.18499px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}76%{transform:translate(59.18501px,193.18499px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}84%{transform:translate(59.18501px,193.18499px) rotate(0)}100%{transform:translate(59.18501px,193.18499px) rotate(0)}}#eKIDzSscbEO9_tr{animation:eKIDzSscbEO9_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO9_tr__tr{0%{transform:translate(59.149774px,59.150009px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}8%{transform:translate(59.149774px,59.150009px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}36%{transform:translate(59.149774px,59.150009px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}44%{transform:translate(59.149774px,59.150009px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}52%{transform:translate(59.149774px,59.150009px) rotate(360deg)}100%{transform:translate(59.149774px,59.150009px) rotate(360deg)}}</style> </head> <body> <div class="content"> <div class="container"> {svg_image} <p class="message">{message}</p> </div> </div> </body> </html> '},9457:e=>{e.exports='<html> <head> <style>.kubio-loading-logo{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:0}.kubio-loading-logo svg{width:120px!important;height:120px!important;max-width:120px!important;fill:#a4afb7!important}#eKIDzSscbEO1{overflow:visible;max-width:90px}#eKIDzSscbEO3_tr{animation:eKIDzSscbEO3_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO3_tr__tr{0%{transform:translate(193.209984px,190.850067px) rotate(0)}12%{transform:translate(193.209984px,190.850067px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}20%{transform:translate(193.209984px,190.850067px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}52%{transform:translate(193.209984px,190.850067px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}60%{transform:translate(193.209984px,190.850067px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}68%{transform:translate(193.209984px,190.850067px) rotate(0)}100%{transform:translate(193.209984px,190.850067px) rotate(0)}}#eKIDzSscbEO5_tr{animation:eKIDzSscbEO5_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO5_tr__tr{0%{transform:translate(193.219933px,61.519987px) rotate(360deg)}20%{transform:translate(193.219933px,61.519987px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}28%{transform:translate(193.219933px,61.519987px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}84%{transform:translate(193.219933px,61.519987px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}92%{transform:translate(193.219933px,61.519987px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}100%{transform:translate(193.219933px,61.519987px) rotate(360deg)}}#eKIDzSscbEO7_tr{animation:eKIDzSscbEO7_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO7_tr__tr{0%{transform:translate(59.18501px,193.18499px) rotate(0)}28%{transform:translate(59.18501px,193.18499px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}36%{transform:translate(59.18501px,193.18499px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}68%{transform:translate(59.18501px,193.18499px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}76%{transform:translate(59.18501px,193.18499px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}84%{transform:translate(59.18501px,193.18499px) rotate(0)}100%{transform:translate(59.18501px,193.18499px) rotate(0)}}#eKIDzSscbEO9_tr{animation:eKIDzSscbEO9_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO9_tr__tr{0%{transform:translate(59.149774px,59.150009px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}8%{transform:translate(59.149774px,59.150009px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}36%{transform:translate(59.149774px,59.150009px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}44%{transform:translate(59.149774px,59.150009px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}52%{transform:translate(59.149774px,59.150009px) rotate(360deg)}100%{transform:translate(59.149774px,59.150009px) rotate(360deg)}}</style> </head> <body> <div id="content"> </div> </body> </html> '},1143:e=>{"use strict";e.exports=function(e,t,n,o,r,i,a,l){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,o,r,i,a,l],u=0;(s=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},2703:(e,t,n)=>{"use strict";var o=n(414);function r(){}function i(){}i.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,i,a){if(a!==o){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n,n}},5697:(e,t,n)=>{e.exports=n(2703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},5800:function(e,t,n){!function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var o=n(t);function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}var i={error:null},a=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).state=i,t.resetErrorBoundary=function(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];null==t.props.onReset||(e=t.props).onReset.apply(e,o),t.reset()},t}var n,a;a=e,(n=t).prototype=Object.create(a.prototype),n.prototype.constructor=n,r(n,a),t.getDerivedStateFromError=function(e){return{error:e}};var l=t.prototype;return l.reset=function(){this.setState(i)},l.componentDidCatch=function(e,t){var n,o;null==(n=(o=this.props).onError)||n.call(o,e,t)},l.componentDidUpdate=function(e,t){var n,o,r,i,a=this.state.error,l=this.props.resetKeys;null!==a&&null!==t.error&&(void 0===(r=e.resetKeys)&&(r=[]),void 0===(i=l)&&(i=[]),r.length!==i.length||r.some((function(e,t){return!Object.is(e,i[t])})))&&(null==(n=(o=this.props).onResetKeysChange)||n.call(o,e.resetKeys,l),this.reset())},l.render=function(){var e=this.state.error,t=this.props,n=t.fallbackRender,r=t.FallbackComponent,i=t.fallback;if(null!==e){var a={error:e,resetErrorBoundary:this.resetErrorBoundary};if(o.isValidElement(i))return i;if("function"==typeof n)return n(a);if(r)return o.createElement(r,a);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(o.Component);e.ErrorBoundary=a,e.useErrorHandler=function(e){var t=o.useState(null),n=t[0],r=t[1];if(null!=e)throw e;if(null!=n)throw n;return r},e.withErrorBoundary=function(e,t){var n=function(n){return o.createElement(a,t,o.createElement(e,n))},r=e.displayName||e.name||"Unknown";return n.displayName="withErrorBoundary("+r+")",n},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(9196))},9590:e=>{var t="undefined"!=typeof Element,n="function"==typeof Map,o="function"==typeof Set,r="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function i(e,a){if(e===a)return!0;if(e&&a&&"object"==typeof e&&"object"==typeof a){if(e.constructor!==a.constructor)return!1;var l,s,c,u;if(Array.isArray(e)){if((l=e.length)!=a.length)return!1;for(s=l;0!=s--;)if(!i(e[s],a[s]))return!1;return!0}if(n&&e instanceof Map&&a instanceof Map){if(e.size!==a.size)return!1;for(u=e.entries();!(s=u.next()).done;)if(!a.has(s.value[0]))return!1;for(u=e.entries();!(s=u.next()).done;)if(!i(s.value[1],a.get(s.value[0])))return!1;return!0}if(o&&e instanceof Set&&a instanceof Set){if(e.size!==a.size)return!1;for(u=e.entries();!(s=u.next()).done;)if(!a.has(s.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(a)){if((l=e.length)!=a.length)return!1;for(s=l;0!=s--;)if(e[s]!==a[s])return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===a.toString();if((l=(c=Object.keys(e)).length)!==Object.keys(a).length)return!1;for(s=l;0!=s--;)if(!Object.prototype.hasOwnProperty.call(a,c[s]))return!1;if(t&&e instanceof Element)return!1;for(s=l;0!=s--;)if(("_owner"!==c[s]&&"__v"!==c[s]&&"__o"!==c[s]||!e.$$typeof)&&!i(e[c[s]],a[c[s]]))return!1;return!0}return e!=e&&a!=a}e.exports=function(e,t){try{return i(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},7761:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(9196),i=l(r),a=l(n(5697));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.scrollListener=n.scrollListener.bind(n),n.eventListenerOptions=n.eventListenerOptions.bind(n),n.mousewheelListener=n.mousewheelListener.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){if(this.props.isReverse&&this.loadMore){var e=this.getParentElement(this.scrollComponent);e.scrollTop=e.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"isPassiveSupported",value:function(){var e=!1,t={get passive(){e=!0}};try{document.addEventListener("test",null,t),document.removeEventListener("test",null,t)}catch(e){}return e}},{key:"eventListenerOptions",value:function(){return this.props.useCapture,this.isPassiveSupported()?{useCapture:this.props.useCapture,passive:!0}:{passive:!1}}},{key:"setDefaultLoader",value:function(e){this.defaultLoader=e}},{key:"detachMousewheelListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}},{key:"detachScrollListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}},{key:"getParentElement",value:function(e){var t=this.props.getScrollParent&&this.props.getScrollParent();return null!=t?t:e&&e.parentNode}},{key:"filterProps",value:function(e){return e}},{key:"attachScrollListener",value:function(){var e=this.getParentElement(this.scrollComponent);if(this.props.hasMore&&e){var t=window;!1===this.props.useWindow&&(t=e),t.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),t.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),t.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(e){1!==e.deltaY||this.isPassiveSupported()||e.preventDefault()}},{key:"scrollListener",value:function(){var e=this.scrollComponent,t=window,n=this.getParentElement(e),o=void 0;if(this.props.useWindow){var r=document.documentElement||document.body.parentNode||document.body,i=void 0!==t.pageYOffset?t.pageYOffset:r.scrollTop;o=this.props.isReverse?i:this.calculateOffset(e,i)}else o=this.props.isReverse?n.scrollTop:e.scrollHeight-n.scrollTop-n.clientHeight;o<Number(this.props.threshold)&&e&&null!==e.offsetParent&&(this.detachScrollListener(),this.beforeScrollHeight=n.scrollHeight,this.beforeScrollTop=n.scrollTop,"function"==typeof this.props.loadMore&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}},{key:"calculateOffset",value:function(e,t){return e?this.calculateTopPosition(e)+(e.offsetHeight-t-window.innerHeight):0}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"render",value:function(){var e=this,t=this.filterProps(this.props),n=t.children,o=t.element,r=t.hasMore,a=(t.initialLoad,t.isReverse),l=t.loader,s=(t.loadMore,t.pageStart,t.ref),c=(t.threshold,t.useCapture,t.useWindow,t.getScrollParent,function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(t,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","getScrollParent"]));c.ref=function(t){e.scrollComponent=t,s&&s(t)};var u=[n];return r&&(l?a?u.unshift(l):u.push(l):this.defaultLoader&&(a?u.unshift(this.defaultLoader):u.push(this.defaultLoader))),i.default.createElement(o,c,u)}}]),t}(r.Component);s.propTypes={children:a.default.node.isRequired,element:a.default.node,hasMore:a.default.bool,initialLoad:a.default.bool,isReverse:a.default.bool,loader:a.default.node,loadMore:a.default.func.isRequired,pageStart:a.default.number,ref:a.default.func,getScrollParent:a.default.func,threshold:a.default.number,useCapture:a.default.bool,useWindow:a.default.bool},s.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null},t.default=s,e.exports=t.default},246:(e,t,n)=>{e.exports=n(7761)},6255:e=>{var t="complete",n="canceled";function o(e,t,n){Math.max(0,t),Math.max(0,n),e.self===e?e.scrollTo(t,n):(e.scrollLeft=t,e.scrollTop=n)}function r(e){var n=e._scrollSettings;if(n){var i=n.maxSynchronousAlignments,a=function(e,t){var n,o,r,i,a,l,s,c=e.align,u=e.target.getBoundingClientRect(),d=c&&null!=c.left?c.left:.5,m=c&&null!=c.top?c.top:.5,p=c&&null!=c.leftOffset?c.leftOffset:0,h=c&&null!=c.topOffset?c.topOffset:0,g=d,f=m;if(e.isWindow(t))l=Math.min(u.width,t.innerWidth),s=Math.min(u.height,t.innerHeight),o=u.left+t.pageXOffset-t.innerWidth*g+l*g,r=u.top+t.pageYOffset-t.innerHeight*f+s*f,o-=p,r-=h,o=e.align.lockX?t.pageXOffset:o,r=e.align.lockY?t.pageYOffset:r,i=o-t.pageXOffset,a=r-t.pageYOffset;else{l=u.width,s=u.height,n=t.getBoundingClientRect();var b=u.left-(n.left-t.scrollLeft),_=u.top-(n.top-t.scrollTop);o=b+l*g-t.clientWidth*g,r=_+s*f-t.clientHeight*f,o-=p,r-=h,o=Math.max(Math.min(o,t.scrollWidth-t.clientWidth),0),r=Math.max(Math.min(r,t.scrollHeight-t.clientHeight),0),o=e.align.lockX?t.scrollLeft:o,r=e.align.lockY?t.scrollTop:r,i=o-t.scrollLeft,a=r-t.scrollTop}return{x:o,y:r,differenceX:i,differenceY:a}}(n,e),l=Date.now()-n.startTime,s=Math.min(1/n.time*l,1);if(n.endIterations>=i)return o(e,a.x,a.y),e._scrollSettings=null,n.end(t);var c=1-n.ease(s);if(o(e,a.x-a.differenceX*c,a.y-a.differenceY*c),l>=n.time)return n.endIterations++,n.scrollAncestor&&r(n.scrollAncestor),void r(e);!function(e){if("requestAnimationFrame"in window)return window.requestAnimationFrame(e);setTimeout(e,16)}(r.bind(null,e))}}function i(e){return e.self===e}function a(e){return"pageXOffset"in e||(e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth)&&"hidden"!==getComputedStyle(e).overflow}function l(){return!0}function s(e){if(e.assignedSlot)return s(e.assignedSlot);if(e.parentElement)return"body"===e.parentElement.tagName.toLowerCase()?e.parentElement.ownerDocument.defaultView||e.parentElement.ownerDocument.ownerWindow:e.parentElement;if(e.getRootNode){var t=e.getRootNode();if(11===t.nodeType)return t.host}}e.exports=function(e,o,c){if(e){"function"==typeof o&&(c=o,o=null),o||(o={}),o.time=isNaN(o.time)?1e3:o.time,o.ease=o.ease||function(e){return 1-Math.pow(1-e,e/2)},o.align=o.align||{};var u=s(e),d=1,m=o.validTarget||l,p=o.isScrollable;o.debug&&(console.log("About to scroll to",e),u||console.error("Target did not have a parent, is it mounted in the DOM?"));for(var h=[];u;)if(o.debug&&console.log("Scrolling parent node",u),m(u,d)&&(p?p(u,a):a(u))&&(d++,h.push(u)),!(u=s(u))){g(t);break}return h.reduce(((t,a,l)=>function(e,t,o,a,l){var s,c=!t._scrollSettings,u=t._scrollSettings,d=Date.now(),m={passive:!0};function p(e){t._scrollSettings=null,t.parentElement&&t.parentElement._scrollSettings&&t.parentElement._scrollSettings.end(e),o.debug&&console.log("Scrolling ended with type",e,"for",t),l(e),s&&(t.removeEventListener("touchstart",s,m),t.removeEventListener("wheel",s,m))}u&&u.end(n);var h=o.maxSynchronousAlignments;return null==h&&(h=3),t._scrollSettings={startTime:d,endIterations:0,target:e,time:o.time,ease:o.ease,align:o.align,isWindow:o.isWindow||i,maxSynchronousAlignments:h,end:p,scrollAncestor:a},"cancellable"in o&&!o.cancellable||(s=p.bind(null,n),t.addEventListener("touchstart",s,m),t.addEventListener("wheel",s,m)),c&&r(t),s}(e,a,o,h[l+1],g)),null)}function g(e){--d||c&&c(e)}}},4670:(e,t,n)=>{"use strict";e.exports=n(5607)},9829:(e,t,n)=>{"use strict";var o,r,i,a=n(8946),l="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function s(){i=!1}function c(e){if(e){if(e!==o){if(e.length!==l.length)throw new Error("Custom alphabet for shortid must be "+l.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,n){return t!==n.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+l.length+" unique characters. These characters were not unique: "+t.join(", "));o=e,s()}}else o!==l&&(o=l,s())}function u(){return i||(i=function(){o||c(l);for(var e,t=o.split(""),n=[],r=a.nextValue();t.length>0;)r=a.nextValue(),e=Math.floor(r*t.length),n.push(t.splice(e,1)[0]);return n.join("")}())}e.exports={get:function(){return o||l},characters:function(e){return c(e),o},seed:function(e){a.seed(e),r!==e&&(s(),r=e)},lookup:function(e){return u()[e]},shuffled:u}},480:(e,t,n)=>{"use strict";var o,r,i=n(8416);n(9829),e.exports=function(e){var t="",n=Math.floor(.001*(Date.now()-1567752802062));return n===r?o++:(o=0,r=n),t+=i(7),t+=i(e),o>0&&(t+=i(o)),t+i(n)}},8416:(e,t,n)=>{"use strict";var o=n(9829),r=n(3766),i=n(296);e.exports=function(e){for(var t,n=0,a="";!t;)a+=i(r,o.get(),1),t=e<Math.pow(16,n+1),n++;return a}},5607:(e,t,n)=>{"use strict";var o=n(9829),r=n(480),i=n(1082),a=n(5636)||0;function l(){return r(a)}e.exports=l,e.exports.generate=l,e.exports.seed=function(t){return o.seed(t),e.exports},e.exports.worker=function(t){return a=t,e.exports},e.exports.characters=function(e){return void 0!==e&&o.characters(e),o.shuffled()},e.exports.isValid=i},1082:(e,t,n)=>{"use strict";var o=n(9829);e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6||new RegExp("[^"+o.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e))}},3766:e=>{"use strict";var t,n="object"==typeof window&&(window.crypto||window.msCrypto);t=n&&n.getRandomValues?function(e){return n.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],n=0;n<e;n++)t.push(Math.floor(256*Math.random()));return t},e.exports=t},8946:e=>{"use strict";var t=1;e.exports={nextValue:function(){return(t=(9301*t+49297)%233280)/233280},seed:function(e){t=e}}},5636:e=>{"use strict";e.exports=0},296:e=>{e.exports=function(e,t,n){for(var o=(2<<Math.log(t.length-1)/Math.LN2)-1,r=-~(1.6*o*n/t.length),i="";;)for(var a=e(r),l=r;l--;)if((i+=t[a[l]&o]||"").length===+n)return i}},989:(e,t,n)=>{e.exports=n(3268)},3268:function(e,t){var n;!function(o){"use strict";var r={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"Ae",Å:"A",Æ:"AE",Ç:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"Oe",Ő:"O",Ø:"O",Ù:"U",Ú:"U",Û:"U",Ü:"Ue",Ű:"U",Ý:"Y",Þ:"TH",ß:"ss",à:"a",á:"a",â:"a",ã:"a",ä:"ae",å:"a",æ:"ae",ç:"c",è:"e",é:"e",ê:"e",ë:"e",ì:"i",í:"i",î:"i",ï:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"oe",ő:"o",ø:"o",ù:"u",ú:"u",û:"u",ü:"ue",ű:"u",ý:"y",þ:"th",ÿ:"y",ẞ:"SS",ا:"a",أ:"a",إ:"i",آ:"aa",ؤ:"u",ئ:"e",ء:"a",ب:"b",ت:"t",ث:"th",ج:"j",ح:"h",خ:"kh",د:"d",ذ:"th",ر:"r",ز:"z",س:"s",ش:"sh",ص:"s",ض:"dh",ط:"t",ظ:"z",ع:"a",غ:"gh",ف:"f",ق:"q",ك:"k",ل:"l",م:"m",ن:"n",ه:"h",و:"w",ي:"y",ى:"a",ة:"h",ﻻ:"la",ﻷ:"laa",ﻹ:"lai",ﻵ:"laa",گ:"g",چ:"ch",پ:"p",ژ:"zh",ک:"k",ی:"y","َ":"a","ً":"an","ِ":"e","ٍ":"en","ُ":"u","ٌ":"on","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9",က:"k",ခ:"kh",ဂ:"g",ဃ:"ga",င:"ng",စ:"s",ဆ:"sa",ဇ:"z",စျ:"za",ည:"ny",ဋ:"t",ဌ:"ta",ဍ:"d",ဎ:"da",ဏ:"na",တ:"t",ထ:"ta",ဒ:"d",ဓ:"da",န:"n",ပ:"p",ဖ:"pa",ဗ:"b",ဘ:"ba",မ:"m",ယ:"y",ရ:"ya",လ:"l",ဝ:"w",သ:"th",ဟ:"h",ဠ:"la",အ:"a","ြ":"y","ျ":"ya","ွ":"w","ြွ":"yw","ျွ":"ywa","ှ":"h",ဧ:"e","၏":"-e",ဣ:"i",ဤ:"-i",ဉ:"u",ဦ:"-u",ဩ:"aw",သြော:"aw",ဪ:"aw","၀":"0","၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","္":"","့":"","း":"",č:"c",ď:"d",ě:"e",ň:"n",ř:"r",š:"s",ť:"t",ů:"u",ž:"z",Č:"C",Ď:"D",Ě:"E",Ň:"N",Ř:"R",Š:"S",Ť:"T",Ů:"U",Ž:"Z",ހ:"h",ށ:"sh",ނ:"n",ރ:"r",ބ:"b",ޅ:"lh",ކ:"k",އ:"a",ވ:"v",މ:"m",ފ:"f",ދ:"dh",ތ:"th",ލ:"l",ގ:"g",ޏ:"gn",ސ:"s",ޑ:"d",ޒ:"z",ޓ:"t",ޔ:"y",ޕ:"p",ޖ:"j",ޗ:"ch",ޘ:"tt",ޙ:"hh",ޚ:"kh",ޛ:"th",ޜ:"z",ޝ:"sh",ޞ:"s",ޟ:"d",ޠ:"t",ޡ:"z",ޢ:"a",ޣ:"gh",ޤ:"q",ޥ:"w","ަ":"a","ާ":"aa","ި":"i","ީ":"ee","ު":"u","ޫ":"oo","ެ":"e","ޭ":"ey","ޮ":"o","ޯ":"oa","ް":"",ა:"a",ბ:"b",გ:"g",დ:"d",ე:"e",ვ:"v",ზ:"z",თ:"t",ი:"i",კ:"k",ლ:"l",მ:"m",ნ:"n",ო:"o",პ:"p",ჟ:"zh",რ:"r",ს:"s",ტ:"t",უ:"u",ფ:"p",ქ:"k",ღ:"gh",ყ:"q",შ:"sh",ჩ:"ch",ც:"ts",ძ:"dz",წ:"ts",ჭ:"ch",ხ:"kh",ჯ:"j",ჰ:"h",α:"a",β:"v",γ:"g",δ:"d",ε:"e",ζ:"z",η:"i",θ:"th",ι:"i",κ:"k",λ:"l",μ:"m",ν:"n",ξ:"ks",ο:"o",π:"p",ρ:"r",σ:"s",τ:"t",υ:"y",φ:"f",χ:"x",ψ:"ps",ω:"o",ά:"a",έ:"e",ί:"i",ό:"o",ύ:"y",ή:"i",ώ:"o",ς:"s",ϊ:"i",ΰ:"y",ϋ:"y",ΐ:"i",Α:"A",Β:"B",Γ:"G",Δ:"D",Ε:"E",Ζ:"Z",Η:"I",Θ:"TH",Ι:"I",Κ:"K",Λ:"L",Μ:"M",Ν:"N",Ξ:"KS",Ο:"O",Π:"P",Ρ:"R",Σ:"S",Τ:"T",Υ:"Y",Φ:"F",Χ:"X",Ψ:"PS",Ω:"O",Ά:"A",Έ:"E",Ί:"I",Ό:"O",Ύ:"Y",Ή:"I",Ώ:"O",Ϊ:"I",Ϋ:"Y",ā:"a",ē:"e",ģ:"g",ī:"i",ķ:"k",ļ:"l",ņ:"n",ū:"u",Ā:"A",Ē:"E",Ģ:"G",Ī:"I",Ķ:"k",Ļ:"L",Ņ:"N",Ū:"U",Ќ:"Kj",ќ:"kj",Љ:"Lj",љ:"lj",Њ:"Nj",њ:"nj",Тс:"Ts",тс:"ts",ą:"a",ć:"c",ę:"e",ł:"l",ń:"n",ś:"s",ź:"z",ż:"z",Ą:"A",Ć:"C",Ę:"E",Ł:"L",Ń:"N",Ś:"S",Ź:"Z",Ż:"Z",Є:"Ye",І:"I",Ї:"Yi",Ґ:"G",є:"ye",і:"i",ї:"yi",ґ:"g",ă:"a",Ă:"A",ș:"s",Ș:"S",ț:"t",Ț:"T",ţ:"t",Ţ:"T",а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"yo",ж:"zh",з:"z",и:"i",й:"i",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"kh",ц:"c",ч:"ch",ш:"sh",щ:"sh",ъ:"",ы:"y",ь:"",э:"e",ю:"yu",я:"ya",А:"A",Б:"B",В:"V",Г:"G",Д:"D",Е:"E",Ё:"Yo",Ж:"Zh",З:"Z",И:"I",Й:"I",К:"K",Л:"L",М:"M",Н:"N",О:"O",П:"P",Р:"R",С:"S",Т:"T",У:"U",Ф:"F",Х:"Kh",Ц:"C",Ч:"Ch",Ш:"Sh",Щ:"Sh",Ъ:"",Ы:"Y",Ь:"",Э:"E",Ю:"Yu",Я:"Ya",ђ:"dj",ј:"j",ћ:"c",џ:"dz",Ђ:"Dj",Ј:"j",Ћ:"C",Џ:"Dz",ľ:"l",ĺ:"l",ŕ:"r",Ľ:"L",Ĺ:"L",Ŕ:"R",ş:"s",Ş:"S",ı:"i",İ:"I",ğ:"g",Ğ:"G",ả:"a",Ả:"A",ẳ:"a",Ẳ:"A",ẩ:"a",Ẩ:"A",đ:"d",Đ:"D",ẹ:"e",Ẹ:"E",ẽ:"e",Ẽ:"E",ẻ:"e",Ẻ:"E",ế:"e",Ế:"E",ề:"e",Ề:"E",ệ:"e",Ệ:"E",ễ:"e",Ễ:"E",ể:"e",Ể:"E",ỏ:"o",ọ:"o",Ọ:"o",ố:"o",Ố:"O",ồ:"o",Ồ:"O",ổ:"o",Ổ:"O",ộ:"o",Ộ:"O",ỗ:"o",Ỗ:"O",ơ:"o",Ơ:"O",ớ:"o",Ớ:"O",ờ:"o",Ờ:"O",ợ:"o",Ợ:"O",ỡ:"o",Ỡ:"O",Ở:"o",ở:"o",ị:"i",Ị:"I",ĩ:"i",Ĩ:"I",ỉ:"i",Ỉ:"i",ủ:"u",Ủ:"U",ụ:"u",Ụ:"U",ũ:"u",Ũ:"U",ư:"u",Ư:"U",ứ:"u",Ứ:"U",ừ:"u",Ừ:"U",ự:"u",Ự:"U",ữ:"u",Ữ:"U",ử:"u",Ử:"ư",ỷ:"y",Ỷ:"y",ỳ:"y",Ỳ:"Y",ỵ:"y",Ỵ:"Y",ỹ:"y",Ỹ:"Y",ạ:"a",Ạ:"A",ấ:"a",Ấ:"A",ầ:"a",Ầ:"A",ậ:"a",Ậ:"A",ẫ:"a",Ẫ:"A",ắ:"a",Ắ:"A",ằ:"a",Ằ:"A",ặ:"a",Ặ:"A",ẵ:"a",Ẵ:"A","⓪":"0","①":"1","②":"2","③":"3","④":"4","⑤":"5","⑥":"6","⑦":"7","⑧":"8","⑨":"9","⑩":"10","⑪":"11","⑫":"12","⑬":"13","⑭":"14","⑮":"15","⑯":"16","⑰":"17","⑱":"18","⑲":"18","⑳":"18","⓵":"1","⓶":"2","⓷":"3","⓸":"4","⓹":"5","⓺":"6","⓻":"7","⓼":"8","⓽":"9","⓾":"10","⓿":"0","⓫":"11","⓬":"12","⓭":"13","⓮":"14","⓯":"15","⓰":"16","⓱":"17","⓲":"18","⓳":"19","⓴":"20","Ⓐ":"A","Ⓑ":"B","Ⓒ":"C","Ⓓ":"D","Ⓔ":"E","Ⓕ":"F","Ⓖ":"G","Ⓗ":"H","Ⓘ":"I","Ⓙ":"J","Ⓚ":"K","Ⓛ":"L","Ⓜ":"M","Ⓝ":"N","Ⓞ":"O","Ⓟ":"P","Ⓠ":"Q","Ⓡ":"R","Ⓢ":"S","Ⓣ":"T","Ⓤ":"U","Ⓥ":"V","Ⓦ":"W","Ⓧ":"X","Ⓨ":"Y","Ⓩ":"Z","ⓐ":"a","ⓑ":"b","ⓒ":"c","ⓓ":"d","ⓔ":"e","ⓕ":"f","ⓖ":"g","ⓗ":"h","ⓘ":"i","ⓙ":"j","ⓚ":"k","ⓛ":"l","ⓜ":"m","ⓝ":"n","ⓞ":"o","ⓟ":"p","ⓠ":"q","ⓡ":"r","ⓢ":"s","ⓣ":"t","ⓤ":"u","ⓦ":"v","ⓥ":"w","ⓧ":"x","ⓨ":"y","ⓩ":"z","“":'"',"”":'"',"‘":"'","’":"'","∂":"d",ƒ:"f","™":"(TM)","©":"(C)",œ:"oe",Œ:"OE","®":"(R)","†":"+","℠":"(SM)","…":"...","˚":"o",º:"o",ª:"a","•":"*","၊":",","။":".",$:"USD","€":"EUR","₢":"BRN","₣":"FRF","£":"GBP","₤":"ITL","₦":"NGN","₧":"ESP","₩":"KRW","₪":"ILS","₫":"VND","₭":"LAK","₮":"MNT","₯":"GRD","₱":"ARS","₲":"PYG","₳":"ARA","₴":"UAH","₵":"GHS","¢":"cent","¥":"CNY",元:"CNY",円:"YEN","﷼":"IRR","₠":"EWE","฿":"THB","₨":"INR","₹":"INR","₰":"PF","₺":"TRY","؋":"AFN","₼":"AZN",лв:"BGN","៛":"KHR","₡":"CRC","₸":"KZT",ден:"MKD",zł:"PLN","₽":"RUB","₾":"GEL"},i=["်","ް"],a={"ာ":"a","ါ":"a","ေ":"e","ဲ":"e","ိ":"i","ီ":"i","ို":"o","ု":"u","ူ":"u","ေါင်":"aung","ော":"aw","ော်":"aw","ေါ":"aw","ေါ်":"aw","်":"်",က်:"et","ိုက်":"aik","ောက်":"auk",င်:"in","ိုင်":"aing","ောင်":"aung",စ်:"it",ည်:"i",တ်:"at","ိတ်":"eik","ုတ်":"ok","ွတ်":"ut","ေတ်":"it",ဒ်:"d","ိုဒ်":"ok","ုဒ်":"ait",န်:"an","ာန်":"an","ိန်":"ein","ုန်":"on","ွန်":"un",ပ်:"at","ိပ်":"eik","ုပ်":"ok","ွပ်":"ut",န်ုပ်:"nub",မ်:"an","ိမ်":"ein","ုမ်":"on","ွမ်":"un",ယ်:"e","ိုလ်":"ol",ဉ်:"in","ံ":"an","ိံ":"ein","ုံ":"on","ައް":"ah","ަށް":"ah"},l={en:{},az:{ç:"c",ə:"e",ğ:"g",ı:"i",ö:"o",ş:"s",ü:"u",Ç:"C",Ə:"E",Ğ:"G",İ:"I",Ö:"O",Ş:"S",Ü:"U"},cs:{č:"c",ď:"d",ě:"e",ň:"n",ř:"r",š:"s",ť:"t",ů:"u",ž:"z",Č:"C",Ď:"D",Ě:"E",Ň:"N",Ř:"R",Š:"S",Ť:"T",Ů:"U",Ž:"Z"},fi:{ä:"a",Ä:"A",ö:"o",Ö:"O"},hu:{ä:"a",Ä:"A",ö:"o",Ö:"O",ü:"u",Ü:"U",ű:"u",Ű:"U"},lt:{ą:"a",č:"c",ę:"e",ė:"e",į:"i",š:"s",ų:"u",ū:"u",ž:"z",Ą:"A",Č:"C",Ę:"E",Ė:"E",Į:"I",Š:"S",Ų:"U",Ū:"U"},lv:{ā:"a",č:"c",ē:"e",ģ:"g",ī:"i",ķ:"k",ļ:"l",ņ:"n",š:"s",ū:"u",ž:"z",Ā:"A",Č:"C",Ē:"E",Ģ:"G",Ī:"i",Ķ:"k",Ļ:"L",Ņ:"N",Š:"S",Ū:"u",Ž:"Z"},pl:{ą:"a",ć:"c",ę:"e",ł:"l",ń:"n",ó:"o",ś:"s",ź:"z",ż:"z",Ą:"A",Ć:"C",Ę:"e",Ł:"L",Ń:"N",Ó:"O",Ś:"S",Ź:"Z",Ż:"Z"},sv:{ä:"a",Ä:"A",ö:"o",Ö:"O"},sk:{ä:"a",Ä:"A"},sr:{љ:"lj",њ:"nj",Љ:"Lj",Њ:"Nj",đ:"dj",Đ:"Dj"},tr:{Ü:"U",Ö:"O",ü:"u",ö:"o"}},s={ar:{"∆":"delta","∞":"la-nihaya","♥":"hob","&":"wa","|":"aw","<":"aqal-men",">":"akbar-men","∑":"majmou","¤":"omla"},az:{},ca:{"∆":"delta","∞":"infinit","♥":"amor","&":"i","|":"o","<":"menys que",">":"mes que","∑":"suma dels","¤":"moneda"},cs:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"nebo","<":"mensi nez",">":"vetsi nez","∑":"soucet","¤":"mena"},de:{"∆":"delta","∞":"unendlich","♥":"Liebe","&":"und","|":"oder","<":"kleiner als",">":"groesser als","∑":"Summe von","¤":"Waehrung"},dv:{"∆":"delta","∞":"kolunulaa","♥":"loabi","&":"aai","|":"noonee","<":"ah vure kuda",">":"ah vure bodu","∑":"jumula","¤":"faisaa"},en:{"∆":"delta","∞":"infinity","♥":"love","&":"and","|":"or","<":"less than",">":"greater than","∑":"sum","¤":"currency"},es:{"∆":"delta","∞":"infinito","♥":"amor","&":"y","|":"u","<":"menos que",">":"mas que","∑":"suma de los","¤":"moneda"},fa:{"∆":"delta","∞":"bi-nahayat","♥":"eshgh","&":"va","|":"ya","<":"kamtar-az",">":"bishtar-az","∑":"majmooe","¤":"vahed"},fi:{"∆":"delta","∞":"aarettomyys","♥":"rakkaus","&":"ja","|":"tai","<":"pienempi kuin",">":"suurempi kuin","∑":"summa","¤":"valuutta"},fr:{"∆":"delta","∞":"infiniment","♥":"Amour","&":"et","|":"ou","<":"moins que",">":"superieure a","∑":"somme des","¤":"monnaie"},ge:{"∆":"delta","∞":"usasruloba","♥":"siqvaruli","&":"da","|":"an","<":"naklebi",">":"meti","∑":"jami","¤":"valuta"},gr:{},hu:{"∆":"delta","∞":"vegtelen","♥":"szerelem","&":"es","|":"vagy","<":"kisebb mint",">":"nagyobb mint","∑":"szumma","¤":"penznem"},it:{"∆":"delta","∞":"infinito","♥":"amore","&":"e","|":"o","<":"minore di",">":"maggiore di","∑":"somma","¤":"moneta"},lt:{"∆":"delta","∞":"begalybe","♥":"meile","&":"ir","|":"ar","<":"maziau nei",">":"daugiau nei","∑":"suma","¤":"valiuta"},lv:{"∆":"delta","∞":"bezgaliba","♥":"milestiba","&":"un","|":"vai","<":"mazak neka",">":"lielaks neka","∑":"summa","¤":"valuta"},my:{"∆":"kwahkhyaet","∞":"asaonasme","♥":"akhyait","&":"nhin","|":"tho","<":"ngethaw",">":"kyithaw","∑":"paungld","¤":"ngwekye"},mk:{},nl:{"∆":"delta","∞":"oneindig","♥":"liefde","&":"en","|":"of","<":"kleiner dan",">":"groter dan","∑":"som","¤":"valuta"},pl:{"∆":"delta","∞":"nieskonczonosc","♥":"milosc","&":"i","|":"lub","<":"mniejsze niz",">":"wieksze niz","∑":"suma","¤":"waluta"},pt:{"∆":"delta","∞":"infinito","♥":"amor","&":"e","|":"ou","<":"menor que",">":"maior que","∑":"soma","¤":"moeda"},ro:{"∆":"delta","∞":"infinit","♥":"dragoste","&":"si","|":"sau","<":"mai mic ca",">":"mai mare ca","∑":"suma","¤":"valuta"},ru:{"∆":"delta","∞":"beskonechno","♥":"lubov","&":"i","|":"ili","<":"menshe",">":"bolshe","∑":"summa","¤":"valjuta"},sk:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"alebo","<":"menej ako",">":"viac ako","∑":"sucet","¤":"mena"},sr:{},tr:{"∆":"delta","∞":"sonsuzluk","♥":"ask","&":"ve","|":"veya","<":"kucuktur",">":"buyuktur","∑":"toplam","¤":"para birimi"},uk:{"∆":"delta","∞":"bezkinechnist","♥":"lubov","&":"i","|":"abo","<":"menshe",">":"bilshe","∑":"suma","¤":"valjuta"},vn:{"∆":"delta","∞":"vo cuc","♥":"yeu","&":"va","|":"hoac","<":"nho hon",">":"lon hon","∑":"tong","¤":"tien te"}},c=[";","?",":","@","&","=","+","$",",","/"].join(""),u=[";","?",":","@","&","=","+","$",","].join(""),d=[".","!","~","*","'","(",")"].join(""),m=function(e,t){var n,o,m,g,f,b,_,v,y,k,E,S,w,C,I="-",T="",x="",P=!0,R={},A="";if("string"!=typeof e)return"";if("string"==typeof t&&(I=t),_=s.en,v=l.en,"object"==typeof t)for(E in n=t.maintainCase||!1,R=t.custom&&"object"==typeof t.custom?t.custom:R,m=+t.truncate>1&&t.truncate||!1,g=t.uric||!1,f=t.uricNoSlash||!1,b=t.mark||!1,P=!1!==t.symbols&&!1!==t.lang,I=t.separator||I,g&&(A+=c),f&&(A+=u),b&&(A+=d),_=t.lang&&s[t.lang]&&P?s[t.lang]:P?s.en:{},v=t.lang&&l[t.lang]?l[t.lang]:!1===t.lang||!0===t.lang?{}:l.en,t.titleCase&&"number"==typeof t.titleCase.length&&Array.prototype.toString.call(t.titleCase)?(t.titleCase.forEach((function(e){R[e+""]=e+""})),o=!0):o=!!t.titleCase,t.custom&&"number"==typeof t.custom.length&&Array.prototype.toString.call(t.custom)&&t.custom.forEach((function(e){R[e+""]=e+""})),Object.keys(R).forEach((function(t){var n;n=t.length>1?new RegExp("\\b"+p(t)+"\\b","gi"):new RegExp(p(t),"gi"),e=e.replace(n,R[t])})),R)A+=E;for(A=p(A+=I),w=!1,C=!1,k=0,S=(e=e.replace(/(^\s+|\s+$)/g,"")).length;k<S;k++)E=e[k],h(E,R)?w=!1:v[E]?(E=w&&v[E].match(/[A-Za-z0-9]/)?" "+v[E]:v[E],w=!1):E in r?(k+1<S&&i.indexOf(e[k+1])>=0?(x+=E,E=""):!0===C?(E=a[x]+r[E],x=""):E=w&&r[E].match(/[A-Za-z0-9]/)?" "+r[E]:r[E],w=!1,C=!1):E in a?(x+=E,E="",k===S-1&&(E=a[x]),C=!0):!_[E]||g&&-1!==c.indexOf(E)||f&&-1!==u.indexOf(E)?(!0===C?(E=a[x]+E,x="",C=!1):w&&(/[A-Za-z0-9]/.test(E)||T.substr(-1).match(/A-Za-z0-9]/))&&(E=" "+E),w=!1):(E=w||T.substr(-1).match(/[A-Za-z0-9]/)?I+_[E]:_[E],E+=void 0!==e[k+1]&&e[k+1].match(/[A-Za-z0-9]/)?I:"",w=!0),T+=E.replace(new RegExp("[^\\w\\s"+A+"_-]","g"),I);return o&&(T=T.replace(/(\w)(\S*)/g,(function(e,t,n){var o=t.toUpperCase()+(null!==n?n:"");return Object.keys(R).indexOf(o.toLowerCase())<0?o:o.toLowerCase()}))),T=T.replace(/\s+/g,I).replace(new RegExp("\\"+I+"+","g"),I).replace(new RegExp("(^\\"+I+"+|\\"+I+"+$)","g"),""),m&&T.length>m&&(y=T.charAt(m)===I,T=T.slice(0,m),y||(T=T.slice(0,T.lastIndexOf(I)))),n||o||(T=T.toLowerCase()),T},p=function(e){return e.replace(/[-\\^$*+?.()|[\]{}\/]/g,"\\$&")},h=function(e,t){for(var n in t)if(t[n]===e)return!0};e.exports?(e.exports=m,e.exports.createSlug=function(e){return function(t){return m(t,e)}}):void 0===(n=function(){return m}.apply(t,[]))||(e.exports=n)}()},5358:(e,t,n)=>{"use strict";Object.defineProperty(t,"Ls",{enumerable:!0,get:function(){return o.STORE_KEY}});var o=n(9527);o.STORE_KEY},9196:e=>{"use strict";e.exports=window.React},9527:e=>{"use strict";e.exports=window.kubio.constants},9307:e=>{"use strict";e.exports=window.wp.element}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{"use strict";n.r(o),n.d(o,{SidebarArea:()=>tn,SubSidebarArea:()=>cn,__experimentalFullscreenModeClose:()=>mk,initialize:()=>pk,registerEditSiteStore:()=>Q_,registerSidebarArea:()=>an,registerSubSidebarArea:()=>ln});var e={};n.r(e),n.d(e,{disableComplementaryArea:()=>vt,enableComplementaryArea:()=>_t,pinItem:()=>yt,setDefaultComplementaryArea:()=>bt,setFeatureDefaults:()=>wt,setFeatureValue:()=>St,toggleFeature:()=>Et,unpinItem:()=>kt});var t={};n.r(t),n.d(t,{getActiveComplementaryArea:()=>Ct,isFeatureActive:()=>Tt,isItemPinned:()=>It});var r={};n.r(r),n.d(r,{__experimentalSetPreviewDeviceType:()=>vb,addSubSidebar:()=>Ob,addTemplate:()=>kb,closeSidebar:()=>Mb,openInserterSidebar:()=>Ab,openNavigationPanelToMenu:()=>Tb,openSidebar:()=>Rb,removeSubSidebar:()=>Nb,removeTemplate:()=>Eb,setCurrentAncestor:()=>zb,setHomeTemplateId:()=>wb,setIsListViewOpened:()=>Fb,setIsNavigationPanelOpened:()=>xb,setKubioEditorMode:()=>Hb,setOpenInserter:()=>Lb,setPage:()=>Cb,setTemplate:()=>yb,setTemplatePart:()=>Sb,setUIVersion:()=>Gb,showHomepage:()=>Ib,toggleAICapabilities:()=>Ub,toggleFeature:()=>_b,toggleGlobalStyleEditing:()=>Db,toggleGutentagDebug:()=>Bb,updateAIInfo:()=>Wb,updateExcludedSectionCategories:()=>jb,updateSettings:()=>Pb});var i={};n.r(i),n.d(i,{__experimentalGetInsertionPoint:()=>P_,__experimentalGetPreviewDeviceType:()=>e_,currentPageHasFSETemplate:()=>N_,getAIInfo:()=>K_,getAvailablePageTemplates:()=>F_,getCanUserCreateMedia:()=>t_,getCanvasMode:()=>q_,getClassicTemplateId:()=>G_,getCurrentAncestor:()=>S_,getCurrentKubioTemplateSource:()=>A_,getCurrentPageTemplate:()=>O_,getCurrentPostId:()=>D_,getCurrentPostType:()=>M_,getEditedPostId:()=>i_,getEditedPostType:()=>r_,getEditorOpenedSidebar:()=>w_,getEntity:()=>g_,getExcludedSectionCategories:()=>Y_,getGlobalStyleEditingPreviousEntity:()=>T_,getHomeTemplateId:()=>o_,getIsBlogPage:()=>B_,getIsFrontPage:()=>L_,getIsInnerPage:()=>z_,getIsWooCommercePage:()=>H_,getKubioEditorMode:()=>j_,getKubioEditorModeIsSimple:()=>V_,getNavigationMenu:()=>s_,getOpenedInsertedClientId:()=>y_,getOpenedInsertedShouldCloseOnSelect:()=>E_,getOpenedInsertedShouldReplace:()=>k_,getOpenedInserter:()=>v_,getPage:()=>a_,getSettings:()=>n_,getShowOnFront:()=>f_,getSubSidebars:()=>C_,getTemplateId:()=>u_,getTemplateIds:()=>p_,getTemplatePartId:()=>d_,getTemplatePartIds:()=>h_,getTemplateType:()=>m_,getUIVersion:()=>U_,isAICapabilityEnabled:()=>W_,isChangingPage:()=>$_,isEditorSidebarOpened:()=>b_,isFeatureActive:()=>Jb,isGlobalStyleEditing:()=>I_,isGutentagDebug:()=>x_,isInserterOpened:()=>c_,isListViewOpened:()=>R_,isNavigationOpened:()=>l_});var a=n(9307);const l=window.kubio.blockPatterns,s=window.kubio.core,c=window.wp.blockLibrary,u=window.wp.hooks,d=window.wp.notices,m=window.lodash;var p=n.n(m),h=n(9527);const g=window.kubio.coreHooks,f=window.kubio.editorData,b=window.kubio.ai,_=window.kubio.globalData,v=window.kubio.wpGlobalStyles,y=window.wp.blockEditor,k=window.wp.components,E=window.wp.compose,S=window.wp.coreData,w=window.wp.data;function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},C.apply(this,arguments)}var I=n(4184),T=n.n(I);const x=window.wp.i18n,P=window.kubio.controls,R=window.wp.primitives,A=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"})),O=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),N={family:"Open Sans"},M={family:"Work Sans"},D={family:"Roboto"},B={family:"Playfair Display"},L={family:"Inter"},z={family:"Offside"},F={family:"Lekton"},G={family:"Architects Daughter"},H={family:"Poppins"},U={family:"Merriweather"},W={family:"Hlind"},j={family:"Alice"},V={family:"Montserrat"},K={family:"Roboto Mono"},$={family:"Fauna One"},q={family:"Josefin Sans"},Y={family:"PT Sans"},X={family:"Pontano Sans"},Q={family:"Source Sans Pro"},Z={family:"Mulish"},J={family:"Prompt"},ee={family:"La Belle Aurore"},te={family:"DM Serif Display"},ne={family:"Abril Fatface"},oe={family:"IBM Plex Sans Condensed"},re={family:"Oswald"},ie={family:"Libre Baskerville"},ae={family:"Nunito"},le={family:"Stint Ultra Expanded"},se={family:"Yeseva One"},ce={family:"Cinzel"},ue={family:"Rubik"},de={family:"Poiret One"},me={family:"Della Respira"},pe={family:"Expletus Sans"},he={family:"Sacramento"},ge={h1:{weight:300},h2:{weight:600},h3:{weight:600},h4:{weight:600},h5:{weight:600},h6:{weight:600}},fe={h1:{weight:400},h2:{weight:400},h3:{weight:400},h4:{weight:400},h5:{weight:400},h6:{weight:400}},be=[p().merge({},{h1:M,h2:M,h3:M,h4:M,h5:M,h6:M,p:D,lead:D,a:D},fe),p().merge({},{h1:B,h2:B,h3:B,h4:L,h5:B,h6:B,p:L,lead:L,a:L},ge),p().merge({},{h1:z,h2:z,h3:z,h4:z,h5:z,h6:z,p:F,lead:F,a:F},fe),p().merge({},{h1:G,h2:G,h3:G,h4:Z,h5:G,h6:G,p:Z,lead:Z,a:Z},fe),p().merge({},{h1:N,h2:N,h3:N,h4:N,h5:N,h6:N,p:N,lead:N,a:N},ge),p().merge({},{h1:ee,h2:ee,h3:ee,h4:J,h5:ee,h6:J,p:J,lead:J,a:J},fe),p().merge({},{h1:te,h2:te,h3:te,h4:te,h5:te,h6:te,p:te,lead:te,a:te},fe),p().merge({},{h1:ne,h2:ne,h3:ne,h4:ne,h5:ne,h6:ne,p:H,lead:H,a:H},fe),p().merge({},{h1:oe,h2:oe,h3:oe,h4:oe,h5:oe,h6:oe,p:oe,lead:oe,a:oe},{h1:{weight:500},h2:{weight:600},h3:{weight:500},h4:{weight:600},h5:{weight:500},h6:{weight:500},p:{weight:400},lead:{weight:400},a:{weight:400}}),p().merge({},{h1:M,h2:M,h3:M,h4:M,h5:M,h6:M,p:U,lead:U,a:U},{h1:{weight:700},h2:{weight:700},h3:{weight:500},h4:{weight:700},h5:{weight:500},h6:{weight:500},p:{weight:300},lead:{weight:300},a:{weight:300}}),p().merge({},{h1:re,h2:re,h3:re,h4:re,h5:re,h6:re,p:Q,lead:Q,a:Q},{h1:{weight:700},h2:{weight:700},h3:{weight:500},h4:{weight:700},h5:{weight:500},h6:{weight:500},p:{weight:400},lead:{weight:400},a:{weight:400}}),p().merge({},{h1:ie,h2:ie,h3:ie,h4:ie,h5:ie,h6:ie,p:ie,lead:ie,a:ie},{h1:{weight:700},h2:{weight:700},h3:{weight:400},h4:{weight:700},h5:{weight:700},h6:{weight:700},p:{weight:400},lead:{weight:400},a:{weight:400}}),p().merge({},{h1:ae,h2:ae,h3:ae,h4:ae,h5:ae,h6:ae,p:Y,lead:Y,a:Y},{h1:{weight:800},h2:{weight:600},h3:{weight:800},h4:{weight:800},h5:{weight:600},h6:{weight:600},p:{weight:400},lead:{weight:400},a:{weight:400}}),p().merge({},{h1:le,h2:le,h3:le,h4:le,h5:le,h6:le,p:X,lead:X,a:X},fe),p().merge({},{h1:se,h2:se,h3:se,h4:se,h5:se,h6:se,p:q,lead:q,a:q},fe),p().merge({},{h1:ce,h2:ce,h3:ce,h4:ce,h5:ce,h6:ce,p:$,lead:$,a:$},fe),p().merge({},{h1:ue,h2:ue,h3:ue,h4:ue,h5:ue,h6:ue,p:K,lead:K,a:K},fe),p().merge({},{h1:de,h2:de,h3:de,h4:de,h5:de,h6:de,p:V,lead:V,a:V},fe),p().merge({},{h1:me,h2:me,h3:me,h4:me,h5:me,h6:me,p:N,lead:N,a:N},fe),p().merge({},{h1:pe,h2:pe,h3:pe,h4:pe,h5:pe,h6:pe,p:W,lead:W,a:W},fe),p().merge({},{h1:he,h2:he,h3:he,h4:he,h5:he,h6:he,p:j,lead:j,a:j},fe)],_e=e=>{let{children:t,scrollIntoView:n=!0,...o}=e;const r=(0,a.useRef)(),i=(0,a.useCallback)((()=>{if(!n)return;const e=r.current.querySelector(".kubio-style-preset-list__item--active");e&&e.scrollIntoView({behavior:"instant"})}),[]);return(0,a.useEffect)((()=>{i()}),[]),(0,a.createElement)("div",{ref:r,className:"kubio-style-preset-list__container"},(0,a.createElement)("div",C({className:"kubio-style-preset-list"},o),t))};_e.Item=e=>{let{isActive:t=!1,className:n,children:o,...r}=e;return(0,a.createElement)("div",C({className:T()("kubio-style-preset-list__item",{"kubio-style-preset-list__item--active":t},n)},r),o)};const ve=window.kubio.utils,ye=window.kubio.icons,ke=window.kubio.log;var Ee=n(9590),Se=n.n(Ee);function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}var Ce=/^\s+/,Ie=/\s+$/;function Te(e,t){if(t=t||{},(e=e||"")instanceof Te)return e;if(!(this instanceof Te))return new Te(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,o=null,r=null,i=null,a=!1,l=!1;return"string"==typeof e&&(e=function(e){e=e.replace(Ce,"").replace(Ie,"").toLowerCase();var t,n=!1;if(je[e])e=je[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=ot.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=ot.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=ot.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=ot.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=ot.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=ot.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=ot.hex8.exec(e))?{r:Ye(t[1]),g:Ye(t[2]),b:Ye(t[3]),a:Je(t[4]),format:n?"name":"hex8"}:(t=ot.hex6.exec(e))?{r:Ye(t[1]),g:Ye(t[2]),b:Ye(t[3]),format:n?"name":"hex"}:(t=ot.hex4.exec(e))?{r:Ye(t[1]+""+t[1]),g:Ye(t[2]+""+t[2]),b:Ye(t[3]+""+t[3]),a:Je(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=ot.hex3.exec(e))&&{r:Ye(t[1]+""+t[1]),g:Ye(t[2]+""+t[2]),b:Ye(t[3]+""+t[3]),format:n?"name":"hex"}}(e)),"object"==we(e)&&(rt(e.r)&&rt(e.g)&&rt(e.b)?(t=function(e,t,n){return{r:255*$e(e,255),g:255*$e(t,255),b:255*$e(n,255)}}(e.r,e.g,e.b),a=!0,l="%"===String(e.r).substr(-1)?"prgb":"rgb"):rt(e.h)&&rt(e.s)&&rt(e.v)?(o=Qe(e.s),r=Qe(e.v),t=function(e,t,n){e=6*$e(e,360),t=$e(t,100),n=$e(n,100);var o=Math.floor(e),r=e-o,i=n*(1-t),a=n*(1-r*t),l=n*(1-(1-r)*t),s=o%6;return{r:255*[n,a,i,i,l,n][s],g:255*[l,n,n,a,i,i][s],b:255*[i,i,l,n,n,a][s]}}(e.h,o,r),a=!0,l="hsv"):rt(e.h)&&rt(e.s)&&rt(e.l)&&(o=Qe(e.s),i=Qe(e.l),t=function(e,t,n){var o,r,i;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=$e(e,360),t=$e(t,100),n=$e(n,100),0===t)o=r=i=n;else{var l=n<.5?n*(1+t):n+t-n*t,s=2*n-l;o=a(s,l,e+1/3),r=a(s,l,e),i=a(s,l,e-1/3)}return{r:255*o,g:255*r,b:255*i}}(e.h,o,i),a=!0,l="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=Ke(n),{ok:a,format:e.format||l,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function xe(e,t,n){e=$e(e,255),t=$e(t,255),n=$e(n,255);var o,r,i=Math.max(e,t,n),a=Math.min(e,t,n),l=(i+a)/2;if(i==a)o=r=0;else{var s=i-a;switch(r=l>.5?s/(2-i-a):s/(i+a),i){case e:o=(t-n)/s+(t<n?6:0);break;case t:o=(n-e)/s+2;break;case n:o=(e-t)/s+4}o/=6}return{h:o,s:r,l}}function Pe(e,t,n){e=$e(e,255),t=$e(t,255),n=$e(n,255);var o,r,i=Math.max(e,t,n),a=Math.min(e,t,n),l=i,s=i-a;if(r=0===i?0:s/i,i==a)o=0;else{switch(i){case e:o=(t-n)/s+(t<n?6:0);break;case t:o=(n-e)/s+2;break;case n:o=(e-t)/s+4}o/=6}return{h:o,s:r,v:l}}function Re(e,t,n,o){var r=[Xe(Math.round(e).toString(16)),Xe(Math.round(t).toString(16)),Xe(Math.round(n).toString(16))];return o&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function Ae(e,t,n,o){return[Xe(Ze(o)),Xe(Math.round(e).toString(16)),Xe(Math.round(t).toString(16)),Xe(Math.round(n).toString(16))].join("")}function Oe(e,t){t=0===t?0:t||10;var n=Te(e).toHsl();return n.s-=t/100,n.s=qe(n.s),Te(n)}function Ne(e,t){t=0===t?0:t||10;var n=Te(e).toHsl();return n.s+=t/100,n.s=qe(n.s),Te(n)}function Me(e){return Te(e).desaturate(100)}function De(e,t){t=0===t?0:t||10;var n=Te(e).toHsl();return n.l+=t/100,n.l=qe(n.l),Te(n)}function Be(e,t){t=0===t?0:t||10;var n=Te(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),Te(n)}function Le(e,t){t=0===t?0:t||10;var n=Te(e).toHsl();return n.l-=t/100,n.l=qe(n.l),Te(n)}function ze(e,t){var n=Te(e).toHsl(),o=(n.h+t)%360;return n.h=o<0?360+o:o,Te(n)}function Fe(e){var t=Te(e).toHsl();return t.h=(t.h+180)%360,Te(t)}function Ge(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Te(e).toHsl(),o=[Te(e)],r=360/t,i=1;i<t;i++)o.push(Te({h:(n.h+i*r)%360,s:n.s,l:n.l}));return o}function He(e){var t=Te(e).toHsl(),n=t.h;return[Te(e),Te({h:(n+72)%360,s:t.s,l:t.l}),Te({h:(n+216)%360,s:t.s,l:t.l})]}function Ue(e,t,n){t=t||6,n=n||30;var o=Te(e).toHsl(),r=360/n,i=[Te(e)];for(o.h=(o.h-(r*t>>1)+720)%360;--t;)o.h=(o.h+r)%360,i.push(Te(o));return i}function We(e,t){t=t||6;for(var n=Te(e).toHsv(),o=n.h,r=n.s,i=n.v,a=[],l=1/t;t--;)a.push(Te({h:o,s:r,v:i})),i=(i+l)%1;return a}Te.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,o=this.toRgb();return e=o.r/255,t=o.g/255,n=o.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=Ke(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=Pe(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=Pe(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),o=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+o+"%)":"hsva("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var e=xe(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=xe(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),o=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+o+"%)":"hsla("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHex:function(e){return Re(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,o,r){var i=[Xe(Math.round(e).toString(16)),Xe(Math.round(t).toString(16)),Xe(Math.round(n).toString(16)),Xe(Ze(o))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*$e(this._r,255))+"%",g:Math.round(100*$e(this._g,255))+"%",b:Math.round(100*$e(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*$e(this._r,255))+"%, "+Math.round(100*$e(this._g,255))+"%, "+Math.round(100*$e(this._b,255))+"%)":"rgba("+Math.round(100*$e(this._r,255))+"%, "+Math.round(100*$e(this._g,255))+"%, "+Math.round(100*$e(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(Ve[Re(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+Ae(this._r,this._g,this._b,this._a),n=t,o=this._gradientType?"GradientType = 1, ":"";if(e){var r=Te(e);n="#"+Ae(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,o=this._a<1&&this._a>=0;return t||!o||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return Te(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(De,arguments)},brighten:function(){return this._applyModification(Be,arguments)},darken:function(){return this._applyModification(Le,arguments)},desaturate:function(){return this._applyModification(Oe,arguments)},saturate:function(){return this._applyModification(Ne,arguments)},greyscale:function(){return this._applyModification(Me,arguments)},spin:function(){return this._applyModification(ze,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(Ue,arguments)},complement:function(){return this._applyCombination(Fe,arguments)},monochromatic:function(){return this._applyCombination(We,arguments)},splitcomplement:function(){return this._applyCombination(He,arguments)},triad:function(){return this._applyCombination(Ge,[3])},tetrad:function(){return this._applyCombination(Ge,[4])}},Te.fromRatio=function(e,t){if("object"==we(e)){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]="a"===o?e[o]:Qe(e[o]));e=n}return Te(e,t)},Te.equals=function(e,t){return!(!e||!t)&&Te(e).toRgbString()==Te(t).toRgbString()},Te.random=function(){return Te.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},Te.mix=function(e,t,n){n=0===n?0:n||50;var o=Te(e).toRgb(),r=Te(t).toRgb(),i=n/100;return Te({r:(r.r-o.r)*i+o.r,g:(r.g-o.g)*i+o.g,b:(r.b-o.b)*i+o.b,a:(r.a-o.a)*i+o.a})},Te.readability=function(e,t){var n=Te(e),o=Te(t);return(Math.max(n.getLuminance(),o.getLuminance())+.05)/(Math.min(n.getLuminance(),o.getLuminance())+.05)},Te.isReadable=function(e,t,n){var o,r,i=Te.readability(e,t);switch(r=!1,o=function(e){var t,n;return"AA"!==(t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==t&&(t="AA"),"small"!==(n=(e.size||"small").toLowerCase())&&"large"!==n&&(n="small"),{level:t,size:n}}(n),o.level+o.size){case"AAsmall":case"AAAlarge":r=i>=4.5;break;case"AAlarge":r=i>=3;break;case"AAAsmall":r=i>=7}return r},Te.mostReadable=function(e,t,n){var o,r,i,a,l=null,s=0;r=(n=n||{}).includeFallbackColors,i=n.level,a=n.size;for(var c=0;c<t.length;c++)(o=Te.readability(e,t[c]))>s&&(s=o,l=Te(t[c]));return Te.isReadable(e,l,{level:i,size:a})||!r?l:(n.includeFallbackColors=!1,Te.mostReadable(e,["#fff","#000"],n))};var je=Te.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ve=Te.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(je);function Ke(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function $e(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function qe(e){return Math.min(1,Math.max(0,e))}function Ye(e){return parseInt(e,16)}function Xe(e){return 1==e.length?"0"+e:""+e}function Qe(e){return e<=1&&(e=100*e+"%"),e}function Ze(e){return Math.round(255*parseFloat(e)).toString(16)}function Je(e){return Ye(e)/255}var et,tt,nt,ot=(tt="[\\s|\\(]+("+(et="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+et+")[,|\\s]+("+et+")\\s*\\)?",nt="[\\s|\\(]+("+et+")[,|\\s]+("+et+")[,|\\s]+("+et+")[,|\\s]+("+et+")\\s*\\)?",{CSS_UNIT:new RegExp(et),rgb:new RegExp("rgb"+tt),rgba:new RegExp("rgba"+nt),hsl:new RegExp("hsl"+tt),hsla:new RegExp("hsla"+nt),hsv:new RegExp("hsv"+tt),hsva:new RegExp("hsva"+nt),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function rt(e){return!!ot.CSS_UNIT.exec(e)}const it=h.colorPalettes,at={isDismissable:!0,duration:1e4},lt=()=>{const[e]=(0,b.useIsAIConnected)(),[t,n]=(0,a.useState)(!1),o=(0,a.useRef)(m.noop),r=(0,a.useCallback)((e=>{n(!0),o.current=e}),[]),i=(0,a.useCallback)((t=>{e?null==t||t():r(t)}),[e,r]),{createSuccessNotice:l}=(0,s.useKubioNotices)(),c=(0,a.useCallback)((()=>{n(!1),(0,m.isFunction)(o.current)?o.current():l((0,x.__)("Kubio AI connected successfully!","kubio"),at)}),[l]);return[t&&(0,a.createElement)(b.AIWizard,{onFinish:c,onCancel:()=>n(!1),isFrontPage:!1,isSetup:!0}),i,e,r]},st=(0,a.forwardRef)((function({icon:e,size:t=24,...n},o){return(0,a.cloneElement)(e,{width:t,height:t,...n,ref:o})})),ct=h.STORE_KEY,ut=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})),dt=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"})),mt=window.wp.viewport,pt=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),ht=window.wp.deprecated;var gt=n.n(ht);const ft=window.wp.preferences,bt=(e,t)=>({type:"SET_DEFAULT_COMPLEMENTARY_AREA",scope:e,area:t}),_t=(e,t)=>n=>{let{registry:o,dispatch:r}=n;t&&(o.select(ft.store).get(e,"isComplementaryAreaVisible")||o.dispatch(ft.store).set(e,"isComplementaryAreaVisible",!0),r({type:"ENABLE_COMPLEMENTARY_AREA",scope:e,area:t}))},vt=e=>t=>{let{registry:n}=t;n.select(ft.store).get(e,"isComplementaryAreaVisible")&&n.dispatch(ft.store).set(e,"isComplementaryAreaVisible",!1)},yt=(e,t)=>n=>{let{registry:o}=n;if(!t)return;const r=o.select(ft.store).get(e,"pinnedItems");!0!==(null==r?void 0:r[t])&&o.dispatch(ft.store).set(e,"pinnedItems",{...r,[t]:!0})},kt=(e,t)=>n=>{let{registry:o}=n;if(!t)return;const r=o.select(ft.store).get(e,"pinnedItems");o.dispatch(ft.store).set(e,"pinnedItems",{...r,[t]:!1})};function Et(e,t){return function(n){let{registry:o}=n;gt()("dispatch( 'core/interface' ).toggleFeature",{since:"6.0",alternative:"dispatch( 'core/preferences' ).toggle"}),o.dispatch(ft.store).toggle(e,t)}}function St(e,t,n){return function(o){let{registry:r}=o;gt()("dispatch( 'core/interface' ).setFeatureValue",{since:"6.0",alternative:"dispatch( 'core/preferences' ).set"}),r.dispatch(ft.store).set(e,t,!!n)}}function wt(e,t){return function(n){let{registry:o}=n;gt()("dispatch( 'core/interface' ).setFeatureDefaults",{since:"6.0",alternative:"dispatch( 'core/preferences' ).setDefaults"}),o.dispatch(ft.store).setDefaults(e,t)}}const Ct=(0,w.createRegistrySelector)((e=>(t,n)=>{var o;const r=e(ft.store).get(n,"isComplementaryAreaVisible");if(void 0!==r)return r?null==t||null===(o=t.complementaryAreas)||void 0===o?void 0:o[n]:null})),It=(0,w.createRegistrySelector)((e=>(t,n,o)=>{var r;const i=e(ft.store).get(n,"pinnedItems");return null===(r=null==i?void 0:i[o])||void 0===r||r})),Tt=(0,w.createRegistrySelector)((e=>(t,n,o)=>(gt()("select( 'core/interface' ).isFeatureActive( scope, featureName )",{since:"6.0",alternative:"select( 'core/preferences' ).get( scope, featureName )"}),!!e(ft.store).get(n,o)))),xt=(0,w.combineReducers)({complementaryAreas:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DEFAULT_COMPLEMENTARY_AREA":{const{scope:n,area:o}=t;return e[n]?e:{...e,[n]:o}}case"ENABLE_COMPLEMENTARY_AREA":{const{scope:n,area:o}=t;return{...e,[n]:o}}}return e}}),Pt=(0,w.createReduxStore)("core/interface",{reducer:xt,actions:e,selectors:t});(0,w.register)(Pt);const Rt=window.wp.plugins,At=(0,Rt.withPluginContext)(((e,t)=>({icon:t.icon||e.icon,identifier:t.identifier||`${e.name}/${t.name}`}))),Ot=At((function(e){let{as:t=k.Button,scope:n,identifier:o,icon:r,selectedIcon:i,name:l,...s}=e;const c=t,u=(0,w.useSelect)((e=>e(Pt).getActiveComplementaryArea(n)===o),[o]),{enableComplementaryArea:d,disableComplementaryArea:m}=(0,w.useDispatch)(Pt);return(0,a.createElement)(c,C({icon:i&&u?i:r,onClick:()=>{u?m(n):d(n,o)}},s))})),Nt=e=>{let{smallScreenTitle:t,children:n,className:o,toggleButtonProps:r}=e;const i=(0,a.createElement)(Ot,C({icon:pt},r));return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"components-panel__header interface-complementary-area-header__small"},t&&(0,a.createElement)("span",{className:"interface-complementary-area-header__small-title"},t),i),(0,a.createElement)("div",{className:T()("components-panel__header","interface-complementary-area-header",o),tabIndex:-1},n,i))},Mt=()=>{};function Dt(e){let{name:t,as:n=k.Button,onClick:o,...r}=e;return(0,a.createElement)(k.Fill,{name:t},(e=>{let{onClick:t}=e;return(0,a.createElement)(n,C({onClick:o||t?function(){(o||Mt)(...arguments),(t||Mt)(...arguments)}:void 0},r))}))}Dt.Slot=function(e){let{name:t,as:n=k.ButtonGroup,fillProps:o={},bubblesVirtually:r,...i}=e;return(0,a.createElement)(k.Slot,{name:t,bubblesVirtually:r,fillProps:o},(e=>{if(!a.Children.toArray(e).length)return null;const t=[];a.Children.forEach(e,(e=>{let{props:{__unstableExplicitMenuItem:n,__unstableTarget:o}}=e;o&&n&&t.push(o)}));const o=a.Children.map(e,(e=>!e.props.__unstableExplicitMenuItem&&t.includes(e.props.__unstableTarget)?null:e));return(0,a.createElement)(n,i,o)}))};const Bt=Dt,Lt=e=>{let{__unstableExplicitMenuItem:t,__unstableTarget:n,...o}=e;return(0,a.createElement)(k.MenuItem,o)};function zt(e){let{scope:t,target:n,__unstableExplicitMenuItem:o,...r}=e;return(0,a.createElement)(Ot,C({as:e=>(0,a.createElement)(Bt,C({__unstableExplicitMenuItem:o,__unstableTarget:`${t}/${n}`,as:Lt,name:`${t}/plugin-more-menu`},e)),role:"menuitemcheckbox",selectedIcon:O,name:n,scope:t},r))}function Ft(e){let{scope:t,...n}=e;return(0,a.createElement)(k.Fill,C({name:`PinnedItems/${t}`},n))}Ft.Slot=function(e){let{scope:t,className:n,...o}=e;return(0,a.createElement)(k.Slot,C({name:`PinnedItems/${t}`},o),(e=>(null==e?void 0:e.length)>0&&(0,a.createElement)("div",{className:T()(n,"interface-pinned-items")},e)))};const Gt=Ft;function Ht(e){let{scope:t,children:n,className:o}=e;return(0,a.createElement)(k.Fill,{name:`ComplementaryArea/${t}`},(0,a.createElement)("div",{className:o},n))}const Ut=At((function(e){let{children:t,className:n,closeLabel:o=(0,x.__)("Close plugin"),identifier:r,header:i,headerClassName:l,icon:s,isPinnable:c=!0,panelClassName:u,scope:d,name:m,smallScreenTitle:p,title:h,toggleShortcut:g,isActiveByDefault:f,showIconLabels:b=!1}=e;const{isActive:_,isPinned:v,activeArea:y,isSmall:E,isLarge:S}=(0,w.useSelect)((e=>{const{getActiveComplementaryArea:t,isItemPinned:n}=e(Pt),o=t(d);return{isActive:o===r,isPinned:n(d,r),activeArea:o,isSmall:e(mt.store).isViewportMatch("< medium"),isLarge:e(mt.store).isViewportMatch("large")}}),[r,d]);!function(e,t,n,o,r){const i=(0,a.useRef)(!1),l=(0,a.useRef)(!1),{enableComplementaryArea:s,disableComplementaryArea:c}=(0,w.useDispatch)(Pt);(0,a.useEffect)((()=>{o&&r&&!i.current?(c(e),l.current=!0):l.current&&!r&&i.current?(l.current=!1,s(e,t)):l.current&&n&&n!==t&&(l.current=!1),r!==i.current&&(i.current=r)}),[o,r,e,t,n])}(d,r,y,_,E);const{enableComplementaryArea:C,disableComplementaryArea:I,pinItem:P,unpinItem:R}=(0,w.useDispatch)(Pt);return(0,a.useEffect)((()=>{f&&void 0===y&&!E&&C(d,r)}),[y,f,d,r,E]),(0,a.createElement)(a.Fragment,null,c&&(0,a.createElement)(Gt,{scope:d},v&&(0,a.createElement)(Ot,{scope:d,identifier:r,isPressed:_&&(!b||S),"aria-expanded":_,label:h,icon:b?O:s,showTooltip:!b,variant:b?"tertiary":void 0})),m&&c&&(0,a.createElement)(zt,{target:m,scope:d,icon:s},h),_&&(0,a.createElement)(Ht,{className:T()("interface-complementary-area",n),scope:d},(0,a.createElement)(Nt,{className:l,closeLabel:o,onClose:()=>I(d),smallScreenTitle:p,toggleButtonProps:{label:o,shortcut:g,scope:d,identifier:r}},i||(0,a.createElement)(a.Fragment,null,(0,a.createElement)("strong",null,h),c&&(0,a.createElement)(k.Button,{className:"interface-complementary-area__pin-unpin-item",icon:v?ut:dt,label:v?(0,x.__)("Unpin from toolbar"):(0,x.__)("Pin to toolbar"),onClick:()=>(v?R:P)(d,r),isPressed:v,"aria-expanded":v}))),(0,a.createElement)(k.Panel,{className:u},t)))}));Ut.Slot=function(e){let{scope:t,...n}=e;return(0,a.createElement)(k.Slot,C({name:`ComplementaryArea/${t}`},n))};const Wt=Ut,jt=e=>{let{isActive:t}=e;return(0,a.useEffect)((()=>{let e=!1;return document.body.classList.contains("sticky-menu")&&(e=!0,document.body.classList.remove("sticky-menu")),()=>{e&&document.body.classList.add("sticky-menu")}}),[]),(0,a.useEffect)((()=>(t?document.body.classList.add("is-fullscreen-mode"):document.body.classList.remove("is-fullscreen-mode"),()=>{t&&document.body.classList.remove("is-fullscreen-mode")})),[t]),null},Vt=(0,a.forwardRef)((function(e,t){let{footer:n,header:o,sidebar:r,secondarySidebar:i,notices:l,content:s,drawer:c,actions:u,labels:d,className:m,shortcuts:p}=e;const h=(0,k.__unstableUseNavigateRegions)(p);!function(e){(0,a.useEffect)((()=>{const t=document&&document.querySelector(`html:not(.${e})`);if(t)return t.classList.toggle(e),()=>{t.classList.toggle(e)}}),[e])}("interface-interface-skeleton__html-container");const g={/* translators: accessibility text for the nav bar landmark region. */drawer:(0,x.__)("Drawer"),/* translators: accessibility text for the top bar landmark region. */header:(0,x.__)("Header"),/* translators: accessibility text for the content landmark region. */body:(0,x.__)("Content"),/* translators: accessibility text for the secondary sidebar landmark region. */secondarySidebar:(0,x.__)("Block Library"),/* translators: accessibility text for the settings landmark region. */sidebar:(0,x.__)("Settings"),/* translators: accessibility text for the publish landmark region. */actions:(0,x.__)("Publish"),/* translators: accessibility text for the footer landmark region. */footer:(0,x.__)("Footer"),...d};return(0,a.createElement)("div",C({},h,{ref:(0,E.useMergeRefs)([t,h.ref]),className:T()(m,"interface-interface-skeleton",h.className,!!n&&"has-footer")}),!!c&&(0,a.createElement)("div",{className:"interface-interface-skeleton__drawer",role:"region","aria-label":g.drawer,tabIndex:"-1"},c),(0,a.createElement)("div",{className:"interface-interface-skeleton__editor"},!!o&&(0,a.createElement)("div",{className:"interface-interface-skeleton__header",role:"region","aria-label":g.header,tabIndex:"-1"},o),(0,a.createElement)("div",{className:"interface-interface-skeleton__body"},!!i&&(0,a.createElement)("div",{className:"interface-interface-skeleton__secondary-sidebar",role:"region","aria-label":g.secondarySidebar,tabIndex:"-1"},i),!!l&&(0,a.createElement)("div",{className:"interface-interface-skeleton__notices"},l),(0,a.createElement)("div",{className:"interface-interface-skeleton__content",role:"region","aria-label":g.body,tabIndex:"-1"},s),!!r&&(0,a.createElement)("div",{className:"interface-interface-skeleton__sidebar",role:"region","aria-label":g.sidebar,tabIndex:"-1"},r),!!u&&(0,a.createElement)("div",{className:"interface-interface-skeleton__actions",role:"region","aria-label":g.actions,tabIndex:"-1"},u))),!!n&&(0,a.createElement)("div",{className:"interface-interface-skeleton__footer",role:"region","aria-label":g.footer,tabIndex:"-1"},n))})),Kt=window.kubio.blockLibrary,$t=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"})),qt=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M18 11.2h-5.2V6h-1.6v5.2H6v1.6h5.2V18h1.6v-5.2H18z"})),Yt="kubio-dragging-from-inserter--active",Xt=()=>{setTimeout((()=>{const e=top.document.querySelector("body");e.classList.contains(Yt)&&e.classList.remove(Yt)}),10)},Qt=()=>{const{setOpenInserter:e}=(0,w.useDispatch)(h.STORE_KEY),{insertionPoint:t,currentSelectedBlock:n}=(0,w.useSelect)((e=>({insertionPoint:e(h.STORE_KEY).getOpenedInserter(),currentSelectedBlock:e("core/block-editor").getSelectedBlockClientId()||null})),[]),o=(0,E.usePrevious)(n),{uiVersion:r}=(0,g.useUIVersion)();(0,a.useEffect)((()=>{2===r&&void 0!==o&&o!==n&&(e(!1),Xt())}),[o,n,r]);const i=(0,f.useBlocksOwnerDocument)(),l=(0,E.useViewportMatch)("medium","<"),c=(0,a.useRef)(),u=(0,a.useCallback)((n=>{!1!==t&&(n.target.closest(".kubio-inserter-button")||n.target.closest(".kubio-sidebar-add-section-button")||n.target.classList.contains("edit-site-header-toolbar__inserter-toggle")||n.target.closest(".edit-site-header-toolbar__inserter-toggle")||n.target.closest(".kubio-inserter-ignore-click-outisde")||e(!1))}),[t,e]);return(0,s.useOnClickOutside)(c,u),(0,a.createElement)("div",{ref:c,className:"edit-site-editor__inserter-panel"},(0,a.createElement)("div",{className:"edit-site-editor__inserter-panel-header"},(0,a.createElement)(k.Button,{icon:$t,onClick:()=>e(!1)})),(0,a.createElement)("div",{className:"edit-site-editor__inserter-panel-content"},t&&(0,a.createElement)(y.__experimentalLibrary,{shouldFocusBlock:l,shouldSelectBlock:1===r,rootClientId:null==t?void 0:t.rootClientId,__experimentalInsertionIndex:null==t?void 0:t.insertionIndex,ownerDocument:i,insertionPoint:t,isAppender:null==t?void 0:t.isAppender})))},Zt=(0,Kt.getNamesOfBlocks)(),Jt=["core/column","core/post-content","core/template-part",Zt.HEADER,Zt.FOOTER,Zt.SIDEBAR,Zt.COLUMN,Zt.LOOP_ITEM,Zt.SLIDER_CONTENT],en=e=>{let{variant:t="secondary",className:n="edit-site-header-toolbar__inserter-toggle"}=e;const{rootClientId:o,isInserterOpen:r}=(0,w.useSelect)((e=>{var t;const{getBlockListSettings:n,getSelectedBlockClientId:o,getBlockRootClientId:r,getBlock:i,getBlockIndex:a}=e("core/block-editor");let l,s=o(),c=n(s);((0,m.isUndefined)(c)||c.templateLock)&&(l=a(s),s=r(s),c=n(s));const u=s&&Jt.includes(null===(t=i(s))||void 0===t?void 0:t.name)&&((0,m.isUndefined)(c)||!c.templateLock);return{isInserterOpen:e(h.STORE_KEY).getOpenedInserter(),rootClientId:u?s:null,insertionIndex:l}}),[]),{setOpenInserter:i}=(0,w.useDispatch)(h.STORE_KEY),{selectBlock:l}=(0,w.useDispatch)("core/block-editor"),s=(0,a.useRef)(),{uiVersion:c}=(0,g.useUIVersion)(),u=(0,a.useCallback)((e=>{s.current.focus(),e.preventDefault(),e.stopPropagation()}),[]),d=(0,a.useCallback)((e=>{const t=!r&&"block-inserter";2!==c?(t?l(null):u(e),i(t,o),top.document.body.classList.remove("kubio-dragging-from-inserter--active")):t?(i("pattern-inserter/content",null),Xt()):(u(e),i(!1,null))}),[r,o]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.Button,{ref:s,variant:t,isPressed:r,className:n,onClick:d,icon:r?pt:qt,onMouseDown:e=>{e.preventDefault()},label:(p=r,p?(0,x.__)("Close","kubio"):(0,x.__)("Add block","kubio"))}));var p};function tn(e){let{areaIdentifier:t,title:n,backCallback:o=null,children:r,className:i}=e;const{uiVersion:l}=(0,g.useUIVersion)();return(0,a.createElement)(Wt,{scope:`${h.STORE_KEY}/sidebars`,complementaryAreaIdentifier:`${h.STORE_KEY}/sidebar/${t}`,identifier:`${h.STORE_KEY}/sidebar/${t}`,isPinnable:!1,className:T()(i,o?"kubio-sidebar-header-block":""),header:(0,a.createElement)("div",{className:T()("components-panel__header","kubio-sidebar-header","accordion-section-title",o?"kubio-sidebar-header--has-back":""),tabIndex:-1},o&&(0,a.createElement)(k.Button,{className:"kubio-sidebar-header-back-button",onClick:o,showTooltip:!0,label:(0,x.__)("Back","kubio")},(0,a.createElement)(st,{icon:ye.ArrowLeft,className:"kubio-sidebar-header-arrow"})),(0,a.createElement)("strong",null,"function"==typeof n?n():n),2===l&&(0,a.createElement)(en,{className:"kubio-inserter-button",variant:"primary"}))},r,rn(t))}const nn=[],on=e=>{let{name:t,title:n=null,parent:o="document",render:r,isSubsidebar:i=!1}=e;(0,m.find)(nn,{name:t})&&console.error(`sidebar ${t} already added`),nn.push({name:t,parent:o,render:r,title:n||t,isSubsidebar:i})},rn=e=>(e=>nn.filter((t=>{let{parent:n}=t;return n===e})))(e).map((t=>{let{title:n,render:o,name:r,isSubsidebar:i}=t;const l=i?cn:tn;return(0,a.createElement)(l,{title:n,parentAreaIdentifier:e,areaIdentifier:r,key:`${e}.${r}`},o())})),an=e=>{let{name:t,title:n,parent:o="document",render:r}=e;return on({name:t,title:n,parent:o,render:r,isSubsidebar:!1})},ln=e=>{let{name:t,title:n,parent:o="document",render:r}=e;return on({name:t,title:n,parent:o,render:r,isSubsidebar:!0})},sn=[];function cn(e){let{title:t,label:n,children:o,areaIdentifier:r,className:i,backCallback:l,parentAreaIdentifier:s,onOpen:c,buttonOnly:u=!1,showArrow:d=!0}=e;const{clearSelectedBlock:p}=(0,w.useDispatch)("core/block-editor"),{openSidebar:g}=(0,w.useDispatch)(h.STORE_KEY),f=()=>{p().then((()=>g(s||"document")))},b=l?()=>l(f):f,_=(0,w.useSelect)((e=>e(h.STORE_KEY).getSubSidebars[r])),{addSubSidebar:v}=(0,w.useDispatch)(h.STORE_KEY);return(0,a.useLayoutEffect)((()=>{_||(v({areaIdentifier:r,sidebar:(0,a.createElement)(k.Animate,{type:"slide-in"},(e=>{let{className:n}=e;return(0,a.createElement)(tn,{title:t,backCallback:b,areaIdentifier:r,className:`${n} kubio-subsidebar-content`},o,rn(r))}))}),sn.push(r))}),[_]),(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"kubio-subsidebar-container"},(0,a.createElement)("div",{className:T()("components-panel__header","interface-complementary-area-header","kubio-subsidebar-title",i),tabIndex:-1},(0,a.createElement)(k.Button,{label:(0,x.__)("Open","kubio"),onClick:()=>(u||p().then((()=>g(r))),void((0,m.isFunction)(c)&&c()))},(0,a.createElement)("strong",null,n||t),d&&(0,a.createElement)(st,{icon:ye.ArrowRight,className:"components-panel__arrow arrow_general_settings"})))),(0,a.createElement)("div",{style:{display:"none"}},o))}const un=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e=Te(e).toHsl();const o=n||t,r=t;return Te({...e,l:Math.floor(Math.random()*(o-r+1)+r)}).toHexString()},dn=()=>{const{getPalette:e,setPalette:t,getCustomPalette:n}=(0,_.useGlobalDataColors)(),o=e(),r=n(),[i,l]=(0,a.useState)(o),c=(0,a.useCallback)(((e,n)=>{const o=Te(n),r=[o._r,o._g,o._b],a=[...i];a[e]={...a[e],color:r},Se()(i[e].color,a[e].color)||(l(a),t(a))}),[l,t,i]),u=(0,a.useCallback)((e=>{l([...e]),t([...e])}),[l,t]),d=e=>()=>{u(e.colors)},{isKubioTheme:m}=(0,w.useSelect)((e=>{var t;const{getSettings:n}=e(h.STORE_KEY);return{isKubioTheme:(null===(t=n())||void 0===t?void 0:t.isKubioTheme)||null}})),g=e=>t=>{c(e,t)},f=(0,a.useCallback)((()=>{const e={slug:"kubio-color-"+(parseInt(i.length)+1),color:[255,255,255]};i.push(e),t(i,!1)}),[t,i]),b=(0,a.useCallback)((e=>{i.splice(e,1),t(i)}),[t,i]),v=(0,s.useDeepMemo)((()=>{const e=[];return p().isEmpty(r)||e.push({label:(0,x.__)("Previous","kubio"),colors:r}),e.concat(it)}),[r]);return(0,a.createElement)(k.PanelBody,{title:(0,x.__)("Color Palette","kubio"),className:"kubio-color-palette-panel"},(0,a.createElement)(k.BaseControl,null,(0,a.createElement)(k.Flex,{justify:"center",className:""},(0,a.createElement)(k.FlexBlock,null,(0,a.createElement)(k.BaseControl,null,(0,x.__)("Current color scheme","kubio"))),(0,a.createElement)(k.FlexItem,null,(0,a.createElement)("span",{className:"c-components-units-list"},(0,a.createElement)("span",{role:"button",tabIndex:0,key:"palette-add-color",className:"c-components-units-list__item is-selected add-colors-button",onClick:f},(0,x.__)("Add colors","kubio"))))),(0,a.createElement)(k.Flex,{gap:0,className:"kubio-current-colors-palette"},i.map(((e,t)=>{let{color:n,slug:o}=e;const r=`rgb(${n.join(",")})`;return(0,a.createElement)(P.ColorIndicatorPopover,{key:`${o}-${t}`,color:r,onChange:g(t),alpha:!1,showPalette:!1,returnRawValue:!0,disabled:!1,hasButton:t>5,buttonIcon:!1,buttonText:(0,x.__)("Remove color","kubio"),onReset:()=>b(t)})})))),(0,a.createElement)(mn,{onChange:l}),!m&&(0,a.createElement)(P.ControlNotice,{className:"notice-general-settings no-padding",content:(0,x.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")}),(0,a.createElement)(P.SeparatorHorizontalLine,null),(0,a.createElement)(k.BaseControl,{label:(0,x.__)("More Palettes","kubio"),className:"more_palettes_base"},v.map(((e,t)=>(0,a.createElement)(k.BaseControl,{label:e.label,key:t,className:T()("kubio-color-scheme-base-control")},(0,a.createElement)(k.Button,{className:"kubio-color-scheme-selector",onClick:d(e),key:e.label},(0,a.createElement)("div",{className:"kubio-color-scheme-selector__grid"},e.colors.map((e=>{let{slug:t,color:n}=e;return(0,a.createElement)(P.ColorIndicator,{key:t,value:`rgb(${n.join(",")})`})})))))))))},mn=e=>{let{onChange:t=p().noop}=e;const{setPalette:n}=(0,_.useGlobalDataColors)(),{isAICapabilityEnabled:o}=(0,w.useSelect)((e=>{const{isAICapabilityEnabled:t}=e(h.STORE_KEY);return{isAICapabilityEnabled:t()}})),[r,i,l]=lt(),[s]=(0,b.useAIData)(),[c,u]=(0,a.useState)(!1),d=(0,a.useCallback)((async()=>{const{siteContext:e={},pageContext:o={},pageTitle:r=""}=s,{siteMood:i="neutral"}=e;try{u(!0);let a=await(0,b.generateColorScheme)({pageContext:o,siteContext:e,pageTitle:r,mood:i});a=(0,_.normalizeColorPalette)([...a,un(a[1],98,100),un(a[0],5,10)]),n(a),t(a)}catch(e){ke.Log.error("Error determining site colors",e)}finally{u(!1)}}),[s,n]);return(0,a.createElement)(a.Fragment,null,o&&(0,a.createElement)(a.Fragment,null,r,(0,a.createElement)(k.BaseControl,{className:"kubio-generate-color-scheme-button"},(0,a.createElement)(k.Button,{icon:ye.KubioAI,className:T()("kubio-ai-button"),isBusy:c,onClick:l?d:i},c?(0,x.__)("Generating color scheme…","kubio"):(0,x.__)("Generate color scheme","kubio")))))},pn=e=>{let{areaIdentifier:t}=e;return(0,w.useSelect)((e=>e(h.STORE_KEY).isEditorSidebarOpened(t)),[])&&(0,a.createElement)(dn,null)};function hn(e){let{parentAreaIdentifier:t}=e;return(0,a.createElement)(cn,{title:"Color Scheme",parentAreaIdentifier:t,areaIdentifier:`${t}/color-scheme`},(0,a.createElement)(pn,{areaIdentifier:`${t}/color-scheme`}))}const gn=h.colorPalettes.map(((e,t)=>({...e,label:(0,x.sprintf)((0,x.__)("Preset %s","kubio"),t+1)}))),fn=e=>{const{clearSelectedBlock:t}=(0,w.useDispatch)("core/block-editor"),{openSidebar:n}=(0,w.useDispatch)(h.STORE_KEY)||{};return(0,a.createElement)(P.KubioPanelBody,{title:(0,a.createElement)(a.Fragment,null,(0,a.createElement)("span",null,(0,x.__)("Color Scheme Presets","kubio")),(0,a.createElement)(k.Tooltip,{text:(0,x.__)("Advanced Settings","kubio")},(0,a.createElement)("div",{className:"kubio-style-preset-list__cog"},(0,a.createElement)(k.Icon,{icon:A,onClick:()=>{t().then((()=>{n("document/general-settings/color-scheme")}))}})))),className:"kubio-style-preset-panel",initialOpen:!0},(0,a.createElement)(bn,e))},bn=(0,a.memo)((()=>{const{onHandleClick:e,activePaletteValue:t,customPalette:n,currentPaletteIsCustom:o}=vn(),{activePalette:r,restOfPalettes:i}=(0,s.useDeepMemo)((()=>{const e=[];return!p().isEmpty(n)&&e.push({label:(0,x.__)("Previous","kubio"),colors:n}),{activePalette:{label:(0,x.__)("Current","kubio"),colors:t},restOfPalettes:e.concat(gn)}}),[o,t,n]);return(0,a.createElement)("div",{className:"kubio-style-presets-color-scheme__container"},(0,a.createElement)(_e,{scrollIntoView:!1},(0,a.createElement)(yn,{palette:r,index:0,onHandleClick:e,activePaletteValue:t})),(0,a.createElement)(mn,null),(0,a.createElement)(P.SeparatorHorizontalLine,null),(0,a.createElement)(_e,{scrollIntoView:!1},i.map(((t,n)=>(0,a.createElement)(yn,{key:n,palette:t,index:n,onHandleClick:e,activePaletteValue:null})))))})),vn=()=>{const{getPalette:e,setPalette:t,getCustomPalette:n}=(0,_.useGlobalDataColors)(),o=e(),r=n(),i=(0,a.useMemo)((()=>{const e=!h.colorPalettes.find((e=>(0,ve.getColorPalettesAreEqual)(e.colors,o))),t=(0,ve.getColorPalettesAreEqual)(r,o);return e&&!t}),[o,r]);return{mergedPalettes:(0,s.useDeepMemo)((()=>{const e=[];if(!p().isEmpty(r)&&e.push({label:(0,x.__)("Previous","kubio"),colors:r}),i){const t=(0,x.__)("Current","kubio");e.unshift({label:t,colors:o})}return e.concat(gn)}),[i,o,r]),onHandleClick:e=>{t([...e.colors])},activePaletteValue:o,customPalette:r,currentPaletteIsCustom:i}},yn=e=>{let{palette:t,index:n,onHandleClick:o,activePaletteValue:r}=e;const i=(0,ve.getColorPalettesAreEqual)(t.colors,r);return(0,a.createElement)(_e.Item,{className:"kubio-style-preset-list__colors",key:n,isActive:i,onClick:()=>o(t)},!!t.label&&(0,a.createElement)("div",{className:"kubio-style-preset-list__item__title"},t.label),(0,a.createElement)("div",{className:"kubio-style-preset-list__colors__item"},t.colors.map((e=>{let{slug:t,color:n}=e;return(0,a.createElement)(P.ColorIndicator,{key:t,value:`rgb(${n.join(",")})`})}))),i&&(0,a.createElement)("div",{className:"kubio-style-preset-list__check"},(0,a.createElement)(k.Icon,{icon:O})))},kn=e=>{let{className:t,children:n,...o}=e;const r=(0,a.useRef)();return(e=>{let{ref:t}=e;(0,a.useEffect)((()=>{if(!t.current)return;const e=new ResizeObserver((e=>{for(const l of e){var n,o,r,i;null===(n=t.current)||void 0===n||null===(o=n.classList)||void 0===o||null===(r=(i=o).toggle)||void 0===r||r.call(i,"kubio-has-scrollbar",!!(a=t.current)&&a.scrollHeight>a.clientHeight)}var a}));return e.observe(t.current),()=>{e.disconnect()}}),[t.current])})({ref:r}),(0,a.createElement)("div",C({ref:r,className:T()("kubio-editor-ai-post-generate-interface__wizard__list",t)},o),n)},En={BG_IMAGE:"bgImage",BG_SLIDESHOW:"bgSlideshow",COLUMN_BG_IMG:"columnBgImage",IMAGE_BLOCK:"imageBlock"},Sn=e=>()=>{const{activeImage:t,onChangeImage:n,initialImg:o,restOfImages:r,isMultiChoice:i}=wn({type:e}),l=e===En.BG_SLIDESHOW,{onWizardDataChange:s}=Dn();return(0,a.useEffect)((()=>{s({currentSelectedImage:t})}),[]),(0,a.useEffect)((()=>{s(i?{currentSelectedImage:p().sortBy(t,(e=>p().indexOf(r,e)))}:{currentSelectedImage:t})}),[t]),(0,a.createElement)(kn,{className:"kubio-editor-ai-post-generate-interface__wizard__image-step"},(0,a.createElement)("h2",null,!l&&(0,x.__)("Hero Image","kubio"),l&&(0,x.__)("Hero Slideshow","kubio")),(0,a.createElement)("p",null,!l&&(0,x.__)("Are you happy with the hero image selected by Kubio AI?","kubio"),l&&(0,x.__)("Are you happy with the hero slideshow images selected by Kubio AI?","kubio")),o&&(0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__preset-list__first-item"},(0,a.createElement)(_e,{scrollIntoView:!1},(0,a.createElement)(In,{src:o,activeImage:t,setActiveImage:n}))),(0,a.createElement)("p",{className:"kubio-editor-ai-post-generate-interface__wizard__list__after-first"},(0,x.__)("Below are a few alternatives. You can also change this later.","kubio")),(0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__image-step__image-list"},(0,a.createElement)(_e,{scrollIntoView:!1},r.map(((e,o)=>(0,a.createElement)(In,{src:e,key:o,activeImage:t,setActiveImage:n}))))))},wn=function(){let{type:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=p().get((0,f.useGetGlobalSessionProp)("aiFrontPageHeroImageVariantsData",{}),e,{}),{currentValue:n,variants:o,clientId:r}=t,i=Array.isArray(n);let l,s;i?(s=n.concat(o),l=null):(l=n,s=o);const{wizardContextData:c,onWizardDataChange:u}=Dn(),d=`currentHeroImage${e}`,m=p().get(c,d,n),[h,g]=(0,a.useState)(m),{getBlockWithImageDataHelper:_}=Cn(),v=(0,a.useRef)();(0,a.useEffect)((()=>{v.current=void 0}),[e]);const y=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{updateToLocalSlideshowImage:o,slideshowIndex:a}=p().merge({updateToLocalSlideshowImage:!1,slideshowIndex:0},n);let l=[];o||(l=(e=>{var t;if(!i)return g(e),null==u||u({[d]:e}),e;let n;if(null==h||null===(t=h.includes)||void 0===t?void 0:t.call(h,e)){var o;n=null==h||null===(o=h.filter)||void 0===o?void 0:o.call(h,(t=>t!==e)),p().isEmpty(n)&&(n=h),n=p().sortBy(n,(e=>p().indexOf(s,e)))}else{var r;n=null==h||null===(r=h.concat)||void 0===r?void 0:r.call(h,[e]),n=p().sortBy(n,(e=>p().indexOf(s,e)));const t=p().indexOf(n,e);if(t>0&&t<n.length-1){const o=n.slice(0,t),r=n.slice(t+1);n=[e].concat(r,o)}else if(0===t){const o=n.slice(t+1);n=[e].concat(o)}else if(t===n.length-1){const o=n.slice(0,t);n=[e].concat(o)}}Array.isArray(n)||(n=[]),n=p().uniq(n);const a=p().sortBy(n,(e=>p().indexOf(s,e)));return null==u||u({[d]:a}),g(n),n})(t)),v.current||(v.current=_(r));const c=v.current;if(c)switch(e){case En.BG_IMAGE:case En.COLUMN_BG_IMG:c.setStyle("background.image.0.source.url",t,{descendants:"outer",media:"desktop"});break;case En.BG_SLIDESHOW:if(o)c.setStyle(`background.slideshow.slides.${a}.url`,t,{descendants:"outer",media:"desktop",mergeData:!1});else if(Array.isArray(l)){const e=l.map(((e,t)=>({id:t+1,url:e,icon:!1})));c.setStyle("background.slideshow.slides",e,{descendants:"outer",media:"desktop",mergeData:!1})}break;case En.IMAGE_BLOCK:c.setAttribute("url",t)}};return{activeImage:h,onChangeImage:y,initialImg:l,restOfImages:s,saveImageOnNext:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;if(""===t)return!1;try{if(e.has(t))y(e.get(t),n);else{const o=await(0,b.aiSearchedImageSave)({selectedImage:t});""!==o&&(y(o.url,n),e.set(t,o.url))}}catch(e){console.log(e)}},isMultiChoice:i}},Cn=()=>{const e=(0,s.useColibriDataHooks)();return{getBlockWithImageDataHelper:t=>(0,s.getColibriData)({clientId:t,autoSave:!0,loadColibriData:!0},e)}},In=e=>{let{src:t,activeImage:n,setActiveImage:o}=e;const r=Array.isArray(n)?n.includes(t):t===n;return(0,a.createElement)(_e.Item,{isActive:r,onClick:()=>o(t)},(0,a.createElement)("img",{src:t,alt:""}),r&&(0,a.createElement)("div",{className:"kubio-style-preset-list__check"},(0,a.createElement)(k.Icon,{icon:O})))},Tn=()=>{const{clearSelectedBlock:e}=(0,w.useDispatch)("core/block-editor"),{openSidebar:t}=(0,w.useDispatch)(h.STORE_KEY)||{};return(0,a.createElement)(P.KubioPanelBody,{title:(0,a.createElement)(a.Fragment,null,(0,a.createElement)("span",null,(0,x.__)("Typography Presets","kubio")),(0,a.createElement)(k.Tooltip,{text:(0,x.__)("Advanced Settings","kubio")},(0,a.createElement)("div",{className:"kubio-style-preset-list__cog"},(0,a.createElement)(k.Icon,{icon:A,onClick:()=>{e().then((()=>{t("document/general-settings/typography")}))}})))),className:"kubio-style-preset-panel",initialOpen:!0},(0,a.createElement)(xn,null))},xn=()=>{const{mergedPresets:e,bodyTypographyHolders:t,onSelectPreset:n}=Pn();return(0,a.createElement)(_e,null,e.map(((e,o)=>(0,a.createElement)(Rn,{key:o,preset:e,index:o,bodyTypographyHolders:t,onSelect:n}))))},Pn=()=>{const{globalStyle:e}=(0,_.useGlobalDataStyle)(),t=e.getStyle("typography.holders",{},{styledComponent:"body"}),n=(0,a.useMemo)((()=>{const e={};return p().each(t,((t,n)=>{"input"!==n&&p().set(e,n,p().pick(t,["family","weight"]))})),e}),[t]),o=(0,a.useRef)(n),r=(0,a.useRef)(!1),i=(0,a.useMemo)((()=>{const e=o.current,t=!be.find((t=>{let n=!0;return p().each(t,((t,o)=>{t.family!==p().get(e,[o,"family"])&&(n=!1)})),n}));return t?[{isCustom:!0,...e}].concat(be):be}),[]);return{mergedPresets:i,bodyTypographyHolders:t,onSelectPreset:t=>{r.current=!0,e.setStyle("typography.holders",p().cloneDeep(t),{styledComponent:"body"})}}},Rn=e=>{let{preset:t,index:n,bodyTypographyHolders:o,onSelect:r}=e;const i=t.h1.family,l={fontFamily:i},s=t.p.family,c={fontFamily:s},u=p().get(o,"h1.family"),d=p().get(o,"p.family"),m=(0,a.useRef)(),h=(0,a.useRef)(),g=(0,a.useCallback)((()=>{var e;null!==(e=m.current)&&void 0!==e&&e.rel&&(m.current.rel="stylesheet")}),[]),f=(0,a.useCallback)((()=>{var e;null!==(e=h.current)&&void 0!==e&&e.rel&&(h.current.rel="stylesheet")}),[]),b=u===i&&d===s;return(0,a.createElement)(_e.Item,{key:n,isActive:b,onClick:()=>{r(t)}},(0,a.createElement)("link",{href:`https://fonts.googleapis.com/css?family=${i}&display=swap`,rel:"preload",as:"style",ref:m,onLoad:g}),(0,a.createElement)("link",{href:`https://fonts.googleapis.com/css?family=${s}&display=swap`,rel:"preload",as:"style",ref:h,onLoad:f}),(0,a.createElement)("div",{className:"kubio-style-preset-list__typography"},t.isCustom&&(0,a.createElement)("div",{className:"kubio-style-preset-list__typography__custom"},(0,x.__)("Custom","kubio")),(0,a.createElement)("span",{className:"kubio-style-preset-list__typography__heading-container"},(0,a.createElement)("h2",{style:l},i),b&&(0,a.createElement)("div",{className:"kubio-style-preset-list__check"},(0,a.createElement)(k.Icon,{icon:O}))),(0,a.createElement)("p",{style:c},s)))},An=[{value:En.BG_IMAGE,Component:Sn(En.BG_IMAGE),nextButtonLabel:(0,x.__)("Continue","kubio")},{value:En.BG_SLIDESHOW,Component:Sn(En.BG_SLIDESHOW),nextButtonLabel:(0,x.__)("Continue","kubio")},{value:En.COLUMN_BG_IMG,Component:Sn(En.COLUMN_BG_IMG),nextButtonLabel:(0,x.__)("Continue","kubio")},{value:En.IMAGE_BLOCK,Component:Sn(En.IMAGE_BLOCK),nextButtonLabel:(0,x.__)("Continue","kubio")},{value:"colorScheme",Component:()=>{const{activePaletteWithData:e,restOfPalettes:t,onHandleClick:n,activePaletteValue:o}=(()=>{const{mergedPalettes:e,onHandleClick:t,activePaletteValue:n}=vn(),{wizardContextData:o,onWizardDataChange:r}=Dn(),[i]=(0,b.useAIData)(),l=i.siteContext.siteMood||"neutral",{activePaletteWithData:s,restOfPalettes:c}=(0,a.useMemo)((()=>{let{activePaletteWithData:t=null,restOfPalettes:i=[]}=o;if(t)return{activePaletteWithData:t,restOfPalettes:i};e.forEach((e=>{(0,ve.getColorPalettesAreEqual)(e.colors,n)?t={...e,mood:l,label:(0,x.__)("Preset 1","kubio")}:i.push(e)})),i=i.filter((e=>e.mood===l)).map(((e,t)=>({...e,label:(0,x.sprintf)((0,x.__)("Preset %s","kubio"),t+2)})));const a={activePaletteWithData:t,restOfPalettes:i};return r(a),a}),[n,e,l,r,o]);return{activePaletteWithData:s,restOfPalettes:c,onHandleClick:t,activePaletteValue:n}})();return(0,a.createElement)(kn,null,(0,a.createElement)("h2",null,(0,x.__)("Color Scheme","kubio")),(0,a.createElement)("p",null,(0,x.__)("Are you happy with the color scheme selected by Kubio AI?","kubio")),(0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__preset-list__first-item"},(0,a.createElement)(_e,{scrollIntoView:!1},(0,a.createElement)(yn,{palette:e,index:0,onHandleClick:n,activePaletteValue:o}))),(0,a.createElement)("p",{className:"kubio-editor-ai-post-generate-interface__wizard__list__after-first"},(0,x.__)("Below are a few alternatives. You can also change this later.","kubio")),(0,a.createElement)(_e,{scrollIntoView:!1},t.map(((e,t)=>(0,a.createElement)(yn,{key:t,palette:e,index:t+1,onHandleClick:n,activePaletteValue:o})))))},nextButtonLabel:(0,x.__)("Continue","kubio")},{value:"typography",Component:()=>{const{activePresetWithData:e,restOfPresets:t,onSelectPreset:n,bodyTypographyHolders:o}=(()=>{const{mergedPresets:e,bodyTypographyHolders:t,onSelectPreset:n}=Pn(),{wizardContextData:o,onWizardDataChange:r}=Dn(),{activePresetWithData:i,restOfPresets:l}=(0,a.useMemo)((()=>{let{activePresetWithData:n=null,restOfPresets:i=[]}=o;if(n)return{activePresetWithData:n,restOfPresets:i};const a=p().get(t,"h1.family"),l=p().get(t,"p.family");e.forEach((e=>{const t=e.h1.family,o=e.p.family;a===t&&l===o?n=e:i.push(e)}));const s={activePresetWithData:n,restOfPresets:i};return r(s),s}),[]);return{activePresetWithData:i,restOfPresets:l,onSelectPreset:n,bodyTypographyHolders:t}})();return(0,a.createElement)(kn,null,(0,a.createElement)("h2",null,(0,x.__)("Typography","kubio")),(0,a.createElement)("p",null,(0,x.__)("Are you happy with the family fonts selected by Kubio AI?","kubio")),(0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__preset-list__first-item"},(0,a.createElement)(_e,{scrollIntoView:!1},(0,a.createElement)(Rn,{preset:e,index:0,bodyTypographyHolders:o,onSelect:n}))),(0,a.createElement)("p",{className:"kubio-editor-ai-post-generate-interface__wizard__list__after-first"},(0,x.__)("Below are a few alternatives. You can also change this later.","kubio")),(0,a.createElement)(_e,{scrollIntoView:!1},t.map(((e,t)=>(0,a.createElement)(Rn,{key:t,preset:e,index:t+1,bodyTypographyHolders:o,onSelect:n})))))},nextButtonLabel:(0,x.__)("Finish","kubio")}],On=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M20 11.2H6.8l3.7-3.7-1-1L3.9 12l5.6 5.5 1-1-3.7-3.7H20z"})),Nn=(0,a.createContext)({}),Mn=e=>{let{onFinish:t,overlayClicked:n,setOverlayClicked:o}=e;const[r,i]=(0,a.useState)(0),[l,s]=(0,a.useState)({}),[c,u]=(0,a.useState)(new Map),d=(0,f.useGetGlobalSessionProp)("aiFrontPageHeroImageVariantsData",null),{clearSelectedBlock:m}=(0,w.useDispatch)("core/block-editor"),{openSidebar:h,setIsNavigationPanelOpened:g}=(0,w.useDispatch)("kubio/edit-site")||{};(0,a.useEffect)((()=>{m().then((()=>{null==h||h("document")})),null==g||g(!1)}),[m,h,g]);const b=(0,a.useRef)(),_=(0,a.useCallback)((e=>{const t=(0,ve.mergeNoArrays)({},l,e);s(t)}),[l]),v=Object.values(En),y=(0,a.useMemo)((()=>An.filter((e=>!v.includes(e.value)||!p().isEmpty(p().get(d,e.value))))),[d]),E=y[r],{nextButtonLabel:S,Component:C}=E,{saveImageOnNext:I}=wn({type:E.value});(0,a.useEffect)((()=>{r===y.length-1&&document.body.classList.toggle("kubio-ai-will-show-front-page-wizard",!1)}),[r,y]);const T=(0,x.sprintf)((0,x.__)("Step %s of %s","kubio"),r+1,y.length),P=(0,a.useMemo)((()=>({wizardContextData:l,onWizardDataChange:_})),[l,_]);return(0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard"},(0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__header"},(0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__header__container"},(0,a.createElement)(st,{className:"kubio-ai-logo-animated kubio-ai-logo-colored",icon:ye.KubioAI}),(0,a.createElement)("span",null,(0,x.__)("Finishing Touches","kubio"))),(0,a.createElement)("p",{className:"kubio-editor-ai-post-generate-interface__wizard__header__current-step-header"},T)),(0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__content"},(0,a.createElement)(Nn.Provider,{value:P},(0,a.createElement)(C,null))),(0,a.createElement)("div",{ref:b,className:"kubio-editor-ai-post-generate-interface__wizard__footer"},(0,a.createElement)(k.Button,{icon:On,onClick:()=>{0!==r&&i(r-1)},disabled:0===r}),(0,a.createElement)(k.Button,{onClick:()=>{if(!p().isEmpty(d)&&v.includes(E.value)){let e=null==l?void 0:l.currentSelectedImage;Array.isArray(e)||(e=[e]),e.forEach(((e,t)=>{let n;E.value===En.BG_SLIDESHOW&&(n={updateToLocalSlideshowImage:!0,slideshowIndex:t}),I(c,e,n)}))}r===y.length-1?(i(0),null==t||t()):i(r+1)},className:"kubio-ai-button"},S),n&&(0,a.createElement)(k.Popover,{anchorRef:b,className:"kubio-options-popover kubio-editor-ai-post-generate-interface__wizard__overlay-popup",position:"top",offset:10,animate:!0,noArrow:!0,onClose:()=>{n&&o(!1)}},(0,a.createElement)(k.Button,{icon:$t,onClick:()=>o(!1)}),(0,a.createElement)("img",{src:(0,ve.staticAssetURL)("ai-assets/info-icon.svg")}),(0,a.createElement)("h4",null,(0,x.__)("You can edit the content of the website after you finish the style customization setup.","kubio")))))},Dn=()=>(0,a.useContext)(Nn),Bn=e=>{let{children:t}=e;const n=(0,f.useGetGlobalSessionProp)("showAiPostGenerateInterface",!1),o=(0,f.useSetGlobalSessionProp)("showAiPostGenerateInterface"),[r,i]=(0,a.useState)(!1),l=(0,a.useMemo)((()=>{var e,t,n,o;return null===(e=document.querySelector(".kubio-iframe"))||void 0===e||null===(t=e.contentDocument)||void 0===t||null===(n=t.body)||void 0===n||null===(o=n.querySelector)||void 0===o?void 0:o.call(n,".block-editor-writing-flow > .edit-site-block-editor__block-list")}),[n]);return(0,a.createElement)("div",{className:T()("kubio-editor-ai-post-generate-interface",{"kubio-editor-ai-post-generate-interface--show-wizard":n})},(0,a.createElement)(Ln,{showAiPostGenerateInterface:n,onHideSidebar:()=>{o(!1)},overlayClicked:r,setOverlayClicked:i}),(0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__content position-relative"},(0,a.createElement)(k.Button,{className:"toggle-ai-wizard-button",onClick:()=>{o(!n)}},"Toggle AI panel"),t,n&&l&&(0,a.createPortal)((0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__content__overlay",onClick:()=>i(!0)}),l)))},Ln=e=>{let{showAiPostGenerateInterface:t,onHideSidebar:n,...o}=e;return(0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__sidebar"},t&&(0,a.createElement)(Mn,C({onFinish:n},o)))},zn=window.wp.editor,Fn=window.wp.keyboardShortcuts;function Gn(){return(0,a.createElement)(a.Fragment,null)}const Hn=window.kubio.pro,Un=window.wp.blocks;function Wn(e){let{children:t}=e;const{clearSelectedBlock:n}=(0,w.useDispatch)("core/block-editor"),{openSidebar:o}=(0,w.useDispatch)(h.STORE_KEY),{blockType:r,isMultiSelection:i}=(0,w.useSelect)((e=>{const{getSelectedBlockClientId:t,getBlockName:n,hasMultiSelection:o}=e("core/block-editor"),r=t(),i=r&&n(r);return{blockType:r&&(0,Un.getBlockType)(i),isMultiSelection:o()}}));return(0,a.createElement)(tn,{areaIdentifier:"block-inspector",title:()=>(0,a.createElement)("span",{className:"kubio-header-active-section"},(0,a.createElement)(y.BlockIcon,{icon:null==r?void 0:r.icon}),(0,a.createElement)("span",{className:"kubio-header-active-section page-title"},i?(0,x.__)("Multiple selection","kubio"):null==r?void 0:r.title)),backCallback:()=>{o("document"),n()}},!i&&t,i&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"kubio-multiple-selection"},(0,a.createElement)("p",null,(0,x.__)("Sidebar controls are not availble on multiple blocks selection","kubio")))))}function jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Vn(e,t){if(e){if("string"==typeof e)return jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jn(e,t):void 0}}function Kn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=i.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return l}}(e,t)||Vn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $n(e){return $n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$n(e)}function qn(e){var t=function(e,t){if("object"!==$n(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==$n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===$n(t)?t:String(t)}function Yn(e,t,n){return(t=qn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&o.push.apply(o,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach((function(t){Yn(e,t,n[t])}))}return e}function Qn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,qn(o.key),o)}}function Jn(e,t,n){return t&&Zn(e.prototype,t),n&&Zn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function eo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function to(e,t){if(t&&("object"===$n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return eo(e)}function no(e){return no=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},no(e)}function oo(e,t){return oo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oo(e,t)}function ro(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oo(e,t)}var io=n(9196),ao=n(5697),lo=n.n(ao);const so=window.ReactDOM;var co=n(1143),uo=n.n(co);function mo(e){return function(e){if(Array.isArray(e))return jn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Vn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var po=function(){function e(){Qn(this,e),Yn(this,"refs",{})}return Jn(e,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){var n=this.getIndex(e,t);-1!==n&&this.refs[e].splice(n,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var e=this;return this.refs[this.active.collection].find((function(t){return t.node.sortableInfo.index==e.active.index}))}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[e].sort(ho)}}]),e}();function ho(e,t){return e.node.sortableInfo.index-t.node.sortableInfo.index}function go(e,t){return Object.keys(e).reduce((function(n,o){return-1===t.indexOf(o)&&(n[o]=e[o]),n}),{})}var fo={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},bo=function(){if("undefined"==typeof window||"undefined"==typeof document)return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];return"ms"===t?"ms":t&&t.length?t[0].toUpperCase()+t.substr(1):""}();function _o(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}function vo(e,t){e.style["".concat(bo,"Transform")]=null==t?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function yo(e,t){e.style["".concat(bo,"TransitionDuration")]=null==t?"":"".concat(t,"ms")}function ko(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function Eo(e,t,n){return Math.max(e,Math.min(n,t))}function So(e){return"px"===e.substr(-2)?parseFloat(e):0}function wo(e,t){var n=t.displayName||t.name;return n?"".concat(e,"(").concat(n,")"):e}function Co(e,t){var n=e.getBoundingClientRect();return{top:n.top+t.top,left:n.left+t.left}}function Io(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function To(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{left:0,top:0};if(e){var o={left:n.left+e.offsetLeft,top:n.top+e.offsetTop};return e.parentNode===t?o:To(e.parentNode,t,o)}}function xo(e){var t=e.lockOffset,n=e.width,o=e.height,r=t,i=t,a="px";if("string"==typeof t){var l=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);uo()(null!==l,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t),r=parseFloat(t),i=parseFloat(t),a=l[1]}return uo()(isFinite(r)&&isFinite(i),"lockOffset value should be a finite. Given %s",t),"%"===a&&(r=r*n/100,i=i*o/100),{x:r,y:i}}function Po(e){return e instanceof HTMLElement?function(e){var t=window.getComputedStyle(e),n=/(auto|scroll)/;return["overflow","overflowX","overflowY"].find((function(e){return n.test(t[e])}))}(e)?e:Po(e.parentNode):null}var Ro={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function Ao(e){return null!=e.sortableHandle}var Oo=function(){function e(t,n){Qn(this,e),this.container=t,this.onScrollCallback=n}return Jn(e,[{key:"clear",value:function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(e){var t=this,n=e.translate,o=e.minTranslate,r=e.maxTranslate,i=e.width,a=e.height,l={x:0,y:0},s={x:1,y:1},c=this.container,u=c.scrollTop,d=c.scrollLeft,m=c.scrollHeight,p=c.scrollWidth,h=0===u,g=m-u-c.clientHeight==0,f=0===d,b=p-d-c.clientWidth==0;n.y>=r.y-a/2&&!g?(l.y=1,s.y=10*Math.abs((r.y-a/2-n.y)/a)):n.x>=r.x-i/2&&!b?(l.x=1,s.x=10*Math.abs((r.x-i/2-n.x)/i)):n.y<=o.y+a/2&&!h?(l.y=-1,s.y=10*Math.abs((n.y-a/2-o.y)/a)):n.x<=o.x+i/2&&!f&&(l.x=-1,s.x=10*Math.abs((n.x-i/2-o.x)/i)),this.interval&&(this.clear(),this.isAutoScrolling=!1),0===l.x&&0===l.y||(this.interval=setInterval((function(){t.isAutoScrolling=!0;var e={left:s.x*l.x,top:s.y*l.y};t.container.scrollTop+=e.top,t.container.scrollLeft+=e.left,t.onScrollCallback(e)}),5))}}]),e}(),No={axis:lo().oneOf(["x","y","xy"]),contentWindow:lo().any,disableAutoscroll:lo().bool,distance:lo().number,getContainer:lo().func,getHelperDimensions:lo().func,helperClass:lo().string,helperContainer:lo().oneOfType([lo().func,"undefined"==typeof HTMLElement?lo().any:lo().instanceOf(HTMLElement)]),hideSortableGhost:lo().bool,keyboardSortingTransitionDuration:lo().number,lockAxis:lo().string,lockOffset:lo().oneOfType([lo().number,lo().string,lo().arrayOf(lo().oneOfType([lo().number,lo().string]))]),lockToContainerEdges:lo().bool,onSortEnd:lo().func,onSortMove:lo().func,onSortOver:lo().func,onSortStart:lo().func,pressDelay:lo().number,pressThreshold:lo().number,keyCodes:lo().shape({lift:lo().arrayOf(lo().number),drop:lo().arrayOf(lo().number),cancel:lo().arrayOf(lo().number),up:lo().arrayOf(lo().number),down:lo().arrayOf(lo().number)}),shouldCancelStart:lo().func,transitionDuration:lo().number,updateBeforeSortStart:lo().func,useDragHandle:lo().bool,useWindowAsScrollContainer:lo().bool},Mo={lift:[32],drop:[32],cancel:[27],up:[38,37],down:[40,39]},Do={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:function(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}},hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:Mo,shouldCancelStart:function(e){return-1!==[Ro.Input,Ro.Textarea,Ro.Select,Ro.Option,Ro.Button].indexOf(e.target.tagName)||!!ko(e.target,(function(e){return"true"===e.contentEditable}))},transitionDuration:300,useWindowAsScrollContainer:!1},Bo=Object.keys(No),Lo={index:lo().number.isRequired,collection:lo().oneOfType([lo().number,lo().string]),disabled:lo().bool},zo=Object.keys(Lo),Fo=n(989),Go=n.n(Fo);const Ho=(0,a.createContext)({clientId:null,setContainer:m.noop}),Uo=()=>(0,a.useContext)(Ho),Wo=(0,Kt.getNamesOfBlocks)(),jo=[Wo.SECTION,Wo.HERO,Wo.NAVIGATION].map((e=>`[data-type="${e}"]`)).join(","),Vo=e=>{let{children:t}=e;const[n,o]=(0,a.useState)(null),r=(0,f.useBlocksOwnerDocument)(),i=(0,E.useThrottle)((0,a.useCallback)((e=>{var t,n;const r=null==e||null===(t=e.target)||void 0===t||null===(n=t.closest)||void 0===n?void 0:n.call(t,jo),i=(null==r?void 0:r.getAttribute("data-block"))||null;o(i)}),[]),300);(0,a.useEffect)((()=>{if(r)return r.addEventListener("mousemove",i),()=>r.removeEventListener("mousemove",i)}),[r]);const l=(0,a.useMemo)((()=>({clientId:n})),[n]);return(0,a.createElement)(Ho.Provider,{value:l},t)},Ko=(0,a.createElement)(R.SVG,{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M8 7h2V5H8v2zm0 6h2v-2H8v2zm0 6h2v-2H8v2zm6-14v2h2V5h-2zm0 8h2v-2h-2v2zm0 6h2v-2h-2v2z"})),$o=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(){return Qn(this,n),to(this,no(n).apply(this,arguments))}return ro(n,t),Jn(n,[{key:"componentDidMount",value:function(){(0,so.findDOMNode)(this).sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return uo()(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var t=o.withRef?"wrappedInstance":null;return(0,io.createElement)(e,C({ref:t},this.props))}}]),n}(io.Component),Yn(t,"displayName",wo("sortableHandle",e)),n}((()=>(0,a.createElement)(k.Tooltip,{text:(0,x.__)("Move","kubio")},(0,a.createElement)("div",{className:"d-flex"},(0,a.createElement)(st,{icon:Ko,className:"draggable-item"}))))),qo=window.kubio.menuData,Yo=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M5 5v1.5h14V5H5zm0 7.8h14v-1.5H5v1.5zM5 19h14v-1.5H5V19z"})),Xo=(0,a.createContext)(null),Qo=e=>{let{children:t}=e;const n=(0,qo.usePrimaryMenuBlockEditor)();return(0,a.createElement)(Xo.Provider,{value:n},t)},Zo=(0,a.createElement)(R.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,a.createElement)(R.Path,{d:"M12 4c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 14.5c-3.6 0-6.5-2.9-6.5-6.5S8.4 5.5 12 5.5s6.5 2.9 6.5 6.5-2.9 6.5-6.5 6.5zM9 16l4.5-3L15 8.4l-4.5 3L9 16z"})),Jo=e=>{let{containerRef:t,afterMenuCreation:n,onClose:o}=e;const[r,i]=(0,a.useState)(""),[l,s]=(0,a.useState)(!1);return(0,a.createElement)(k.Popover,{className:"kubio-options-popover kubio-create-menu-popover",anchorRef:t,position:"middle right",onClose:o},(0,a.createElement)(k.Placeholder,{className:"wp-block-navigation-placeholder kubio-menu-placeholder",icon:Zo,label:(0,x.__)("Kubio Menu","kubio")},(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"kubio-create-menu-popover-description"},(0,a.createElement)("span",null,(0,x.__)("There is no header menu created. Please create a new one","kubio"))),(0,a.createElement)("div",{className:"wp-block-navigation-placeholder__actions"},(0,a.createElement)(k.Flex,null,(0,a.createElement)(k.FlexBlock,null,(0,a.createElement)(k.BaseControl,{className:"kubio-create-menu-popover-input-control"},(0,a.createElement)(k.BaseControl.VisualLabel,null,(0,x.__)("Menu name","kubio")),(0,a.createElement)(k.__experimentalInputControl,{value:r,onChange:i,placeholder:(0,x.__)("Please set a name","kubio")})),(0,a.createElement)(k.Button,{isSecondary:!0,className:"wp-block-navigation-placeholder__button",disabled:0===r.length,isBusy:l,onClick:async()=>{s(!0),await(0,qo.createPrimaryMenu)(r),s(!1),n()}},(0,x.__)("Create new Menu","kubio"))))))))},er=e=>{let{dataHelper:t,containerRef:n}=e;const[o,r]=(0,a.useState)(!1),[i,l]=(0,a.useState)(!1),{exists:s,items:c,setItems:u,hasResolved:d}=(0,a.useContext)(Xo),m=(0,w.useSelect)((e=>{var t,n;const{getPage:o,getEntity:r}=e(h.STORE_KEY),i=(null===(t=o())||void 0===t?void 0:t.link)||null,a=(null===(n=r())||void 0===n?void 0:n.path)||null;return(i||a||"").replace(/\/$/,"")}),[]);(0,a.useEffect)((()=>{i&&s&&d&&(u([{...(0,qo.generateItemInitialData)(),label:null==t?void 0:t.getAttribute("attrs.name"),url:`${m}/${f}`}],!0),l(!1))}),[s,i,u,d]);const p=(0,a.useCallback)((()=>{if(b.length){const e=b.map((e=>{let{id:t}=e;return t})),t=g.filter((t=>-1===e.indexOf(t.id)));u([...t],!0)}else{const e=Math.max.apply(null,g.filter((e=>{let{parent:t}=e;return 0===t})).map((e=>{let{order:t}=e;return t})).filter(Boolean))+1;u([...g,{...(0,qo.generateItemInitialData)(),label:null==t?void 0:t.getAttribute("attrs.name"),url:`${m}/${f}`,order:e}],!0)}}),[u,c,s,m]),g=Array.isArray(c)?c:[],f="#"+(null==t?void 0:t.getAttribute("anchor")),b=(0,a.useMemo)((()=>{if(!s)return[];const e=g.filter((e=>{let{url:t}=e;return t===`${m}/${f}`||t===`${m}${f}`}));return e.length?e:[]}),[s,c,m]),_=(0,a.useCallback)((()=>{s?p():r(!0)}),[s,p]),v=b.length>0;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.Tooltip,{text:v?(0,x.__)("Remove from menu","kubio"):(0,x.__)("Add to menu","kubio"),position:"top left"},(0,a.createElement)("div",{className:"d-flex"},(0,a.createElement)(k.Button,{isSmall:!0,onClick:()=>_(),icon:Yo,className:T()(["icon-menu",{active:v}])}))),o&&(0,a.createElement)(Jo,{containerRef:null==n?void 0:n.current,afterMenuCreation:()=>{l(!0),r(!1)},onClose:()=>r(!1)}))},tr=e=>{let{onRemove:t,onSelect:n,dataHelper:o}=e;const{selectBlock:r,toggleBlockHighlight:i}=(0,w.useDispatch)("core/block-editor"),l=o.getAttribute("anchor"),c=o.getAttribute("attrs.name"),[u,d]=(0,a.useState)(!1),[h,g]=(0,a.useState)(l),[b,_]=(0,a.useState)(c),v=(0,f.useBlocksOwnerDocument)();(0,a.useEffect)((()=>{h!==l&&g(l),b!==c&&_(c)}),[l,c]);const y=(0,a.useRef)(),E=(0,a.useRef)(),S=p().debounce((e=>{e=e||h;let t=Go()(e);t=(0,ve.getUniqueSlug)(t,v),t&&(t!==h&&g(t),t!==l&&o.setAttribute("anchor",t))}),100),{clientId:C}=Uo(),I=(0,a.useCallback)((()=>{u&&d(!1)}),[u,d]),T=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.noop;const n=null==e?void 0:e.clientId,o=(0,ve.getPreviewElementByModelId)(n,v);o&&(0,ve.scrollIntoView)(o,{behavior:"smooth",onScrollEnd:t}),i(n,!0)};return(0,s.useOnClickOutside)(y,I),(0,a.createElement)("div",{ref:E,className:"page-section-item"},(0,a.createElement)("div",{className:(e=>{const t=["kubio-section-list-item"];return e&&t.push("list-item-full-height"),C===o.clientId&&t.push("hovered"),t.join(" ")})(u)},(0,a.createElement)("div",{className:"align-items-center drag-icon"},(0,a.createElement)($o,null)),(0,a.createElement)("div",{className:"input-container",ref:y},(0,a.createElement)("div",{className:"input-drag-text"},(0,a.createElement)("input",{type:"text",value:b,className:"input-name",onChange:e=>{const t=e.target.value;_(t)},onFocus:e=>{T(o),u||d(!0)},onBlur:()=>{b!==c&&(o.setAttribute("attrs.name",b),S(b))}}),(0,a.createElement)("span",{className:"input-drag-text__size"},b)),u&&(0,a.createElement)("div",{className:"id-div"},"ID:#",(0,a.createElement)("input",{type:"text",value:h,className:"input-name input-id",onFocus:()=>{T(o)},onChange:e=>{g(e.target.value)},onBlur:()=>{h===l&&b===c||S()}}))),(0,a.createElement)("div",{onClick:()=>{r(null==o?void 0:o.clientId)},className:"page-section-item__select-area",role:"button",tabIndex:0}),(0,a.createElement)("div",{className:"align-items-center"},(0,a.createElement)(k.Button,{isSmall:!0,icon:ye.DeleteItemIcon,className:"icon-close",onClick:t,showTooltip:!0,tooltipPosition:"top left",label:(0,x.__)("Remove","kubio")}),(0,a.createElement)(er,{dataHelper:o,containerRef:E}),(0,a.createElement)(k.Button,{isSmall:!0,icon:A,className:"icon-settings",onClick:()=>T(o,n),showTooltip:!0,tooltipPosition:"top left",label:(0,x.__)("Settings","kubio")}))))},nr="kubio/edit-site",or=e=>{let{name:t="",area:n}=e;const o=(0,a.useRef)(),{setOpenInserter:r}=(0,w.useDispatch)(nr),i=(0,w.useSelect)((e=>{e(nr).getOpenedInserter()})),l=cr[n],s=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;const t=`pattern-inserter/${p().get(mr,e,mr[sr.CONTENT])}`;i!==t&&await r(!1,null),r(t,n)},c=null==l?void 0:l.toLowerCase();return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{ref:o,className:["kubio-full-section","kubio-full-section--placeholder"].join(" ")},(0,a.createElement)("div",{className:"kubio-subsidebar-container"},(0,a.createElement)("div",{className:T()("components-panel__header","interface-complementary-area-header","kubio-subsidebar-title","kubio-subsidebar-title-header"),tabIndex:-1},(0,a.createElement)("div",{className:"kubio-sidebar-title-text"},l),(0,a.createElement)("div",{className:"dummy-column"}),(0,a.createElement)("div",{className:"section-list-header-buttons-holder"},(0,a.createElement)(k.Button,{isSmall:!0,icon:qt,className:"section-icon-container",onClick:function(){s(sr.CONTENT)},showTooltip:!0,tooltipPosition:"top left",label:(0,x.__)("Add block/section","kubio")})))),(0,a.createElement)(P.ControlNotice,{content:(0,x.sprintf)(// translators:  %1$s , %1$s - template names
(0,x.__)("The current page uses the theme %1$s. Use the button below to replace it with a Kubio %2$s","kubio"),c,c)}),(0,a.createElement)(k.Button,{isPrimary:!0,onClick:()=>s(),className:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return n===sr.HEADER?["btn-primary","header-button"].concat(t).join(" "):["btn-primary"].concat(t).join(" ")}(t,["kubio-button-add-blocks"])},(0,a.createElement)("span",{className:T()("kubio-header-section-main-button",{"header-button":t===sr.HEADER})},(()=>{switch(n){case sr.HEADER:return(0,x.__)("Choose header design","kubio");case sr.FOOTER:return(0,x.__)("Choose footer design","kubio");case sr.SIDEBAR:return(0,x.__)("Add section","kubio");default:return(0,x.__)("Add predesigned section","kubio")}})()))))};function rr(e){const{templateParts:t,selectBlock:n,removeBlocks:o,reorderBlocks:r}=e,{blockTypes:i,getBlocks:l,isPage:s}=(0,w.useSelect)((e=>{const{getPage:t}=e(h.STORE_KEY),n=(0,w.select)("core").getEditedEntityRecord("root","site");let o;t&&(o=t());const r=p().get(o,"context",{}),{postType:i,postId:a}=r,l="page"===(null==n?void 0:n.show_on_front)&&parseInt(null==n?void 0:n.page_for_posts)===parseInt(a);return{isPage:"page"===i&&!l,blockTypes:e("core/blocks").getBlockTypes(),getBlocks:e("core/block-editor").getBlocks}})),[c]=(0,f.useGlobalSessionProp)("currentPageHasBlocksContent",!0,[]),u=(0,a.useMemo)((()=>{const e={selectBlock:n,removeBlocks:o,reorderBlocks:r,innerBlocks:l(),templatePart:{},blockTypes:i,label:(0,x.__)("Content","kubio")};return c&&(0,a.createElement)(br,e)}),[t,c]);return(0,a.createElement)(a.Fragment,null,s&&(0,a.createElement)(or,{area:"header"}),u,s&&(0,a.createElement)(or,{area:"footer"}))}function ir(e){const{templateParts:t,selectBlock:n,removeBlocks:o,reorderBlocks:r}=e,{blockTypes:i}=(0,w.useSelect)((e=>({blockTypes:e("core/blocks").getBlockTypes(),getBlocks:e("core/block-editor").getBlocks})));return(0,a.createElement)(a.Fragment,null,t.map(((e,t)=>{const{name:l,clientId:s}=e,c={selectBlock:n,removeBlocks:o,reorderBlocks:r,name:l,templatePart:e,templatePartClientId:s,blockTypes:i};return(0,a.createElement)(br,C({key:"template-sections-"+t},c))})))}function ar(e){let{templateParts:t,...n}=e;const o=(0,w.useSelect)((e=>{const{currentPageHasFSETemplate:t}=e(h.STORE_KEY);return t()}),[]),r=(0,w.useSelect)((e=>e("core").getEntityRecords("postType","wp_template_part",{per_page:-1})||[]),[]),i=(0,s.useDeepMemo)((()=>t.map((e=>{const t=r.find((t=>{var n;return(null==t?void 0:t.slug)===(null==e||null===(n=e.attributes)||void 0===n?void 0:n.slug)})),n=null==t?void 0:t.area;return{...e,area:n}}))),[t,r]),l=(0,s.useDeepMemo)((()=>p().orderBy(i,(e=>p().findIndex(ur,(t=>t===p().get(e,"area",sr.CONTENT)))))),[i]);let c=null;return c=o?ir:rr,(0,a.createElement)(c,C({},n,{templateParts:l}))}const lr=e=>{let{onRemove:t,onSelect:n,item:o,dataHelper:r}=e;const{blockTypes:i}=(0,w.useSelect)((e=>({blockTypes:e("core/blocks").getBlockTypes()}))),{selectBlock:l}=(0,w.useDispatch)("core/block-editor"),{clientId:s}=Uo(),c=T()("kubio-section-list-item",{hovered:s===o.clientId}),u=(0,a.useRef)();return(0,a.useEffect)((()=>{s===o.clientId&&u.current.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}),[s]),(0,a.createElement)("div",{ref:u,className:"page-section-item"},(0,a.createElement)("div",{className:c},(0,a.createElement)("div",{className:"align-items-center"},(0,a.createElement)($o,null)),(0,a.createElement)("div",{className:"input-container"},(0,a.createElement)("span",{className:"input-name"},(0,a.createElement)("span",{className:"input-name-text"},(e=>{const t=(0,m.find)(i,{name:e});return(null==t?void 0:t.title)||e})(o.name)))),(0,a.createElement)("div",{onClick:()=>{l(null==r?void 0:r.clientId)},className:"page-section-item__select-area",role:"button",tabIndex:"0"}),(0,a.createElement)("div",{className:"align-items-center"},(0,a.createElement)(k.Button,{isSmall:!0,icon:ye.DeleteItemIcon,className:"icon-close",onClick:t,showTooltip:!0,tooltipPosition:"top left",label:(0,x.__)("Remove","kubio")}),(0,a.createElement)(k.Button,{isSmall:!0,icon:A,className:"icon-settings",onClick:n,showTooltip:!0,tooltipPosition:"top left",label:(0,x.__)("Settings","kubio")}))))},sr={HEADER:"header",FOOTER:"footer",SIDEBAR:"sidebar",CONTENT:"content"},cr={[sr.HEADER]:(0,x.__)("Header","kubio"),[sr.FOOTER]:(0,x.__)("Footer","kubio"),[sr.SIDEBAR]:(0,x.__)("Sidebar","kubio"),[sr.CONTENT]:(0,x.__)("Content","kubio")},ur=[sr.HEADER,sr.CONTENT,sr.SIDEBAR,sr.FOOTER],dr=["kubio/header","kubio/footer","core/post-content","core/template-part"],mr={[sr.HEADER]:"header",[sr.FOOTER]:"footer",[sr.SIDEBAR]:"sidebar",[sr.CONTENT]:"post-content"},pr=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(){return Qn(this,n),to(this,no(n).apply(this,arguments))}return ro(n,t),Jn(n,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(e){this.node&&(e.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),e.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),e.collection!==this.props.collection&&(this.unregister(e.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var e=this.props,t=e.collection,n=e.disabled,o=e.index,r=(0,so.findDOMNode)(this);r.sortableInfo={collection:t,disabled:n,index:o,manager:this.context.manager},this.node=r,this.ref={node:r},this.context.manager.add(t,this.ref)}},{key:"unregister",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.collection;this.context.manager.remove(e,this.ref)}},{key:"getWrappedInstance",value:function(){return uo()(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var t=o.withRef?"wrappedInstance":null;return(0,io.createElement)(e,C({ref:t},go(this.props,zo)))}}]),n}(io.Component),Yn(t,"displayName",wo("sortableElement",e)),Yn(t,"contextTypes",{manager:lo().object.isRequired}),Yn(t,"propTypes",Lo),Yn(t,"defaultProps",{collection:0}),n}((e=>{let{item:t,onRemove:n=m.noop,onSelect:o=m.noop,dataHelper:r}=e;return(0,ve.isGutentagPrefixed)(t.name)?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(tr,{onRemove:()=>n(t),onSelect:()=>o(t),item:t,dataHelper:r})):(0,a.createElement)(lr,{onRemove:()=>n(t),onSelect:()=>o(t),item:t,dataHelper:r})})),hr=e=>{var t;const n=(0,a.useMemo)((()=>gr()),[]);return(0,a.createElement)(n,C({clientId:null===(t=e.item)||void 0===t?void 0:t.clientId},e))},gr=()=>(0,s.WithKubioDataHelperProp)(pr),fr=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(e){var t;return Qn(this,n),Yn(eo(eo(t=to(this,no(n).call(this,e)))),"state",{}),Yn(eo(eo(t)),"handleStart",(function(e){var n=t.props,o=n.distance,r=n.shouldCancelStart;if(2!==e.button&&!r(e)){t.touched=!0,t.position=Io(e);var i=ko(e.target,(function(e){return null!=e.sortableInfo}));if(i&&i.sortableInfo&&t.nodeIsChild(i)&&!t.state.sorting){var a=t.props.useDragHandle,l=i.sortableInfo,s=l.index,c=l.collection;if(l.disabled)return;if(a&&!ko(e.target,Ao))return;t.manager.active={collection:c,index:s},function(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}(e)||e.target.tagName!==Ro.Anchor||e.preventDefault(),o||(0===t.props.pressDelay?t.handlePress(e):t.pressTimer=setTimeout((function(){return t.handlePress(e)}),t.props.pressDelay))}}})),Yn(eo(eo(t)),"nodeIsChild",(function(e){return e.sortableInfo.manager===t.manager})),Yn(eo(eo(t)),"handleMove",(function(e){var n=t.props,o=n.distance,r=n.pressThreshold;if(!t.state.sorting&&t.touched&&!t._awaitingUpdateBeforeSortStart){var i=Io(e),a={x:t.position.x-i.x,y:t.position.y-i.y},l=Math.abs(a.x)+Math.abs(a.y);t.delta=a,o||r&&!(l>=r)?o&&l>=o&&t.manager.isActive()&&t.handlePress(e):(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0))}})),Yn(eo(eo(t)),"handleEnd",(function(){t.touched=!1,t.cancel()})),Yn(eo(eo(t)),"cancel",(function(){var e=t.props.distance;t.state.sorting||(e||clearTimeout(t.pressTimer),t.manager.active=null)})),Yn(eo(eo(t)),"handlePress",(function(e){try{var n=t.manager.getActive(),o=function(){if(n){var o=function(){var n,o,r,c,g,f,b=m.sortableInfo.index,_=(n=m,{bottom:So((o=window.getComputedStyle(n)).marginBottom),left:So(o.marginLeft),right:So(o.marginRight),top:So(o.marginTop)}),v=function(e){var t=window.getComputedStyle(e);return"grid"===t.display?{x:So(t.gridColumnGap),y:So(t.gridRowGap)}:{x:0,y:0}}(t.container),y=t.scrollContainer.getBoundingClientRect(),k=a({index:b,node:m,collection:p});if(t.node=m,t.margin=_,t.gridGap=v,t.width=k.width,t.height=k.height,t.marginOffset={x:t.margin.left+t.margin.right+t.gridGap.x,y:Math.max(t.margin.top,t.margin.bottom,t.gridGap.y)},t.boundingClientRect=m.getBoundingClientRect(),t.containerBoundingRect=y,t.index=b,t.newIndex=b,t.axis={x:i.indexOf("x")>=0,y:i.indexOf("y")>=0},t.offsetEdge=To(m,t.container),t.initialOffset=Io(h?Xn({},e,{pageX:t.boundingClientRect.left,pageY:t.boundingClientRect.top}):e),t.initialScroll={left:t.scrollContainer.scrollLeft,top:t.scrollContainer.scrollTop},t.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},t.helper=t.helperContainer.appendChild((c="input, textarea, select, canvas, [contenteditable]",g=(r=m).querySelectorAll(c),mo((f=r.cloneNode(!0)).querySelectorAll(c)).forEach((function(e,t){"file"!==e.type&&(e.value=g[t].value),"radio"===e.type&&e.name&&(e.name="__sortableClone__".concat(e.name)),e.tagName===Ro.Canvas&&g[t].width>0&&g[t].height>0&&e.getContext("2d").drawImage(g[t],0,0)})),f)),_o(t.helper,{boxSizing:"border-box",height:"".concat(t.height,"px"),left:"".concat(t.boundingClientRect.left-_.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(t.boundingClientRect.top-_.top,"px"),width:"".concat(t.width,"px")}),h&&t.helper.focus(),s&&(t.sortableGhost=m,_o(m,{opacity:0,visibility:"hidden"})),t.minTranslate={},t.maxTranslate={},h){var E=d?{top:0,left:0,width:t.contentWindow.innerWidth,height:t.contentWindow.innerHeight}:t.containerBoundingRect,S=E.top,w=E.left,C=E.width,I=S+E.height,T=w+C;t.axis.x&&(t.minTranslate.x=w-t.boundingClientRect.left,t.maxTranslate.x=T-(t.boundingClientRect.left+t.width)),t.axis.y&&(t.minTranslate.y=S-t.boundingClientRect.top,t.maxTranslate.y=I-(t.boundingClientRect.top+t.height))}else t.axis.x&&(t.minTranslate.x=(d?0:y.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(d?t.contentWindow.innerWidth:y.left+y.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(d?0:y.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(d?t.contentWindow.innerHeight:y.top+y.height)-t.boundingClientRect.top-t.height/2);l&&l.split(" ").forEach((function(e){return t.helper.classList.add(e)})),t.listenerNode=e.touches?m:t.contentWindow,h?(t.listenerNode.addEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.addEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.addEventListener("keydown",t.handleKeyDown)):(fo.move.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortMove,!1)})),fo.end.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortEnd,!1)}))),t.setState({sorting:!0,sortingIndex:b}),u&&u({node:m,index:b,collection:p,isKeySorting:h,nodes:t.manager.getOrderedRefs(),helper:t.helper},e),h&&t.keyMove(0)},r=t.props,i=r.axis,a=r.getHelperDimensions,l=r.helperClass,s=r.hideSortableGhost,c=r.updateBeforeSortStart,u=r.onSortStart,d=r.useWindowAsScrollContainer,m=n.node,p=n.collection,h=t.manager.isKeySorting,g=function(){if("function"==typeof c){t._awaitingUpdateBeforeSortStart=!0;var n=function(t,n){try{var o=(r=m.sortableInfo.index,Promise.resolve(c({collection:p,index:r,node:m,isKeySorting:h},e)).then((function(){})))}catch(e){return n(!0,e)}var r;return o&&o.then?o.then(n.bind(null,!1),n.bind(null,!0)):n(!1,value)}(0,(function(e,n){if(t._awaitingUpdateBeforeSortStart=!1,e)throw n;return n}));if(n&&n.then)return n.then((function(){}))}}();return g&&g.then?g.then(o):o()}}();return Promise.resolve(o&&o.then?o.then((function(){})):void 0)}catch(e){return Promise.reject(e)}})),Yn(eo(eo(t)),"handleSortMove",(function(e){var n=t.props.onSortMove;"function"==typeof e.preventDefault&&e.preventDefault(),t.updateHelperPosition(e),t.animateNodes(),t.autoscroll(),n&&n(e)})),Yn(eo(eo(t)),"handleSortEnd",(function(e){var n=t.props,o=n.hideSortableGhost,r=n.onSortEnd,i=t.manager,a=i.active.collection,l=i.isKeySorting,s=t.manager.getOrderedRefs();t.listenerNode&&(l?(t.listenerNode.removeEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("keydown",t.handleKeyDown)):(fo.move.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortMove)})),fo.end.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortEnd)})))),t.helper.parentNode.removeChild(t.helper),o&&t.sortableGhost&&_o(t.sortableGhost,{opacity:"",visibility:""});for(var c=0,u=s.length;c<u;c++){var d=s[c],m=d.node;d.edgeOffset=null,d.boundingClientRect=null,vo(m,null),yo(m,null),d.translate=null}t.autoScroller.clear(),t.manager.active=null,t.manager.isKeySorting=!1,t.setState({sorting:!1,sortingIndex:null}),"function"==typeof r&&r({collection:a,newIndex:t.newIndex,oldIndex:t.index,isKeySorting:l,nodes:s},e),t.touched=!1})),Yn(eo(eo(t)),"autoscroll",(function(){var e=t.props.disableAutoscroll,n=t.manager.isKeySorting;if(e)t.autoScroller.clear();else{if(n){var o=Xn({},t.translate),r=0,i=0;return t.axis.x&&(o.x=Math.min(t.maxTranslate.x,Math.max(t.minTranslate.x,t.translate.x)),r=t.translate.x-o.x),t.axis.y&&(o.y=Math.min(t.maxTranslate.y,Math.max(t.minTranslate.y,t.translate.y)),i=t.translate.y-o.y),t.translate=o,vo(t.helper,t.translate),t.scrollContainer.scrollLeft+=r,void(t.scrollContainer.scrollTop+=i)}t.autoScroller.update({height:t.height,maxTranslate:t.maxTranslate,minTranslate:t.minTranslate,translate:t.translate,width:t.width})}})),Yn(eo(eo(t)),"onAutoScroll",(function(e){t.translate.x+=e.left,t.translate.y+=e.top,t.animateNodes()})),Yn(eo(eo(t)),"handleKeyDown",(function(e){var n=e.keyCode,o=t.props,r=o.shouldCancelStart,i=o.keyCodes,a=Xn({},Mo,void 0===i?{}:i);t.manager.active&&!t.manager.isKeySorting||!(t.manager.active||a.lift.includes(n)&&!r(e)&&t.isValidSortingTarget(e))||(e.stopPropagation(),e.preventDefault(),a.lift.includes(n)&&!t.manager.active?t.keyLift(e):a.drop.includes(n)&&t.manager.active?t.keyDrop(e):a.cancel.includes(n)?(t.newIndex=t.manager.active.index,t.keyDrop(e)):a.up.includes(n)?t.keyMove(-1):a.down.includes(n)&&t.keyMove(1))})),Yn(eo(eo(t)),"keyLift",(function(e){var n=e.target,o=ko(n,(function(e){return null!=e.sortableInfo})).sortableInfo,r=o.index,i=o.collection;t.initialFocusedNode=n,t.manager.isKeySorting=!0,t.manager.active={index:r,collection:i},t.handlePress(e)})),Yn(eo(eo(t)),"keyMove",(function(e){var n=t.manager.getOrderedRefs(),o=n[n.length-1].node.sortableInfo.index,r=t.newIndex+e,i=t.newIndex;if(!(r<0||r>o)){t.prevIndex=i,t.newIndex=r;var a=function(e,t,n){return e<n&&e>t?e-1:e>n&&e<t?e+1:e}(t.newIndex,t.prevIndex,t.index),l=n.find((function(e){return e.node.sortableInfo.index===a})),s=l.node,c=t.containerScrollDelta,u=l.boundingClientRect||Co(s,c),d=l.translate||{x:0,y:0},m=u.top+d.y-c.top,p=u.left+d.x-c.left,h=i<r,g=h&&t.axis.x?s.offsetWidth-t.width:0,f=h&&t.axis.y?s.offsetHeight-t.height:0;t.handleSortMove({pageX:p+g,pageY:m+f,ignoreTransition:0===e})}})),Yn(eo(eo(t)),"keyDrop",(function(e){t.handleSortEnd(e),t.initialFocusedNode&&t.initialFocusedNode.focus()})),Yn(eo(eo(t)),"handleKeyEnd",(function(e){t.manager.active&&t.keyDrop(e)})),Yn(eo(eo(t)),"isValidSortingTarget",(function(e){var n=t.props.useDragHandle,o=e.target,r=ko(o,(function(e){return null!=e.sortableInfo}));return r&&r.sortableInfo&&!r.sortableInfo.disabled&&(n?Ao(o):o.sortableInfo)})),function(e){uo()(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}(e),t.manager=new po,t.events={end:t.handleEnd,move:t.handleMove,start:t.handleStart},t}return ro(n,t),Jn(n,[{key:"getChildContext",value:function(){return{manager:this.manager}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.useWindowAsScrollContainer,n=this.getContainer();Promise.resolve(n).then((function(n){e.container=n,e.document=e.container.ownerDocument||document;var o=e.props.contentWindow||e.document.defaultView||window;e.contentWindow="function"==typeof o?o():o,e.scrollContainer=t?e.document.scrollingElement||e.document.documentElement:Po(e.container)||e.container,e.autoScroller=new Oo(e.scrollContainer,e.onAutoScroll),Object.keys(e.events).forEach((function(t){return fo[t].forEach((function(n){return e.container.addEventListener(n,e.events[t],!1)}))})),e.container.addEventListener("keydown",e.handleKeyDown)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach((function(t){return fo[t].forEach((function(n){return e.container.removeEventListener(n,e.events[t])}))})),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(e){var t=this.props,n=t.lockAxis,o=t.lockOffset,r=t.lockToContainerEdges,i=t.transitionDuration,a=t.keyboardSortingTransitionDuration,l=void 0===a?i:a,s=this.manager.isKeySorting,c=e.ignoreTransition,u=Io(e),d={x:u.x-this.initialOffset.x,y:u.y-this.initialOffset.y};if(d.y-=window.pageYOffset-this.initialWindowScroll.top,d.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=d,r){var m=function(e){var t=e.height,n=e.width,o=e.lockOffset,r=Array.isArray(o)?o:[o,o];uo()(2===r.length,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",o);var i=Kn(r,2),a=i[0],l=i[1];return[xo({height:t,lockOffset:a,width:n}),xo({height:t,lockOffset:l,width:n})]}({height:this.height,lockOffset:o,width:this.width}),p=Kn(m,2),h=p[0],g=p[1],f={x:this.width/2-h.x,y:this.height/2-h.y},b={x:this.width/2-g.x,y:this.height/2-g.y};d.x=Eo(this.minTranslate.x+f.x,this.maxTranslate.x-b.x,d.x),d.y=Eo(this.minTranslate.y+f.y,this.maxTranslate.y-b.y,d.y)}"x"===n?d.y=0:"y"===n&&(d.x=0),s&&l&&!c&&yo(this.helper,l),vo(this.helper,d)}},{key:"animateNodes",value:function(){var e=this.props,t=e.transitionDuration,n=e.hideSortableGhost,o=e.onSortOver,r=this.containerScrollDelta,i=this.windowScrollDelta,a=this.manager.getOrderedRefs(),l=this.offsetEdge.left+this.translate.x+r.left,s=this.offsetEdge.top+this.translate.y+r.top,c=this.manager.isKeySorting,u=this.newIndex;this.newIndex=null;for(var d=0,m=a.length;d<m;d++){var p=a[d].node,h=p.sortableInfo.index,g=p.offsetWidth,f=p.offsetHeight,b={height:this.height>f?f/2:this.height/2,width:this.width>g?g/2:this.width/2},_=c&&h>this.index&&h<=u,v=c&&h<this.index&&h>=u,y={x:0,y:0},k=a[d].edgeOffset;k||(k=To(p,this.container),a[d].edgeOffset=k,c&&(a[d].boundingClientRect=Co(p,r)));var E=d<a.length-1&&a[d+1],S=d>0&&a[d-1];E&&!E.edgeOffset&&(E.edgeOffset=To(E.node,this.container),c&&(E.boundingClientRect=Co(E.node,r))),h!==this.index?(t&&yo(p,t),this.axis.x?this.axis.y?v||h<this.index&&(l+i.left-b.width<=k.left&&s+i.top<=k.top+b.height||s+i.top+b.height<=k.top)?(y.x=this.width+this.marginOffset.x,k.left+y.x>this.containerBoundingRect.width-b.width&&E&&(y.x=E.edgeOffset.left-k.left,y.y=E.edgeOffset.top-k.top),null===this.newIndex&&(this.newIndex=h)):(_||h>this.index&&(l+i.left+b.width>=k.left&&s+i.top+b.height>=k.top||s+i.top+b.height>=k.top+f))&&(y.x=-(this.width+this.marginOffset.x),k.left+y.x<this.containerBoundingRect.left+b.width&&S&&(y.x=S.edgeOffset.left-k.left,y.y=S.edgeOffset.top-k.top),this.newIndex=h):_||h>this.index&&l+i.left+b.width>=k.left?(y.x=-(this.width+this.marginOffset.x),this.newIndex=h):(v||h<this.index&&l+i.left<=k.left+b.width)&&(y.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=h)):this.axis.y&&(_||h>this.index&&s+i.top+b.height>=k.top?(y.y=-(this.height+this.marginOffset.y),this.newIndex=h):(v||h<this.index&&s+i.top<=k.top+b.height)&&(y.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=h))),vo(p,y),a[d].translate=y):n&&(this.sortableGhost=p,_o(p,{opacity:0,visibility:"hidden"}))}null==this.newIndex&&(this.newIndex=this.index),c&&(this.newIndex=u);var w=c?this.prevIndex:u;o&&this.newIndex!==w&&o({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:w,isKeySorting:c,nodes:a,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return uo()(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.refs.wrappedInstance}},{key:"getContainer",value:function(){var e=this.props.getContainer;return"function"!=typeof e?(0,so.findDOMNode)(this):e(o.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var t=o.withRef?"wrappedInstance":null;return(0,io.createElement)(e,C({ref:t},go(this.props,Bo)))}},{key:"helperContainer",get:function(){var e=this.props.helperContainer;return"function"==typeof e?e():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){return this.props.useWindowAsScrollContainer?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),n}(io.Component),Yn(t,"displayName",wo("sortableList",e)),Yn(t,"defaultProps",Do),Yn(t,"propTypes",No),Yn(t,"childContextTypes",{manager:lo().object.isRequired}),n}((e=>{let{items:t,onRemove:n,onSelect:o}=e;return(0,a.createElement)("div",null,(0,a.createElement)(w.AsyncModeProvider,{value:!0},null==t?void 0:t.map(((e,t)=>(0,a.createElement)(hr,{key:e.clientId,item:e,onRemove:n,onSelect:o,index:t})))))})),br=e=>{let{name:t="",reorderBlocks:n,templatePart:o={},blockTypes:r,removeBlocks:i,selectBlock:l,templatePartClientId:s,label:c}=e;const d=null==o?void 0:o.area,f=mr[sr.CONTENT],b=p().get(mr,d,f),_=(0,a.useRef)(),v=(0,a.useRef)(),y=(0,a.useRef)(),[E,S]=(0,a.useState)(!1),{setOpenInserter:C}=(0,w.useDispatch)(h.STORE_KEY),I=b,{isUnlocked:R}=(0,P.useTemplatePartLock)(I),[O,N]=(0,a.useState)(!1),{postType:M,postId:D}=(0,w.useSelect)((e=>{var t,n;return(null===(t=e(h.STORE_KEY))||void 0===t||null===(n=t.getPage())||void 0===n?void 0:n.context)||{}}),[]),B=(0,w.useSelect)((e=>e(h.STORE_KEY).getKubioEditorModeIsSimple()),[]),{uiVersion:L}=(0,g.useUIVersion)(),z=(0,w.useSelect)((e=>e("core/block-editor").getBlocks(s)),[s]);if("core/post-content"===t&&(0,u.applyFilters)("kubio.showRenderedPostContent","page"!==M,M,D))return(0,a.createElement)(a.Fragment,null);const F=t.includes("kubio")&&["header","footer","sidebar"].includes(I),G=["kubio-full-section"];return F&&(R?G.push("kubio-full-section--unlocked"):G.push("kubio-full-section--locked")),(0,a.createElement)("div",{ref:_,className:G.join(" ")},F&&(0,a.createElement)("div",{ref:v,tabIndex:-1,role:"button",className:T()("kubio-full-section-overlay",{"kubio-full-section-overlay--show-popup":E})}),(0,a.createElement)("div",{className:"kubio-subsidebar-container"},(0,a.createElement)("div",{className:T()("components-panel__header","interface-complementary-area-header","kubio-subsidebar-title","kubio-subsidebar-title-header"),tabIndex:-1},(0,a.createElement)("div",{className:"kubio-sidebar-title-text"},c||(()=>{let e=cr[d];return e||(e=(()=>{const e=t,n=(0,m.find)(r,{name:e});return(null==n?void 0:n.title)||e})()),e})()),(0,a.createElement)("div",{className:"dummy-column"}),(0,a.createElement)("div",{ref:y,className:"section-list-header-buttons-holder"},F&&!R&&(0,a.createElement)(P.KubioPopup,{position:2===L?"middle right":"top left",className:"kubio-options-popover kubio-template-controls-popover",buttonRef:v,anchorRef:2===L?y:_,selectorToIgnoreOnClickOutside:".h-template-wizard__modal",onOpen:()=>S(!0),onClose:()=>S(!1)},(0,a.createElement)(P.TemplateLockModal,{title:(0,x.__)("Choose editing mode","kubio")},(0,a.createElement)(P.TemplateLockControls,{isWizardShown:O,setIsWizardShown:N,templatePart:I}))),!B&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.Button,{isSmall:!0,icon:A,className:"section-icon-container",onClick:()=>{l(o.clientId)},showTooltip:!0,tooltipPosition:"top left",label:(0,x.__)("Settings","kubio")}),(0,a.createElement)(k.Button,{isSmall:!0,icon:qt,className:"section-icon-container",onClick:function(){C(`pattern-inserter/${b}-blocks`,o.clientId)},showTooltip:!0,tooltipPosition:"top left",label:(0,x.__)("Add block/section","kubio")}))))),(0,a.createElement)(fr,{helperClass:"kubio-list-item-is-sorting",helperContainer:()=>_.current,onSortEnd:e=>{let{oldIndex:t,newIndex:o}=e;n(z,t,o)},lockAxis:"y",useDragHandle:!0,items:z,onRemove:e=>{i([e.clientId],!1)},onSelect:e=>{l(e.clientId)}}),b&&(0,a.createElement)(k.Button,{isPrimary:!0,onClick:()=>async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;const t=p().get(mr,e,f);C(`pattern-inserter/${t}`,o.clientId)}(),className:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return d===sr.HEADER?["btn-primary","header-button"].concat(t).join(" "):["btn-primary"].concat(t).join(" ")}(t,["kubio-button-add-blocks","kubio-sidebar-add-section-button"])},(0,a.createElement)("span",{className:"kubio-header-section-main-button"},(()=>{switch(d){case sr.HEADER:return(0,x.__)("Choose header design","kubio");case sr.FOOTER:return(0,x.__)("Choose footer design","kubio");case sr.SIDEBAR:return(0,x.__)("Add section","kubio");default:return(0,x.__)("Add predesigned section","kubio")}})())))},_r=(0,E.compose)((0,w.withSelect)((e=>{const{getSelectedBlockClientId:t,getBlock:n,getBlockParents:o,getClientIdsWithDescendants:r}=e("core/block-editor"),i=r().map(n).filter((e=>{let{name:t}=e;return dr.includes(t)}));return{selectedBlockClientId:t(),templateParts:i,getBlockParents:o}})),(0,w.withDispatch)(((e,t)=>{let{onSelect:n=m.noop,getBlockParents:o,getBlockAttributes:r}=t;const{removeBlocks:i,moveBlockToPosition:a,updateBlockAttributes:l}=e("core/block-editor");return{selectBlock(t){e("core/block-editor").selectBlock(t),n(t)},removeBlocks:i,reorderBlocks:(e,t,n)=>{const r=o(e[t].clientId).pop();a(e[t].clientId,r,r,n)},updateBlockAttribute:(e,t,n)=>{let o=r(e);o=(0,m.set)(o,t,n),l(e,{...o})}}})))((e=>(0,a.createElement)(Qo,null,(0,a.createElement)("div",{className:"block-editor-block-navigation__container kubio-interface kubio-section-list"},(0,a.createElement)("div",{className:"block-editor-block-navigation__label"},(0,a.createElement)(ar,e)))))),vr=e=>{let{parentAreaIdentifier:t}=e;const n=`${t}/page-settings`,{isAICapabilityEnabled:o}=(0,w.useSelect)((e=>{const{isAICapabilityEnabled:t=p().noop}=e(h.STORE_KEY)||{};return{isAICapabilityEnabled:t()}}),[]),[r,,,i]=lt();return o?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(cn,{title:(0,a.createElement)("span",{className:"kubio-sidebar-panel-with-icon__title"},(0,a.createElement)(st,{icon:ye.KubioAI,size:18}),(0,a.createElement)("span",null,(0,x.__)("AI Settings","kubio"))),areaIdentifier:n,onOpen:i,buttonOnly:!0,showArrow:!1}),r):(0,a.createElement)(a.Fragment,null)},yr=window.wp.apiFetch;var kr=n.n(yr);const Er=async()=>await kr()({path:"kubio/v1/3rd_party_themes/import_blog"}),Sr=window.wp.url,wr=["home","index","single","search","archive","singular"],Cr=()=>{const e=(0,f.useGetGlobalSessionProp)("ready",!1),t=(0,f.useGetGlobalSessionProp)("urlBasedTemplatesMap",{}),n=(0,f.useSetGlobalSessionProp)("urlBasedTemplatesMap",{}),[o,r]=(0,a.useState)(!1),{getEntity:i,page:l,templateType:s,templateId:c,hasQueryBlock:u}=(0,w.useSelect)((e=>{const{getEditedEntityRecord:t}=e("core"),{getClientIdsWithDescendants:n,getBlock:o}=e("core/block-editor"),{getPage:r,getEditedPostType:i,getEditedPostId:a}=e(h.STORE_KEY);return{getEntity:t,page:r(),templateType:i(),templateId:a(),hasQueryBlock:n().map((e=>o(e))).some((e=>"core/query"===e.name))}}),[]);(0,a.useEffect)((()=>{e||r(!1)}),[e]);const d=(0,a.useCallback)((()=>{const e=i("postType",s,c),t=null==e?void 0:e.kubio_template_source;r(!["kubio","kubio-custom"].includes(t)&&u&&(0,ve.getBackendData)("allow3rdPartyBlogOverride",!0))}),[i,u,c,s]),m=(0,a.useCallback)((async()=>{if(null==l||!l.path)return;let e=t[null==l?void 0:l.path],o=!0;if(!e&&null!==e){const r=await window.fetch((0,Sr.addQueryArgs)(null==l?void 0:l.path,{"__kubio-classic-page-template-slug":1})).then((e=>e.json()));e=r.data||null,n({...t,[null==l?void 0:l.path]:e}),o=r.success}r(o&&wr.includes(e)&&(0,ve.getBackendData)("allow3rdPartyBlogOverride",!0))}),[null==l?void 0:l.path,n,t]),p=(0,a.useCallback)(((e,t)=>{if(e&&t){var n;const t=null==e||null===(n=e.split("//"))||void 0===n?void 0:n.pop();wr.includes(t)?d():r(!1)}else m()}),[d,m]);return(0,a.useEffect)((()=>{e&&p(c,s)}),[e,p,c,s]),o},Ir=()=>{const[e,t]=(0,a.useState)(!1),[n,o]=(0,f.useGlobalSessionProp)("thirdPartyBlockInstalled",!1),r=Cr(),{createSuccessNotice:i,createErrorNotice:l}=(0,w.useDispatch)("core/notices"),s=(0,a.useCallback)((async()=>{t(!0);try{await Er()}catch(e){return void l((0,x.__)("There was an error while importing the Kubio blog. Please try again","kubio"))}o(!0),i((0,x.__)("Kubio blog templates were imported successfully! Refresh the editor to enjoy the full site editing experience","kubio"),{isDismissible:!0,actions:[{label:(0,x.__)("Refresh page now","kubio"),onClick:()=>window.location.reload()}]}),t(!1)}),[l,i,o]);return!r||r&&n?(0,a.createElement)(a.Fragment,null):(0,a.createElement)("div",{className:"kubio-sidebar-blog-area-import"},(0,a.createElement)("h2",null,(0,x.__)("💫 Start with the Kubio blog!","kubio")),(0,a.createElement)("p",null,(0,x.__)("Kubio comes with a fully customizable blog area for your site.","kubio"),(0,a.createElement)("br",null),(0,x.__)("Would you like to use the Kubio blog templates? ","kubio")),(0,a.createElement)(k.Button,{isPrimary:!0,isBusy:e,onClick:s},!e&&(0,x.__)("Import Kubio blog","kubio"),e&&(0,x.__)("Importing Kubio blog…","kubio")))};function Tr(){const e=(0,f.useCurrentPageBodyClasses)(),{additionalCSS:t,setAdditionalCSS:n}=(0,_.useGlobalAdditionalCSS)(),[o,r]=(0,a.useState)(t);(0,a.useEffect)((()=>{t!==o&&r(t)}),[t]);const i=(0,E.useDebounce)(n,300);return(0,a.createElement)(k.PanelBody,{initialOpen:!0,title:(0,x.__)("Additional CSS","kubio")},(0,a.createElement)(P.CodeMirrorControl,{value:o,onChange:e=>{i(e),r(e)},mode:"css"}),e&&!!e.length&&(0,a.createElement)(P.ControlNotice,{content:(0,a.createElement)(a.Fragment,null,(0,a.createElement)("span",null,(0,x.__)("Current page has the following classes that can be used as top selectors:","kubio")),(0,a.createElement)("div",null,(0,a.createElement)("strong",null,e.join(", "))))}))}const xr=e=>{let{areaIdentifier:t}=e;const n=(0,w.useSelect)((e=>e(h.STORE_KEY).getEditorOpenedSidebar()),[]),o=null==n?void 0:n.endsWith(t);return(0,a.createElement)(a.Fragment,null,o&&(0,a.createElement)(Tr,null))},Pr=e=>{let{parentAreaIdentifier:t}=e;return(0,a.createElement)(cn,{title:(0,x.__)("Additional CSS","kubio"),parentAreaIdentifier:t,areaIdentifier:`${t}/additional-css`},(0,a.createElement)(xr,{areaIdentifier:`${t}/additional-css`}))};function Rr(){const{globalStyle:e,getStyleDefaultGlobalValue:t}=(0,_.useGlobalDataStyle)(),n={styledComponent:"transition"};return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.PanelBody,{initialOpen:!0,title:(0,x.__)("Effects","kubio")},(0,a.createElement)(P.RangeWithUnitControl,{label:(0,x.__)("Transition Duration","kubio"),value:e.getStyle("transition.duration",{unit:"s"},{...n}),onChange:t=>((t,o,r)=>e.setStyle("transition.duration",o,{...n}))(0,t),onReset:()=>((o,r)=>{const i={...n},a=t(o,i);a?e.setStyle(o,a,i):e.setStyle(o,null,{...i,unset:!0})})("transition.duration"),min:0,max:5,step:.01})))}const Ar=e=>{let{areaIdentifier:t}=e;const n=(0,w.useSelect)((e=>e(h.STORE_KEY).isEditorSidebarOpened(t)),[]),o=(0,w.useSelect)((e=>{var t,n;return(null===(t=e("kubio/edit-site"))||void 0===t||null===(n=t.getSettings())||void 0===n?void 0:n.isKubioTheme)||null}));return n&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Rr,null),!o&&(0,a.createElement)(P.ControlNotice,{className:"notice-general-settings",content:(0,x.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")}))},Or=e=>{let{parentAreaIdentifier:t}=e;return(0,a.createElement)(cn,{title:(0,x.__)("Global Effects","kubio"),label:(0,x.__)("Effects","kubio"),parentAreaIdentifier:t,areaIdentifier:`${t}/effects`},(0,a.createElement)(Ar,{areaIdentifier:`${t}/effects`}))},Nr=window.kubio.advancedPanel,Mr=()=>{const[e,t]=(0,a.useState)(""),{globalStyle:n,resetToInitialData:o}=(0,_.useGlobalDataStyle)(),r="form-fields",i={type:s.WithDataPathTypes.STYLE,style:r,dataHelper:n};return(0,a.createElement)(k.PanelBody,{initialOpen:!1,title:(0,x.__)("Form fields","kubio")},(0,a.createElement)(k.BaseControl,{label:(0,x.__)("State","kubio")},(0,a.createElement)(Nr.StatesControl,{activeState:e,setActiveState:t,availableStates:["normal","hover","focus","disabled"]}),(0,a.createElement)(P.ColorWithPath,C({label:(0,x.__)("Text color","kubio"),path:"typography.color",state:e},i,{onReset:o("typography.color",{styledComponent:r,state:e})})),(0,a.createElement)(P.ColorWithPath,C({label:(0,x.__)("Background color","kubio"),state:e,path:"background.color",showReset:!0},i,{onReset:o("background.color",{styledComponent:r,state:e})})),(0,a.createElement)(P.ColorWithPath,C({label:(0,x.__)("Border color","kubio"),path:["border.top.color","border.bottom.color","border.left.color","border.right.color"],state:e},i,{onReset:o(["border.top.color","border.bottom.color","border.left.color","border.right.color"],{styledComponent:r,state:e})})),(0,a.createElement)(P.SeparatorHorizontalLine,null),(0,a.createElement)(P.TypographyControlPopupWithPath,C({path:"typography"},i,{onReset:o("typography",{styledComponent:r})})),(0,a.createElement)(P.SeparatorHorizontalLine,null),(0,a.createElement)(P.BoxUnitValueControlWithPath,C({label:(0,x.__)("Padding","kubio"),path:"padding"},i,{onReset:o("padding",{styledComponent:r})})),(0,a.createElement)(P.BoxUnitValueControlWithPath,C({label:(0,x.__)("Margin","kubio"),path:"margin"},i,{onReset:o("margin",{styledComponent:r})})),(0,a.createElement)(P.SeparatorHorizontalLine,null),(0,a.createElement)(P.BordersAndRadiusWithPath,C({path:"border"},i,{withColor:!1,onReset:o("border",{styledComponent:r})}))))},Dr=e=>{let{styledElement:t="form-submit-button",title:n=(0,x.__)("Form submit button","kubio")}=e;const[o,r]=(0,a.useState)(""),{globalStyle:i,resetToInitialData:l}=(0,_.useGlobalDataStyle)(),c={type:s.WithDataPathTypes.STYLE,style:t,dataHelper:i};return(0,a.createElement)(k.PanelBody,{initialOpen:!1,title:n},(0,a.createElement)(k.BaseControl,{label:(0,x.__)("State","kubio")},(0,a.createElement)(Nr.StatesControl,{activeState:o,setActiveState:r,availableStates:["normal","hover","disabled"]}),(0,a.createElement)(P.GradientColorPickerWithPath,C({label:(0,x.__)("Background","kubio"),path:"background",state:o},c,{onReset:l("background",{styledComponent:t,state:o})})),(0,a.createElement)(P.ColorWithPath,C({label:(0,x.__)("Text color","kubio"),path:"typography.color",state:o},c,{onReset:l("typography.color",{styledComponent:t,state:o})})),(0,a.createElement)(P.ColorWithPath,C({label:(0,x.__)("Border color","kubio"),path:["border.top.color","border.bottom.color","border.left.color","border.right.color"],state:o},c,{onReset:l(["border.top.color","border.bottom.color","border.left.color","border.right.color"],{styledComponent:t,state:o})})),(0,a.createElement)(P.SeparatorHorizontalLine,null),(0,a.createElement)(P.TypographyControlPopupWithPath,C({path:"typography"},c,{onReset:l("typography",{styledComponent:t})})),(0,a.createElement)(P.SeparatorHorizontalLine,null),(0,a.createElement)(P.BoxUnitValueControlWithPath,C({label:(0,x.__)("Padding","kubio"),path:"padding"},c,{onReset:l("padding",{styledComponent:t})})),(0,a.createElement)(P.BoxUnitValueControlWithPath,C({label:(0,x.__)("Margin","kubio"),path:"margin"},c,{onReset:l("margin",{styledComponent:t})})),(0,a.createElement)(P.SeparatorHorizontalLine,null),(0,a.createElement)(P.BordersAndRadiusWithPath,C({path:"border"},c,{withColor:!1,onReset:l("border",{styledComponent:t})})),(0,a.createElement)(P.SeparatorHorizontalLine,null),(0,a.createElement)(P.BoxShadowWithPath,C({path:"boxShadow"},c,{onReset:l("boxShadow",{styledComponent:t})}))))},Br=e=>{let{areaIdentifier:t}=e;const n=(0,w.useSelect)((e=>e(h.STORE_KEY).isEditorSidebarOpened(t)),[]),o=(0,w.useSelect)((e=>{var t,n;return(null===(t=e("kubio/edit-site"))||void 0===t||null===(n=t.getSettings())||void 0===n?void 0:n.isKubioTheme)||null}));return n&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Mr,null),(0,a.createElement)(Dr,{styledElement:"form-button",title:(0,x.__)("Form button","kubio")}),(0,a.createElement)(Dr,{styledElement:"form-submit-button",title:(0,x.__)("Form submit button","kubio")}),(0,a.createElement)(Dr,{styledElement:"form-reset-button",title:(0,x.__)("Form reset button","kubio")}),!o&&(0,a.createElement)(P.ControlNotice,{className:"notice-general-settings",content:(0,x.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")}))},Lr=e=>{let{parentAreaIdentifier:t}=e;return(0,a.createElement)(cn,{title:(0,x.__)("Form Elements","kubio"),parentAreaIdentifier:t,areaIdentifier:`${t}/form-elements`},(0,a.createElement)(Br,{areaIdentifier:`${t}/form-elements`}))},zr={H1:"h1",H2:"h2",H3:"h3",H4:"h4",H5:"h5",H6:"h6"},Fr={headingType:{values:zr,options:[{value:zr.H1,label:"H1"},{value:zr.H2,label:"H2"},{value:zr.H3,label:"H3"},{value:zr.H4,label:"H4"},{value:zr.H5,label:"H5"},{value:zr.H6,label:"H6"}]}},Gr=()=>{const[e,t]=(0,_.useGlobalDataSetting)("googleFonts.serveLocally");return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(P.ToggleControl,{label:(0,x.__)("Serve Google Fonts locally","kubio"),value:e,onChange:t}),(0,a.createElement)(P.ControlNotice,{className:"notice-general-settings no-padding",content:(0,x.__)("When this option is turned on the Google Fonts used in your site will be downloaded and served from your server instead of the Google server. This will minimize the DNS requests, reduce the Cumulative Layout Shift and serve your Google Fonts in a 100% GDPR compliant way.","kubio")}))},{weightOptions:Hr,sizeUnitsOptions:Ur,sizeUnitsConfig:Wr,styleOptions:jr,transformOptions:Vr,decorationOptions:Kr}=P.TypographyConfig,$r=e=>{const{globalStyle:t,getStyleDefaultGlobalValue:n,getStyleInitialDefaultGlobalValue:o}=(0,_.useGlobalDataStyle)();return((e,t,n,o)=>{const r={styledComponent:"body"};return{setTypography:function(n,o){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=i.state?`states.${i.state}`:null;i=(0,m.omit)(i,"state");const l=["typography","holders",t,a,n].filter(Boolean).join("."),s=p().merge({},r,i);e.setStyle(l,o,s)},getTypography:function(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=i.state?`states.${i.state}`:null;i=(0,m.omit)(i,"state");const l=["typography","holders",t,a,n].filter(Boolean).join("."),s=p().merge({},r,i);return e.getStyle(l,o,s)},unsetTypography:function(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=i.state?`states.${i.state}`:null;i=(0,m.omit)(i,"state");const l=["typography","holders",t,a,n].filter(Boolean).join("."),s=p().merge({},r,i),c=o(l,s);e.setStyle(l,c,s)}}})(t,e,0,o)},qr=e=>{let{getTypography:t,setTypography:n,unsetTypography:o,showTransform:r=!1,showDecoration:i=!0}=e;return(0,a.createElement)(P.PopoverOptionsButton,{label:(0,x.__)("Advanced","kubio"),popoverWidth:250,popupContent:(0,a.createElement)(a.Fragment,null,r&&(0,a.createElement)(P.GutentagSelectControl,{label:(0,x.__)("Transform","kubio"),options:Vr,value:t("transform"),onChange:e=>n("transform",e)}),i&&(0,a.createElement)(P.GutentagSelectControl,{label:(0,x.__)("Decoration","kubio"),options:Kr,value:t("decoration",""),onChange:e=>n("decoration",e)}),(0,a.createElement)(P.GutentagSelectControl,{label:(0,x.__)("Style","kubio"),options:jr,value:t("style"),onChange:e=>n("style",e)}),(0,a.createElement)(P.SeparatorHorizontalLine,{fit:!0}),(0,a.createElement)(P.RangeWithUnitControl,{label:(0,x.__)("Line Height","kubio"),value:t("lineHeight"),onChange:e=>n("lineHeight",e),onReset:()=>o("lineHeight"),defaultUnit:"",min:0,max:10,step:.1}),(0,a.createElement)(P.RangeWithUnitControl,{label:(0,x.__)("Letter Spacing","kubio"),value:t("letterSpacing",{value:"",unit:"px"}),onChange:e=>n("letterSpacing",e),onReset:()=>o("letterSpacing"),min:0,max:10,step:.1,units:Ur}))})},Yr=e=>{let{element:t="h1"}=e;const{getTypography:n,setTypography:o,unsetTypography:r}=$r(t),{getFontWeights:i}=(0,_.useGlobalDataFonts)(),l=i(n("family")),s=Hr.filter((e=>-1!==l.indexOf(e.value)));return(0,a.createElement)(k.BaseControl,null,(0,a.createElement)(k.Flex,{className:"kubio-font-family-container general-typography"},(0,a.createElement)(k.FlexBlock,null,(0,a.createElement)("span",{className:"kubio-font-family-label"},(0,x.__)("Font family","kubio"))),(0,a.createElement)(k.FlexBlock,{className:"kubio-font-family-container__select"},(0,a.createElement)(P.FontPicker,{value:n("family"),onChange:e=>o("family",e)}))),(0,a.createElement)(P.GutentagSelectControl,{className:"kubio-select-control-container",label:(0,x.__)("Font weight","kubio"),options:s,value:parseInt(n("weight")),onChange:e=>o("weight",e)}),(0,a.createElement)(P.InlineLabeledControl,{label:(0,x.__)("Color","kubio")},(0,a.createElement)(P.ColorIndicatorPopover,{color:n("color"),onChange:e=>o("color",e),onReset:()=>r("color"),showReset:!0})),(0,a.createElement)(P.RangeWithUnitControl,{label:(0,x.__)("Size","kubio"),units:Ur,optionsByUnit:Wr,onChange:e=>o("size",e),value:n("size"),onReset:()=>r("size")}),(0,a.createElement)(qr,{getTypography:n,setTypography:o,unsetTypography:r,showTransform:!0}))},Xr=()=>{const[e,t]=(0,a.useState)(""),{getTypography:n,setTypography:o,unsetTypography:r}=$r("a");return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.BaseControl,null,(0,a.createElement)(k.Flex,{className:"kubio-font-family-container"},(0,a.createElement)(k.FlexBlock,null,(0,a.createElement)("span",{className:"kubio-font-family-label"},(0,x.__)("Font family","kubio"))),(0,a.createElement)(k.FlexItem,null,(0,a.createElement)(P.FontPicker,{label:(0,x.__)("Font family","kubio"),value:n("family"),onChange:e=>o("family",e)}))),(0,a.createElement)(P.GutentagSelectControl,{label:(0,x.__)("Font Weight","kubio"),options:Hr,value:parseInt(n("weight")),onChange:e=>o("weight",e)}),(0,a.createElement)(P.RangeWithUnitControl,{label:(0,x.__)("Size","kubio"),units:Ur,value:n("size"),onChange:e=>o("size",e),onReset:()=>r("size")}),(0,a.createElement)(k.BaseControl,{label:(0,x.__)("State","kubio")},(0,a.createElement)(Nr.StatesControl,{activeState:e,setActiveState:t,availableStates:["normal","hover"]})),(0,a.createElement)(P.InlineLabeledControl,{label:(0,x.__)("Color","kubio")},(0,a.createElement)(P.ColorIndicatorPopover,{color:n("color","",{state:e}),onChange:t=>o("color",t,{state:e}),onReset:()=>{r("color",{state:e})},showReset:!0})),(0,a.createElement)(P.GutentagSelectControl,{label:(0,x.__)("Decoration","kubio"),options:Kr,value:n("decoration","",{state:e}),onChange:t=>o("decoration",t,{state:e})}),(0,a.createElement)(P.SeparatorHorizontalLine,null),(0,a.createElement)(qr,{getTypography:n,setTypography:o,unsetTypography:r,showTransform:!0,showDecoration:!1})))},Qr=()=>{const[e,t]=(0,a.useState)("h1"),n=(0,w.useSelect)((e=>{var t,n;return(null===(t=e("kubio/edit-site"))||void 0===t||null===(n=t.getSettings())||void 0===n?void 0:n.isKubioTheme)||null}));return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.PanelBody,{initialOpen:!1,title:(0,x.__)("Headings","kubio")},(0,a.createElement)(P.ToggleGroup,{label:(0,x.__)("Heading Type","kubio"),options:Fr.headingType.options,value:e,onChange:t}),(0,a.createElement)(Yr,{element:e})),(0,a.createElement)(k.PanelBody,{initialOpen:!1,title:(0,x.__)("Texts","kubio")},(0,a.createElement)(Yr,{element:"p"})),(0,a.createElement)(k.PanelBody,{initialOpen:!1,title:(0,x.__)("Lead text","kubio")},(0,a.createElement)(Yr,{element:"lead"})),(0,a.createElement)(k.PanelBody,{initialOpen:!1,title:(0,x.__)("Links","kubio")},(0,a.createElement)(Xr,null)),(0,a.createElement)(k.PanelBody,{initialOpen:!1,title:(0,x.__)("Adobe TypeKit","kubio")},(0,a.createElement)(P.TypeKitSetupInterface,{showNotice:!0})),(0,a.createElement)(k.PanelBody,{initialOpen:!1,title:(0,x.__)("Google Fonts Settings","kubio")},(0,a.createElement)(Gr,{showNotice:!0})),!n&&(0,a.createElement)(P.ControlNotice,{className:"notice-general-settings",content:(0,x.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")}))},Zr=e=>{let{areaIdentifier:t}=e;return(0,w.useSelect)((e=>e(h.STORE_KEY).isEditorSidebarOpened(t)),[])?(0,a.createElement)(Qr,null):(0,a.createElement)(a.Fragment,null)},Jr=e=>{let{parentAreaIdentifier:t}=e;return(0,a.createElement)(cn,{title:(0,x.__)("Typography","kubio"),parentAreaIdentifier:t,areaIdentifier:`${t}/typography`},(0,a.createElement)(Zr,{areaIdentifier:`${t}/typography`}))};let ei=null;const ti=()=>{const{logoImage:e,alternateLogoImage:t,setLogoImage:n,setAlternateLogoImage:o}=(0,_.useSiteLogoImages)(),[r,i]=(0,S.useEntityProp)("root","site","title"),[l,s]=(0,S.useEntityProp)("root","site","description"),{siteIconUrl:c}=(0,w.useSelect)((e=>{const{getEditedEntityRecord:t}=e("core"),n=t("root","site"),o=ei||(null==n?void 0:n.site_icon),r=o&&e("core").getEntityRecord("root","media",o);return{siteIconUrl:null==r?void 0:r.source_url}}),[ei]),{editEntityRecord:u}=(0,w.useDispatch)("core"),d=(0,a.useCallback)((e=>{var t;const n=null!==(t=parseInt(e))&&void 0!==t?t:void 0;ei=n,u("root","site",void 0,{site_icon:n})}),[u]);return(0,a.createElement)(k.PanelBody,{title:(0,x.__)("Site Identity","kubio"),className:"kubio-site-identity-panel"},(0,a.createElement)(k.BaseControl,{label:(0,x.__)("Site title","kubio"),id:"site-title-control"},(0,a.createElement)(P.InputControl,{value:r||"",onChange:e=>i(e)})),(0,a.createElement)(k.BaseControl,{label:(0,x.__)("Tagline","kubio"),id:"tagline-control"},(0,a.createElement)(P.InputControl,{value:l||"",onChange:e=>s(e)})),(0,a.createElement)(P.SeparatorHorizontalLine,null),(0,a.createElement)(k.BaseControl,{label:(0,x.__)("Logo image","kubio"),id:"logo-image-control"},(0,a.createElement)(P.MediaPicker,{value:e,type:"image",showButton:!0,onReset:()=>{n(null)},buttonLabel:(0,x.__)("Change image","kubio"),removeButtonLabel:(0,x.__)("Reset image","kubio"),onChange:e=>n(e.id)})),(0,a.createElement)(k.BaseControl,{label:(0,x.__)("Alternate logo image","kubio"),id:"alternate-logo-image-control"},(0,a.createElement)(P.MediaPicker,{value:t,type:"image",showButton:!0,showRemoveButton:!0,onReset:()=>{o(null)},buttonLabel:(0,x.__)("Change alternate image","kubio"),removeButtonLabel:(0,x.__)("Reset image","kubio"),onChange:e=>o(e.url)})),(0,a.createElement)(P.SeparatorHorizontalLine,null),(0,a.createElement)(k.BaseControl,{label:(0,x.__)("Site Icon","kubio"),id:"site-icon-control",help:(0,x.__)("Site Icons are what you see in browser tabs, bookmark bars, and within the WordPress mobile apps. Upload one here!","kubio")},(0,a.createElement)(P.MediaPicker,{value:""!==c?c:null,type:"image",showButton:!0,showRemoveButton:!0,onReset:()=>{d(null)},buttonLabel:(0,x.__)("Set site icon","kubio"),onChange:e=>d(e.id)})))},ni=e=>{let{areaIdentifier:t}=e;const n=(0,w.useSelect)((e=>e(h.STORE_KEY).getEditorOpenedSidebar()),[]),o=null==n?void 0:n.endsWith(t);return(0,a.createElement)(a.Fragment,null,o&&(0,a.createElement)(ti,null))};function oi(e){let{parentAreaIdentifier:t}=e;return(0,a.createElement)(cn,{title:(0,x.__)("Site Identity","kubio"),parentAreaIdentifier:t,areaIdentifier:`${t}/site-identity`},(0,a.createElement)(ni,{areaIdentifier:`${t}/site-identity`}))}const ri=()=>{const{globalStyle:e,getPropDefaultGlobalValue:t,getStyleDefaultGlobalValue:n}=(0,_.useGlobalDataStyle)(),o=(t,n,o)=>e.getPropInMedia(t,n,{...o}),r=(t,n)=>o=>e.setPropInMedia(t,o,{...n}),i=function(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return()=>{const r=t(n,o);e.setPropInMedia(n,r,o)}},l={styledComponent:"sectionSpacing"};return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.PanelBody,{initialOpen:!0,title:(0,x.__)("Spacing","kubio")},(0,a.createElement)(P.RangeWithUnitControl,{label:(0,x.__)("Horizontal space between buttons/links","kubio"),units:P.sizeUnitsOptions,onChange:r("hSpace"),value:o("hSpace",{unit:"px"}),onReset:i("hSpace")}),(0,a.createElement)(P.RangeWithUnitControl,{label:(0,x.__)("Column contents vertical spacing","kubio"),units:P.sizeUnitsOptions,onChange:r("vSpace"),value:o("vSpace",{unit:"px"}),onReset:i("vSpace")}),(0,a.createElement)(P.RangeWithUnitControl,{label:(0,x.__)("Section vertical spacing","kubio"),units:P.sizeUnitsOptions,value:e.getStyle("padding.top",{unit:"px"},l),onChange:t=>{e.setStyle("padding.top",t,l),e.setStyle("padding.bottom",t,l)},onReset:()=>{const t=n("padding.top",l);e.setStyle("padding.top",t,l);const o=n("padding.bottom",l);e.setStyle("padding.bottom",o,l)}})))},ii=e=>{let{areaIdentifier:t}=e;const n=(0,w.useSelect)((e=>e(h.STORE_KEY).isEditorSidebarOpened(t)),[]),o=(0,w.useSelect)((e=>{var t,n;return(null===(t=e("kubio/edit-site"))||void 0===t||null===(n=t.getSettings())||void 0===n?void 0:n.isKubioTheme)||null}));return n&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(ri,null),!o&&(0,a.createElement)(P.ControlNotice,{className:"notice-general-settings",content:(0,x.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")}))},ai=e=>{let{parentAreaIdentifier:t}=e;return(0,a.createElement)(cn,{title:(0,x.__)("Global Spacing","kubio"),label:(0,x.__)("Spacing","kubio"),parentAreaIdentifier:t,areaIdentifier:`${t}/spacing`},(0,a.createElement)(ii,{areaIdentifier:`${t}/spacing`}))};function li(e){let{parentAreaIdentifier:t}=e;const n=`${t}/general-settings`;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(cn,{title:(0,x.__)("General Settings","kubio"),areaIdentifier:n},(0,a.createElement)(oi,{parentAreaIdentifier:n}),(0,a.createElement)(Jr,{parentAreaIdentifier:n}),(0,a.createElement)(Lr,{parentAreaIdentifier:n}),(0,a.createElement)(hn,{parentAreaIdentifier:n}),(0,a.createElement)(ai,{parentAreaIdentifier:n}),(0,a.createElement)(Or,{parentAreaIdentifier:n}),(0,a.createElement)(Pr,{parentAreaIdentifier:n})))}const si=e=>{let{addItem:t}=e;const[n,o]=(0,a.useState)(!1),[r,i]=(0,a.useState)((0,qo.generateItemInitialData)()),l=(0,a.useRef)(null);return(0,a.createElement)("div",{ref:l},(0,a.createElement)(k.Button,{onClick:()=>o(!0),className:"kubio-button-100",isPrimary:!0},(0,x.__)("Add menu item","kubio")),n&&(0,a.createElement)(k.Popover,{position:"middle left",className:"kubio-options-popover",onClose:()=>{o(!1)},anchorRef:l.current,offset:6,anchor:l.current,flip:!0,shift:!0,resize:!1},(0,a.createElement)(P.MenuItemOptions,{item:r,isAdd:!0,onChange:e=>{t(e),o(!1),i((0,qo.generateItemInitialData)())},afterUpdateClick:()=>o(!1),updateLabel:(0,x.__)("Add item","kubio")})))},ci=e=>{let{item:t,onItemChange:n,onRemoveItem:o,onTogglePopover:r}=e;const[i,l]=(0,a.useState)(t);(0,a.useEffect)((()=>{l(t)}),[t]);const s=e=>{const t={...i,...e};l(t),n(t)},c=(0,a.useRef)();return(0,a.createElement)("div",{ref:c},(0,a.createElement)(k.Flex,{className:"kubio-inspector-menu-item-content"},(0,a.createElement)(k.FlexBlock,null,(0,a.createElement)(k.Tooltip,{text:(0,ve.stripTags)(i.label)},(0,a.createElement)("span",{className:"kubio-inspector-menu-item-label"},(0,ve.stripTags)(i.label)))),(0,a.createElement)(k.FlexItem,{className:"kubio-inspector-menu-items-settings"},(0,a.createElement)(k.Flex,{gap:1},(0,a.createElement)(k.FlexItem,null,(0,a.createElement)(k.Button,{className:"kubio-inspector-menu-remove-item",isSmall:!0,iconSize:18,onClick:()=>o(i),icon:ye.DeleteItemIcon})),(0,a.createElement)(k.FlexItem,null,(0,a.createElement)(P.PopoverOptionsButton,{iconSize:18,popoverClass:"kubio-menu-edit-popover",popoverAnchorRef:c,popupContent:e=>(0,a.createElement)(P.MenuItemOptions,{item:i,onChange:s,afterUpdateClick:e}),onPopoverClose:()=>r(!1),onPopoverOpen:()=>r(!0)}))))))},ui=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.filter((e=>e.parent===t)).map((t=>({...t,children:t.id?ui(e,t.id):[]})))},di=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map(((e,n)=>[{...(0,m.omit)(e,["children","block"]),order:n+1,parent:t},...di(e.children||[],e.id)])).reduce(((e,t)=>e.concat(t)),[])},mi=e=>{let{items:t=[],setItems:n,isResolving:o,hasResolved:r}=e;const[i,l]=(0,a.useState)(-1/0),s=(0,a.useMemo)((()=>ui(t)),[t]),c=(0,a.useCallback)((e=>{n(e,!0)}),[n]),u=(0,a.useCallback)((e=>{let n=(0,m.cloneDeep)(t).filter((t=>t.id!==e.id)).map((t=>(t.parent===e.id&&(t.parent=e.parent),t))),o=0;n=n.map((t=>t.parent===e.parent?(o++,{...t,order:o}):t)),c(n)}),[c]),d=(0,a.useCallback)((e=>{const t=di(e);c(t)}),[c]),p=(0,a.useCallback)((e=>{if(!e.id)return void console.error("Cannot update item without id");const n=(0,m.cloneDeep)(t).map((t=>t.id===e.id?{...t,...e}:t));c(n)}),[c]),h=(0,a.useCallback)((e=>{let{item:t}=e;return(0,a.createElement)(ci,{item:t,onItemChange:p,onRemoveItem:u,onTogglePopover:e=>{l(e?t.id:-1/0)}})}),[l,p,u]),g=s.length>0,f=(0,a.useCallback)((e=>e.id===i),[i]);return(0,a.createElement)(k.BaseControl,null,(0,a.createElement)("div",{className:"kubio-inspector-menu-tree"},o&&(0,a.createElement)(P.LoadingPlaceholder,{message:(0,x.__)("Loading menu …","kubio")}),r&&g&&(0,a.createElement)(P.SortableTree,{items:s,renderItem:h,handler:!0,collapsable:!1,onChange:d,isActive:f}),r&&!g&&(0,a.createElement)(P.SmallPlaceholder,{message:(0,x.__)("Empty menu","kubio")})))},pi=e=>{let{menu:t}=e;const{setItems:n,items:o=[],isResolving:r,hasResolved:i}=(0,qo.useMenuBlockEditor)(t.id),l=(0,a.useCallback)((e=>{n([...o,{...e,order:o.length+1}],!0)}),[o]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.PanelBody,{title:(0,x.__)("Menu Structure","kubio")},(0,a.createElement)(mi,{menuId:t.id,items:o,setItems:n,isResolving:r,hasResolved:i}),(0,a.createElement)(si,{addItem:l})))},hi=e=>{let{menu:t,areaIdentifier:n}=e;const o=(0,w.useSelect)((e=>e(h.STORE_KEY).getEditorOpenedSidebar()));return o&&-1!==o.indexOf(n)&&(0,a.createElement)(pi,{menu:t})},gi=e=>{let{parentAreaIdentifier:t,menu:n}=e;const o=`${t}/menu-${n.id}`;return(0,a.createElement)(cn,{title:(0,x.sprintf)(// translators: %s is for the menu name
(0,x.__)("Menu: %s","kubio"),n.name||(0,x.__)("Unnamed menu","kubio")),label:n.name||(0,x.__)("Unnamed menu","kubio"),parentAreaIdentifier:t,areaIdentifier:o},(0,a.createElement)(hi,{areaIdentifier:o,menu:n}))},fi=()=>{const[e,t]=(0,a.useState)(!1),[n,o]=(0,a.useState)(!1),[r,i]=(0,a.useState)(""),l=(0,a.useRef)(),{saveMenu:s}=(0,w.useDispatch)("core"),{createErrorNotice:c,createInfoNotice:u}=(0,w.useDispatch)(d.store),m=(0,a.useCallback)((()=>{n?u((0,x.__)("Another menu creation is in progress","kubio"),{type:"snackbar"}):(t(!e),i(""))}),[e,t,n]),p=(0,a.useCallback)((async()=>{if(!n){o(!0);try{await s({name:r})}catch(e){c((0,x.__)("Menu creation failed","kubio"),{type:"snackbar"})}t(!1),o(!1)}}),[t,s,r,n,o]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.BaseControl,{className:"kubio-create-menu-button"},(0,a.createElement)(k.Button,{onClick:m,isPrimary:!0,className:"kubio-button-100",ref:l,isBusy:n},(0,x.__)("Create menu","kubio"))),e&&(0,a.createElement)(k.Popover,{position:"middle left",className:"kubio-options-popover",anchorRef:l.current,onClose:()=>t(!1),offset:6},(0,a.createElement)("div",null,(0,a.createElement)(k.BaseControl,null,(0,a.createElement)(P.InputControl,{label:(0,x.__)("Menu name","kubio"),onChange:i,value:r,disabled:n})),(0,a.createElement)(k.BaseControl,null,(0,a.createElement)(k.Button,{onClick:p,isPrimary:!0,disabled:n,isBusy:n,className:"kubio-button-100"},(0,x.__)("Create menu","kubio"))))))},bi=e=>{let{areaIdentifier:t}=e;const{menus:n}=(0,w.useSelect)((e=>{const{getMenus:t,isResolving:n,hasFinishedResolution:o}=e("core"),r=[{per_page:-1}];return{menus:t(...r),isResolvingMenus:n("getMenus",r),hasResolvedMenus:o("getMenus",r)}}));return(0,a.createElement)(a.Fragment,null,null==n?void 0:n.map((e=>(0,a.createElement)(gi,{key:e.id,parentAreaIdentifier:t,menu:e}))))};function _i(e){let{parentAreaIdentifier:t}=e;const n=`${t}/menus-settings`;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(cn,{title:(0,x.__)("Menus","kubio"),areaIdentifier:n},(0,a.createElement)(bi,{areaIdentifier:n}),(0,a.createElement)(fi,null)))}const vi=function(){return(0,a.createElement)(zn.PostTypeSupportCheck,{supportKeys:["comments","trackbacks"]},(0,a.createElement)(k.PanelBody,{title:(0,x.__)("Discussion","kubio")},(0,a.createElement)(zn.PostTypeSupportCheck,{supportKeys:"comments"},(0,a.createElement)(k.PanelRow,null,(0,a.createElement)(zn.PostComments,null))),(0,a.createElement)(zn.PostTypeSupportCheck,{supportKeys:"trackbacks"},(0,a.createElement)(k.PanelRow,null,(0,a.createElement)(zn.PostPingbacks,null)))))};var yi=n(5358);const ki=(0,w.withSelect)((e=>{const{getCurrentPostType:t}=e(yi.Ls),{getPostType:n}=e(S.store);return{postType:n(t())}})),Ei=(0,E.compose)(ki)((function(e){let{postType:t}=e;return(0,a.createElement)(zn.PostFeaturedImageCheck,null,(0,a.createElement)(k.PanelBody,{title:(0,m.get)(t,["labels","featured_image"],(0,x.__)("Featured image","kubio"))},(0,a.createElement)(zn.PostFeaturedImage,null)))})),Si=function(){const{postType:e}=(0,w.useSelect)((e=>{const{getCurrentPostType:t}=e(yi.Ls),{getPostType:n}=e(S.store);return{postType:n(t())}}),[]);return e?(0,a.createElement)(zn.PageAttributesCheck,null,(0,a.createElement)(k.PanelBody,{title:(0,m.get)(e,["labels","attributes"],(0,x.__)("Page attributes","kubio"))},(0,a.createElement)(zn.PageAttributesParent,null),(0,a.createElement)(k.PanelRow,null,(0,a.createElement)(zn.PageAttributesOrder,null)))):null},wi=function(){return(0,a.createElement)(zn.PostExcerptCheck,null,(0,a.createElement)(k.PanelBody,{title:(0,x.__)("Excerpt","kubio")},(0,a.createElement)(zn.PostExcerpt,null)))},Ci=(0,E.compose)([(0,w.withSelect)((e=>{const{isPermalinkEditable:t,getCurrentPost:n,isCurrentPostPublished:o,getPermalinkParts:r,getEditedPostAttribute:i,getEditedPostSlug:a}=e(zn.store),{getPostType:l}=e(S.store),{link:s}=n(),c=l(i("type")),u=r();return{postLink:s,isEditable:t(),isPublished:o(),isViewable:(0,m.get)(c,["viewable"],!1),postSlug:(0,Sr.safeDecodeURIComponent)(a()),postTypeLabel:(0,m.get)(c,["labels","view_item"]),hasPermalinkParts:!!u,permalinkPrefix:null==u?void 0:u.prefix,permalinkSuffix:null==u?void 0:u.suffix}})),(0,E.ifCondition)((e=>{let{isEnabled:t,postLink:n,isViewable:o,hasPermalinkParts:r}=e;return t&&n&&o&&r}))])((function(e){let{postLink:t,permalinkPrefix:n,permalinkSuffix:o,editPermalink:r,postSlug:i,postTypeLabel:l,isEditable:s}=e;const[c,u]=(0,a.useState)(!1);let d,m,p;return s&&(d=n&&(0,a.createElement)("span",{className:"edit-post-post-link__link-prefix"},n),m=i&&(0,a.createElement)("span",{className:"edit-post-post-link__link-post-name"},i),p=o&&(0,a.createElement)("span",{className:"edit-post-post-link__link-suffix"},o)),(0,a.createElement)(k.PanelBody,{title:(0,x.__)("Permalink","kubio")},s&&(0,a.createElement)("div",{className:"editor-post-link"},(0,a.createElement)(P.InputControl,{label:(0,x.__)("URL Slug","kubio"),value:c?"":i,onChange:e=>{r(e),e?c&&u(!1):c||u(!0)},onBlur:e=>{r((0,zn.cleanForSlug)(e.target.value)),c&&u(!1)}}),(0,a.createElement)("p",null,(0,x.__)("The last part of the URL.","kubio")," ",(0,a.createElement)(k.ExternalLink,{href:"https://wordpress.org/support/article/writing-posts/#post-field-descriptions"},(0,x.__)("Read about permalinks","kubio")))),(0,a.createElement)("h3",{className:"edit-post-post-link__preview-label"},l||(0,x.__)("View post","kubio")),(0,a.createElement)("div",{className:"edit-post-post-link__preview-link-container"},(0,a.createElement)(k.ExternalLink,{className:"edit-post-post-link__link",href:t,target:"_blank"},s?(0,a.createElement)(a.Fragment,null,d,m,p):t)))})),Ii=function(e){let{taxonomy:t,children:n}=e;const o=(0,m.get)(t,["labels","menu_name"]);return o?(0,a.createElement)(k.PanelBody,{title:o},n):null},Ti=function(){return(0,a.createElement)(zn.PostTaxonomiesCheck,null,(0,a.createElement)(zn.PostTaxonomies,{taxonomyWrapper:(e,t)=>(0,a.createElement)(Ii,{taxonomy:t},e)}))};function xi(e){let{layoutBlock:t}=e;const{dataHelper:n}=(0,s.useKubioDataHelper)(t),o=(0,Kt.useQueryLayout)(n);return(0,a.createElement)(P.SelectWithIconControl,C({label:(0,x.__)("Layout","kubio")},o))}const Pi=(0,E.compose)([(0,w.withSelect)((e=>{const{getPage:t=p().noop}=e("kubio/edit-site")||{};return{currentPage:t()}}))])((function(e){const{currentPage:t}=e,{getBlocks:n}=(0,w.useSelect)("core/block-editor"),o=p().get(t,["context","postId"]),[r,i]=(0,a.useState)();return(0,a.useEffect)((()=>{const e=n(),t=(0,ve.findBlockByName)(e,"kubio/query-layout");i(t)}),[o]),r?(0,a.createElement)(k.PanelBody,{title:(0,x.__)("Blog layout","kubio"),initialOpen:!0},(0,a.createElement)(xi,C({},e,{layoutBlock:r}))):null})),Ri=function(e){let{onNewTemplate:t}=e;const[n,o]=(0,a.useState)(!1);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"edit-post-template__actions"},(0,a.createElement)(Hn.ProItem,{tag:k.Button,isPrimary:!0,onClick:()=>o(!0),urlArgs:{source:"template",content:"create-new"}},(0,x.__)("Create new template","kubio")),n&&(0,a.createElement)(P.TemplateWizard,{onNewTemplate:t,onClose:()=>{o(!1)}})))},Ai=function(){const{currentPostType:e,currentTemplate:t,currentTemplateLabel:n,availableTemplates:o}=(0,w.useSelect)((e=>{var t;const{getCurrentPageTemplate:n,getCurrentPostType:o,getAvailablePageTemplates:r}=e(h.STORE_KEY),i=o();let a=n();i===a&&(a="");const l=r();return{currentPostType:i,currentTemplate:a,currentTemplateLabel:(null===(t=(0,m.find)(l,{value:a}))||void 0===t?void 0:t.label)||"",availableTemplates:l}}),[]),{onNewTemplate:r,assignTemplate:i,assignClassicTemplate:l}=(0,s.useTemplateData)("header"),c=(0,s.useDeepMemo)((()=>{const e=o.reduce(((e,t)=>{const n=t.source||"custom";return{...e,[n]:[...e[n]||[],t]}}),{});return h.templateGroupPriorities.map((t=>({label:h.templateGroups[t],items:e[t]}))).filter((e=>{var t;return null===(t=e.items)||void 0===t?void 0:t.length}))}),[o]);return"page"!==e||"front-page"===(null==t?void 0:t.replace(".php",""))?(0,a.createElement)(a.Fragment,null):(0,a.createElement)(k.PanelBody,{title:(0,x.sprintf)(/* translators: %s: template title */(0,x.__)("Template: %s","kubio"),n)},(0,a.createElement)(P.GutentagSelectControl,{hideLabelFromVision:!0,label:(0,x.__)("Template:","kubio"),value:t,onChange:async function(e){Object.values(s.defaultTemplatesByPostType).includes(e)&&(e="");const t=o.find((t=>t.value===e));t&&((null==t?void 0:t.isClassicTemplate)?l(e):i(e))},options:c}),(0,a.createElement)(Ri,{onNewTemplate:r}))},Oi=["page","post","product"],Ni=e=>{let{areaIdentifier:t}=e;const{currentSidebar:n,isInnerPage:o,isWooPage:r}=(0,w.useSelect)((e=>({isWooPage:e(h.STORE_KEY).getIsWooCommercePage(),currentSidebar:e(h.STORE_KEY).getEditorOpenedSidebar(),isInnerPage:e(h.STORE_KEY).getIsInnerPage()})),[]),i=null==n?void 0:n.endsWith(t),l=o&&!r;return(0,a.createElement)("span",{className:"kubio-page-settings"},i&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Pi,null),l&&(0,a.createElement)(Ai,null),(0,a.createElement)(Ci,null),(0,a.createElement)(Ti,null),(0,a.createElement)(Ei,null),(0,a.createElement)(wi,null),(0,a.createElement)(vi,null),(0,a.createElement)(Si,null)))};function Mi(e){let{parentAreaIdentifier:t}=e;const n=`${t}/page-settings`,{postType:o}=(0,w.useSelect)((e=>{const{getCurrentPostType:t}=e(h.STORE_KEY);return{postType:t()}}),[]);return Oi.includes(o)?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(cn,{title:(0,x.__)("Page Settings","kubio"),areaIdentifier:n},(0,a.createElement)(Ni,{areaIdentifier:n}))):null}const Di=e=>{let{parentAreaIdentifier:t}=e;const n=`${t}/style-presets`,o=(0,x.__)("Style Presets","kubio");return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(cn,{title:(0,a.createElement)("span",{className:"kubio-sidebar-panel-with-icon__title"},(0,a.createElement)(st,{icon:ye.StylePresetsIcon}),(0,a.createElement)("span",null,o)),areaIdentifier:n},(0,a.createElement)(Bi,{AREA_IDENTIFIER:n})))},Bi=(0,a.memo)((e=>{let{AREA_IDENTIFIER:t}=e;return t===(0,w.useSelect)((e=>{var t,n;return null===(t=e(h.STORE_KEY))||void 0===t||null===(n=t.getEditorOpenedSidebar())||void 0===n?void 0:n.replace("kubio/edit-site/sidebar/","")}),[])?(0,a.createElement)(Li,null):(0,a.createElement)(a.Fragment,null)})),Li=(0,a.memo)((()=>(0,a.createElement)("div",{className:"kubio-style-preset-panel__container"},(0,a.createElement)(fn,null),(0,a.createElement)(Tn,null))));function zi(e){let{beforeSectionsList:t,afterSectionsList:n}=e;const o=(0,s.usePageTitle)(),{uiVersion:r}=(0,g.useUIVersion)();return(0,a.createElement)(tn,{title:(0,a.createElement)(a.Fragment,null,(0,a.createElement)("span",{className:"preview-notice"},(0,x.__)("You are editing","kubio")),(0,a.createElement)("span",{className:"panel-title site-title"},(0,ve.fromHtmlEntities)(o))),areaIdentifier:"document"},t,1===r&&(0,a.createElement)(Mi,{parentAreaIdentifier:"document"}),(0,a.createElement)(Ir,null),(0,a.createElement)(Di,{parentAreaIdentifier:"document"}),(0,a.createElement)(_r,null),(0,a.createElement)(vr,null),2===r&&(0,a.createElement)(Mi,{parentAreaIdentifier:"document"}),(0,a.createElement)(li,{parentAreaIdentifier:"document"}),(0,a.createElement)(_i,{parentAreaIdentifier:"document"}),n)}const Fi=window.kubio.inspectors,{Slot:Gi,Fill:Hi}=(0,k.createSlotFill)("ColibriEditSiteBlockEditorSidebarInspector"),Ui=()=>{const{currentSidebar:e,selectedBlock:t}=(0,w.useSelect)((e=>{var t,n;return{currentSidebar:(null===(t=e(h.STORE_KEY).getEditorOpenedSidebar())||void 0===t||null===(n=t.split)||void 0===n?void 0:n.call(t,"/sidebar/").at(1))||null,selectedBlock:e("core/block-editor").getSelectedBlock()}}),[]),[n]=(0,Fi.useCurrentInspectorTab)();return(0,ve.showSupplementaryUpgradeToPRO)()||"document"===e?(0,a.createElement)(Hn.UpgradeToPro,{urlArgs:{source:t?t.name:e,content:t?n:""}}):(0,a.createElement)(a.Fragment,null)},Wi=()=>{const{subsidebars:e}=(0,w.useSelect)((e=>({subsidebars:e(h.STORE_KEY).getSubSidebars()})));return(0,f.useGetGlobalSessionProp)("ready",!1)?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(zi,null),(0,a.createElement)(Wn,null,(0,a.createElement)(Gi,{bubblesVirtually:!0})),(0,m.map)(e,((e,t)=>(0,a.createElement)(a.Fragment,{key:t},e)))):null},ji=Hi,Vi={content:()=>(0,a.createElement)(Fi.ContentBlockInspector,null),style:()=>(0,a.createElement)(Fi.StyleBlockInspector,null),advanced:()=>(0,a.createElement)(Fi.AdvancedStyleBlockInspector,null)},Ki=(0,Kt.getNamesOfBlocks)(),$i=[Ki.HEADER,Ki.FOOTER,Ki.QUERY_LAYOUT,Ki.HERO,Ki.SECTION,Ki.ROW,Ki.COLUMN,Ki.QUERY,Ki.LOOP,Ki.LOOP_ITEM],qi=[{name:"content",title:()=>{const e=(0,w.useSelect)((e=>{var t;return null===(t=e("core/block-editor").getSelectedBlock())||void 0===t?void 0:t.name}));let t=(0,x.__)("Layout","kubio");return-1===$i.indexOf(e)&&(t=(0,x.__)("Content","kubio")),(0,a.createElement)("span",{className:"kubio-tab-panel"},(0,a.createElement)(st,{icon:ye.LayoutIcon}),(0,a.createElement)("span",{className:"kubio-tab-panel-text"},t))},className:"tab-content"},{name:"style",title:()=>(0,a.createElement)("span",{className:"kubio-tab-panel"},(0,a.createElement)(st,{icon:ye.StyleIcon}),(0,a.createElement)("span",{className:"kubio-tab-panel-text"},(0,x.__)("Style","kubio"))),className:"tab-style"},{name:"advanced",title:()=>(0,a.createElement)("span",{className:"kubio-tab-panel"},(0,a.createElement)(st,{icon:ye.AdvancedIcon}),(0,a.createElement)("span",{className:"kubio-tab-panel-text"},(0,x.__)("Advanced","kubio"))),className:"tab-advanced"}],Yi=()=>{const e=Vi.content;return(0,a.createElement)("div",{className:"kubio-block-inspector-tab-content default-inspector"},(0,a.createElement)(Fi.BlockInspectorTopControls.Slot,{bubblesVirtually:!0}),(0,a.createElement)(e,null))},Xi=(0,E.compose)((0,w.withSelect)((e=>{const{getSelectedBlock:t}=e("core/block-editor"),{hasBlockSupport:n}=e("core/blocks"),o=t();return{isBlockSelected:o&&o.clientId,supportsKubio:o&&(o.name.startsWith("kubio/")||"core/post-content"===o.name||n(o.name,"kubio"))}})))((e=>{let{isBlockSelected:t,supportsKubio:n}=e;const[o,r]=(0,Fi.useCurrentInspectorTab)(),{selectedBlockName:i}=(0,w.useSelect)((e=>{const t=e("core/block-editor").getSelectedBlock();return{selectedBlockName:null==t?void 0:t.name}})),l=(0,a.useRef)(!0);(0,a.useMemo)((()=>{l.current=!0}),[i]);const s=(0,w.useSelect)((e=>{const{getKubioEditorMode:t}=e("kubio/edit-site")||{};return"simple"===(null==t?void 0:t())}),[]),c=(0,a.useMemo)((()=>qi.filter((e=>s&&"advanced"===e.name?null:e))),[s]);return t?n?(0,a.createElement)(P.TabPanel,{className:"kubio-advanced-block-inspector",currentTab:o,onSelect:r,tabs:c},(e=>{let t=Vi[e.name];return!0===l.current&&(t=Vi.content,"content"===e.name&&(l.current=!1)),(0,a.createElement)("div",{className:"kubio-block-inspector-tab-content kubio-inspector"},(0,a.createElement)(Fi.BlockInspectorTopControls.Slot,{bubblesVirtually:!0}),(0,a.createElement)(t,null))})):(0,a.createElement)(Yi,null):null})),Qi=window.kubio.styleManager,Zi="editor-styles-wrapper",Ji="wp-editor-classic-layout-styles",ea=e=>{if("BUTTON"===e.nodeName){const t=["forminator-ui","wpcf7-form ","wpforms-form","mc4wp-form"],n=e.closest("form"),o=t.some((e=>{var t;return null==n||null===(t=n.classList)||void 0===t?void 0:t.contains(e)}));if(n&&!n.getAttribute("action")&&!o)return}e.addEventListener("click",(e=>{e.preventDefault()}))},ta=(0,a.forwardRef)((function(e,t){let{contentRef:n,children:o,head:r,headHTML:i,contentHolderSelector:l,assetsHolderSelector:c,src:u,onLoad:d=m.noop,execStylesheetCompat:p=!0,...g}=e;const[b,_]=(0,a.useState)(),[v,y]=(0,a.useState)(),k=(0,f.useCurrentPageBodyClasses)(),S=(0,f.useSetGlobalSessionProp)("ownerDocument"),I=(0,f.useSetGlobalSessionProp)("blockEditorRootClasses",""),T=(0,a.useRef)(),P=(0,f.useGetGlobalSessionProp)("ready",!1),{currentTemplateSource:R,kubioThemesBaseURL:A,isInserterOpen:O,isListViewOpen:N}=(0,w.useSelect)((e=>{const{getCurrentKubioTemplateSource:t,getSettings:n}=e(h.STORE_KEY);return{currentTemplateSource:t(),kubioThemesBaseURL:n().kubioThemesBaseURL,isInserterOpen:e(h.STORE_KEY).getOpenedInserter(),isListViewOpen:e(h.STORE_KEY).isListViewOpened()}}),[]);(0,a.useEffect)((()=>{!P&&u&&(_(null),y(null),S(window.document),(0,Qi.removeStyleManager)(b))}),[u,P]),(0,a.useEffect)((()=>{if(!P||!b)return;let e=!1;const t=P&&u&&b;P&&!u&&b&&["kubio-custom","kubio"].includes(R)&&(e=!0),["kubio-custom","kubio"].includes(R)?(e=>{let t=e.querySelector(".kubio-block-vars-reset");t||(t=e.createElement("style"),t.classList.add("kubio-block-vars-reset"),t.textContent="\n\t\t:root,\n\t\tbody,\n\t\tbody *,\n\t\t.editor-styles-wrapper .block-editor-block-list__layout.is-root-container > *\n\t\t{\n\t\t\t--wp--style--block-gap:0px;\n\t\t\t--gallery-block--gutter-size:0.5em;\n\t\t\t--global-content-width: unset;\n\t\t}",e.head.appendChild(t))})(b):(e=>{const t=e.querySelector(".kubio-block-vars-reset");var n;t&&(null==t||null===(n=t.remove)||void 0===n||n.call(t))})(b),b.querySelectorAll(`link[href^="${A}"]`).forEach((t=>{const n=null==t?void 0:t.id.replace(/(.*?)-css$/,"$1");n&&b.querySelectorAll(`style[id*="${n}-"]`).forEach((t=>{t.sheet&&(t.sheet.disabled=e)})),t.sheet&&(t.sheet.disabled=e)})),b.querySelectorAll(["wp-reset-editor-styles-css","wp-editor-classic-layout-styles-css","common-css","forms-css"].map((e=>`link#${e}`))).forEach((e=>{e.sheet&&(e.sheet.disabled=t)}))}),[P,u,R,b,A]),(0,a.useEffect)((()=>{if(b&&k.length){const e=Array.from(b.body.classList);b.body.setAttribute("class",(0,m.uniq)(e.concat(k)).join(" "))}}),[b,k]);const[,M]=(0,f.useGlobalSessionProp)("blocksOwnerDocument",null,[]),[,D]=(0,f.useGlobalSessionProp)("currentPageHasBlocksContent",null,[]),B=(0,a.useCallback)((e=>{function t(){const{contentDocument:t}=e,{readyState:o,body:r}=t;if("complete"!==o)return!1;"function"==typeof n?n(r):n&&(n.current=r);const a=["a",'[type="submit"]',"form button"];new t.defaultView.MutationObserver((function(e){(0,m.each)(e,(function(e){e.target.querySelectorAll(a.join(",")).forEach(ea)}))})).observe(t,{childList:!0,subtree:!0}),t.querySelectorAll(a.join(",")).forEach(ea),p&&function(e){const t=new Map;Array.from(document.styleSheets).forEach((n=>{try{n.cssRules}catch(e){return}const{ownerNode:o,cssRules:r}=n;r&&Array.from(r).find((e=>{let{selectorText:t}=e;return t&&(t.includes(`.${Zi}`)||t.includes(".wp-block"))}))&&!t.has(o)&&(o.id&&-1!==o.id.indexOf(Ji)||o.href&&-1!==o.href.indexOf(Ji)?e.head.prepend(o.cloneNode(!0)):e.head.appendChild(o.cloneNode(!0)),t.set(o,!0))}))}(t),t.defaultView.isKubioBlockEditor=!0,t.defaultView.isInsideIframe=!0,t.defaultView.requestIdleCallback=t.defaultView.requestIdleCallback||function(e){const t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))})}),1)},t.defaultView.cancelIdleCallback=t.defaultView.cancelIdleCallback||function(e){clearTimeout(e)},function(e,t){e.head.innerHTML="<style>/* head style start */</style>"+t+"<style>/* head style end */</style><style>*{scroll-behavior:  auto !important; } html#kubio {height:auto!important; margin-top:initial !important}</style>"+e.head.innerHTML}(t,i),function(e){const{defaultView:t}=e,{frameElement:n}=t;function o(e){const{keyCode:o,ctrlKey:r,metaKey:i}=e;if((65===o||95===o)&&(r||i)){const t=e.target.hasAttribute("contenteditable")?e.target:e.target.closest("[contenteditable]");if(t)return((e,t)=>(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),e&&e.ownerDocument.execCommand("selectAll",!1,null),!1))(t,e)}const a=Object.getPrototypeOf(e).constructor.name,l=window[a],s={};for(const t in e)s[t]=e[t];if(e instanceof t.MouseEvent){const e=n.getBoundingClientRect();s.clientX+=e.left,s.clientY+=e.top}const c=new l(e.type,s);!n.dispatchEvent(c)&&e.preventDefault()}const r=["keydown","keypress","dragover"];for(const t of r)e.addEventListener(t,o)}(t),_(t),S(t);let s=l&&t.querySelector(l),c="";if(l&&s){const e=s.parentElement;1===e.children.length&&(s.remove(),s=e),c=s.getAttribute("class"),s.setAttribute("class","kubio-hybrid-template-content-edit")}I(c);let h=t.body;return s?h=s:(u||l)&&(h.classList.add("kubio-hybrid-no-block-content"),D(!1)),h.classList.add(Zi),h.classList.add("wp-embed-responsive"),d(e,t),y(h),M(t),!0}e&&(e.contentDocument.body.parentElement.className="kubio-iframe",u?e.addEventListener("load",(()=>{t()})):t()||e.addEventListener("load",(()=>{t()})))}),[]),L=(0,a.useMemo)((()=>!!b&&(c&&b.querySelector(c)||b.head)),[c,b]),z=(0,a.useMemo)((()=>({ownerDocument:b||window.document})),[b]);return(0,a.createElement)(s.OwnerDocumentContext.Provider,{value:z},(0,a.createElement)("iframe",C({},g,{ref:(0,E.useMergeRefs)([t,B,T]),tabIndex:"0",title:(0,x.__)("Editor canvas","kubio"),className:"kubio-iframe",name:"editor-canvas",src:u}),v&&(0,a.createPortal)(o,v),L&&(0,a.createPortal)(r,L)))})),na=async(e,t)=>new Promise((n=>{if(-1!==Array.from(e.ownerDocument.querySelectorAll("script[src]")).map((e=>e.src)).indexOf(t))return;const o=e.ownerDocument.createElement("script");o.async=!0,o.src=t,e.appendChild(o),o.addEventListener("load",n)})),oa=(0,m.debounce)((async function(e,t){for((arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.noop)(),t=window.structuredClone(t);t.length;){const n=t.shift();await na(e,n)}}),1e3),ra=[{value:"infographic-label",label:(0,x.__)("infographic label","kubio")},{value:"infographic-number",label:(0,x.__)("infographic number","kubio")},{value:"address",label:(0,x.__)("address","kubio")},{value:"phone",label:(0,x.__)("phone number","kubio")},{value:"email",label:(0,x.__)("email","kubio")}],ia=e=>{let{setIsModalVisible:t}=e;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.MenuGroup,null,(0,a.createElement)(k.MenuItem,{onClick:()=>t(!0)},(0,x.__)("AI block short desc","kubio"))))},aa=()=>{const[e,t]=(0,a.useState)(!1),[n,o]=(0,a.useState)(""),r=(0,a.useRef)({clientId:null,onClose:m.noop}),{dataHelper:i}=(0,s.useKubioDataHelper)({clientId:r.current.clientId});(0,a.useEffect)((()=>{o(i.getAttribute("kubioAI.desc",""))}),[i,r.current.clientId]);const l=(0,a.useCallback)((()=>{i.setAttribute("kubioAI.desc",n||""),t(!1),r.current.onClose()}),[i,n]),c=(0,a.useCallback)((()=>{t(!1),r.current.onClose()}),[]),u=(0,a.useCallback)(((e,n)=>{r.current={clientId:n,onClose:e},t(!0)}),[]);return(0,a.createElement)(a.Fragment,null,e&&(0,a.createElement)(k.Modal,{title:(0,x.__)("Element short description","kubio"),shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,onRequestClose:c},(0,a.createElement)(k.BaseControl,null,(0,a.createElement)(P.SuggestionsInput,{label:(0,x.__)("Description","kubio"),options:ra,value:n,onChange:o,filterKeys:["value","label"],onSuggestionClick:(e,t)=>t(e.value),optionRender:e=>(0,a.createElement)("div",{className:"kubio-ai-language-style-select-item"},(0,a.createElement)("span",null,e.label),(0,a.createElement)("i",null,e.value))})),(0,a.createElement)(k.Flex,{align:"flex-start"},(0,a.createElement)(k.Button,{variant:"primary",onClick:l},(0,x.__)("Save","kubio")),(0,a.createElement)(k.Button,{variant:"secondary",onClick:c},(0,x.__)("Cancel","kubio")))),(0,a.createElement)(y.BlockSettingsMenuControls,null,(e=>{let{onClose:t,firstBlockClientId:n}=e;return(0,a.createElement)(ia,{setIsModalVisible:()=>u(t,n)})})))},la=e=>{const{children:t,className:n}=e,o=(0,a.useRef)(),r=(0,a.useRef)(),[i,l]=(0,f.useGlobalSessionProp)("containerBgMediaUploadRef",{dataHelper:null,ref:null,blockId:null,value:null});(0,a.useEffect)((()=>{null!==r.current&&l({...i,ref:r})}),[r.current]);const s=(0,f.useGetGlobalSessionProp)("ready",!1);(0,a.useLayoutEffect)((()=>{const e=o.current;if(e&&s){var t;const n=null===(t=e.ownerDocument.querySelector("#kubio-scripts-template"))||void 0===t?void 0:t.content.querySelectorAll("script");n&&oa(e.ownerDocument.head,Array.from(n).map((e=>{let{src:t}=e;return t})).filter(Boolean))}}),[s]);const c=(0,w.useSelect)((e=>{var t;const{getSettings:n}=e(y.store);return null===(t=n())||void 0===t?void 0:t.supportsLayout}),[]),u=(0,y.useSetting)("layout")||{},{contentSize:d,wideSize:m}=u,p={type:"default",alignments:(0,a.useMemo)((()=>{const e=["left","center","right"];return d&&e.push("full"),m&&e.push("wide"),c?e:void 0}),[c,d,m])};return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{ref:o}),(0,a.createElement)(y.WritingFlow,null,(0,a.createElement)(y.BlockList,{__experimentalLayout:p,className:T()(n,"edit-site-block-editor__block-list","kubio-block-editor__block-list"),renderAppender:Kt.KubioBlockAppender}),(0,ve.getShowInternalFeatures)("ai")&&(0,a.createElement)(aa,null),t),(0,a.createElement)(y.MediaUploadCheck,null,(0,a.createElement)(y.MediaUpload,{allowedTypes:["image","video"],value:i.value,onSelect:e=>{const{dataHelper:t}=i;if(!t)return;const n=t.getStyle("background");"image"===n.type&&"image"===e.type?n.image[0].source.url=e.url:"video"===n.type&&"video"===e.type&&(n.video.internal.url=e.url),t.setStyle("background",n)},render:e=>{let{open:t}=e;return(0,a.createElement)("div",{ref:r,onClick:t})}})))};var sa=n(9457),ca=n.n(sa);const ua=()=>(0,a.createElement)("div",{className:"kubio-loading-logo"},(0,a.createElement)(k.Icon,{icon:ye.KubioLoader})),da=(0,a.memo)((()=>{const e=(0,E.useRefEffect)((e=>{e.contentWindow.document.open(),e.contentWindow.document.write(ca()),e.contentWindow.document.close();const t=e.contentDocument||e.contentWindow.document,n=null==t?void 0:t.querySelector("#content");n&&(0,s.reactRender)((0,a.createElement)(ua,null),n)}),[]);return(0,a.createElement)("iframe",{title:"kubio-loader",ref:e,className:"kubio-loading-logo-iframe"})}));let ma;const pa=(e,t)=>{var n,o;e&&(null===(n=e.querySelector("#kubio-editor-view"))||void 0===n||null===(o=n.classList)||void 0===o||o.remove("device-change-animation"),t?ma=e.defaultView.setTimeout((()=>{e.body.classList.add("kubio-iframe-holder--show"),e.body.classList.remove("kubio-iframe-holder--hide"),e.body.classList.remove("h-ui-disable-transitions")}),100):(e.defaultView.clearTimeout(ma),e.body.classList.remove("kubio-iframe-holder--show"),e.body.classList.add("kubio-iframe-holder--hide"),e.body.classList.add("h-ui-disable-transitions")))},ha=(0,E.pure)((e=>{let{iframe:t,deviceType:n}=e;const o=(0,y.__experimentalUseResizeCanvas)(n,!0),r=(0,a.useRef)(),i=(0,a.useRef)(),l=(0,a.useRef)(),s=(0,E.useMergeRefs)([r,(0,y.__unstableUseTypingObserver)()]);return(0,f.useEditorIsLoadedChanged)((e=>{var t,n;pa(null===(t=l.current)||void 0===t?void 0:t.ownerDocument,e),pa(null===(n=r.current)||void 0===n?void 0:n.ownerDocument,e)})),(0,a.createElement)(a.Fragment,null,(0,a.createElement)(y.BlockTools,{className:"kubio-block-tools",__unstableContentRef:r},(0,a.createElement)("div",{id:"kubio-editor-view",ref:i},(0,a.createElement)("div",{id:"kubio-iframe-holder",className:"editor-styles-wrapper edit-site-block-editor__editor-styles-wrapper",style:o,ref:l},t(s)),(0,a.createElement)(da,{key:"kubio-blinking-iframe"}))))})),ga="<style>body{width:100%;max-width:100%;overflow-x:hidden;}</style>",fa=()=>{const[e]=(0,b.useIsAIConnected)(),[t,n]=(0,b.useAIServiceInfo)(),o=(0,f.useGetGlobalSessionProp)("ready"),r=(0,a.useRef)(!1),i=(0,a.useRef)(n);i.current=n,(0,a.useEffect)((()=>{!r.current&&o&&e&&(r.current=!0,"started"!==t.state&&"ready"!==t.state)&&(i.current({remainingCredits:0,perPageCredits:1/0,state:"started"}),(async()=>{const{remaining_credits:e=0,per_page_credits:n=480,account_email:o=null,ai_image_cost:r=150,ai_section_cost:a=30}=await(0,b.getAIInfo)();i.current({...t,state:"ready",remainingCredits:e,perPageCredits:n,email:o,aiImageCost:r,aiSectionCost:a})})())}),[o,e,t])},ba=window.wp.htmlEntities,_a=(e,t)=>`<a ${va(e)}>${t}</a>`,va=e=>`href="${e}" target="_blank" rel="noreferrer noopener"`,ya=e=>{const{title:t,foreign_landing_url:n,creator:o,creator_url:r,license:i,license_version:a,license_url:l}=e,s=((e,t)=>{let n=e.trim();return"pdm"!==e&&(n=e.toUpperCase().replace("SAMPLING","Sampling")),t&&(n+=` ${t}`),["pdm","cc0"].includes(e)||(n=`CC ${n}`),n})(i,a),c=(0,ba.decodeEntities)(o);let u;return u=c?t?(0,x.sprintf)(// translators: %1s: Title of a media work from Openverse; %2s: Name of the work's creator; %3s: Work's licence e.g: "CC0 1.0".
(0,x._x)('"%1$s" by %2$s/ %3$s',"caption","kubio"),_a(n,(0,ba.decodeEntities)(t)),r?_a(r,c):c,l?_a(`${l}?ref=openverse`,s):s):(0,x.sprintf)(// translators: %1s: Link attributes for a given Openverse media work; %2s: Name of the work's creator; %3s: Works's licence e.g: "CC0 1.0".
(0,x._x)("<a %1$s>Work</a> by %2$s/ %3$s","caption","kubio"),va(n),r?_a(r,c):c,l?_a(`${l}?ref=openverse`,s):s):t?(0,x.sprintf)(// translators: %1s: Title of a media work from Openverse; %2s: Work's licence e.g: "CC0 1.0".
(0,x._x)('"%1$s"/ %2$s',"caption","kubio"),_a(n,(0,ba.decodeEntities)(t)),l?_a(`${l}?ref=openverse`,s):s):(0,x.sprintf)(// translators: %1s: Link attributes for a given Openverse media work; %2s: Works's licence e.g: "CC0 1.0".
(0,x._x)("<a %1$s>Work</a>/ %3$s","caption","kubio"),va(n),l?_a(`${l}?ref=openverse`,s):s),u.replace(/\s{2}/g," ")},ka=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await(0,w.resolveSelect)(S.store).getMediaItems({...e,orderBy:null!=e&&e.search?"relevance":"date"})).map((e=>{var t,n,o,r;return{...e,alt:e.alt_text,url:e.source_url,previewUrl:null===(t=e.media_details)||void 0===t||null===(n=t.sizes)||void 0===n||null===(o=n.medium)||void 0===o?void 0:o.source_url,caption:null===(r=e.caption)||void 0===r?void 0:r.raw}}))},Ea=[{name:"images",labels:{name:(0,x.__)("Images","kubio"),search_items:(0,x.__)("Search images","kubio")},mediaType:"image",async fetch(){return ka({...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},media_type:"image"})}},{name:"videos",labels:{name:(0,x.__)("Videos","kubio"),search_items:(0,x.__)("Search videos","kubio")},mediaType:"video",async fetch(){return ka({...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},media_type:"video"})}},{name:"audio",labels:{name:(0,x.__)("Audio","kubio"),search_items:(0,x.__)("Search audio","kubio")},mediaType:"audio",async fetch(){return ka({...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},media_type:"audio"})}},{name:"openverse",labels:{name:(0,x.__)("Openverse","kubio"),search_items:(0,x.__)("Search Openverse","kubio")},mediaType:"image",async fetch(){const e={...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},mature:!1,excluded_source:"flickr,inaturalist,wikimedia",license:"pdm,cc0"},t={per_page:"page_size",search:"q"},n=new URL("https://api.openverse.engineering/v1/images/");Object.entries(e).forEach((e=>{let[o,r]=e;const i=t[o]||o;n.searchParams.set(i,r)}));const o=await window.fetch(n,{headers:{"User-Agent":"WordPress/inserter-media-fetch"}});return(await o.json()).results.map((e=>{var t;return{...e,title:null!==(t=e.title)&&void 0!==t&&t.toLowerCase().startsWith("file:")?e.title.slice(5):e.title,sourceId:e.id,id:void 0,caption:ya(e),previewUrl:e.thumbnail}}))},getReportUrl:e=>{let{sourceId:t}=e;return`https://wordpress.org/openverse/image/${t}/report/`},isExternalResource:!0}],Sa=Ea;function wa(){var e,t;const{setOpenInserter:n}=(0,w.useDispatch)(h.STORE_KEY),{storedSettings:o,canvasMode:r,templateType:i,siteSettings:l}=(0,w.useSelect)((e=>{const{canUser:t,getEntityRecord:o}=e(S.store),{getSettings:r,getCanvasMode:i,getEditedPostType:a}=e(h.STORE_KEY);return{storedSettings:r(n),canvasMode:null==i?void 0:i(),templateType:a(),siteSettings:t("read","settings")?o("root","site"):void 0}}),[]),s=null!==(e=o.__experimentalAdditionalBlockPatterns)&&void 0!==e?e:o.__experimentalBlockPatterns,c=null!==(t=o.__experimentalAdditionalBlockPatternCategories)&&void 0!==t?t:o.__experimentalBlockPatternCategories,{restBlockPatterns:u,restBlockPatternCategories:d,templateSlug:m,userPatternCategories:p}=(0,w.useSelect)((e=>{const{getEditedPostType:t,getEditedPostId:n}=e(h.STORE_KEY),{getEditedEntityRecord:o,getUserPatternCategories:r}=e(S.store),i=o("postType",t(),n());return{restBlockPatterns:e(S.store).getBlockPatterns(),restBlockPatternCategories:e(S.store).getBlockPatternCategories(),templateSlug:i.slug,userPatternCategories:(null==r?void 0:r())||[]}}),[]),g=function(e){const t=null==e?void 0:e.match(/^(category|tag|taxonomy-([^-]+))$|^(((category|tag)|taxonomy-([^-]+))-(.+))$/);let n,o,r,i=!1;if(t)t[1]?n=t[2]?t[2]:t[1]:t[3]&&(n=t[6]?t[6]:t[4],o=t[7]),n="tag"===n?"post_tag":n;else{const t=null==e?void 0:e.match(/^(author)$|^author-(.+)$/);t&&(i=!0,t[2]&&(r=t[2]))}return(0,w.useSelect)((e=>{const{getEntityRecords:t,getTaxonomy:a,getAuthors:l}=e(S.store);let s,c;var u,d;if(n&&(s=null===(u=a(n))||void 0===u||null===(d=u.labels)||void 0===d?void 0:d.singular_name),o){const e=t("taxonomy",n,{slug:o,per_page:1});e&&e[0]&&(c=e[0].name)}if(i&&(s="Author",r)){const e=l({slug:r});e&&e[0]&&(c=e[0].name)}return{archiveTypeLabel:s,archiveNameLabel:c}}),[r,i,n,o])}(m),f=(0,a.useMemo)((()=>[...s||[],...u||[]].filter(((e,t,n)=>t===n.findIndex((t=>e.name===t.name)))).filter((e=>{let{postTypes:t}=e;return!t||Array.isArray(t)&&t.includes(i)}))),[s,u,i]),b=(0,a.useMemo)((()=>[...c||[],...d||[]].filter(((e,t,n)=>t===n.findIndex((t=>e.name===t.name))))),[c,d]);return(0,a.useMemo)((()=>{const{__experimentalAdditionalBlockPatterns:e,__experimentalAdditionalBlockPatternCategories:t,focusMode:n,...i}=o;return{...i,inserterMediaCategories:Sa,__experimentalBlockPatterns:f,__experimentalBlockPatternCategories:b,__experimentalUserPatternCategories:p,focusMode:("view"!==r||!n)&&n,__experimentalArchiveTitleTypeLabel:g.archiveTypeLabel,__experimentalArchiveTitleNameLabel:g.archiveNameLabel,pageOnFront:null==l?void 0:l.page_on_front,pageForPosts:null==l?void 0:l.page_for_posts}}),[o,f,b,p,r,g.archiveTypeLabel,g.archiveNameLabel,null==l?void 0:l.page_on_front,null==l?void 0:l.page_for_posts])}const Ca=(0,E.createHigherOrderComponent)((e=>t=>{const{templateType:n,page:o,deviceType:r,templateId:i}=(0,w.useSelect)((e=>{const{getTemplateType:t,getTemplateId:n,getPage:o,__experimentalGetPreviewDeviceType:r}=e(h.STORE_KEY);return{templateType:t(),templateId:n(),page:o(),deviceType:r()}}),[]),l={settings:wa(),templateType:n,page:o,deviceType:r,templateId:i};return o||n?(0,a.createElement)(e,C({},t,l)):null}),"currentEditorEntity"),Ia=(0,E.compose)(Ca,E.pure)((function(e){let{settings:t,templateType:n,page:o,deviceType:r,templateId:i}=e;fa();const[l,s,c]=(0,S.useEntityBlockEditor)("postType",n,{id:i}),{setPage:u}=(0,w.useDispatch)(h.STORE_KEY),d=(0,y.__unstableUseMouseMoveTypingReset)(),m=window.__kubioEditorStyles.html+ga,p=(0,w.useSelect)((e=>{const t=e(h.STORE_KEY).getCurrentKubioTemplateSource();return null==t?void 0:t.startsWith("kubio")}),[n,i]),g=(0,a.useMemo)((()=>t.styles),[p,t.styles]),f=(0,a.useCallback)((e=>(0,a.createElement)(ta,{headHTML:m,ref:d,head:(0,a.createElement)(y.__unstableEditorStyles,{styles:g}),contentRef:e},(0,a.createElement)(la,null))),[d,m,g]);return(0,a.createElement)(y.BlockEditorProvider,{settings:t,value:l,onInput:s,onChange:c,useSubRegistry:!1},(0,a.createElement)(y.BlockEditorKeyboardShortcuts,null),(0,a.createElement)(y.__experimentalLinkControl.ViewerFill,null,(0,a.useCallback)((e=>(0,a.createElement)(Gn,C({},e,{activePage:o,onActivePageChange:u}))),[o])),(0,a.createElement)(ji,null,(0,a.createElement)(Xi,null)),(0,a.createElement)(ha,{deviceType:r,iframe:f}))})),Ta=function(){var e,t;fa();const{setOpenInserter:n}=(0,w.useDispatch)(h.STORE_KEY),[o,r]=(0,a.useState)({}),{page:i,deviceType:l,classicTemplateId:s}=(0,w.useSelect)((e=>{const{getEntity:t,getPage:n,getClassicTemplateId:o,__experimentalGetPreviewDeviceType:r}=e(h.STORE_KEY);return{entity:t(),page:n(),classicTemplateId:o(),deviceType:r()}}),[n]),c=wa();(0,a.useEffect)((()=>{Se()(i,o)||r(i)}),[i]);const[u,d,m]=(0,S.useEntityBlockEditor)("postType",null==o||null===(e=o.context)||void 0===e?void 0:e.postType,{id:null==o||null===(t=o.context)||void 0===t?void 0:t.postId}),{setPage:p}=(0,w.useDispatch)(h.STORE_KEY),g=(0,y.__unstableUseMouseMoveTypingReset)(),b=(0,f.useSetGlobalSessionProp)("ready"),_=(e,t)=>{t.body.id="kubio",b(!0)},v=window.__kubioEditorStyles.html+ga,k=(0,f.useGetGlobalSessionProp)("blockEditorRootClasses",""),E=(0,a.useCallback)((e=>(null==o?void 0:o.path)&&(0,a.createElement)(ta,{headHTML:v,ref:g,contentRef:e,src:(0,Sr.addQueryArgs)(null==o?void 0:o.path,{"__kubio-site-edit-iframe-preview":!0,"__kubio-site-edit-iframe-classic-template":s}),contentHolderSelector:"#kubio-site-edit-content-holder",assetsHolderSelector:"#kubio-site-edit-assets-holder",onLoad:_,execStylesheetCompat:!1},(0,a.createElement)(la,{className:k},(0,a.createElement)(P.LayoutPicker,null)))),[null==o?void 0:o.path,g,v,v,c.styles,k]);return(0,a.createElement)(y.BlockEditorProvider,{settings:c,value:u,onInput:d,onChange:m,useSubRegistry:!1},(0,a.createElement)(y.BlockEditorKeyboardShortcuts,null),(0,a.createElement)(y.__experimentalLinkControl.ViewerFill,null,(0,a.useCallback)((e=>(0,a.createElement)(Gn,C({},e,{activePage:o,onActivePageChange:p}))),[o])),(0,a.createElement)(ji,null,(0,a.createElement)(Xi,null)),(0,a.createElement)(ha,{deviceType:l,iframe:E}))},xa=()=>{const[e,t]=(0,a.useState)([]),n=(0,w.useSelect)((e=>{const{getEntityRecords:t}=e("core");return t("postType","kubio_section",{per_page:-1})}),[]),o="kubio-content/custom";return(0,a.useEffect)((()=>{let r=e;null==n||n.forEach((t=>{if(e.includes(t.id))return;const n={name:`${o}/custom-section/${t.id}`,title:t.title.rendered,categories:[o],description:(0,x.__)("Custom section","kubio"),screenshot:!1,fromColibri:!0,fromFirebase:!0,isCustomSection:!0,isProOnFree:!1,isGutentagPattern:!0,content:JSON.parse(t.content.raw),internalTags:[],publicTags:[]};(0,l.registerPattern)(n),r=[...r,t.id]})),t(r)}),[n,e]),null};function Pa(e){let{record:t,checked:n,onChange:o,closePanel:r}=e;const{name:i,kind:l,title:s,key:c}=t,u=(0,w.useSelect)((e=>{var t;const{blocks:n=[]}=e("core").getEditedEntityRecord(l,i,c),o=e("core/block-editor").getBlockParents(null===(t=n[0])||void 0===t?void 0:t.clientId);return o[o.length-1]}),[]),d=(0,w.useSelect)((e=>{if("postType"!==l||"wp_template"!==i)return s;const t=e("core").getEditedEntityRecord(l,i,c);return e("core/editor").__experimentalGetTemplateInfo(t).title}),[i,l,s,c]),m=(0,w.useSelect)((e=>e("core/block-editor").getSelectedBlockClientId()===u),[u]),p=m?(0,x.__)("Selected","kubio"):(0,x.__)("Select","kubio"),{selectBlock:h}=(0,w.useDispatch)("core/block-editor"),g=(0,a.useCallback)((()=>h(u)),[u]),f=(0,a.useCallback)((()=>{h(u),r()}),[u]);return(0,a.createElement)(k.PanelRow,null,(0,a.createElement)(k.CheckboxControl,{label:(0,a.createElement)("strong",null,d||(0,x.__)("Untitled","kubio")),checked:n,onChange:o}),u?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.Button,{onClick:g,className:"entities-saved-states__find-entity",disabled:m},p),(0,a.createElement)(k.Button,{onClick:f,className:"entities-saved-states__find-entity-small",disabled:m},p)):null)}const Ra={site:(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})),page:(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M7 5.5h10a.5.5 0 01.5.5v12a.5.5 0 01-.5.5H7a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM17 4H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V6a2 2 0 00-2-2zm-1 3.75H8v1.5h8v-1.5zM8 11h8v1.5H8V11zm6 3.25H8v1.5h6v-1.5z"}))};function Aa(e){let{list:t,unselectedEntities:n,setUnselectedEntities:o,closePanel:r}=e;const i=t[0],l=(0,w.useSelect)((e=>e("core").getEntity(i.kind,i.name)),[i.kind,i.name]),{name:s}=i,c=Ra[s];return(0,a.createElement)(k.PanelBody,{title:l.label,initialOpen:!0,icon:c},t.map((e=>(0,a.createElement)(Pa,{key:e.key||`${e.kind}-${e.name}-${e.property}`,record:e,checked:!(0,m.some)(n,(t=>t.kind===e.kind&&t.name===e.name&&t.key===e.key)),onChange:t=>o(e,t),closePanel:r}))))}const Oa={title:(0,x.__)("Title","kubio"),description:(0,x.__)("Tagline","kubio"),site_logo:(0,x.__)("Logo","kubio"),sitelogo:(0,x.__)("Logo","kubio"),show_on_front:(0,x.__)("Show on front","kubio"),page_on_front:(0,x.__)("Page on front","kubio")},Na={wp_template_part:e=>(0,x._n)("template part","template parts",e,"kubio"),wp_template:e=>(0,x._n)("template","templates",e,"kubio"),post:e=>(0,x._n)("post","posts",e,"kubio"),page:e=>(0,x._n)("page","pages",e,"kubio"),site:e=>(0,x._n)("site","sites",e,"kubio")},Ma=(0,k.withFocusReturn)((function(e){let{isOpen:t,close:n}=e;const{dirtyEntityRecords:o}=(0,w.useSelect)((e=>{const t=e(S.store).__experimentalGetDirtyEntityRecords().filter((e=>!("root"===e.kind&&"site"===e.name))),n=e(S.store).getEntityRecordEdits("root","site"),o=[];for(const e in n)o.push({kind:"root",name:"site",title:Oa[e]||e,property:e});return{dirtyEntityRecords:[...t,...o]}}),[]),{saveEditedEntityRecord:r}=(0,w.useDispatch)("core"),i=Object.values((0,m.groupBy)(o,"name")),l=[];i.forEach((e=>{Na[e[0].name]&&l.push(Na[e[0].name](e.length))}));const[s,c]=(0,a.useState)([]),u=(e,t)=>{let{kind:n,name:o,key:r}=e;c(t?s.filter((e=>e.kind!==n||e.name!==o||e.key!==r)):[...s,{kind:n,name:o,key:r}])},d=(0,a.useCallback)((()=>n()),[n]),p=(0,x.__)("Save","kubio");return t?(0,a.createElement)("div",{className:"entities-saved-states__panel kubio-entities-saved-states__panel"},(0,a.createElement)("div",{className:"entities-saved-states__panel-header"},(0,a.createElement)(k.Button,{isPrimary:!0,disabled:o.length-s.length==0,onClick:()=>{const e=(()=>{const e=o.filter((e=>{let{kind:t,name:n,key:o}=e;return!(0,m.some)(s,(e=>e.kind===t&&e.name===n&&e.key===o))}));return e})();n(e),e.forEach((e=>{let{kind:t,name:n,key:o}=e;r(t,n,o)}))},className:"editor-entities-saved-states__save-button"},p),(0,a.createElement)(k.Button,{onClick:d,icon:$t,label:(0,x.__)("Close panel","kubio")})),(0,a.createElement)("div",{className:"entities-saved-states__text-prompt"},(0,a.createElement)("strong",null,(0,x.__)("Select the changes you want to save","kubio")),(0,a.createElement)("p",null,(0,x.__)("Some changes may affect other areas of your site.","kubio"))),i.map((e=>(0,a.createElement)(Aa,{key:e[0].name,list:e,closePanel:d,unselectedEntities:s,setUnselectedEntities:u})))):null})),Da=(0,a.createElement)(R.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,a.createElement)(R.Path,{d:"M3 6h11v1.5H3V6Zm3.5 5.5h11V13h-11v-1.5ZM21 17H10v1.5h11V17Z"}));var Ba=n(4670),La=n.n(Ba);const za="IS_AI_PAGE_GENERATING_"+La().generate(),Fa=()=>(0,f.useGlobalSessionProp)(za),Ga=["front-page","single-post","page","archive","search","404","index"],Ha="root",Ua="template-parts",Wa="templates",ja="templates-general",Va="templates-pages",Ka="templates-posts",$a="kubio__custom-templates",qa="kubio__theme-templates",Ya="kubio__kubio-templates",Xa=[{area:"header",menu:"template-parts-headers",title:(0,x.__)("Headers","kubio")},{area:"footer",menu:"template-parts-footers",title:(0,x.__)("Footers","kubio")},{area:"sidebar",menu:"template-parts-sidebars",title:(0,x.__)("Sidebars","kubio")},{area:"uncategorized",menu:"template-parts-general",title:(0,x.__)("General","kubio")}];function Qa(e){let{openEntitiesSavedStates:t}=e;const{saveEditedEntityRecord:n}=(0,w.useDispatch)("core"),{isSaving:o,isDirty:r}=(0,w.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t,isSavingEntityRecord:n}=e("core"),o=t();return{isDirty:o.length>0,isSaving:(0,m.some)(o,(e=>n(e.kind,e.name,e.key)))}})),i=!r||o,l=(0,x.__)("Save","kubio"),{dirtyEntityRecords:s}=(0,w.useSelect)((e=>{const t=e(S.store).__experimentalGetDirtyEntityRecords().filter((e=>!("root"===e.kind&&"site"===e.name))),n=e(S.store).getEntityRecordEdits("root","site"),o=[];for(const e in n)o.push({kind:"root",name:"site",property:e});return{dirtyEntityRecords:[...t,...o]}}),[]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.Button,{isPrimary:!0,className:"edit-site-save-button__button","aria-disabled":i,disabled:i,isBusy:o,onClick:i?void 0:()=>{s.forEach((e=>{let{kind:t,name:o,key:r}=e;n(t,o,r)}))}},l),(0,a.createElement)(k.Button,{isPrimary:!0,icon:ye.ArrowDown,iconSize:24,className:"edit-site-save-button__dropdown","aria-disabled":i,disabled:i,onClick:i?void 0:t}))}const Za=(0,a.memo)((e=>{let{onClose:t}=e;const n=(0,ve.isAdvancedMode)()?(0,x.__)("Switch to quick mode","kubio"):(0,x.__)("Switch to advanced mode","kubio");return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.MenuGroup,{className:"kubio-block-settings-control"},(0,a.createElement)(k.MenuItem,{tag:k.MenuItem,onClick:()=>{t(),(0,ve.toggleAdvancedMode)()}},n)))})),Ja=(0,E.createHigherOrderComponent)((e=>t=>{const{isSelected:n}=t;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(e,t),n&&(0,a.createElement)(y.BlockSettingsMenuControls,null,(e=>{let{onClose:t}=e;return(0,a.createElement)(Za,{onClose:t})})))}));(0,u.addFilter)("editor.BlockListBlock","kubio.withToggleAdvancedMode",Ja,9999);const el=()=>{const{kubioEditorMode:e}=(0,w.useSelect)((e=>{const{getKubioEditorMode:t}=e("kubio/edit-site");return{kubioEditorMode:t()}})),{setKubioEditorMode:t}=(0,w.useDispatch)("kubio/edit-site");return(0,a.createElement)("div",{className:"kubio-easy-mode-toggle"},(0,a.createElement)(P.ToggleControl,{label:(0,x.__)("Advanced Mode","kubio"),value:e===h.EASY_MODE_VALUES.full,onChange:e=>{t(e?h.EASY_MODE_VALUES.full:h.EASY_MODE_VALUES.simple)}}))},tl=window.kubio.adminPanel,nl=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})),ol=window.wp.a11y;function rl(e){let{feature:t,label:n,info:o,messageActivated:r,messageDeactivated:i}=e;const l=(0,w.useSelect)((e=>e(h.STORE_KEY).isFeatureActive(t)),[]),{toggleFeature:s}=(0,w.useDispatch)(h.STORE_KEY);return(0,a.createElement)(k.MenuItem,{icon:l&&O,isSelected:l,onClick:(0,m.flow)(s.bind(null,t),(()=>{l?(0,ol.speak)(i||(0,x.__)("Feature deactivated","kubio")):(0,ol.speak)(r||(0,x.__)("Feature activated","kubio"))})),role:"menuitemcheckbox",info:o},n)}const il={className:"edit-site-more-menu__content",position:"bottom left"},al={tooltipPosition:"bottom"},ll=()=>{const e=(0,tl.useColibriConvertProps)(),[t,n]=(0,a.useState)(!1);return(0,a.createElement)(k.MenuItem,{onClick:async()=>{n(!0),await(0,tl.convertSiteTemplate)(e),n(!1)},role:"menuitemcheckbox"},(0,x.__)("Convert Colibri Site","kubio"),t&&(0,a.createElement)(k.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,isDismissible:!1,title:(0,x.__)("Convert Colibri template","kubio"),onRequestClose:()=>n(!0)},(0,x.__)("Converting template…","kubio")))},sl=()=>{const{isGutentagDebug:e,baseUrl:t,currentPage:n,hasBlockSelected:o,isAICapabilityEnabled:r}=(0,w.useSelect)((e=>{const{isGutentagDebug:t=p().noop,getPage:n=p().noop,isAICapabilityEnabled:o}=e(h.STORE_KEY)||{},{url:r}=e("core").getEntityRecord("root","site")||{};return{isGutentagDebug:t(),currentPage:n(),baseUrl:r,hasBlockSelected:!!e("core/block-editor").getSelectedBlockClientId(),isAICapabilityEnabled:o()}}),[]),i=(0,a.useRef)(m.noop),l=()=>{const e=null==n?void 0:n.link,o=encodeURIComponent(e);window.open(`${t}/wp-admin/customize.php?url=${o}`).focus()},{toggleGutentagDebug:c}=(0,w.useDispatch)(h.STORE_KEY),u=(0,ve.getShowInternalFeatures)();let d=(0,a.createElement)(a.Fragment,null);var f,_;u&&(d=(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.MenuItem,{icon:e&&O,isSelected:e,onClick:()=>c(!e),role:"menuitemcheckbox"},(0,x.__)("Toggle Kubio debug","kubio")),(null===(f=window)||void 0===f||null===(_=f.kubioUtilsData)||void 0===_?void 0:_.patternsOnTheFly)&&(0,a.createElement)(k.MenuItem,{onClick:()=>window.consoleOutputConvertedData(),role:"menuitemcheckbox"},(0,x.__)("Convert colibri data","kubio")),(0,a.createElement)(k.MenuItem,{onClick:()=>window.kubioSaveConvertedData(),role:"menuitemcheckbox"},(0,x.__)("Save converted content","kubio")),(0,a.createElement)(ll,null)));const{uiVersion:v,setUIVersion:y}=(0,g.useUIVersion)(),{openSidebar:E,toggleAICapabilities:S}=(0,w.useDispatch)(h.STORE_KEY),C=()=>{const e=2===v?1:2;y(e),2===e&&E(o?"block-inspector":"document")},[I,T]=lt(),[P,R]=(0,b.useIsAIConnected)(),A=(0,a.useCallback)((()=>{const e=!r;S(e),e&&!P&&(T(),i.current())}),[T,r,P,S]),N=1===v?(0,x.__)("Switch to Kubio Editor layout","kubio"):(0,x.__)("Switch to WordPress Editor layout","kubio"),M=1===v?(0,x.__)("Switch to the new Kubio editor layout for a more friendly editing experience","kubio"):(0,x.__)("Switch to the WordPress editor layout to have the default editing experience","kubio"),D=r?(0,x.__)("Disable Kubio AI capabilities","kubio"):(0,x.__)("Enable Kubio AI capabilities","kubio"),B=r?(0,x.__)("Hide Kubio AI buttons in editors interface","kubio"):(0,x.__)("Show Kubio AI buttons in editors interface","kubio"),[L]=(0,b.useAIServiceInfo)();(0,a.useCallback)((()=>{R(!1),(0,b.setAIKey)("")}),[R]);let z=(0,a.createElement)(a.Fragment,null);if((0,ve.getShowInternalFeatures)("cloud")){const[e,t,n]=(0,s.useKubioCloudConnect)();z=(0,a.createElement)(k.MenuGroup,{label:"Kubio Cloud"},"connected"!==e.status?(0,a.createElement)(k.MenuItem,{iconPosition:"left",onClick:t,info:(0,x.__)("Connect this site to Kubio Cloud","kubio")},(0,x.__)("Connect to Kubio Cloud","kubio")):(0,a.createElement)(k.MenuItem,{onClick:n,iconPosition:"left",info:(0,a.createElement)("span",{dangerouslySetInnerHTML:{__html:(0,x.sprintf)(// translators: %s is Kubio Cloud the account email
(0,x.__)("Currently connected as %s","kubio"),`<strong><em>${e.email}</em></strong>`)}})},(0,x.__)("Disconnect from Kubio Cloud","kubio")))}const F=(0,a.createElement)(k.MenuGroup,{label:"Kubio AI"},(0,a.createElement)(k.MenuItem,{onClick:A,iconPosition:"left",info:B},D));return(0,a.createElement)(a.Fragment,null,I,(0,a.createElement)(k.DropdownMenu,{className:"edit-site-more-menu",icon:nl,label:(0,x.__)("More tools & options","kubio"),popoverProps:il,toggleProps:al},(e=>{let{onClose:t}=e;return i.current=t,(0,a.createElement)(a.Fragment,null,z,F,(0,a.createElement)(k.MenuGroup,{label:(0,x._x)("View","noun","kubio")},(0,a.createElement)(k.MenuItem,{onClick:C,info:M},N),(0,a.createElement)(rl,{feature:"focusMode",label:(0,x.__)("Spotlight mode","kubio"),info:(0,x.__)("Focus on one block at a time","kubio"),messageActivated:(0,x.__)("Spotlight mode activated","kubio"),messageDeactivated:(0,x.__)("Spotlight mode deactivated","kubio")}),d,(0,a.createElement)(k.MenuItem,{onClick:l},(0,x.__)("Open theme customizer","kubio")),(0,a.createElement)(Bt.Slot,{name:"kubio/edit-site/plugin-more-menu",label:(0,x.__)("Plugins","kubio"),as:[k.MenuGroup,k.MenuItem],fillProps:{onClick:t}}),!1))})))};var cl=n(5800);function ul(e,t){return function(){return e.apply(t,arguments)}}const{toString:dl}=Object.prototype,{getPrototypeOf:ml}=Object,pl=(hl=Object.create(null),e=>{const t=dl.call(e);return hl[t]||(hl[t]=t.slice(8,-1).toLowerCase())});var hl;const gl=e=>(e=e.toLowerCase(),t=>pl(t)===e),fl=e=>t=>typeof t===e,{isArray:bl}=Array,_l=fl("undefined"),vl=gl("ArrayBuffer"),yl=fl("string"),kl=fl("function"),El=fl("number"),Sl=e=>null!==e&&"object"==typeof e,wl=e=>{if("object"!==pl(e))return!1;const t=ml(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},Cl=gl("Date"),Il=gl("File"),Tl=gl("Blob"),xl=gl("FileList"),Pl=gl("URLSearchParams");function Rl(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let o,r;if("object"!=typeof e&&(e=[e]),bl(e))for(o=0,r=e.length;o<r;o++)t.call(null,e[o],o,e);else{const r=n?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let a;for(o=0;o<i;o++)a=r[o],t.call(null,e[a],a,e)}}function Al(e,t){t=t.toLowerCase();const n=Object.keys(e);let o,r=n.length;for(;r-- >0;)if(o=n[r],t===o.toLowerCase())return o;return null}const Ol="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Nl=e=>!_l(e)&&e!==Ol,Ml=(Dl="undefined"!=typeof Uint8Array&&ml(Uint8Array),e=>Dl&&e instanceof Dl);var Dl;const Bl=gl("HTMLFormElement"),Ll=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),zl=gl("RegExp"),Fl=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};Rl(n,((n,r)=>{let i;!1!==(i=t(n,r,e))&&(o[r]=i||n)})),Object.defineProperties(e,o)},Gl="abcdefghijklmnopqrstuvwxyz",Hl="0123456789",Ul={DIGIT:Hl,ALPHA:Gl,ALPHA_DIGIT:Gl+Gl.toUpperCase()+Hl},Wl=gl("AsyncFunction"),jl={isArray:bl,isArrayBuffer:vl,isBuffer:function(e){return null!==e&&!_l(e)&&null!==e.constructor&&!_l(e.constructor)&&kl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||kl(e.append)&&("formdata"===(t=pl(e))||"object"===t&&kl(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&vl(e.buffer),t},isString:yl,isNumber:El,isBoolean:e=>!0===e||!1===e,isObject:Sl,isPlainObject:wl,isUndefined:_l,isDate:Cl,isFile:Il,isBlob:Tl,isRegExp:zl,isFunction:kl,isStream:e=>Sl(e)&&kl(e.pipe),isURLSearchParams:Pl,isTypedArray:Ml,isFileList:xl,forEach:Rl,merge:function e(){const{caseless:t}=Nl(this)&&this||{},n={},o=(o,r)=>{const i=t&&Al(n,r)||r;wl(n[i])&&wl(o)?n[i]=e(n[i],o):wl(o)?n[i]=e({},o):bl(o)?n[i]=o.slice():n[i]=o};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&Rl(arguments[e],o);return n},extend:(e,t,n,{allOwnKeys:o}={})=>(Rl(t,((t,o)=>{n&&kl(t)?e[o]=ul(t,n):e[o]=t}),{allOwnKeys:o}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,o)=>{let r,i,a;const l={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)a=r[i],o&&!o(a,e,t)||l[a]||(t[a]=e[a],l[a]=!0);e=!1!==n&&ml(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:pl,kindOfTest:gl,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return-1!==o&&o===n},toArray:e=>{if(!e)return null;if(bl(e))return e;let t=e.length;if(!El(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=n.next())&&!o.done;){const n=o.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const o=[];for(;null!==(n=e.exec(t));)o.push(n);return o},isHTMLForm:Bl,hasOwnProperty:Ll,hasOwnProp:Ll,reduceDescriptors:Fl,freezeMethods:e=>{Fl(e,((t,n)=>{if(kl(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const o=e[n];kl(o)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},o=e=>{e.forEach((e=>{n[e]=!0}))};return bl(e)?o(e):o(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:Al,global:Ol,isContextDefined:Nl,ALPHABET:Ul,generateString:(e=16,t=Ul.ALPHA_DIGIT)=>{let n="";const{length:o}=t;for(;e--;)n+=t[Math.random()*o|0];return n},isSpecCompliantForm:function(e){return!!(e&&kl(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,o)=>{if(Sl(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[o]=e;const r=bl(e)?[]:{};return Rl(e,((e,t)=>{const i=n(e,o+1);!_l(i)&&(r[t]=i)})),t[o]=void 0,r}}return e};return n(e,0)},isAsyncFn:Wl,isThenable:e=>e&&(Sl(e)||kl(e))&&kl(e.then)&&kl(e.catch)};function Vl(e,t,n,o,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),r&&(this.response=r)}jl.inherits(Vl,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:jl.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Kl=Vl.prototype,$l={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{$l[e]={value:e}})),Object.defineProperties(Vl,$l),Object.defineProperty(Kl,"isAxiosError",{value:!0}),Vl.from=(e,t,n,o,r,i)=>{const a=Object.create(Kl);return jl.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Vl.call(a,e.message,t,n,o,r),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const ql=Vl;function Yl(e){return jl.isPlainObject(e)||jl.isArray(e)}function Xl(e){return jl.endsWith(e,"[]")?e.slice(0,-2):e}function Ql(e,t,n){return e?e.concat(t).map((function(e,t){return e=Xl(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Zl=jl.toFlatObject(jl,{},null,(function(e){return/^is[A-Z]/.test(e)})),Jl=function(e,t,n){if(!jl.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const o=(n=jl.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!jl.isUndefined(t[e])}))).metaTokens,r=n.visitor||c,i=n.dots,a=n.indexes,l=(n.Blob||"undefined"!=typeof Blob&&Blob)&&jl.isSpecCompliantForm(t);if(!jl.isFunction(r))throw new TypeError("visitor must be a function");function s(e){if(null===e)return"";if(jl.isDate(e))return e.toISOString();if(!l&&jl.isBlob(e))throw new ql("Blob is not supported. Use a Buffer instead.");return jl.isArrayBuffer(e)||jl.isTypedArray(e)?l&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,r){let l=e;if(e&&!r&&"object"==typeof e)if(jl.endsWith(n,"{}"))n=o?n:n.slice(0,-2),e=JSON.stringify(e);else if(jl.isArray(e)&&function(e){return jl.isArray(e)&&!e.some(Yl)}(e)||(jl.isFileList(e)||jl.endsWith(n,"[]"))&&(l=jl.toArray(e)))return n=Xl(n),l.forEach((function(e,o){!jl.isUndefined(e)&&null!==e&&t.append(!0===a?Ql([n],o,i):null===a?n:n+"[]",s(e))})),!1;return!!Yl(e)||(t.append(Ql(r,n,i),s(e)),!1)}const u=[],d=Object.assign(Zl,{defaultVisitor:c,convertValue:s,isVisitable:Yl});if(!jl.isObject(e))throw new TypeError("data must be an object");return function e(n,o){if(!jl.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+o.join("."));u.push(n),jl.forEach(n,(function(n,i){!0===(!(jl.isUndefined(n)||null===n)&&r.call(t,n,jl.isString(i)?i.trim():i,o,d))&&e(n,o?o.concat(i):[i])})),u.pop()}}(e),t};function es(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ts(e,t){this._pairs=[],e&&Jl(e,this,t)}const ns=ts.prototype;ns.append=function(e,t){this._pairs.push([e,t])},ns.toString=function(e){const t=e?function(t){return e.call(this,t,es)}:es;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const os=ts;function rs(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function is(e,t,n){if(!t)return e;const o=n&&n.encode||rs,r=n&&n.serialize;let i;if(i=r?r(t,n):jl.isURLSearchParams(t)?t.toString():new os(t,n).toString(o),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const as=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){jl.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},ls={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ss={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:os,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:(()=>{let e;return("undefined"==typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&"undefined"!=typeof window&&"undefined"!=typeof document})(),isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]},cs=function(e){function t(e,n,o,r){let i=e[r++];const a=Number.isFinite(+i),l=r>=e.length;return i=!i&&jl.isArray(o)?o.length:i,l?(jl.hasOwnProp(o,i)?o[i]=[o[i],n]:o[i]=n,!a):(o[i]&&jl.isObject(o[i])||(o[i]=[]),t(e,n,o[i],r)&&jl.isArray(o[i])&&(o[i]=function(e){const t={},n=Object.keys(e);let o;const r=n.length;let i;for(o=0;o<r;o++)i=n[o],t[i]=e[i];return t}(o[i])),!a)}if(jl.isFormData(e)&&jl.isFunction(e.entries)){const n={};return jl.forEachEntry(e,((e,o)=>{t(function(e){return jl.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),o,n,0)})),n}return null},us={transitional:ls,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",o=n.indexOf("application/json")>-1,r=jl.isObject(e);if(r&&jl.isHTMLForm(e)&&(e=new FormData(e)),jl.isFormData(e))return o&&o?JSON.stringify(cs(e)):e;if(jl.isArrayBuffer(e)||jl.isBuffer(e)||jl.isStream(e)||jl.isFile(e)||jl.isBlob(e))return e;if(jl.isArrayBufferView(e))return e.buffer;if(jl.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Jl(e,new ss.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,o){return ss.isNode&&jl.isBuffer(e)?(this.append(t,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=jl.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Jl(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||o?(t.setContentType("application/json",!1),function(e,t,n){if(jl.isString(e))try{return(0,JSON.parse)(e),jl.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||us.transitional,n=t&&t.forcedJSONParsing,o="json"===this.responseType;if(e&&jl.isString(e)&&(n&&!this.responseType||o)){const n=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw ql.from(e,ql.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ss.classes.FormData,Blob:ss.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};jl.forEach(["delete","get","head","post","put","patch"],(e=>{us.headers[e]={}}));const ds=us,ms=jl.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ps=Symbol("internals");function hs(e){return e&&String(e).trim().toLowerCase()}function gs(e){return!1===e||null==e?e:jl.isArray(e)?e.map(gs):String(e)}function fs(e,t,n,o,r){return jl.isFunction(o)?o.call(this,t,n):(r&&(t=n),jl.isString(t)?jl.isString(o)?-1!==t.indexOf(o):jl.isRegExp(o)?o.test(t):void 0:void 0)}class bs{constructor(e){e&&this.set(e)}set(e,t,n){const o=this;function r(e,t,n){const r=hs(t);if(!r)throw new Error("header name must be a non-empty string");const i=jl.findKey(o,r);(!i||void 0===o[i]||!0===n||void 0===n&&!1!==o[i])&&(o[i||t]=gs(e))}const i=(e,t)=>jl.forEach(e,((e,n)=>r(e,n,t)));return jl.isPlainObject(e)||e instanceof this.constructor?i(e,t):jl.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?i((e=>{const t={};let n,o,r;return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),o=e.substring(r+1).trim(),!n||t[n]&&ms[n]||("set-cookie"===n?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)})),t})(e),t):null!=e&&r(t,e,n),this}get(e,t){if(e=hs(e)){const n=jl.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}(e);if(jl.isFunction(t))return t.call(this,e,n);if(jl.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=hs(e)){const n=jl.findKey(this,e);return!(!n||void 0===this[n]||t&&!fs(0,this[n],n,t))}return!1}delete(e,t){const n=this;let o=!1;function r(e){if(e=hs(e)){const r=jl.findKey(n,e);!r||t&&!fs(0,n[r],r,t)||(delete n[r],o=!0)}}return jl.isArray(e)?e.forEach(r):r(e),o}clear(e){const t=Object.keys(this);let n=t.length,o=!1;for(;n--;){const r=t[n];e&&!fs(0,this[r],r,e,!0)||(delete this[r],o=!0)}return o}normalize(e){const t=this,n={};return jl.forEach(this,((o,r)=>{const i=jl.findKey(n,r);if(i)return t[i]=gs(o),void delete t[r];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(r):String(r).trim();a!==r&&delete t[r],t[a]=gs(o),n[a]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return jl.forEach(this,((n,o)=>{null!=n&&!1!==n&&(t[o]=e&&jl.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[ps]=this[ps]={accessors:{}}).accessors,n=this.prototype;function o(e){const o=hs(e);t[o]||(function(e,t){const n=jl.toCamelCase(" "+t);["get","set","has"].forEach((o=>{Object.defineProperty(e,o+n,{value:function(e,n,r){return this[o].call(this,t,e,n,r)},configurable:!0})}))}(n,e),t[o]=!0)}return jl.isArray(e)?e.forEach(o):o(e),this}}bs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),jl.reduceDescriptors(bs.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),jl.freezeMethods(bs);const _s=bs;function vs(e,t){const n=this||ds,o=t||n,r=_s.from(o.headers);let i=o.data;return jl.forEach(e,(function(e){i=e.call(n,i,r.normalize(),t?t.status:void 0)})),r.normalize(),i}function ys(e){return!(!e||!e.__CANCEL__)}function ks(e,t,n){ql.call(this,null==e?"canceled":e,ql.ERR_CANCELED,t,n),this.name="CanceledError"}jl.inherits(ks,ql,{__CANCEL__:!0});const Es=ks,Ss=ss.isStandardBrowserEnv?{write:function(e,t,n,o,r,i){const a=[];a.push(e+"="+encodeURIComponent(t)),jl.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),jl.isString(o)&&a.push("path="+o),jl.isString(r)&&a.push("domain="+r),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function ws(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Cs=ss.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function o(n){let o=n;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=o(window.location.href),function(e){const t=jl.isString(e)?o(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};function Is(e,t){let n=0;const o=function(e,t){e=e||10;const n=new Array(e),o=new Array(e);let r,i=0,a=0;return t=void 0!==t?t:1e3,function(l){const s=Date.now(),c=o[a];r||(r=s),n[i]=l,o[i]=s;let u=a,d=0;for(;u!==i;)d+=n[u++],u%=e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),s-r<t)return;const m=c&&s-c;return m?Math.round(1e3*d/m):void 0}}(50,250);return r=>{const i=r.loaded,a=r.lengthComputable?r.total:void 0,l=i-n,s=o(l);n=i;const c={loaded:i,total:a,progress:a?i/a:void 0,bytes:l,rate:s||void 0,estimated:s&&a&&i<=a?(a-i)/s:void 0,event:r};c[t?"download":"upload"]=!0,e(c)}}const Ts="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let o=e.data;const r=_s.from(e.headers).normalize(),i=e.responseType;let a,l;function s(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}jl.isFormData(o)&&(ss.isStandardBrowserEnv||ss.isStandardBrowserWebWorkerEnv?r.setContentType(!1):r.getContentType(/^\s*multipart\/form-data/)?jl.isString(l=r.getContentType())&&r.setContentType(l.replace(/^\s*(multipart\/form-data);+/,"$1")):r.setContentType("multipart/form-data"));let c=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(t+":"+n))}const u=ws(e.baseURL,e.url);function d(){if(!c)return;const o=_s.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(e,t,n){const o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(new ql("Request failed with status code "+n.status,[ql.ERR_BAD_REQUEST,ql.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),s()}),(function(e){n(e),s()}),{data:i&&"text"!==i&&"json"!==i?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:o,config:e,request:c}),c=null}if(c.open(e.method.toUpperCase(),is(u,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(d)},c.onabort=function(){c&&(n(new ql("Request aborted",ql.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new ql("Network Error",ql.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const o=e.transitional||ls;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new ql(t,o.clarifyTimeoutError?ql.ETIMEDOUT:ql.ECONNABORTED,e,c)),c=null},ss.isStandardBrowserEnv){const t=Cs(u)&&e.xsrfCookieName&&Ss.read(e.xsrfCookieName);t&&r.set(e.xsrfHeaderName,t)}void 0===o&&r.setContentType(null),"setRequestHeader"in c&&jl.forEach(r.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),jl.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),i&&"json"!==i&&(c.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&c.addEventListener("progress",Is(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",Is(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=t=>{c&&(n(!t||t.type?new Es(null,e,c):t),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const m=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(u);m&&-1===ss.protocols.indexOf(m)?n(new ql("Unsupported protocol "+m+":",ql.ERR_BAD_REQUEST,e)):c.send(o||null)}))},xs={http:null,xhr:Ts};jl.forEach(xs,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const Ps=e=>`- ${e}`,Rs=e=>jl.isFunction(e)||null===e||!1===e,As=e=>{e=jl.isArray(e)?e:[e];const{length:t}=e;let n,o;const r={};for(let i=0;i<t;i++){let t;if(n=e[i],o=n,!Rs(n)&&(o=xs[(t=String(n)).toLowerCase()],void 0===o))throw new ql(`Unknown adapter '${t}'`);if(o)break;r[t||"#"+i]=o}if(!o){const e=Object.entries(r).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));let n=t?e.length>1?"since :\n"+e.map(Ps).join("\n"):" "+Ps(e[0]):"as no adapter specified";throw new ql("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return o};function Os(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Es(null,e)}function Ns(e){return Os(e),e.headers=_s.from(e.headers),e.data=vs.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),As(e.adapter||ds.adapter)(e).then((function(t){return Os(e),t.data=vs.call(e,e.transformResponse,t),t.headers=_s.from(t.headers),t}),(function(t){return ys(t)||(Os(e),t&&t.response&&(t.response.data=vs.call(e,e.transformResponse,t.response),t.response.headers=_s.from(t.response.headers))),Promise.reject(t)}))}const Ms=e=>e instanceof _s?e.toJSON():e;function Ds(e,t){t=t||{};const n={};function o(e,t,n){return jl.isPlainObject(e)&&jl.isPlainObject(t)?jl.merge.call({caseless:n},e,t):jl.isPlainObject(t)?jl.merge({},t):jl.isArray(t)?t.slice():t}function r(e,t,n){return jl.isUndefined(t)?jl.isUndefined(e)?void 0:o(void 0,e,n):o(e,t,n)}function i(e,t){if(!jl.isUndefined(t))return o(void 0,t)}function a(e,t){return jl.isUndefined(t)?jl.isUndefined(e)?void 0:o(void 0,e):o(void 0,t)}function l(n,r,i){return i in t?o(n,r):i in e?o(void 0,n):void 0}const s={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(e,t)=>r(Ms(e),Ms(t),!0)};return jl.forEach(Object.keys(Object.assign({},e,t)),(function(o){const i=s[o]||r,a=i(e[o],t[o],o);jl.isUndefined(a)&&i!==l||(n[o]=a)})),n}const Bs={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Bs[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Ls={};Bs.transitional=function(e,t,n){function o(e,t){return"[Axios v1.6.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,i)=>{if(!1===e)throw new ql(o(r," has been removed"+(t?" in "+t:"")),ql.ERR_DEPRECATED);return t&&!Ls[r]&&(Ls[r]=!0,console.warn(o(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,i)}};const zs={assertOptions:function(e,t,n){if("object"!=typeof e)throw new ql("options must be an object",ql.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let r=o.length;for(;r-- >0;){const i=o[r],a=t[i];if(a){const t=e[i],n=void 0===t||a(t,i,e);if(!0!==n)throw new ql("option "+i+" must be "+n,ql.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new ql("Unknown option "+i,ql.ERR_BAD_OPTION)}},validators:Bs},Fs=zs.validators;class Gs{constructor(e){this.defaults=e,this.interceptors={request:new as,response:new as}}request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Ds(this.defaults,t);const{transitional:n,paramsSerializer:o,headers:r}=t;void 0!==n&&zs.assertOptions(n,{silentJSONParsing:Fs.transitional(Fs.boolean),forcedJSONParsing:Fs.transitional(Fs.boolean),clarifyTimeoutError:Fs.transitional(Fs.boolean)},!1),null!=o&&(jl.isFunction(o)?t.paramsSerializer={serialize:o}:zs.assertOptions(o,{encode:Fs.function,serialize:Fs.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=r&&jl.merge(r.common,r[t.method]);r&&jl.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete r[e]})),t.headers=_s.concat(i,r);const a=[];let l=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const s=[];let c;this.interceptors.response.forEach((function(e){s.push(e.fulfilled,e.rejected)}));let u,d=0;if(!l){const e=[Ns.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,s),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=a.length;let m=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{m=e(m)}catch(e){t.call(this,e);break}}try{c=Ns.call(this,m)}catch(e){return Promise.reject(e)}for(d=0,u=s.length;d<u;)c=c.then(s[d++],s[d++]);return c}getUri(e){return is(ws((e=Ds(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}jl.forEach(["delete","get","head","options"],(function(e){Gs.prototype[e]=function(t,n){return this.request(Ds(n||{},{method:e,url:t,data:(n||{}).data}))}})),jl.forEach(["post","put","patch"],(function(e){function t(t){return function(n,o,r){return this.request(Ds(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}Gs.prototype[e]=t(),Gs.prototype[e+"Form"]=t(!0)}));const Hs=Gs;class Us{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const o=new Promise((e=>{n.subscribe(e),t=e})).then(e);return o.cancel=function(){n.unsubscribe(t)},o},e((function(e,o,r){n.reason||(n.reason=new Es(e,o,r),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new Us((function(t){e=t})),cancel:e}}}const Ws=Us,js={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(js).forEach((([e,t])=>{js[t]=e}));const Vs=js,Ks=function e(t){const n=new Hs(t),o=ul(Hs.prototype.request,n);return jl.extend(o,Hs.prototype,n,{allOwnKeys:!0}),jl.extend(o,n,null,{allOwnKeys:!0}),o.create=function(n){return e(Ds(t,n))},o}(ds);Ks.Axios=Hs,Ks.CanceledError=Es,Ks.CancelToken=Ws,Ks.isCancel=ys,Ks.VERSION="1.6.0",Ks.toFormData=Jl,Ks.AxiosError=ql,Ks.Cancel=Ks.CanceledError,Ks.all=function(e){return Promise.all(e)},Ks.spread=function(e){return function(t){return e.apply(null,t)}},Ks.isAxiosError=function(e){return jl.isObject(e)&&!0===e.isAxiosError},Ks.mergeConfig=Ds,Ks.AxiosHeaders=_s,Ks.formToJSON=e=>cs(jl.isHTMLForm(e)?new FormData(e):e),Ks.getAdapter=As,Ks.HttpStatusCode=Vs,Ks.default=Ks;const $s=Ks,qs={demoParts:null,demoSitesList:null,demoSitesListBySlug:null,demoPartsContentById:{pages:{},templates:{},templateParts:{},globalData:{}}};function Ys(e){if(!e)return;const t=["demoPartsContentById","globalData",e.id];if(p().get(qs,t))return;const n={contentUrlPath:e.content_url_path,content:null};p().set(qs,t,n)}async function Xs(e){const t=["demoPartsContentById","pages",e],n=p().get(qs,t),o=await async function(e){return Js(e,"pages")}(e),r=null==n?void 0:n.globalDataId;let i={page:o,globalData:await Zs(r)};return i=p().cloneDeep(i),i}async function Qs(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=["demoPartsContentById","templates",e],o=p().get(qs,n),r=p().get(o,"templatePartsIds",[]);let i={template:await async function(e){return Js(e,"templates")}(e),templateParts:await Promise.all(r.map((async e=>({area:p().get(qs,["demoPartsContentById","templateParts",e,"area"]),content:await async function(e){return Js(e,"templateParts")}(e)}))))};if(t){const e=null==o?void 0:o.globalDataId,t=await Zs(e);i.globalData=t}return i=p().cloneDeep(i),i}async function Zs(e){return Js(e,"globalData")}async function Js(e,t){const n=p().get(qs,["demoPartsContentById",t,e]);let o=null==n?void 0:n.content;if(o)await(10,new Promise((e=>setTimeout((()=>{e()}),10))));else{const e=null==n?void 0:n.contentUrlPath;if(!e)return;try{const t=await $s.get(e);o=null==t?void 0:t.data,n.content=o}catch(e){console.error(e)}}return o}async function ec(){if(qs.demoParts)return qs.demoParts;let e=p().get(window,["kubioUtilsData","demo_parts_by_slug"]);p().isEmpty(e)&&(e=await async function(){try{var e;const t=p().get(window,["kubioUtilsData","demo_parts_url"],""),n=await $s.get(t);return(null==n||null===(e=n.data)||void 0===e?void 0:e.body)||{}}catch(e){return console.error(e),[]}}());const t=[];return p().each(e,((e,n)=>{t[n]=function(e,t){const n=p().get(window,["kubioUtilsData","demo_sites"],{}),o=p().get(n,t),r=p().get(o,"thumb",""),i=["index","home"],a=[],l=i.concat(["single","search","404"]);let s=e.filter((e=>{let{slug:t,type:n}=e;return"template"===n?(i.includes(t)&&a.push(t),l.includes(t)):"page"!==n||"sample-page"!==t}));if(a.length>1){const e=i.filter((e=>a.includes(e)));e.pop(),s=s.filter((t=>{let{slug:n,type:o}=t;return"template"!==o||!e.includes(n)}))}const c={};return s.forEach(((e,t)=>{c[e.content_url_path]=t})),p().sortBy(s,(e=>"page"===e.type?c[e.content_url_path]:100+p().indexOf(l,e.slug))).map((e=>{let{content_url_path:n,id:i,preview_image_url:a,preview_image_url_full:l,page_preview_url:s,title:c,type:u,slug:d}=e;return{contentUrlPath:n,id:i,slug:d,uniqueId:La().generate(),screenshot:a||r,screenshotFull:l||r,label:(m=tc({title:c,slug:d,type:u}),function(e){return e.split(" ").map((e=>{return(t=e).charAt(0).toUpperCase()+t.slice(1);var t})).join(" ")}((p=m,ic.innerHTML=p,ic.innerText))),isPro:!(null==o||!o.is_pro),type:u,demoSiteSlug:t,pagePreviewUrl:ac({page_preview_url:s,currentDemoSite:o,type:u,slug:d}),categories:(null==o?void 0:o.categories)||[]};var m,p}))}(e,n)})),n=e,p().each(n,((e,t)=>{e.forEach((e=>{"page"===(null==e?void 0:e.type)?function(e){var t,n;const o={templateId:null==e||null===(t=e.template)||void 0===t?void 0:t.id,globalDataId:null==e||null===(n=e.globalData)||void 0===n?void 0:n.id,contentUrlPath:e.content_url_path,content:null},r=e.globalData;r&&(o.globalDataId=null==r?void 0:r.id),p().set(qs,["demoPartsContentById","pages",e.id],o),Ys(r)}(e):function(e){const t=["demoPartsContentById","templates",e.id],n=p().get(e,"templateParts",[]);n.forEach((e=>{!function(e){const t=["demoPartsContentById","templateParts",e.id];if(p().get(qs,t))return;const n={area:e.area,contentUrlPath:e.content_url_path,content:null};p().set(qs,t,n)}(e)}));const o=null==e?void 0:e.globalData;if(Ys(),p().get(qs,t))return;const r={templatePartsIds:n.map((e=>e.id)),contentUrlPath:e.content_url_path,content:null};o&&(r.globalDataId=null==o?void 0:o.id),p().set(qs,t,r)}(e)}))})),qs.demoParts=t,p().isEmpty(t)?{}:qs.demoParts;var n}function tc(e){let{title:t,slug:n,type:o}=e;if("template"===o)switch(n){case"index":case"home":return(0,x.__)("Blog","kubio");case"search":return(0,x.__)("Search","kubio");case"single":return(0,x.__)("Post Page","kubio");default:return t}return t}async function nc(){if(qs.demoSitesList)return qs.demoSitesList;let e=p().get(window,["kubioUtilsData","demo_sites"],null);if(p().isEmpty(e)&&(e=await async function(){const e=p().get(window,["kubioUtilsData","demo_sites_url"],null);if(e){try{var t;const n=await $s.get(e),o=(null==n||null===(t=n.data)||void 0===t?void 0:t.body)||{};o.forEach((e=>{const t=p().get(e,"plugins",[]),n=[];p().each(t,((e,t)=>{const o=null==t?void 0:t.split("/")[0];n.push({label:e,slug:o})})),e.plugins=n}));const r=p().keyBy(o,"slug");return p().set(window,["kubioUtilsData","demo_sites"],r),r}catch(e){console.error(e)}return null}}()),p().isEmpty(e))return[];const t=Object.values(e).map((e=>{let{is_pro:t,name:n,thumb:o,categories:r,slug:i,preview:a,pro_template_slug:l,plugins:s}=e;return{isPro:!!t,label:rc(n),preview:a,screenshot:o,proTemplateSlug:l,categories:r,slug:i,plugins:s}})),n=p().keyBy(t,"slug");return t.forEach((e=>{const{proTemplateSlug:t}=e;if(!t)return;const o=p().get(n,t);o&&(e.relatedDemoSite=o,o.relatedDemoSite=e)})),qs.demoSitesList=t,qs.demoSitesListBySlug=n,qs.demoSitesList}const oc=e=>{e&&setTimeout((()=>{const t=document.querySelector(".kubio-iframe");if(t){const n=null==t?void 0:t.contentDocument,o=null==n?void 0:n.querySelector(`[data-block="${e}"]`);null==o||o.scrollIntoView({behavior:"smooth"})}}),100)};function rc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e=e.replace(/ (Free|Pro)/i,""),e=e.trim(),e}const ic=document.createElement("div");function ac(e){let{page_preview_url:t,currentDemoSite:n,type:o,slug:r}=e;if("page"===o||!["404","search"].includes(r))return t;const i=null==n?void 0:n.preview;switch(r){case"404":return`${i}/404-page`;case"search":return`${i}?s="lorem"`}}!async function(){await nc(),await ec()}();const lc={currentDemoParts:[],demoPartsIsLoaded:!1,selectedDemoPart:null,setSelectedDemoPart:p().noop},sc=(0,a.createContext)(lc),cc=(0,a.memo)((e=>{let{children:t}=e;const{selectedDemoSlug:n,initialDemoPart:o,setInitialDemoPart:r,demosPartsPerSlug:i,demoPartsIsLoaded:l,currentDemoSite:s}=Ch(),c=(0,a.useMemo)((()=>p().get(i,null==s?void 0:s.slug,[])),[s,i]),u=null==s?void 0:s.relatedDemoSite,d=(0,a.useMemo)((()=>p().get(i,null==u?void 0:u.slug,[])),[u,i]),m=(0,a.useMemo)((()=>{const e=p().get(c,[0]);if(!o)return e;return c.find((e=>(null==e?void 0:e.uniqueId)===(null==o?void 0:o.uniqueId)))||e}),[n,o]),[h,g]=(0,a.useState)(m),f=(0,a.useCallback)((e=>{o&&r(null),g(e)}),[g,o,r]);(0,a.useEffect)((()=>{o&&f(o)}),[o]),(0,a.useEffect)((()=>{f(m)}),[n]);const b=(0,a.useMemo)((()=>({currentDemoParts:c,demoPartsIsLoaded:l,selectedDemoPart:h,setSelectedDemoPart:f,relatedDemoParts:d})),[c,l,h,f,d]);return(0,a.createElement)(sc.Provider,{value:b},t)})),uc=()=>(0,a.useContext)(sc),dc="content",mc="wholePage",pc=((0,x.__)("Content","kubio"),(0,x.__)("Full page","kubio"),"onlyThisPage"),hc="allPages",gc=((0,x.__)("Only this page","kubio"),(0,x.__)("All pages","kubio"),["singular","single"]),fc=["index","archive","home"],bc=gc.concat(fc),_c=(0,a.createContext)({}),vc="starterSite",yc="pages",kc="sections",Ec="favorites",Sc=[{label:(0,x.__)("Starter sites","kubio"),value:vc},{label:(0,x.__)("Pages","kubio"),value:yc},{label:(0,x.__)("Sections","kubio"),value:kc},{label:(0,x.__)("Favorites","kubio"),value:Ec}],wc=(0,a.memo)((e=>{let{onClose:t,children:n,initialParams:o}=e;const r=p().get(o,"page",vc),[i,l]=(0,a.useState)(r),[s,c]=(0,a.useState)(r),u=(0,a.useCallback)((e=>{c(i),l(e)}),[i]),[d,m]=(0,a.useState)(!1),{templateId:h,postId:g}=(0,w.useSelect)((e=>{const{getPage:t=p().noop,getTemplateId:n=p().noop}=e("kubio/edit-site")||{},o=t();return{templateId:n()||"",postId:p().get(o,"context.postId")}}),[]);(0,a.useEffect)((()=>{d&&m(!1)}),[h,g]);const f=(0,a.useMemo)((()=>({activePage:i,setActivePage:u,onClose:t,showLoadingOverlay:d,setShowLoadingOverlay:m,initialParams:o,previousActivePage:s})),[i,u,t,d,m,o,s]);return(0,a.createElement)(_c.Provider,{value:f},n)})),Cc=()=>(0,a.useContext)(_c),Ic={isImporting:!1,importDemoPart:p().noop},Tc=(0,a.createContext)(Ic),xc=(0,a.memo)((e=>{let{children:t}=e;const n=(0,a.useRef)(!1),[o,r]=(0,a.useState)(!1),{selectedDemoPart:i}=uc(),[l,s]=(0,a.useState)(dc),[c,u]=(0,a.useState)(pc),[d,m]=(0,a.useState)(),p=n.current,h=(0,a.useCallback)((e=>{n.current=e}),[n]),g=(0,a.useCallback)((()=>{p||m(i)}),[p,m,i]),f=(0,a.useMemo)((()=>({isImporting:p,setIsImporting:h,importDemoPart:g,demoPartThatIsImporting:d,setDemoPartThatIsImporting:m,whatToImport:l,setWhatToImport:s,whereToApplyChanges:c,setWhereToApplyChanges:u,shouldConvertGlobalColors:o,setShouldConvertGlobalColors:r})),[p,h,d,m,g,l,s,c,u,o,r]);return(0,a.createElement)(Tc.Provider,{value:f},t)})),Pc=()=>(0,a.useContext)(Tc),Rc={typography:{holders:{}}};["a","lead","p","h1","h2","h3","h4","h5","h6"].forEach((e=>{p().set(Rc,`typography.holders.${e}`,{transform:"none",style:"normal",decoration:"none"})}));const Ac=e=>(e.forEach((e=>{switch(null==e?void 0:e.name){case"kubio/contact":case"kubio/subscribe-form":p().set(e,["attributes","shortcode"],""),p().set(e,["attributes","formId"],"");break;case"kubio/shortcode":p().set(e,["attributes","shortcode"],"")}const t=p().get(e,"innerBlocks",[]);Ac(t)})),e),Oc=e=>p().cloneDeep(p().get(e,"globalStyle.style.descendants.body",{}));function Nc(e){return p()(e).pickBy(p().isObject).mapValues(Nc).omitBy(p().isEmpty).assign(p().omitBy(e,(e=>p().isObject(e)&&!Array.isArray(e)))).value()}const Mc=["header","footer","sidebar"],Dc={header:"kubio/header",footer:"kubio/footer",sidebar:"kubio/sidebar"},Bc=e=>{const t=top.document;e?t.defaultView.setTimeout((()=>{t.body.classList.add("kubio-iframe-holder--show"),t.body.classList.remove("kubio-iframe-holder--hide"),t.body.classList.remove("h-ui-disable-transitions")}),100):(t.body.classList.remove("kubio-iframe-holder--show"),t.body.classList.add("kubio-iframe-holder--hide"),t.body.classList.add("h-ui-disable-transitions"))},Lc=(0,a.memo)((()=>{const{isImporting:e,setIsImporting:t,demoPartThatIsImporting:n,setDemoPartThatIsImporting:o,whereToApplyChanges:r,whatToImport:i,shouldConvertGlobalColors:l}=Pc(),{onClose:c=p().noop}=Cc(),{contentClientId:u,nrOfBlocksInsideContent:d,postType:m,postId:h,isClassicTemplate:g,pagePath:b,isFrontPageClassic:v,currentTheme:y,currentPostTitle:k}=(0,w.useSelect)((e=>{var t,n;const{getBlocks:o,getBlockOrder:r}=e("core/block-editor"),{getPage:i=p().noop,getTemplateId:a}=e("kubio/edit-site")||{},{getEditedEntityRecord:l,getCurrentTheme:s,getEntityRecord:c}=e("core"),u=l("root","site"),d=null===(t=s())||void 0===t?void 0:t.stylesheet,m=i()||{},{path:h}=m,{postType:g,postId:f}=(null==m?void 0:m.context)||{},b=a()||"",_=!p().get(b.split("//"),"[1]"),v=null==u?void 0:u.page_on_front,y="page"===u.show_on_front,k=_&&y&&parseInt(v)===parseInt(f),E=o()||[],S=(0,ve.findBlockByName)(E,"core/post-content"),w=null==S?void 0:S.clientId,C=null===(n=r(w))||void 0===n?void 0:n.length,I=c("postType",g,f);return{contentClientId:w,nrOfBlocksInsideContent:C,postType:g,postId:f,pagePath:h,isClassicTemplate:_,isFrontPageClassic:k,currentTheme:d,currentPost:I,currentPostTitle:p().get(I,"title.rendered","Kubio")}}),[]),{saveEntityRecord:S,editEntityRecord:C}=(0,w.useDispatch)("core"),{insertBlocks:I,replaceInnerBlocks:T,resetBlocks:P,selectBlock:R,removeBlocks:A}=(0,w.useDispatch)("core/block-editor"),{createErrorNotice:O}=(0,s.useKubioNotices)(),N=(0,f.useGetGlobalSessionProp)("urlBasedTemplatesMap",{})[b],M=(0,a.useRef)(),[,D=p().noop]=(0,f.useGlobalSessionProp)("thirdPartyBlockInstalled",!1),{onProcessGlobalDataSettings:B}=(e=>{let{shouldConvertGlobalColors:t,whatToImport:n,contentClientId:o,isClassicTemplate:r}=e;const{parseVariableColor:i,setPalette:l,getPalette:c}=(0,_.useGlobalDataColors)(),{updateBlockAttributes:u}=(0,w.useDispatch)("core/block-editor"),{editEntityRecord:d}=(0,w.useDispatch)("core"),m=(0,a.useRef)(!1),h=(0,a.useRef)(!1),g="globalStyle.style.descendants.body",{globalStyle:f}=(0,_.useGlobalDataStyle)(),b=(0,a.useMemo)((()=>c()),[]),v=(0,a.useMemo)((()=>f.getStyle("",{},{styledComponent:"body",fromRoot:!0})),[f]),y=(0,a.useMemo)((()=>f.getStyle("",{},{styledComponent:"sectionSpacing",fromRoot:!0})),[f]),{getBlocks:k,pages:E,templateParts:S,templates:C,currentPostId:I}=(0,w.useSelect)((e=>{const{getBlocks:t}=e("core/block-editor"),{getEntityRecords:n}=e("core"),{getPage:o=p().noop}=e("kubio/edit-site")||{},r=o(),{postId:i}=(null==r?void 0:r.context)||{},a=e=>n("postType",e,{per_page:-1});return{currentPostId:i,getBlocks:t,pages:a("page"),templateParts:a("wp_template_part"),templates:a("wp_template").filter((e=>{let{slug:t}=e;return bc.includes(t)}))}})),T=(0,a.useCallback)((e=>{l(e)}),[l]),x=(0,a.useCallback)((e=>{f.setStyle("",e,{styledComponent:"body"})}),[f]),P=(0,a.useCallback)((e=>{f.setStyle("",e,{styledComponent:"sectionSpacing"})}),[f]),R=(0,a.useCallback)(((e,t)=>{const n=t.colors;return p().isEqual(n,b)||(e=(0,ve.removeThemeColorsFromBlocks)({blocks:e,colorPalette:n,parseVariableColor:i,generateColorVariants:_.generateColorVariants,shouldUpdateAttributes:!1})),e}),[b,T,i]),A=(0,a.useCallback)(((e,t)=>{const n=Oc(t);let o=p().merge({},Rc,n);const r=t.colors;o=(0,ve.removeThemeColorsFromObject)(o,{colorPalette:r,parseVariableColor:i,generateColorVariants:_.generateColorVariants});const a=p().merge({},Rc,v);let l=(0,ve.getObjectDifference)(o,a);if(l=Nc(l),p().isEmpty(l))return e;const c="typography.holders.lead";p().set(l,c,p().merge({},p().get(v,c),p().get(l,c))),p().each(p().get(l,"typography.holders"),((e,t)=>{p().isEmpty(e)||null==e||!e.family||null!=e&&e.weight||(e.weight=p().get(n,`typography.holders.${t}.weight`))}));const u=["kubio/header","kubio/footer","kubio/sidebar","core/post-content"],d="typography.holders.lead.color",m=p().get(l,d);return e.forEach((e=>{var t;const n=!!p().get(e,"attributes.kubio");if(u.includes(null==e?void 0:e.name)||!n)return;const o=`attributes.kubio.style.descendants.${null===(t=(0,s.getBlockDefaultElement)(null==e?void 0:e.name))||void 0===t?void 0:t.name}`;let r=p().get(e,o,{});const i=p().get(r,"typography.holders.p.color");i&&m&&(r=p().cloneDeep(r),p().set(r,d,i));const a=p().merge({},l,r);p().set(e,o,a)})),e}),[v,i,_.generateColorVariants]),O=(0,a.useCallback)((e=>{const t=e.colors;p().isEqual(t,b)||T(t)}),[b,T]),N=(0,a.useCallback)((e=>{const t=p().get(e,g,{}),n=p().merge({},Rc,t),o=p().merge({},Rc,v),r=Nc((0,ve.getObjectDifference)(n,o));p().isEmpty(r)||x(n)}),[v,g]),M=(0,a.useCallback)((e=>{const t=p().get(e,"globalStyle.style.descendants.sectionSpacing",{});p().isEqual(y,t)||P(t)}),[y,P]),D=(0,a.useCallback)((e=>{m.current||(m.current=!0,O(e),N(e),M(e))}),[O,N,M,m]),B=(0,a.useCallback)((function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o=t.colors;let r=!1;const i=e.map((e=>{if(!p().get(e,"attributes.kubio"))return e;const{updatedBlock:i,hasUpdates:a}=(e=>{let{block:t,colorPalette:n}=e;n=p().cloneDeep(n);const o=p().cloneDeep(t);let r=!1;const i=(0,_.generateColorVariants)(n),a=e=>{if(!Array.isArray(e))return e;let t;return t=4===e.length?"rgba":"rgb",`${t}(${e.join(", ")})`};n.forEach((e=>{e.color=a(e.color)})),i.forEach((e=>{e.color=a(e.color)}));const l=e=>{const t=p().get(e,"attributes.kubio",{});p().eachDeep(t,((e,t,o)=>{if("string"==typeof e&&(e.startsWith("#")&&(e=Te(e).toRgbString()),e.startsWith("rgb"))){const a=n=>{let{color:i,slug:a}=n;if(i===e){r=!0;const e=Te(i);return o[t]=`rgba(var(--${a}),${e.getAlpha()})`,!0}return!1};n.find(a)||i.find(a)}}),{leavesOnly:!0});const{innerBlocks:o}=e;o.forEach((e=>{l(e)}))};return l(o),{updatedBlock:o,hasUpdates:r}})({block:e,colorPalette:o}),l=Oc(t),{updatedBlock:c,hasUpdates:d}=(e=>{var t;let{block:n,generalBodyStyle:o}=e,r=!1;const i=`attributes.kubio.style.descendants.${null===(t=(0,s.getBlockDefaultElement)(null==n?void 0:n.name))||void 0===t?void 0:t.name}`,a=p().get(n,i,{}),l=p().merge({},Rc,o),c=Nc((0,ve.getObjectDifference)(a,l));return p().isEmpty(c)||p().isEqual(c,a)||(p().set(n,i,c),r=!0),{updatedBlock:n,hasUpdates:r}})({block:i,generalBodyStyle:l});return r=r||d||a,n&&(d||a)&&u(null==c?void 0:c.clientId,c.attributes),c}));return{blocks:i,blocksHaveChanges:r}}),[u]),L=(0,a.useCallback)((e=>{if(h.current=!0,n===mc)return;let t=[],i=[];r||(i=k(),["kubio/header","kubio/footer","kubio/sidebar"].forEach((e=>{const n=(0,ve.findBlockByName)(i,e);if(!n)return;const o=k(null==n?void 0:n.clientId);t=t.concat(o)})));const a=k(o),l=i.concat(t,a);B(l,e)}),[n,o,r,B]),z=((0,a.useCallback)((e=>{E.concat(S,C).forEach((t=>{if(t.id===I)return;const n=p().get(t,"content.raw",""),o=(0,Un.parse)(n);if(p().isEmpty(o))return;const{blocks:r,blocksHaveChanges:i}=B(o,e,!1);if(!i)return;const a={content:(0,Un.serialize)(r)},{id:l,type:s}=t;d("postType",s,l,a)}))}),[B,E,S,C,I]),(0,a.useCallback)((e=>{h.current||L(e)}),[L])),F=(0,a.useCallback)(((e,t)=>{const n=p().get(t,"globalStyle.style.descendants.sectionSpacing",{});if(p().isEqual(y,n))return e;let o=(0,ve.getObjectDifference)(n,y);o=Nc(o);const r=["kubio/section","kubio/navigation","kubio/hero","kubio/query-layout"];return e.forEach((e=>{var t;const n=!!p().get(e,"attributes.kubio");if(!r.includes(null==e?void 0:e.name)||!n)return;const i=`attributes.kubio.style.descendants.${null===(t=(0,s.getBlockDefaultElement)(null==e?void 0:e.name))||void 0===t?void 0:t.name}`,a=p().get(e,i,{}),l=p().merge({},o,a);p().set(e,i,l)})),e}),[y]);return{onProcessGlobalDataSettings:(0,a.useCallback)(((e,n)=>(t?(D(n),z(n)):(e=R(e,n),e=A(e,n),e=F(e,n)),e)),[R,A,F,z,t,D])}})({shouldConvertGlobalColors:l,whatToImport:i,contentClientId:u,isClassicTemplate:g}),L=(0,a.useCallback)(((e,t)=>(e=Ac(e),e=B(e,t),(0,s.getBlocksWithNewRefs)(e))),[B]),z=(0,E.useDebounce)((0,a.useCallback)((e=>{clearTimeout(M.current),Bc(!0),M.current=setTimeout((()=>{oc(e)}),100)}),[]),100);(0,a.useEffect)((()=>()=>{clearTimeout(M.current)}),[]);const F=(0,a.useCallback)((()=>{o(null),t(!1)}),[o,t]),{templatePartIsUsedOnMultipleTemplates:G,templatePartIsFoundOnPage:H,refreshPage:U,templateIsUsedOnMultiplePages:W}=(0,s.useTemplateData)("header"),{templatePartIsUsedOnMultipleTemplates:j,templatePartIsFoundOnPage:V}=(0,s.useTemplateData)("footer"),{templatePartIsUsedOnMultipleTemplates:K,templatePartIsFoundOnPage:$}=(0,s.useTemplateData)("sidebar"),q=(0,a.useMemo)((()=>({header:G,footer:j,sidebar:K})),[G,j,K]),Y=(0,a.useMemo)((()=>({header:H,footer:V,sidebar:$})),[H,V,$]),{getBlocks:X}=(0,w.useSelect)((e=>{const{getBlocks:t}=e("core/block-editor"),{getEntityRecords:n}=e("core");return{getBlocks:t,getEntityRecords:n}})),Q=(0,a.useCallback)((()=>{t(!0),c(),Bc(!1)}),[t,c]),Z=(0,a.useCallback)((e=>{let{templatePartName:t,templateBlocks:n,newSlug:o,newTheme:r}=e;const i=(0,ve.findBlockByName)(n,t);i&&(i.attributes.slug=o,i.attributes.theme=r)}),[ve.findBlockByName]),J=(0,a.useCallback)((async(e,t,n)=>{var o;const r=X(),i=Dc[t],a=(0,ve.findBlockByName)(r,i),l=null==a?void 0:a.clientId;if(!l)return;await T(l,e);const s=null==a||null===(o=a.attributes)||void 0===o?void 0:o.slug;Z({templateBlocks:n,templatePartName:i,newSlug:s,newTheme:y})}),[y,ve.findBlockByName,Z,X,L]),ee=(0,a.useCallback)((async(e,t,n)=>{const o=`${k} ${t}`,r={title:o,slug:o,area:t,kubio_template_source:"kubio-custom",content:(0,Un.serialize)(e)},i=await S("postType","wp_template_part",r),a=Dc[t],l=null==i?void 0:i.slug,s=null==i?void 0:i.theme;l&&s&&Z({templateBlocks:n,templatePartName:a,newSlug:l,newTheme:s})}),[k,S,Z]),te=(0,a.useCallback)((async e=>{const{title:t,slug:n,assignTemplateToPage:o}=(e=>{let{isFrontPageClassic:t,isClassicTemplate:n,classicTemplateSlug:o,postType:r,currentPostTitle:i}=e,a="page"===r,l=`${i} template`,s=l;const c=gc,u="search"===o,d="404"===o,m=n&&fc.includes(o),p=n&&c.includes(o);return t?(l="Front page",s="front-page",a=!1):m?(l="Index",s="index",a=!1):p?(l="Single Post",s="single",a=!1):u?(l="Search",s="search",a=!1):d?(l="404",s="404",a=!1):r&&(s=`${r}-${s}`),{title:l,slug:s,assignTemplateToPage:a}})({isFrontPageClassic:v,isClassicTemplate:g,classicTemplateSlug:N,postType:m,currentPostTitle:k}),r={title:t,slug:n,kubio_template_source:o?"kubio-custom":"kubio",content:(0,Un.serialize)(e)},i=await S("postType","wp_template",r);return o&&await C("postType",m,h,{template:null==i?void 0:i.slug}),D(!0),await U(i),i}),[k,D,g,m,h,S,C,U]),ne=(0,a.useCallback)((async e=>{let{templateBlocks:t,templateParts:n,globalData:o}=e;const r=X(),i={};if(Mc.forEach((e=>{const t=Dc[e];i[e]=(0,ve.findBlockByName)(r,t)})),await Promise.all(n.map((async e=>{var n;let{area:r,content:a}=e;const l=L((0,Un.parse)(a),o),s=null===(n=i[r])||void 0===n?void 0:n.clientId;s?await T(s,l):await ee(l,r,t)}))),!p().isEmpty(n)){const e=Object.values(i),o=n.map((e=>{let{area:t}=e;return Dc[t]}));e.forEach((e=>{var n;if(!e)return;const r=null==e?void 0:e.name;if(!o.includes(r))return;const i=null==e||null===(n=e.attributes)||void 0===n?void 0:n.slug;Z({templateBlocks:t,templatePartName:r,newSlug:i,newTheme:y})}))}g?await te(t):await P(t),z()}),[y,Q,X,Qs,Z,P,F,z,g,te]),oe=(0,a.useCallback)((async e=>{let{templateBlocks:t,templateParts:n,globalData:o}=e;await Promise.all(n.map((async e=>{let{area:n,content:r}=e;const i=L((0,Un.parse)(r),o);q[n]||!Y[n]?await ee(i,n,t):await J(i,n,t)}))),await P(t)}),[Y,q,ee,J,L]),re=(0,a.useCallback)((async e=>{let{templateBlocks:t,templateParts:n,globalData:o}=e;await Promise.all(n.map((async e=>{let{area:n,content:r}=e;const i=L((0,Un.parse)(r),o);await ee(i,n,t)}))),await te(t)}),[te,L]),ie=(0,a.useCallback)((async e=>{let{templateBlocks:t,templateParts:n,globalData:o}=e;W||g?await re({templateBlocks:t,templateParts:n,globalData:o}):await oe({templateBlocks:t,templateParts:n,globalData:o}),D(!0),z()}),[W,Q,Qs,F,T,z,g,D]),ae=(0,a.useCallback)((async e=>{let{templateBlocks:t,templateParts:n,globalData:o}=e,i=r;m&&"page"!==m&&!g&&(i=hc);const a=hc===i;pc===i&&await ie({templateBlocks:t,templateParts:n,globalData:o}),a&&await oe({templateBlocks:t,templateParts:n,globalData:o})}),[g,m,r,oe,ie]),le=(0,a.useCallback)((async e=>{let{templateBlocks:t,templateParts:n,globalData:o}=e;const r=X(),i=t[1];let a,l;r.forEach(((e,t)=>{("kubio/header"===e.name||"core/template-part"===e.name&&"header"===(null==e?void 0:e.area))&&(a=t),("kubio/footer"===e.name||"core/template-part"===e.name&&"footer"===(null==e?void 0:e.area))&&(l=t)}));let s=[];s=s.concat(r.slice(0,a+1)),s.push(i),s=s.concat(r.slice(l));const c=n.filter((e=>{let{area:t}=e;return!["footer","header"].includes(t)}));ne({templateBlocks:s,templateParts:c,globalData:o}),z()}),[X,z,L,ne]),se=(0,a.useCallback)((async e=>{let t=i===dc;g&&(t=!1),Q();const{template:n,templateParts:o,globalData:r}=await Qs(e);if(!n)return void F();const a=L((0,Un.parse)(n),r);t?await le({templateBlocks:a,templateParts:o,globalData:r}):await ae({templateBlocks:a,templateParts:o,globalData:r})}),[L,Qs,Q,F,le,ae,i]),ce=(0,a.useCallback)((async e=>{let{pageBlocks:t,globalData:n}=e;const o=p().get(t,[0,"clientId"]);await I(t,d,u,!1),z(o)}),[R,Q,Xs,I,F,u,L]),ue=(0,a.useCallback)((async e=>{let{pageBlocks:t,pageId:n}=e;g&&await P([]),await T(u,t);const o=(r=n,p().get(qs,["demoPartsContentById","pages",r]));var r;const i=null==o?void 0:o.templateId;await se(i),z()}),[A,g,u,T,z,se,L]),de=(0,a.useCallback)((async e=>{const t=i===dc,n=i===mc;Q();const{page:o,globalData:r}=await Xs(e);if(!o)return void F();const a=L((0,Un.parse)(o),r);t&&await ce({pageBlocks:a,globalData:r,pageId:e}),n&&await ue({pageBlocks:a,globalData:r,pageId:e})}),[i,ce,ue,Xs,L]),me=(0,a.useCallback)((async()=>{if(!n||e)return;const t="page"===(null==n?void 0:n.type),o="template"===(null==n?void 0:n.type),r=null==n?void 0:n.id;if(r)try{t&&await de(r),o&&await se(r)}catch(e){console.error(e),O((0,x.__)("Could not import content. Please try again later","kubio"))}}),[n,de,se,e,O]);return(0,a.useEffect)((()=>{me()}),[n]),(0,a.createElement)(a.Fragment,null)})),zc=(0,a.memo)((()=>{const{categoriesList:e=[],selectedCategory:t,setSelectedCategory:n,nrOfItemsPerCategory:o}=yh(),r=(0,w.useSelect)((e=>{const{getExcludedSectionCategories:t}=e("kubio/edit-site");return t()})),i=e.filter((e=>!r.includes(e.value))),[l,s]=(0,a.useState)(t),c=(0,a.useCallback)((e=>{e!==t&&(s(e),n(e))}),[n,t,s]);return(0,a.useEffect)((()=>{l!==t&&s(t)}),[t]),(0,a.createElement)("div",{className:"kubio-predefined-layouts__category-list",onClick:e=>e.stopPropagation()},(0,a.createElement)("div",{className:"kubio-predefined-layouts__category-list__title"},"CATEGORIES"),i.map((e=>{let{label:t,value:n}=e;return(0,a.createElement)(k.Button,{key:n,onClick:()=>c(n),className:T()("kubio-predefined-layouts__category-list__item",{"kubio-predefined-layouts__category-list__item--active":n===l})},t,(0,a.createElement)("span",null,o[n]))})))})),Fc=(0,a.memo)((e=>{let{type:t,id:n,relatedFavoriteId:o}=e;const{favoritesDataByType:r,onAddToFavorites:i}=Rh(),l=(0,a.useMemo)((()=>p().get(r,[t,n],!1)),[r]),[s,c]=(0,a.useState)(l);(0,a.useEffect)((()=>{l!==s&&c(l)}),[l]);const u=(0,a.useMemo)((()=>s?"font-awesome/heart":"font-awesome/heart-o"),[s]),d=(0,a.useCallback)((async e=>{e.stopPropagation();const r=!s;c(r),i(t,o?[n,o]:n,r)}),[s,i,c,o]);return(0,a.createElement)(P.CanvasIcon,{onClick:d,className:"kubio-predefined-layouts__favorite-button",name:u})})),Gc=(0,a.memo)((e=>{let{fontsToLoad:t}=e;const n=(0,a.useCallback)((e=>{e.target.rel="stylesheet"}),[t]);return Array.isArray(t)?(0,a.createElement)(a.Fragment,null,t.map((e=>(0,a.createElement)("link",{href:`https://fonts.googleapis.com/css?family=${e}&display=swap`,key:e,rel:"preload",as:"style",onLoad:n})))):(0,a.createElement)(a.Fragment,null)})),Hc=(0,a.memo)((()=>(0,a.createElement)("div",{className:"kubio-predefined-layouts__img__placeholder"}))),Uc=e=>{let{src:t,uniqueId:n,showAnimationAtLoad:o,addImageType:r=!0,onLoad:i=p().noop,...l}=e;const[s,c]=(0,a.useState)(!0),u=(0,a.useRef)(),d=(0,a.useRef)(),m=(0,a.useRef)(!1),h=(0,a.useRef)(),g=(0,a.useRef)(!1),f=(0,a.useRef)(!1);(0,a.useEffect)((()=>{s||c(!0)}),[t]);const b=(0,a.useCallback)((()=>{var e,t;const n=u.current;if(!n)return;const o=parseInt((null===(e=d.current)||void 0===e?void 0:e.naturalWidth)||0),r=parseInt((null===(t=d.current)||void 0===t?void 0:t.naturalHeight)||0),i=n.parentNode;let a=!1;if(0!==o&&0!==r){const e=(r+10)/o;a=parseInt(i.clientHeight)/parseInt(i.clientWidth)>e}}),[u,d]),_=(0,a.useCallback)((()=>{f.current=!0;const e=u.current;e&&(e.src=t,e.setAttribute("data-is-loaded",""),c(!1),m.current&&i(),r&&b())}),[t,c,r,b]),v=(0,a.useMemo)((()=>{if(t.startsWith("data:image/"))return!0;f.current=!1,g.current=!1;const e=new Image;return d.current=e,clearTimeout(g.current),h.current=setTimeout((()=>{g.current=!0,f.current||e.complete&&_()}),350),e.onload=()=>{g.current&&_()},e.src=t,e.complete}),[t]);return(0,a.useEffect)((()=>()=>{clearTimeout(g.current)}),[]),(0,a.useLayoutEffect)((()=>{var e;null!==(e=d.current)&&void 0!==e&&e.complete&&b()}),[]),(0,a.createElement)("div",C({className:T()("kubio-predefined-layouts__img__outer",{"kubio-predefined-layouts__img__outer--with-placeholder":!v&&s})},l),(0,a.createElement)("img",{className:T()("kubio-predefined-layouts__img",{"kubio-predefined-layouts__img--with-animation":!v}),ref:u,src:t,onLoad:()=>{s||(m.current=!0,i())}}),!v&&s&&(0,a.createElement)(Hc,null))},Wc=(0,a.memo)((e=>{let{list:t,children:n=p().noop}=e;return(0,a.createElement)("div",{className:"kubio-predefined-layouts__screenshot-list"},t.map((e=>n(e))))})),jc=(0,a.memo)((0,a.forwardRef)(((e,t)=>{let{screenshot:n,screenshotFull:o,label:r="",isPack:i=!1,labelSlot:l,showFull:s=!1,uniqueId:c,isPro:u=!1,showFavorite:d=!0,isLandscape:m=!1,showLabel:p=!0,addUniquePreviewAttribute:h=!0,showAnimationAtLoad:g,onClick:f,onLoad:b,favoriteType:_,favoriteId:v,relatedFavoriteId:y,children:k,addImageType:E,...S}=e;const w=s?o:n;c=c||w;const I=(0,a.useMemo)((()=>Math.random()),[c]),x=u;let P={};return h&&(P={"data-unique-id":c}),(0,a.createElement)("div",C({key:I,className:"kubio-predefined-layouts__screenshot-preview__outer"},P,S),(0,a.createElement)("div",{ref:t,className:T()("kubio-predefined-layouts__screenshot-preview__parent",{"kubio-predefined-layouts__screenshot-preview__parent--with-pack":i,"kubio-predefined-layouts__screenshot-preview__parent--is-landscape":m})},(0,a.createElement)("div",{className:"kubio-predefined-layouts__screenshot-preview kubio-pro-item--small",onClick:f},(0,a.createElement)(Uc,{src:w,uniqueId:c,showAnimationAtLoad:g,onLoad:b,addImageType:E})),p&&(0,a.createElement)("div",{className:"kubio-predefined-layouts__screenshot-preview__label"},(0,a.createElement)("div",{className:"kubio-predefined-layouts__screenshot-preview__label__with-badge"},x&&(0,a.createElement)("span",{className:"kubio-pro-item__badge"},"PRO"),r),d&&(0,a.createElement)(Fc,{type:_,id:v,relatedFavoriteId:y}),l),k),i&&(0,a.createElement)("div",{className:"kubio-predefined-layouts__screenshot-preview__pack"},(0,a.createElement)("div",{className:"kubio-predefined-layouts__screenshot-preview__pack__layer kubio-predefined-layouts__screenshot-preview__pack--layer-1"}),(0,a.createElement)("div",{className:"kubio-predefined-layouts__screenshot-preview__pack__layer kubio-predefined-layouts__screenshot-preview__pack--layer-2"})))}))),Vc=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M13 5c-3.3 0-6 2.7-6 6 0 1.4.5 2.7 1.3 3.7l-3.8 3.8 1.1 1.1 3.8-3.8c1 .8 2.3 1.3 3.7 1.3 3.3 0 6-2.7 6-6S16.3 5 13 5zm0 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z"})),Kc=(0,a.memo)((e=>{let{placeholder:t="Search"}=e;const{searchString:n,setSearchString:o}=vh(),[r,i]=(0,a.useState)(n),l=(0,s.useDebounce)(o,300),c=(0,a.useCallback)((e=>{const t=e.target.value;i(t),l(t)}),[i,l]);return(0,a.useEffect)((()=>{r!==n&&i(n)}),[n]),(0,a.createElement)(P.InputControl,{className:"kubio-predefined-layouts__search-input",value:r,onInput:c,placeholder:t,suffix:(0,a.createElement)(k.Icon,{icon:Vc})})})),$c=(0,a.memo)((e=>{let{label:t=(0,x.__)("PRO","kubio"),className:n}=e;return(0,a.createElement)("div",{className:T()("kubio-predefined-layouts__free-pro-separator",n)},t,(0,a.createElement)("div",{className:"kubio-predefined-layouts__free-pro-separator__line"}))}));function qc(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function Yc(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function Xc(e,t){try{var n=this.props,o=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,o)}finally{this.props=n,this.state=o}}function Qc(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,o=null,r=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?o="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(o="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?r="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(r="UNSAFE_componentWillUpdate"),null!==n||null!==o||null!==r){var i=e.displayName||e.name,a="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+i+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==o?"\n  "+o:"")+(null!==r?"\n  "+r:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=qc,t.componentWillReceiveProps=Yc),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=Xc;var l=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var o=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;l.call(this,e,t,o)}}return e}function Zc(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Zc(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}(0,x.__)("ALL","kubio"),(0,x.__)("FREE","kubio"),(0,x.__)("PRO","kubio"),qc.__suppressDeprecationWarning=!0,Yc.__suppressDeprecationWarning=!0,Xc.__suppressDeprecationWarning=!0;const Jc=function(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=Zc(e))&&(o&&(o+=" "),o+=t);return o};function eu(e){var t=e.cellCount,n=e.cellSize,o=e.computeMetadataCallback,r=e.computeMetadataCallbackProps,i=e.nextCellsCount,a=e.nextCellSize,l=e.nextScrollToIndex,s=e.scrollToIndex,c=e.updateScrollOffsetForScrollToIndex;t===i&&("number"!=typeof n&&"number"!=typeof a||n===a)||(o(r),s>=0&&s===l&&c())}function tu(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var nu=function(){function e(t){var n=t.cellCount,o=t.cellSizeGetter,r=t.estimatedCellSize;Qn(this,e),Yn(this,"_cellSizeAndPositionData",{}),Yn(this,"_lastMeasuredIndex",-1),Yn(this,"_lastBatchedIndex",-1),Yn(this,"_cellCount",void 0),Yn(this,"_cellSizeGetter",void 0),Yn(this,"_estimatedCellSize",void 0),this._cellSizeGetter=o,this._cellCount=n,this._estimatedCellSize=r}return Jn(e,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(e){var t=e.cellCount,n=e.estimatedCellSize,o=e.cellSizeGetter;this._cellCount=t,this._estimatedCellSize=n,this._cellSizeGetter=o}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(e){if(e<0||e>=this._cellCount)throw Error("Requested index ".concat(e," is outside of range 0..").concat(this._cellCount));if(e>this._lastMeasuredIndex)for(var t=this.getSizeAndPositionOfLastMeasuredCell(),n=t.offset+t.size,o=this._lastMeasuredIndex+1;o<=e;o++){var r=this._cellSizeGetter({index:o});if(void 0===r||isNaN(r))throw Error("Invalid size returned for cell ".concat(o," of value ").concat(r));null===r?(this._cellSizeAndPositionData[o]={offset:n,size:0},this._lastBatchedIndex=e):(this._cellSizeAndPositionData[o]={offset:n,size:r},n+=r,this._lastMeasuredIndex=e)}return this._cellSizeAndPositionData[e]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var e=this.getSizeAndPositionOfLastMeasuredCell();return e.offset+e.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,n=void 0===t?"auto":t,o=e.containerSize,r=e.currentOffset,i=e.targetIndex;if(o<=0)return 0;var a,l=this.getSizeAndPositionOfCell(i),s=l.offset,c=s-o+l.size;switch(n){case"start":a=s;break;case"end":a=c;break;case"center":a=s-(o-l.size)/2;break;default:a=Math.max(c,Math.min(s,r))}var u=this.getTotalSize();return Math.max(0,Math.min(u-o,a))}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,n=e.offset;if(0===this.getTotalSize())return{};var o=n+t,r=this._findNearestCell(n),i=this.getSizeAndPositionOfCell(r);n=i.offset+i.size;for(var a=r;n<o&&a<this._cellCount-1;)a++,n+=this.getSizeAndPositionOfCell(a).size;return{start:r,stop:a}}},{key:"resetCell",value:function(e){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,e-1)}},{key:"_binarySearch",value:function(e,t,n){for(;t<=e;){var o=t+Math.floor((e-t)/2),r=this.getSizeAndPositionOfCell(o).offset;if(r===n)return o;r<n?t=o+1:r>n&&(e=o-1)}return t>0?t-1:0}},{key:"_exponentialSearch",value:function(e,t){for(var n=1;e<this._cellCount&&this.getSizeAndPositionOfCell(e).offset<t;)e+=n,n*=2;return this._binarySearch(Math.min(e,this._cellCount-1),Math.floor(e/2),t)}},{key:"_findNearestCell",value:function(e){if(isNaN(e))throw Error("Invalid offset ".concat(e," specified"));e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredCell(),n=Math.max(0,this._lastMeasuredIndex);return t.offset>=e?this._binarySearch(n,0,e):this._exponentialSearch(n,e)}}]),e}(),ou=function(){function e(t){var n=t.maxScrollSize,o=void 0===n?"undefined"!=typeof window&&window.chrome?16777100:15e5:n,r=tu(t,["maxScrollSize"]);Qn(this,e),Yn(this,"_cellSizeAndPositionManager",void 0),Yn(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new nu(r),this._maxScrollSize=o}return Jn(e,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(e){this._cellSizeAndPositionManager.configure(e)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(e){var t=e.containerSize,n=e.offset,o=this._cellSizeAndPositionManager.getTotalSize(),r=this.getTotalSize(),i=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:r});return Math.round(i*(r-o))}},{key:"getSizeAndPositionOfCell",value:function(e){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(e)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,n=void 0===t?"auto":t,o=e.containerSize,r=e.currentOffset,i=e.targetIndex;r=this._safeOffsetToOffset({containerSize:o,offset:r});var a=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:n,containerSize:o,currentOffset:r,targetIndex:i});return this._offsetToSafeOffset({containerSize:o,offset:a})}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,n=e.offset;return n=this._safeOffsetToOffset({containerSize:t,offset:n}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:t,offset:n})}},{key:"resetCell",value:function(e){this._cellSizeAndPositionManager.resetCell(e)}},{key:"_getOffsetPercentage",value:function(e){var t=e.containerSize,n=e.offset,o=e.totalSize;return o<=t?0:n/(o-t)}},{key:"_offsetToSafeOffset",value:function(e){var t=e.containerSize,n=e.offset,o=this._cellSizeAndPositionManager.getTotalSize(),r=this.getTotalSize();if(o===r)return n;var i=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:o});return Math.round(i*(r-t))}},{key:"_safeOffsetToOffset",value:function(e){var t=e.containerSize,n=e.offset,o=this._cellSizeAndPositionManager.getTotalSize(),r=this.getTotalSize();if(o===r)return n;var i=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:r});return Math.round(i*(o-t))}}]),e}();function ru(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={};return function(n){var o=n.callback,r=n.indices,i=Object.keys(r),a=!e||i.every((function(e){var t=r[e];return Array.isArray(t)?t.length>0:t>=0})),l=i.length!==Object.keys(t).length||i.some((function(e){var n=t[e],o=r[e];return Array.isArray(o)?n.join(",")!==o.join(","):n!==o}));t=r,a&&l&&o(r)}}function iu(e){var t=e.cellSize,n=e.cellSizeAndPositionManager,o=e.previousCellsCount,r=e.previousCellSize,i=e.previousScrollToAlignment,a=e.previousScrollToIndex,l=e.previousSize,s=e.scrollOffset,c=e.scrollToAlignment,u=e.scrollToIndex,d=e.size,m=e.sizeJustIncreasedFromZero,p=e.updateScrollIndexCallback,h=n.getCellCount(),g=u>=0&&u<h;g&&(d!==l||m||!r||"number"==typeof t&&t!==r||c!==i||u!==a)?p(u):!g&&h>0&&(d<l||h<o)&&s>n.getTotalSize()-d&&p(h-1)}const au=!("undefined"==typeof window||!window.document||!window.document.createElement);var lu,su;function cu(e){if((!lu&&0!==lu||e)&&au){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),lu=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return lu}var uu,du,mu=(su="undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).requestAnimationFrame||su.webkitRequestAnimationFrame||su.mozRequestAnimationFrame||su.oRequestAnimationFrame||su.msRequestAnimationFrame||function(e){return su.setTimeout(e,1e3/60)},pu=su.cancelAnimationFrame||su.webkitCancelAnimationFrame||su.mozCancelAnimationFrame||su.oCancelAnimationFrame||su.msCancelAnimationFrame||function(e){su.clearTimeout(e)},hu=mu,gu=pu,fu=function(e){return gu(e.id)},bu=function(e,t){var n;Promise.resolve().then((function(){n=Date.now()}));var o={id:hu((function r(){Date.now()-n>=t?e.call():o.id=hu(r)}))};return o};function _u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function vu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_u(n,!0).forEach((function(t){Yn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yu="requested",ku=(du=uu=function(e){function t(e){var n;Qn(this,t),Yn(eo(n=to(this,no(t).call(this,e))),"_onGridRenderedMemoizer",ru()),Yn(eo(n),"_onScrollMemoizer",ru(!1)),Yn(eo(n),"_deferredInvalidateColumnIndex",null),Yn(eo(n),"_deferredInvalidateRowIndex",null),Yn(eo(n),"_recomputeScrollLeftFlag",!1),Yn(eo(n),"_recomputeScrollTopFlag",!1),Yn(eo(n),"_horizontalScrollBarSize",0),Yn(eo(n),"_verticalScrollBarSize",0),Yn(eo(n),"_scrollbarPresenceChanged",!1),Yn(eo(n),"_scrollingContainer",void 0),Yn(eo(n),"_childrenToDisplay",void 0),Yn(eo(n),"_columnStartIndex",void 0),Yn(eo(n),"_columnStopIndex",void 0),Yn(eo(n),"_rowStartIndex",void 0),Yn(eo(n),"_rowStopIndex",void 0),Yn(eo(n),"_renderedColumnStartIndex",0),Yn(eo(n),"_renderedColumnStopIndex",0),Yn(eo(n),"_renderedRowStartIndex",0),Yn(eo(n),"_renderedRowStopIndex",0),Yn(eo(n),"_initialScrollTop",void 0),Yn(eo(n),"_initialScrollLeft",void 0),Yn(eo(n),"_disablePointerEventsTimeoutId",void 0),Yn(eo(n),"_styleCache",{}),Yn(eo(n),"_cellCache",{}),Yn(eo(n),"_debounceScrollEndedCallback",(function(){n._disablePointerEventsTimeoutId=null,n.setState({isScrolling:!1,needToResetStyleCache:!1})})),Yn(eo(n),"_invokeOnGridRenderedHelper",(function(){var e=n.props.onSectionRendered;n._onGridRenderedMemoizer({callback:e,indices:{columnOverscanStartIndex:n._columnStartIndex,columnOverscanStopIndex:n._columnStopIndex,columnStartIndex:n._renderedColumnStartIndex,columnStopIndex:n._renderedColumnStopIndex,rowOverscanStartIndex:n._rowStartIndex,rowOverscanStopIndex:n._rowStopIndex,rowStartIndex:n._renderedRowStartIndex,rowStopIndex:n._renderedRowStopIndex}})})),Yn(eo(n),"_setScrollingContainerRef",(function(e){n._scrollingContainer=e})),Yn(eo(n),"_onScroll",(function(e){e.target===n._scrollingContainer&&n.handleScrollEvent(e.target)}));var o=new ou({cellCount:e.columnCount,cellSizeGetter:function(n){return t._wrapSizeGetter(e.columnWidth)(n)},estimatedCellSize:t._getEstimatedColumnSize(e)}),r=new ou({cellCount:e.rowCount,cellSizeGetter:function(n){return t._wrapSizeGetter(e.rowHeight)(n)},estimatedCellSize:t._getEstimatedRowSize(e)});return n.state={instanceProps:{columnSizeAndPositionManager:o,rowSizeAndPositionManager:r,prevColumnWidth:e.columnWidth,prevRowHeight:e.rowHeight,prevColumnCount:e.columnCount,prevRowCount:e.rowCount,prevIsScrolling:!0===e.isScrolling,prevScrollToColumn:e.scrollToColumn,prevScrollToRow:e.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:1,scrollDirectionVertical:1,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},e.scrollToRow>0&&(n._initialScrollTop=n._getCalculatedScrollTop(e,n.state)),e.scrollToColumn>0&&(n._initialScrollLeft=n._getCalculatedScrollLeft(e,n.state)),n}return ro(t,e),Jn(t,[{key:"getOffsetForCell",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alignment,n=void 0===t?this.props.scrollToAlignment:t,o=e.columnIndex,r=void 0===o?this.props.scrollToColumn:o,i=e.rowIndex,a=void 0===i?this.props.scrollToRow:i,l=vu({},this.props,{scrollToAlignment:n,scrollToColumn:r,scrollToRow:a});return{scrollLeft:this._getCalculatedScrollLeft(l),scrollTop:this._getCalculatedScrollTop(l)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(e){var t=e.scrollLeft,n=void 0===t?0:t,o=e.scrollTop,r=void 0===o?0:o;if(!(r<0)){this._debounceScrollEnded();var i=this.props,a=i.autoHeight,l=i.autoWidth,s=i.height,c=i.width,u=this.state.instanceProps,d=u.scrollbarSize,m=u.rowSizeAndPositionManager.getTotalSize(),p=u.columnSizeAndPositionManager.getTotalSize(),h=Math.min(Math.max(0,p-c+d),n),g=Math.min(Math.max(0,m-s+d),r);if(this.state.scrollLeft!==h||this.state.scrollTop!==g){var f={isScrolling:!0,scrollDirectionHorizontal:h!==this.state.scrollLeft?h>this.state.scrollLeft?1:-1:this.state.scrollDirectionHorizontal,scrollDirectionVertical:g!==this.state.scrollTop?g>this.state.scrollTop?1:-1:this.state.scrollDirectionVertical,scrollPositionChangeReason:"observed"};a||(f.scrollTop=g),l||(f.scrollLeft=h),f.needToResetStyleCache=!1,this.setState(f)}this._invokeOnScrollMemoizer({scrollLeft:h,scrollTop:g,totalColumnsWidth:p,totalRowsHeight:m})}}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,n=e.rowIndex;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,t):t,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,n):n}},{key:"measureAllCells",value:function(){var e=this.props,t=e.columnCount,n=e.rowCount,o=this.state.instanceProps;o.columnSizeAndPositionManager.getSizeAndPositionOfCell(t-1),o.rowSizeAndPositionManager.getSizeAndPositionOfCell(n-1)}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,o=e.rowIndex,r=void 0===o?0:o,i=this.props,a=i.scrollToColumn,l=i.scrollToRow,s=this.state.instanceProps;s.columnSizeAndPositionManager.resetCell(n),s.rowSizeAndPositionManager.resetCell(r),this._recomputeScrollLeftFlag=a>=0&&(1===this.state.scrollDirectionHorizontal?n<=a:n>=a),this._recomputeScrollTopFlag=l>=0&&(1===this.state.scrollDirectionVertical?r<=l:r>=l),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(e){var t=e.columnIndex,n=e.rowIndex,o=this.props.columnCount,r=this.props;o>1&&void 0!==t&&this._updateScrollLeftForScrollToColumn(vu({},r,{scrollToColumn:t})),void 0!==n&&this._updateScrollTopForScrollToRow(vu({},r,{scrollToRow:n}))}},{key:"componentDidMount",value:function(){var e=this.props,n=e.getScrollbarSize,o=e.height,r=e.scrollLeft,i=e.scrollToColumn,a=e.scrollTop,l=e.scrollToRow,s=e.width,c=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),c.scrollbarSizeMeasured||this.setState((function(e){var t=vu({},e,{needToResetStyleCache:!1});return t.instanceProps.scrollbarSize=n(),t.instanceProps.scrollbarSizeMeasured=!0,t})),"number"==typeof r&&r>=0||"number"==typeof a&&a>=0){var u=t._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:r,scrollTop:a});u&&(u.needToResetStyleCache=!1,this.setState(u))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var d=o>0&&s>0;i>=0&&d&&this._updateScrollLeftForScrollToColumn(),l>=0&&d&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:r||0,scrollTop:a||0,totalColumnsWidth:c.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:c.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(e,t){var n=this,o=this.props,r=o.autoHeight,i=o.autoWidth,a=o.columnCount,l=o.height,s=o.rowCount,c=o.scrollToAlignment,u=o.scrollToColumn,d=o.scrollToRow,m=o.width,p=this.state,h=p.scrollLeft,g=p.scrollPositionChangeReason,f=p.scrollTop,b=p.instanceProps;this._handleInvalidatedGridSize();var _=a>0&&0===e.columnCount||s>0&&0===e.rowCount;g===yu&&(!i&&h>=0&&(h!==this._scrollingContainer.scrollLeft||_)&&(this._scrollingContainer.scrollLeft=h),!r&&f>=0&&(f!==this._scrollingContainer.scrollTop||_)&&(this._scrollingContainer.scrollTop=f));var v=(0===e.width||0===e.height)&&l>0&&m>0;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):iu({cellSizeAndPositionManager:b.columnSizeAndPositionManager,previousCellsCount:e.columnCount,previousCellSize:e.columnWidth,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToColumn,previousSize:e.width,scrollOffset:h,scrollToAlignment:c,scrollToIndex:u,size:m,sizeJustIncreasedFromZero:v,updateScrollIndexCallback:function(){return n._updateScrollLeftForScrollToColumn(n.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):iu({cellSizeAndPositionManager:b.rowSizeAndPositionManager,previousCellsCount:e.rowCount,previousCellSize:e.rowHeight,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToRow,previousSize:e.height,scrollOffset:f,scrollToAlignment:c,scrollToIndex:d,size:l,sizeJustIncreasedFromZero:v,updateScrollIndexCallback:function(){return n._updateScrollTopForScrollToRow(n.props)}}),this._invokeOnGridRenderedHelper(),h!==t.scrollLeft||f!==t.scrollTop){var y=b.rowSizeAndPositionManager.getTotalSize(),k=b.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:h,scrollTop:f,totalColumnsWidth:k,totalRowsHeight:y})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&fu(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var e=this.props,t=e.autoContainerWidth,n=e.autoHeight,o=e.autoWidth,r=e.className,i=e.containerProps,a=e.containerRole,l=e.containerStyle,s=e.height,c=e.id,u=e.noContentRenderer,d=e.role,m=e.style,p=e.tabIndex,h=e.width,g=this.state,f=g.instanceProps,b=g.needToResetStyleCache,_=this._isScrolling(),v={boxSizing:"border-box",direction:"ltr",height:n?"auto":s,position:"relative",width:o?"auto":h,WebkitOverflowScrolling:"touch",willChange:"transform"};b&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var y=f.columnSizeAndPositionManager.getTotalSize(),k=f.rowSizeAndPositionManager.getTotalSize(),E=k>s?f.scrollbarSize:0,S=y>h?f.scrollbarSize:0;S===this._horizontalScrollBarSize&&E===this._verticalScrollBarSize||(this._horizontalScrollBarSize=S,this._verticalScrollBarSize=E,this._scrollbarPresenceChanged=!0),v.overflowX=y+E<=h?"hidden":"auto",v.overflowY=k+S<=s?"hidden":"auto";var w=this._childrenToDisplay,I=0===w.length&&s>0&&h>0;return io.createElement("div",C({ref:this._setScrollingContainerRef},i,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:Jc("ReactVirtualized__Grid",r),id:c,onScroll:this._onScroll,role:d,style:vu({},v,{},m),tabIndex:p}),w.length>0&&io.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:a,style:vu({width:t?"auto":y,height:k,maxWidth:y,maxHeight:k,overflow:"hidden",pointerEvents:_?"none":"",position:"relative"},l)},w),I&&u())}},{key:"_calculateChildrenToRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=e.cellRenderer,o=e.cellRangeRenderer,r=e.columnCount,i=e.deferredMeasurementCache,a=e.height,l=e.overscanColumnCount,s=e.overscanIndicesGetter,c=e.overscanRowCount,u=e.rowCount,d=e.width,m=e.isScrollingOptOut,p=t.scrollDirectionHorizontal,h=t.scrollDirectionVertical,g=t.instanceProps,f=this._initialScrollTop>0?this._initialScrollTop:t.scrollTop,b=this._initialScrollLeft>0?this._initialScrollLeft:t.scrollLeft,_=this._isScrolling(e,t);if(this._childrenToDisplay=[],a>0&&d>0){var v=g.columnSizeAndPositionManager.getVisibleCellRange({containerSize:d,offset:b}),y=g.rowSizeAndPositionManager.getVisibleCellRange({containerSize:a,offset:f}),k=g.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:d,offset:b}),E=g.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:a,offset:f});this._renderedColumnStartIndex=v.start,this._renderedColumnStopIndex=v.stop,this._renderedRowStartIndex=y.start,this._renderedRowStopIndex=y.stop;var S=s({direction:"horizontal",cellCount:r,overscanCellsCount:l,scrollDirection:p,startIndex:"number"==typeof v.start?v.start:0,stopIndex:"number"==typeof v.stop?v.stop:-1}),w=s({direction:"vertical",cellCount:u,overscanCellsCount:c,scrollDirection:h,startIndex:"number"==typeof y.start?y.start:0,stopIndex:"number"==typeof y.stop?y.stop:-1}),C=S.overscanStartIndex,I=S.overscanStopIndex,T=w.overscanStartIndex,x=w.overscanStopIndex;if(i){if(!i.hasFixedHeight())for(var P=T;P<=x;P++)if(!i.has(P,0)){C=0,I=r-1;break}if(!i.hasFixedWidth())for(var R=C;R<=I;R++)if(!i.has(0,R)){T=0,x=u-1;break}}this._childrenToDisplay=o({cellCache:this._cellCache,cellRenderer:n,columnSizeAndPositionManager:g.columnSizeAndPositionManager,columnStartIndex:C,columnStopIndex:I,deferredMeasurementCache:i,horizontalOffsetAdjustment:k,isScrolling:_,isScrollingOptOut:m,parent:this,rowSizeAndPositionManager:g.rowSizeAndPositionManager,rowStartIndex:T,rowStopIndex:x,scrollLeft:b,scrollTop:f,styleCache:this._styleCache,verticalOffsetAdjustment:E,visibleColumnIndices:v,visibleRowIndices:y}),this._columnStartIndex=C,this._columnStopIndex=I,this._rowStartIndex=T,this._rowStopIndex=x}}},{key:"_debounceScrollEnded",value:function(){var e=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&fu(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=bu(this._debounceScrollEndedCallback,e)}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex&&"number"==typeof this._deferredInvalidateRowIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t})}}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,n=e.scrollLeft,o=e.scrollTop,r=e.totalColumnsWidth,i=e.totalRowsHeight;this._onScrollMemoizer({callback:function(e){var n=e.scrollLeft,o=e.scrollTop,a=t.props,l=a.height;(0,a.onScroll)({clientHeight:l,clientWidth:a.width,scrollHeight:i,scrollLeft:n,scrollTop:o,scrollWidth:r})},indices:{scrollLeft:n,scrollTop:o}})}},{key:"_isScrolling",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return Object.hasOwnProperty.call(e,"isScrolling")?Boolean(e.isScrolling):Boolean(t.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var e=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,e({horizontal:this._horizontalScrollBarSize>0,size:this.state.instanceProps.scrollbarSize,vertical:this._verticalScrollBarSize>0})}}},{key:"scrollToPosition",value:function(e){var n=e.scrollLeft,o=e.scrollTop,r=t._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:n,scrollTop:o});r&&(r.needToResetStyleCache=!1,this.setState(r))}},{key:"_getCalculatedScrollLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return t._getCalculatedScrollLeft(e,n)}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,o=t._getScrollLeftForScrollToColumnStateUpdate(e,n);o&&(o.needToResetStyleCache=!1,this.setState(o))}},{key:"_getCalculatedScrollTop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return t._getCalculatedScrollTop(e,n)}},{key:"_resetStyleCache",value:function(){var e=this._styleCache,t=this._cellCache,n=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var o=this._rowStartIndex;o<=this._rowStopIndex;o++)for(var r=this._columnStartIndex;r<=this._columnStopIndex;r++){var i="".concat(o,"-").concat(r);this._styleCache[i]=e[i],n&&(this._cellCache[i]=t[i])}}},{key:"_updateScrollTopForScrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,o=t._getScrollTopForScrollToRowStateUpdate(e,n);o&&(o.needToResetStyleCache=!1,this.setState(o))}}],[{key:"getDerivedStateFromProps",value:function(e,n){var o={};0===e.columnCount&&0!==n.scrollLeft||0===e.rowCount&&0!==n.scrollTop?(o.scrollLeft=0,o.scrollTop=0):(e.scrollLeft!==n.scrollLeft&&e.scrollToColumn<0||e.scrollTop!==n.scrollTop&&e.scrollToRow<0)&&Object.assign(o,t._getScrollToPositionStateUpdate({prevState:n,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}));var r,i,a=n.instanceProps;return o.needToResetStyleCache=!1,e.columnWidth===a.prevColumnWidth&&e.rowHeight===a.prevRowHeight||(o.needToResetStyleCache=!0),a.columnSizeAndPositionManager.configure({cellCount:e.columnCount,estimatedCellSize:t._getEstimatedColumnSize(e),cellSizeGetter:t._wrapSizeGetter(e.columnWidth)}),a.rowSizeAndPositionManager.configure({cellCount:e.rowCount,estimatedCellSize:t._getEstimatedRowSize(e),cellSizeGetter:t._wrapSizeGetter(e.rowHeight)}),0!==a.prevColumnCount&&0!==a.prevRowCount||(a.prevColumnCount=0,a.prevRowCount=0),e.autoHeight&&!1===e.isScrolling&&!0===a.prevIsScrolling&&Object.assign(o,{isScrolling:!1}),eu({cellCount:a.prevColumnCount,cellSize:"number"==typeof a.prevColumnWidth?a.prevColumnWidth:null,computeMetadataCallback:function(){return a.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.columnCount,nextCellSize:"number"==typeof e.columnWidth?e.columnWidth:null,nextScrollToIndex:e.scrollToColumn,scrollToIndex:a.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){r=t._getScrollLeftForScrollToColumnStateUpdate(e,n)}}),eu({cellCount:a.prevRowCount,cellSize:"number"==typeof a.prevRowHeight?a.prevRowHeight:null,computeMetadataCallback:function(){return a.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.rowCount,nextCellSize:"number"==typeof e.rowHeight?e.rowHeight:null,nextScrollToIndex:e.scrollToRow,scrollToIndex:a.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){i=t._getScrollTopForScrollToRowStateUpdate(e,n)}}),a.prevColumnCount=e.columnCount,a.prevColumnWidth=e.columnWidth,a.prevIsScrolling=!0===e.isScrolling,a.prevRowCount=e.rowCount,a.prevRowHeight=e.rowHeight,a.prevScrollToColumn=e.scrollToColumn,a.prevScrollToRow=e.scrollToRow,a.scrollbarSize=e.getScrollbarSize(),void 0===a.scrollbarSize?(a.scrollbarSizeMeasured=!1,a.scrollbarSize=0):a.scrollbarSizeMeasured=!0,o.instanceProps=a,vu({},o,{},r,{},i)}},{key:"_getEstimatedColumnSize",value:function(e){return"number"==typeof e.columnWidth?e.columnWidth:e.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(e){return"number"==typeof e.rowHeight?e.rowHeight:e.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(e){var t=e.prevState,n=e.scrollLeft,o=e.scrollTop,r={scrollPositionChangeReason:yu};return"number"==typeof n&&n>=0&&(r.scrollDirectionHorizontal=n>t.scrollLeft?1:-1,r.scrollLeft=n),"number"==typeof o&&o>=0&&(r.scrollDirectionVertical=o>t.scrollTop?1:-1,r.scrollTop=o),"number"==typeof n&&n>=0&&n!==t.scrollLeft||"number"==typeof o&&o>=0&&o!==t.scrollTop?r:{}}},{key:"_wrapSizeGetter",value:function(e){return"function"==typeof e?e:function(){return e}}},{key:"_getCalculatedScrollLeft",value:function(e,t){var n=e.columnCount,o=e.height,r=e.scrollToAlignment,i=e.scrollToColumn,a=e.width,l=t.scrollLeft,s=t.instanceProps;if(n>0){var c=n-1,u=i<0?c:Math.min(c,i),d=s.rowSizeAndPositionManager.getTotalSize(),m=s.scrollbarSizeMeasured&&d>o?s.scrollbarSize:0;return s.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:r,containerSize:a-m,currentOffset:l,targetIndex:u})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(e,n){var o=n.scrollLeft,r=t._getCalculatedScrollLeft(e,n);return"number"==typeof r&&r>=0&&o!==r?t._getScrollToPositionStateUpdate({prevState:n,scrollLeft:r,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(e,t){var n=e.height,o=e.rowCount,r=e.scrollToAlignment,i=e.scrollToRow,a=e.width,l=t.scrollTop,s=t.instanceProps;if(o>0){var c=o-1,u=i<0?c:Math.min(c,i),d=s.columnSizeAndPositionManager.getTotalSize(),m=s.scrollbarSizeMeasured&&d>a?s.scrollbarSize:0;return s.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:r,containerSize:n-m,currentOffset:l,targetIndex:u})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(e,n){var o=n.scrollTop,r=t._getCalculatedScrollTop(e,n);return"number"==typeof r&&r>=0&&o!==r?t._getScrollToPositionStateUpdate({prevState:n,scrollLeft:-1,scrollTop:r}):{}}}]),t}(io.PureComponent),Yn(uu,"propTypes",null),du);Yn(ku,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:function(e){for(var t=e.cellCache,n=e.cellRenderer,o=e.columnSizeAndPositionManager,r=e.columnStartIndex,i=e.columnStopIndex,a=e.deferredMeasurementCache,l=e.horizontalOffsetAdjustment,s=e.isScrolling,c=e.isScrollingOptOut,u=e.parent,d=e.rowSizeAndPositionManager,m=e.rowStartIndex,p=e.rowStopIndex,h=e.styleCache,g=e.verticalOffsetAdjustment,f=e.visibleColumnIndices,b=e.visibleRowIndices,_=[],v=o.areOffsetsAdjusted()||d.areOffsetsAdjusted(),y=!s&&!v,k=m;k<=p;k++)for(var E=d.getSizeAndPositionOfCell(k),S=r;S<=i;S++){var w=o.getSizeAndPositionOfCell(S),C=S>=f.start&&S<=f.stop&&k>=b.start&&k<=b.stop,I="".concat(k,"-").concat(S),T=void 0;y&&h[I]?T=h[I]:a&&!a.has(k,S)?T={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(T={height:E.size,left:w.offset+l,position:"absolute",top:E.offset+g,width:w.size},h[I]=T);var x={columnIndex:S,isScrolling:s,isVisible:C,key:I,parent:u,rowIndex:k,style:T},P=void 0;!c&&!s||l||g?P=n(x):(t[I]||(t[I]=n(x)),P=t[I]),null!=P&&!1!==P&&_.push(P)}return _},containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:cu,noContentRenderer:function(){return null},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:function(e){var t=e.cellCount,n=e.overscanCellsCount,o=e.scrollDirection,r=e.startIndex,i=e.stopIndex;return 1===o?{overscanStartIndex:Math.max(0,r),overscanStopIndex:Math.min(t-1,i+n)}:{overscanStartIndex:Math.max(0,r-n),overscanStopIndex:Math.min(t-1,i)}},overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1}),Qc(ku);const Eu=ku;function Su(e){var t=e.cellCount,n=e.overscanCellsCount,o=e.scrollDirection,r=e.startIndex,i=e.stopIndex;return n=Math.max(1,n),1===o?{overscanStartIndex:Math.max(0,r-1),overscanStopIndex:Math.min(t-1,i+n)}:{overscanStartIndex:Math.max(0,r-n),overscanStopIndex:Math.min(t-1,i+1)}}var wu,Cu;function Iu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var Tu,xu,Pu=(Cu=wu=function(e){function t(){var e,n;Qn(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return Yn(eo(n=to(this,(e=no(t)).call.apply(e,[this].concat(r)))),"state",{scrollToColumn:0,scrollToRow:0,instanceProps:{prevScrollToColumn:0,prevScrollToRow:0}}),Yn(eo(n),"_columnStartIndex",0),Yn(eo(n),"_columnStopIndex",0),Yn(eo(n),"_rowStartIndex",0),Yn(eo(n),"_rowStopIndex",0),Yn(eo(n),"_onKeyDown",(function(e){var t=n.props,o=t.columnCount,r=t.disabled,i=t.mode,a=t.rowCount;if(!r){var l=n._getScrollState(),s=l.scrollToColumn,c=l.scrollToRow,u=n._getScrollState(),d=u.scrollToColumn,m=u.scrollToRow;switch(e.key){case"ArrowDown":m="cells"===i?Math.min(m+1,a-1):Math.min(n._rowStopIndex+1,a-1);break;case"ArrowLeft":d="cells"===i?Math.max(d-1,0):Math.max(n._columnStartIndex-1,0);break;case"ArrowRight":d="cells"===i?Math.min(d+1,o-1):Math.min(n._columnStopIndex+1,o-1);break;case"ArrowUp":m="cells"===i?Math.max(m-1,0):Math.max(n._rowStartIndex-1,0)}d===s&&m===c||(e.preventDefault(),n._updateScrollState({scrollToColumn:d,scrollToRow:m}))}})),Yn(eo(n),"_onSectionRendered",(function(e){var t=e.columnStartIndex,o=e.columnStopIndex,r=e.rowStartIndex,i=e.rowStopIndex;n._columnStartIndex=t,n._columnStopIndex=o,n._rowStartIndex=r,n._rowStopIndex=i})),n}return ro(t,e),Jn(t,[{key:"setScrollIndexes",value:function(e){var t=e.scrollToColumn,n=e.scrollToRow;this.setState({scrollToRow:n,scrollToColumn:t})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,o=this._getScrollState(),r=o.scrollToColumn,i=o.scrollToRow;return io.createElement("div",{className:t,onKeyDown:this._onKeyDown},n({onSectionRendered:this._onSectionRendered,scrollToColumn:r,scrollToRow:i}))}},{key:"_getScrollState",value:function(){return this.props.isControlled?this.props:this.state}},{key:"_updateScrollState",value:function(e){var t=e.scrollToColumn,n=e.scrollToRow,o=this.props,r=o.isControlled,i=o.onScrollToChange;"function"==typeof i&&i({scrollToColumn:t,scrollToRow:n}),r||this.setState({scrollToColumn:t,scrollToRow:n})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isControlled?{}:e.scrollToColumn!==t.instanceProps.prevScrollToColumn||e.scrollToRow!==t.instanceProps.prevScrollToRow?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Iu(n,!0).forEach((function(t){Yn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iu(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{scrollToColumn:e.scrollToColumn,scrollToRow:e.scrollToRow,instanceProps:{prevScrollToColumn:e.scrollToColumn,prevScrollToRow:e.scrollToRow}}):{}}}]),t}(io.PureComponent),Yn(wu,"propTypes",null),Cu);function Ru(e,t){var o,r=void 0!==(o=void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:n.g).document&&o.document.attachEvent;if(!r){var i=function(){var e=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||function(e){return o.setTimeout(e,20)};return function(t){return e(t)}}(),a=function(){var e=o.cancelAnimationFrame||o.mozCancelAnimationFrame||o.webkitCancelAnimationFrame||o.clearTimeout;return function(t){return e(t)}}(),l=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,o=t.lastElementChild,r=n.firstElementChild;o.scrollLeft=o.scrollWidth,o.scrollTop=o.scrollHeight,r.style.width=n.offsetWidth+1+"px",r.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},s=function(e){if(!(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;l(this),this.__resizeRAF__&&a(this.__resizeRAF__),this.__resizeRAF__=i((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(n){n.call(t,e)})))}))}},c=!1,u="",d="animationstart",m="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),h=o.document.createElement("fakeelement");if(void 0!==h.style.animationName&&(c=!0),!1===c)for(var g=0;g<m.length;g++)if(void 0!==h.style[m[g]+"AnimationName"]){u="-"+m[g].toLowerCase()+"-",d=p[g],c=!0;break}var f="resizeanim",b="@"+u+"keyframes "+f+" { from { opacity: 0; } to { opacity: 0; } } ",_=u+"animation: 1ms "+f+"; "}return{addResizeListener:function(t,n){if(r)t.attachEvent("onresize",n);else{if(!t.__resizeTriggers__){var i=t.ownerDocument,a=o.getComputedStyle(t);a&&"static"==a.position&&(t.style.position="relative"),function(t){if(!t.getElementById("detectElementResize")){var n=(b||"")+".resize-triggers { "+(_||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',o=t.head||t.getElementsByTagName("head")[0],r=t.createElement("style");r.id="detectElementResize",r.type="text/css",null!=e&&r.setAttribute("nonce",e),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(t.createTextNode(n)),o.appendChild(r)}}(i),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=i.createElement("div")).className="resize-triggers";var c='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>';if(window.trustedTypes){var u=trustedTypes.createPolicy("react-virtualized-auto-sizer",{createHTML:function(){return c}});t.__resizeTriggers__.innerHTML=u.createHTML("")}else t.__resizeTriggers__.innerHTML=c;t.appendChild(t.__resizeTriggers__),l(t),t.addEventListener("scroll",s,!0),d&&(t.__resizeTriggers__.__animationListener__=function(e){e.animationName==f&&l(t)},t.__resizeTriggers__.addEventListener(d,t.__resizeTriggers__.__animationListener__))}t.__resizeListeners__.push(n)}},removeResizeListener:function(e,t){if(r)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",s,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(d,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}function Au(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ou(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Au(n,!0).forEach((function(t){Yn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Au(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Yn(Pu,"defaultProps",{disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0}),Qc(Pu);var Nu=(xu=Tu=function(e){function t(){var e,n;Qn(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return Yn(eo(n=to(this,(e=no(t)).call.apply(e,[this].concat(r)))),"state",{height:n.props.defaultHeight||0,width:n.props.defaultWidth||0}),Yn(eo(n),"_parentNode",void 0),Yn(eo(n),"_autoSizer",void 0),Yn(eo(n),"_window",void 0),Yn(eo(n),"_detectElementResize",void 0),Yn(eo(n),"_onResize",(function(){var e=n.props,t=e.disableHeight,o=e.disableWidth,r=e.onResize;if(n._parentNode){var i=n._parentNode.offsetHeight||0,a=n._parentNode.offsetWidth||0,l=(n._window||window).getComputedStyle(n._parentNode)||{},s=parseInt(l.paddingLeft,10)||0,c=parseInt(l.paddingRight,10)||0,u=parseInt(l.paddingTop,10)||0,d=parseInt(l.paddingBottom,10)||0,m=i-u-d,p=a-s-c;(!t&&n.state.height!==m||!o&&n.state.width!==p)&&(n.setState({height:i-u-d,width:a-s-c}),r({height:i,width:a}))}})),Yn(eo(n),"_setRef",(function(e){n._autoSizer=e})),n}return ro(t,e),Jn(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=Ru(e,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,o=e.disableHeight,r=e.disableWidth,i=e.style,a=this.state,l=a.height,s=a.width,c={overflow:"visible"},u={};return o||(c.height=0,u.height=l),r||(c.width=0,u.width=s),io.createElement("div",{className:n,ref:this._setRef,style:Ou({},c,{},i)},t(u))}}]),t}(io.Component),Yn(Tu,"propTypes",null),xu);Yn(Nu,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}});var Mu,Du,Bu=(Du=Mu=function(e){function t(){var e,n;Qn(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return Yn(eo(n=to(this,(e=no(t)).call.apply(e,[this].concat(r)))),"_child",void 0),Yn(eo(n),"_measure",(function(){var e=n.props,t=e.cache,o=e.columnIndex,r=void 0===o?0:o,i=e.parent,a=e.rowIndex,l=void 0===a?n.props.index||0:a,s=n._getCellMeasurements(),c=s.height,u=s.width;c===t.getHeight(l,r)&&u===t.getWidth(l,r)||(t.set(l,r,u,c),i&&"function"==typeof i.recomputeGridSize&&i.recomputeGridSize({columnIndex:r,rowIndex:l}))})),Yn(eo(n),"_registerChild",(function(e){!e||e instanceof Element||console.warn("CellMeasurer registerChild expects to be passed Element or null"),n._child=e,e&&n._maybeMeasureCell()})),n}return ro(t,e),Jn(t,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var e=this.props.children;return"function"==typeof e?e({measure:this._measure,registerChild:this._registerChild}):e}},{key:"_getCellMeasurements",value:function(){var e=this.props.cache,t=this._child||(0,so.findDOMNode)(this);if(t&&t.ownerDocument&&t.ownerDocument.defaultView&&t instanceof t.ownerDocument.defaultView.HTMLElement){var n=t.style.width,o=t.style.height;e.hasFixedWidth()||(t.style.width="auto"),e.hasFixedHeight()||(t.style.height="auto");var r=Math.ceil(t.offsetHeight),i=Math.ceil(t.offsetWidth);return n&&(t.style.width=n),o&&(t.style.height=o),{height:r,width:i}}return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var e=this.props,t=e.cache,n=e.columnIndex,o=void 0===n?0:n,r=e.parent,i=e.rowIndex,a=void 0===i?this.props.index||0:i;if(!t.has(a,o)){var l=this._getCellMeasurements(),s=l.height,c=l.width;t.set(a,o,c,s),r&&"function"==typeof r.invalidateCellSizeAfterRender&&r.invalidateCellSizeAfterRender({columnIndex:o,rowIndex:a})}}}]),t}(io.PureComponent),Yn(Mu,"propTypes",null),Du);function Lu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function zu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lu(n,!0).forEach((function(t){Yn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lu(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Yn(Bu,"__internalCellMeasurerFlag",!1);var Fu="requested",Gu=function(e){function t(){var e,n;Qn(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return Yn(eo(n=to(this,(e=no(t)).call.apply(e,[this].concat(r)))),"state",{isScrolling:!1,scrollLeft:0,scrollTop:0}),Yn(eo(n),"_calculateSizeAndPositionDataOnNextUpdate",!1),Yn(eo(n),"_onSectionRenderedMemoizer",ru()),Yn(eo(n),"_onScrollMemoizer",ru(!1)),Yn(eo(n),"_invokeOnSectionRenderedHelper",(function(){var e=n.props,t=e.cellLayoutManager,o=e.onSectionRendered;n._onSectionRenderedMemoizer({callback:o,indices:{indices:t.getLastRenderedIndices()}})})),Yn(eo(n),"_setScrollingContainerRef",(function(e){n._scrollingContainer=e})),Yn(eo(n),"_updateScrollPositionForScrollToCell",(function(){var e=n.props,t=e.cellLayoutManager,o=e.height,r=e.scrollToAlignment,i=e.scrollToCell,a=e.width,l=n.state,s=l.scrollLeft,c=l.scrollTop;if(i>=0){var u=t.getScrollPositionForCell({align:r,cellIndex:i,height:o,scrollLeft:s,scrollTop:c,width:a});u.scrollLeft===s&&u.scrollTop===c||n._setScrollPosition(u)}})),Yn(eo(n),"_onScroll",(function(e){if(e.target===n._scrollingContainer){n._enablePointerEventsAfterDelay();var t=n.props,o=t.cellLayoutManager,r=t.height,i=t.isScrollingChange,a=t.width,l=n._scrollbarSize,s=o.getTotalSize(),c=s.height,u=s.width,d=Math.max(0,Math.min(u-a+l,e.target.scrollLeft)),m=Math.max(0,Math.min(c-r+l,e.target.scrollTop));if(n.state.scrollLeft!==d||n.state.scrollTop!==m){var p=e.cancelable?"observed":Fu;n.state.isScrolling||i(!0),n.setState({isScrolling:!0,scrollLeft:d,scrollPositionChangeReason:p,scrollTop:m})}n._invokeOnScrollMemoizer({scrollLeft:d,scrollTop:m,totalWidth:u,totalHeight:c})}})),n._scrollbarSize=cu(),void 0===n._scrollbarSize?(n._scrollbarSizeMeasured=!1,n._scrollbarSize=0):n._scrollbarSizeMeasured=!0,n}return ro(t,e),Jn(t,[{key:"recomputeCellSizesAndPositions",value:function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.cellLayoutManager,n=e.scrollLeft,o=e.scrollToCell,r=e.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=cu(),this._scrollbarSizeMeasured=!0,this.setState({})),o>=0?this._updateScrollPositionForScrollToCell():(n>=0||r>=0)&&this._setScrollPosition({scrollLeft:n,scrollTop:r}),this._invokeOnSectionRenderedHelper();var i=t.getTotalSize(),a=i.height,l=i.width;this._invokeOnScrollMemoizer({scrollLeft:n||0,scrollTop:r||0,totalHeight:a,totalWidth:l})}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,o=n.height,r=n.scrollToAlignment,i=n.scrollToCell,a=n.width,l=this.state,s=l.scrollLeft,c=l.scrollPositionChangeReason,u=l.scrollTop;c===Fu&&(s>=0&&s!==t.scrollLeft&&s!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=s),u>=0&&u!==t.scrollTop&&u!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=u)),o===e.height&&r===e.scrollToAlignment&&i===e.scrollToCell&&a===e.width||this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var e=this.props,t=e.autoHeight,n=e.cellCount,o=e.cellLayoutManager,r=e.className,i=e.height,a=e.horizontalOverscanSize,l=e.id,s=e.noContentRenderer,c=e.style,u=e.verticalOverscanSize,d=e.width,m=this.state,p=m.isScrolling,h=m.scrollLeft,g=m.scrollTop;(this._lastRenderedCellCount!==n||this._lastRenderedCellLayoutManager!==o||this._calculateSizeAndPositionDataOnNextUpdate)&&(this._lastRenderedCellCount=n,this._lastRenderedCellLayoutManager=o,this._calculateSizeAndPositionDataOnNextUpdate=!1,o.calculateSizeAndPositionData());var f=o.getTotalSize(),b=f.height,_=f.width,v=Math.max(0,h-a),y=Math.max(0,g-u),k=Math.min(_,h+d+a),E=Math.min(b,g+i+u),S=i>0&&d>0?o.cellRenderers({height:E-y,isScrolling:p,width:k-v,x:v,y}):[],w={boxSizing:"border-box",direction:"ltr",height:t?"auto":i,position:"relative",WebkitOverflowScrolling:"touch",width:d,willChange:"transform"},C=b>i?this._scrollbarSize:0,I=_>d?this._scrollbarSize:0;return w.overflowX=_+C<=d?"hidden":"auto",w.overflowY=b+I<=i?"hidden":"auto",io.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:Jc("ReactVirtualized__Collection",r),id:l,onScroll:this._onScroll,role:"grid",style:zu({},w,{},c),tabIndex:0},n>0&&io.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:b,maxHeight:b,maxWidth:_,overflow:"hidden",pointerEvents:p?"none":"",width:_}},S),0===n&&s())}},{key:"_enablePointerEventsAfterDelay",value:function(){var e=this;this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=setTimeout((function(){(0,e.props.isScrollingChange)(!1),e._disablePointerEventsTimeoutId=null,e.setState({isScrolling:!1})}),150)}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,n=e.scrollLeft,o=e.scrollTop,r=e.totalHeight,i=e.totalWidth;this._onScrollMemoizer({callback:function(e){var n=e.scrollLeft,o=e.scrollTop,a=t.props,l=a.height;(0,a.onScroll)({clientHeight:l,clientWidth:a.width,scrollHeight:r,scrollLeft:n,scrollTop:o,scrollWidth:i})},indices:{scrollLeft:n,scrollTop:o}})}},{key:"_setScrollPosition",value:function(e){var t=e.scrollLeft,n=e.scrollTop,o={scrollPositionChangeReason:Fu};t>=0&&(o.scrollLeft=t),n>=0&&(o.scrollTop=n),(t>=0&&t!==this.state.scrollLeft||n>=0&&n!==this.state.scrollTop)&&this.setState(o)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 0!==e.cellCount||0===t.scrollLeft&&0===t.scrollTop?e.scrollLeft!==t.scrollLeft||e.scrollTop!==t.scrollTop?{scrollLeft:null!=e.scrollLeft?e.scrollLeft:t.scrollLeft,scrollTop:null!=e.scrollTop?e.scrollTop:t.scrollTop,scrollPositionChangeReason:Fu}:null:{scrollLeft:0,scrollTop:0,scrollPositionChangeReason:Fu}}}]),t}(io.PureComponent);Yn(Gu,"defaultProps",{"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0}),Gu.propTypes={},Qc(Gu);const Hu=Gu;var Uu=function(){function e(t){var n=t.height,o=t.width,r=t.x,i=t.y;Qn(this,e),this.height=n,this.width=o,this.x=r,this.y=i,this._indexMap={},this._indices=[]}return Jn(e,[{key:"addCellIndex",value:function(e){var t=e.index;this._indexMap[t]||(this._indexMap[t]=!0,this._indices.push(t))}},{key:"getCellIndices",value:function(){return this._indices}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y," ").concat(this.width,"x").concat(this.height)}}]),e}(),Wu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;Qn(this,e),this._sectionSize=t,this._cellMetadata=[],this._sections={}}return Jn(e,[{key:"getCellIndices",value:function(e){var t=e.height,n=e.width,o=e.x,r=e.y,i={};return this.getSections({height:t,width:n,x:o,y:r}).forEach((function(e){return e.getCellIndices().forEach((function(e){i[e]=e}))})),Object.keys(i).map((function(e){return i[e]}))}},{key:"getCellMetadata",value:function(e){var t=e.index;return this._cellMetadata[t]}},{key:"getSections",value:function(e){for(var t=e.height,n=e.width,o=e.x,r=e.y,i=Math.floor(o/this._sectionSize),a=Math.floor((o+n-1)/this._sectionSize),l=Math.floor(r/this._sectionSize),s=Math.floor((r+t-1)/this._sectionSize),c=[],u=i;u<=a;u++)for(var d=l;d<=s;d++){var m="".concat(u,".").concat(d);this._sections[m]||(this._sections[m]=new Uu({height:this._sectionSize,width:this._sectionSize,x:u*this._sectionSize,y:d*this._sectionSize})),c.push(this._sections[m])}return c}},{key:"getTotalSectionCount",value:function(){return Object.keys(this._sections).length}},{key:"toString",value:function(){var e=this;return Object.keys(this._sections).map((function(t){return e._sections[t].toString()}))}},{key:"registerCell",value:function(e){var t=e.cellMetadatum,n=e.index;this._cellMetadata[n]=t,this.getSections(t).forEach((function(e){return e.addCellIndex({index:n})}))}}]),e}();function ju(e){var t=e.align,n=void 0===t?"auto":t,o=e.cellOffset,r=e.cellSize,i=e.containerSize,a=e.currentOffset,l=o,s=l-i+r;switch(n){case"start":return l;case"end":return s;case"center":return l-(i-r)/2;default:return Math.max(s,Math.min(l,a))}}var Vu=function(e){function t(e,n){var o;return Qn(this,t),(o=to(this,no(t).call(this,e,n)))._cellMetadata=[],o._lastRenderedCellIndices=[],o._cellCache=[],o._isScrollingChange=o._isScrollingChange.bind(eo(o)),o._setCollectionViewRef=o._setCollectionViewRef.bind(eo(o)),o}return ro(t,e),Jn(t,[{key:"forceUpdate",value:function(){void 0!==this._collectionView&&this._collectionView.forceUpdate()}},{key:"recomputeCellSizesAndPositions",value:function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()}},{key:"render",value:function(){var e=C({},this.props);return io.createElement(Hu,C({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},e))}},{key:"calculateSizeAndPositionData",value:function(){var e=this.props,t=function(e){for(var t=e.cellCount,n=e.cellSizeAndPositionGetter,o=[],r=new Wu(e.sectionSize),i=0,a=0,l=0;l<t;l++){var s=n({index:l});if(null==s.height||isNaN(s.height)||null==s.width||isNaN(s.width)||null==s.x||isNaN(s.x)||null==s.y||isNaN(s.y))throw Error("Invalid metadata returned for cell ".concat(l,":\n        x:").concat(s.x,", y:").concat(s.y,", width:").concat(s.width,", height:").concat(s.height));i=Math.max(i,s.y+s.height),a=Math.max(a,s.x+s.width),o[l]=s,r.registerCell({cellMetadatum:s,index:l})}return{cellMetadata:o,height:i,sectionManager:r,width:a}}({cellCount:e.cellCount,cellSizeAndPositionGetter:e.cellSizeAndPositionGetter,sectionSize:e.sectionSize});this._cellMetadata=t.cellMetadata,this._sectionManager=t.sectionManager,this._height=t.height,this._width=t.width}},{key:"getLastRenderedIndices",value:function(){return this._lastRenderedCellIndices}},{key:"getScrollPositionForCell",value:function(e){var t=e.align,n=e.cellIndex,o=e.height,r=e.scrollLeft,i=e.scrollTop,a=e.width,l=this.props.cellCount;if(n>=0&&n<l){var s=this._cellMetadata[n];r=ju({align:t,cellOffset:s.x,cellSize:s.width,containerSize:a,currentOffset:r,targetIndex:n}),i=ju({align:t,cellOffset:s.y,cellSize:s.height,containerSize:o,currentOffset:i,targetIndex:n})}return{scrollLeft:r,scrollTop:i}}},{key:"getTotalSize",value:function(){return{height:this._height,width:this._width}}},{key:"cellRenderers",value:function(e){var t=this,n=e.height,o=e.isScrolling,r=e.width,i=e.x,a=e.y,l=this.props,s=l.cellGroupRenderer,c=l.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:n,width:r,x:i,y:a}),s({cellCache:this._cellCache,cellRenderer:c,cellSizeAndPositionGetter:function(e){var n=e.index;return t._sectionManager.getCellMetadata({index:n})},indices:this._lastRenderedCellIndices,isScrolling:o})}},{key:"_isScrollingChange",value:function(e){e||(this._cellCache=[])}},{key:"_setCollectionViewRef",value:function(e){this._collectionView=e}}]),t}(io.PureComponent);Yn(Vu,"defaultProps",{"aria-label":"grid",cellGroupRenderer:function(e){var t=e.cellCache,n=e.cellRenderer,o=e.cellSizeAndPositionGetter,r=e.indices,i=e.isScrolling;return r.map((function(e){var r=o({index:e}),a={index:e,isScrolling:i,key:e,style:{height:r.height,left:r.x,position:"absolute",top:r.y,width:r.width}};return i?(e in t||(t[e]=n(a)),t[e]):n(a)})).filter((function(e){return!!e}))}}),Vu.propTypes={},(function(e){function t(e,n){var o;return Qn(this,t),(o=to(this,no(t).call(this,e,n)))._registerChild=o._registerChild.bind(eo(o)),o}return ro(t,e),Jn(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.columnMaxWidth,o=t.columnMinWidth,r=t.columnCount,i=t.width;n===e.columnMaxWidth&&o===e.columnMinWidth&&r===e.columnCount&&i===e.width||this._registeredChild&&this._registeredChild.recomputeGridSize()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.columnMaxWidth,o=e.columnMinWidth,r=e.columnCount,i=e.width,a=o||1,l=n?Math.min(n,i):i,s=i/r;return s=Math.max(a,s),s=Math.min(l,s),s=Math.floor(s),t({adjustedWidth:Math.min(i,s*r),columnWidth:s,getColumnWidth:function(){return s},registerChild:this._registerChild})}},{key:"_registerChild",value:function(e){if(e&&"function"!=typeof e.recomputeGridSize)throw Error("Unexpected child type registered; only Grid/MultiGrid children are supported.");this._registeredChild=e,this._registeredChild&&this._registeredChild.recomputeGridSize()}}]),t}(io.PureComponent)).propTypes={};var Ku=function(e){function t(e,n){var o;return Qn(this,t),(o=to(this,no(t).call(this,e,n)))._loadMoreRowsMemoizer=ru(),o._onRowsRendered=o._onRowsRendered.bind(eo(o)),o._registerChild=o._registerChild.bind(eo(o)),o}return ro(t,e),Jn(t,[{key:"resetLoadMoreRowsCache",value:function(e){this._loadMoreRowsMemoizer=ru(),e&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){return(0,this.props.children)({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(e){var t=this,n=this.props.loadMoreRows;e.forEach((function(e){var o=n(e);o&&o.then((function(){var n;(n={lastRenderedStartIndex:t._lastRenderedStartIndex,lastRenderedStopIndex:t._lastRenderedStopIndex,startIndex:e.startIndex,stopIndex:e.stopIndex}).startIndex>n.lastRenderedStopIndex||n.stopIndex<n.lastRenderedStartIndex||t._registeredChild&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n="function"==typeof e.recomputeGridSize?e.recomputeGridSize:e.recomputeRowHeights;n?n.call(e,t):e.forceUpdate()}(t._registeredChild,t._lastRenderedStartIndex)}))}))}},{key:"_onRowsRendered",value:function(e){var t=e.startIndex,n=e.stopIndex;this._lastRenderedStartIndex=t,this._lastRenderedStopIndex=n,this._doStuff(t,n)}},{key:"_doStuff",value:function(e,t){var n,o=this,r=this.props,i=r.isRowLoaded,a=r.minimumBatchSize,l=r.rowCount,s=r.threshold,c=function(e){for(var t=e.isRowLoaded,n=e.minimumBatchSize,o=e.rowCount,r=e.stopIndex,i=[],a=null,l=null,s=e.startIndex;s<=r;s++)t({index:s})?null!==l&&(i.push({startIndex:a,stopIndex:l}),a=l=null):(l=s,null===a&&(a=s));if(null!==l){for(var c=Math.min(Math.max(l,a+n-1),o-1),u=l+1;u<=c&&!t({index:u});u++)l=u;i.push({startIndex:a,stopIndex:l})}if(i.length)for(var d=i[0];d.stopIndex-d.startIndex+1<n&&d.startIndex>0;){var m=d.startIndex-1;if(t({index:m}))break;d.startIndex=m}return i}({isRowLoaded:i,minimumBatchSize:a,rowCount:l,startIndex:Math.max(0,e-s),stopIndex:Math.min(l-1,t+s)}),u=(n=[]).concat.apply(n,mo(c.map((function(e){return[e.startIndex,e.stopIndex]}))));this._loadMoreRowsMemoizer({callback:function(){o._loadUnloadedRanges(c)},indices:{squashedUnloadedRanges:u}})}},{key:"_registerChild",value:function(e){this._registeredChild=e}}]),t}(io.PureComponent);Yn(Ku,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15}),Ku.propTypes={};var $u,qu,Yu=(qu=$u=function(e){function t(){var e,n;Qn(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return Yn(eo(n=to(this,(e=no(t)).call.apply(e,[this].concat(r)))),"Grid",void 0),Yn(eo(n),"_cellRenderer",(function(e){var t=e.parent,o=e.rowIndex,r=e.style,i=e.isScrolling,a=e.isVisible,l=e.key,s=n.props.rowRenderer,c=Object.getOwnPropertyDescriptor(r,"width");return c&&c.writable&&(r.width="100%"),s({index:o,style:r,isScrolling:i,isVisible:a,key:l,parent:t})})),Yn(eo(n),"_setRef",(function(e){n.Grid=e})),Yn(eo(n),"_onScroll",(function(e){var t=e.clientHeight,o=e.scrollHeight,r=e.scrollTop;(0,n.props.onScroll)({clientHeight:t,scrollHeight:o,scrollTop:r})})),Yn(eo(n),"_onSectionRendered",(function(e){var t=e.rowOverscanStartIndex,o=e.rowOverscanStopIndex,r=e.rowStartIndex,i=e.rowStopIndex;(0,n.props.onRowsRendered)({overscanStartIndex:t,overscanStopIndex:o,startIndex:r,stopIndex:i})})),n}return ro(t,e),Jn(t,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(e){var t=e.alignment,n=e.index;return this.Grid?this.Grid.getOffsetForCell({alignment:t,rowIndex:n,columnIndex:0}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,n=e.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:n,columnIndex:t})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,o=e.rowIndex,r=void 0===o?0:o;this.Grid&&this.Grid.recomputeGridSize({rowIndex:r,columnIndex:n})}},{key:"recomputeRowHeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:e,columnIndex:0})}},{key:"scrollToPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:e})}},{key:"scrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:e})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.noRowsRenderer,o=e.scrollToIndex,r=e.width,i=Jc("ReactVirtualized__List",t);return io.createElement(Eu,C({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:i,columnWidth:r,columnCount:1,noContentRenderer:n,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:o}))}}]),t}(io.PureComponent),Yn($u,"propTypes",null),qu);Yn(Yu,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:Su,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});const Xu=function(e,t,n,o,r){return"function"==typeof n?function(e,t,n,o,r){for(var i=n+1;t<=n;){var a=t+n>>>1;r(e[a],o)>=0?(i=a,n=a-1):t=a+1}return i}(e,void 0===o?0:0|o,void 0===r?e.length-1:0|r,t,n):function(e,t,n,o){for(var r=n+1;t<=n;){var i=t+n>>>1;e[i]>=o?(r=i,n=i-1):t=i+1}return r}(e,void 0===n?0:0|n,void 0===o?e.length-1:0|o,t)};function Qu(e,t,n,o,r){this.mid=e,this.left=t,this.right=n,this.leftPoints=o,this.rightPoints=r,this.count=(t?t.count:0)+(n?n.count:0)+o.length}var Zu=Qu.prototype;function Ju(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function ed(e,t){var n=cd(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function td(e,t){var n=e.intervals([]);n.push(t),ed(e,n)}function nd(e,t){var n=e.intervals([]),o=n.indexOf(t);return o<0?0:(n.splice(o,1),ed(e,n),1)}function od(e,t,n){for(var o=0;o<e.length&&e[o][0]<=t;++o){var r=n(e[o]);if(r)return r}}function rd(e,t,n){for(var o=e.length-1;o>=0&&e[o][1]>=t;--o){var r=n(e[o]);if(r)return r}}function id(e,t){for(var n=0;n<e.length;++n){var o=t(e[n]);if(o)return o}}function ad(e,t){return e-t}function ld(e,t){return e[0]-t[0]||e[1]-t[1]}function sd(e,t){return e[1]-t[1]||e[0]-t[0]}function cd(e){if(0===e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(ad);var o=t[t.length>>1],r=[],i=[],a=[];for(n=0;n<e.length;++n){var l=e[n];l[1]<o?r.push(l):o<l[0]?i.push(l):a.push(l)}var s=a,c=a.slice();return s.sort(ld),c.sort(sd),new Qu(o,cd(r),cd(i),s,c)}function ud(e){this.root=e}Zu.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e},Zu.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?td(this,e):this.left.insert(e):this.left=cd([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?td(this,e):this.right.insert(e):this.right=cd([e]);else{var n=Xu(this.leftPoints,e,ld),o=Xu(this.rightPoints,e,sd);this.leftPoints.splice(n,0,e),this.rightPoints.splice(o,0,e)}},Zu.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(t-1)?nd(this,e):2===(i=this.left.remove(e))?(this.left=null,this.count-=1,1):(1===i&&(this.count-=1),i):0;if(e[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(t-1)?nd(this,e):2===(i=this.right.remove(e))?(this.right=null,this.count-=1,1):(1===i&&(this.count-=1),i):0;if(1===this.count)return this.leftPoints[0]===e?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===e){if(this.left&&this.right){for(var n=this,o=this.left;o.right;)n=o,o=o.right;if(n===this)o.right=this.right;else{var r=this.left,i=this.right;n.count-=o.count,n.right=o.left,o.left=r,o.right=i}Ju(this,o),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?Ju(this,this.left):Ju(this,this.right);return 1}for(r=Xu(this.leftPoints,e,ld);r<this.leftPoints.length&&this.leftPoints[r][0]===e[0];++r)if(this.leftPoints[r]===e)for(this.count-=1,this.leftPoints.splice(r,1),i=Xu(this.rightPoints,e,sd);i<this.rightPoints.length&&this.rightPoints[i][1]===e[1];++i)if(this.rightPoints[i]===e)return this.rightPoints.splice(i,1),1;return 0},Zu.queryPoint=function(e,t){return e<this.mid?this.left&&(n=this.left.queryPoint(e,t))?n:od(this.leftPoints,e,t):e>this.mid?this.right&&(n=this.right.queryPoint(e,t))?n:rd(this.rightPoints,e,t):id(this.leftPoints,t);var n},Zu.queryInterval=function(e,t,n){var o;return e<this.mid&&this.left&&(o=this.left.queryInterval(e,t,n))||t>this.mid&&this.right&&(o=this.right.queryInterval(e,t,n))?o:t<this.mid?od(this.leftPoints,t,n):e>this.mid?rd(this.rightPoints,e,n):id(this.leftPoints,n)};var dd=ud.prototype;dd.insert=function(e){this.root?this.root.insert(e):this.root=new Qu(e[0],null,null,[e],[e])},dd.remove=function(e){if(this.root){var t=this.root.remove(e);return 2===t&&(this.root=null),0!==t}return!1},dd.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)},dd.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)},Object.defineProperty(dd,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(dd,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});var md,pd,hd=function(){function e(){Qn(this,e),Yn(this,"_columnSizeMap",{}),Yn(this,"_intervalTree",new ud(null)),Yn(this,"_leftMap",{})}return Jn(e,[{key:"estimateTotalHeight",value:function(e,t,n){var o=e-this.count;return this.tallestColumnSize+Math.ceil(o/t)*n}},{key:"range",value:function(e,t,n){var o=this;this._intervalTree.queryInterval(e,e+t,(function(e){var t=Kn(e,3),r=t[0],i=(t[1],t[2]);return n(i,o._leftMap[i],r)}))}},{key:"setPosition",value:function(e,t,n,o){this._intervalTree.insert([n,n+o,e]),this._leftMap[e]=t;var r=this._columnSizeMap,i=r[t];r[t]=void 0===i?n+o:Math.max(i,n+o)}},{key:"count",get:function(){return this._intervalTree.count}},{key:"shortestColumnSize",get:function(){var e=this._columnSizeMap,t=0;for(var n in e){var o=e[n];t=0===t?o:Math.min(t,o)}return t}},{key:"tallestColumnSize",get:function(){var e=this._columnSizeMap,t=0;for(var n in e){var o=e[n];t=Math.max(t,o)}return t}}]),e}();function gd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function fd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gd(n,!0).forEach((function(t){Yn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gd(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bd=(pd=md=function(e){function t(){var e,n;Qn(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return Yn(eo(n=to(this,(e=no(t)).call.apply(e,[this].concat(r)))),"state",{isScrolling:!1,scrollTop:0}),Yn(eo(n),"_debounceResetIsScrollingId",void 0),Yn(eo(n),"_invalidateOnUpdateStartIndex",null),Yn(eo(n),"_invalidateOnUpdateStopIndex",null),Yn(eo(n),"_positionCache",new hd),Yn(eo(n),"_startIndex",null),Yn(eo(n),"_startIndexMemoized",null),Yn(eo(n),"_stopIndex",null),Yn(eo(n),"_stopIndexMemoized",null),Yn(eo(n),"_debounceResetIsScrollingCallback",(function(){n.setState({isScrolling:!1})})),Yn(eo(n),"_setScrollingContainerRef",(function(e){n._scrollingContainer=e})),Yn(eo(n),"_onScroll",(function(e){var t=n.props.height,o=e.currentTarget.scrollTop,r=Math.min(Math.max(0,n._getEstimatedTotalHeight()-t),o);o===r&&(n._debounceResetIsScrolling(),n.state.scrollTop!==r&&n.setState({isScrolling:!0,scrollTop:r}))})),n}return ro(t,e),Jn(t,[{key:"clearCellPositions",value:function(){this._positionCache=new hd,this.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.rowIndex;null===this._invalidateOnUpdateStartIndex?(this._invalidateOnUpdateStartIndex=t,this._invalidateOnUpdateStopIndex=t):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,t),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,t))}},{key:"recomputeCellPositions",value:function(){var e=this._positionCache.count-1;this._positionCache=new hd,this._populatePositionCache(0,e),this.forceUpdate()}},{key:"componentDidMount",value:function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()}},{key:"componentDidUpdate",value:function(e,t){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback(),this.props.scrollTop!==e.scrollTop&&this._debounceResetIsScrolling()}},{key:"componentWillUnmount",value:function(){this._debounceResetIsScrollingId&&fu(this._debounceResetIsScrollingId)}},{key:"render",value:function(){var e,t=this,n=this.props,o=n.autoHeight,r=n.cellCount,i=n.cellMeasurerCache,a=n.cellRenderer,l=n.className,s=n.height,c=n.id,u=n.keyMapper,d=n.overscanByPixels,m=n.role,p=n.style,h=n.tabIndex,g=n.width,f=n.rowDirection,b=this.state,_=b.isScrolling,v=b.scrollTop,y=[],k=this._getEstimatedTotalHeight(),E=this._positionCache.shortestColumnSize,S=this._positionCache.count,w=0;if(this._positionCache.range(Math.max(0,v-d),s+2*d,(function(n,o,r){var l;void 0===e?(w=n,e=n):(w=Math.min(w,n),e=Math.max(e,n)),y.push(a({index:n,isScrolling:_,key:u(n),parent:t,style:(l={height:i.getHeight(n)},Yn(l,"ltr"===f?"left":"right",o),Yn(l,"position","absolute"),Yn(l,"top",r),Yn(l,"width",i.getWidth(n)),l)}))})),E<v+s+d&&S<r)for(var C=Math.min(r-S,Math.ceil((v+s+d-E)/i.defaultHeight*g/i.defaultWidth)),I=S;I<S+C;I++)e=I,y.push(a({index:I,isScrolling:_,key:u(I),parent:this,style:{width:i.getWidth(I)}}));return this._startIndex=w,this._stopIndex=e,io.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:Jc("ReactVirtualized__Masonry",l),id:c,onScroll:this._onScroll,role:m,style:fd({boxSizing:"border-box",direction:"ltr",height:o?"auto":s,overflowX:"hidden",overflowY:k<s?"hidden":"auto",position:"relative",width:g,WebkitOverflowScrolling:"touch",willChange:"transform"},p),tabIndex:h},io.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:k,maxWidth:"100%",maxHeight:k,overflow:"hidden",pointerEvents:_?"none":"",position:"relative"}},y))}},{key:"_checkInvalidateOnUpdate",value:function(){if("number"==typeof this._invalidateOnUpdateStartIndex){var e=this._invalidateOnUpdateStartIndex,t=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(e,t),this.forceUpdate()}}},{key:"_debounceResetIsScrolling",value:function(){var e=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&fu(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=bu(this._debounceResetIsScrollingCallback,e)}},{key:"_getEstimatedTotalHeight",value:function(){var e=this.props,t=e.cellCount,n=e.cellMeasurerCache,o=e.width,r=Math.max(1,Math.floor(o/n.defaultWidth));return this._positionCache.estimateTotalHeight(t,r,n.defaultHeight)}},{key:"_invokeOnScrollCallback",value:function(){var e=this.props,t=e.height,n=e.onScroll,o=this.state.scrollTop;this._onScrollMemoized!==o&&(n({clientHeight:t,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:o}),this._onScrollMemoized=o)}},{key:"_invokeOnCellsRenderedCallback",value:function(){this._startIndexMemoized===this._startIndex&&this._stopIndexMemoized===this._stopIndex||((0,this.props.onCellsRendered)({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex)}},{key:"_populatePositionCache",value:function(e,t){for(var n=this.props,o=n.cellMeasurerCache,r=n.cellPositioner,i=e;i<=t;i++){var a=r(i),l=a.left,s=a.top;this._positionCache.setPosition(i,l,s,o.getHeight(i))}}}],[{key:"getDerivedStateFromProps",value:function(e,t){return void 0!==e.scrollTop&&t.scrollTop!==e.scrollTop?{isScrolling:!0,scrollTop:e.scrollTop}:null}}]),t}(io.PureComponent),Yn(md,"propTypes",null),pd);function _d(){}Yn(bd,"defaultProps",{autoHeight:!1,keyMapper:function(e){return e},onCellsRendered:_d,onScroll:_d,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:150,style:{},tabIndex:0,rowDirection:"ltr"}),Qc(bd);var vd=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Qn(this,e),Yn(this,"_cellMeasurerCache",void 0),Yn(this,"_columnIndexOffset",void 0),Yn(this,"_rowIndexOffset",void 0),Yn(this,"columnWidth",(function(e){var n=e.index;t._cellMeasurerCache.columnWidth({index:n+t._columnIndexOffset})})),Yn(this,"rowHeight",(function(e){var n=e.index;t._cellMeasurerCache.rowHeight({index:n+t._rowIndexOffset})}));var o=n.cellMeasurerCache,r=n.columnIndexOffset,i=void 0===r?0:r,a=n.rowIndexOffset,l=void 0===a?0:a;this._cellMeasurerCache=o,this._columnIndexOffset=i,this._rowIndexOffset=l}return Jn(e,[{key:"clear",value:function(e,t){this._cellMeasurerCache.clear(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"clearAll",value:function(){this._cellMeasurerCache.clearAll()}},{key:"hasFixedHeight",value:function(){return this._cellMeasurerCache.hasFixedHeight()}},{key:"hasFixedWidth",value:function(){return this._cellMeasurerCache.hasFixedWidth()}},{key:"getHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._cellMeasurerCache.getHeight(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"getWidth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._cellMeasurerCache.getWidth(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"has",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._cellMeasurerCache.has(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"set",value:function(e,t,n,o){this._cellMeasurerCache.set(e+this._rowIndexOffset,t+this._columnIndexOffset,n,o)}},{key:"defaultHeight",get:function(){return this._cellMeasurerCache.defaultHeight}},{key:"defaultWidth",get:function(){return this._cellMeasurerCache.defaultWidth}}]),e}();function yd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function kd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yd(n,!0).forEach((function(t){Yn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yd(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ed=function(e){function t(e,n){var o;Qn(this,t),Yn(eo(o=to(this,no(t).call(this,e,n))),"state",{scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1}),Yn(eo(o),"_deferredInvalidateColumnIndex",null),Yn(eo(o),"_deferredInvalidateRowIndex",null),Yn(eo(o),"_bottomLeftGridRef",(function(e){o._bottomLeftGrid=e})),Yn(eo(o),"_bottomRightGridRef",(function(e){o._bottomRightGrid=e})),Yn(eo(o),"_cellRendererBottomLeftGrid",(function(e){var t=e.rowIndex,n=tu(e,["rowIndex"]),r=o.props,i=r.cellRenderer,a=r.fixedRowCount;return t===r.rowCount-a?io.createElement("div",{key:n.key,style:kd({},n.style,{height:20})}):i(kd({},n,{parent:eo(o),rowIndex:t+a}))})),Yn(eo(o),"_cellRendererBottomRightGrid",(function(e){var t=e.columnIndex,n=e.rowIndex,r=tu(e,["columnIndex","rowIndex"]),i=o.props,a=i.cellRenderer,l=i.fixedColumnCount,s=i.fixedRowCount;return a(kd({},r,{columnIndex:t+l,parent:eo(o),rowIndex:n+s}))})),Yn(eo(o),"_cellRendererTopRightGrid",(function(e){var t=e.columnIndex,n=tu(e,["columnIndex"]),r=o.props,i=r.cellRenderer,a=r.columnCount,l=r.fixedColumnCount;return t===a-l?io.createElement("div",{key:n.key,style:kd({},n.style,{width:20})}):i(kd({},n,{columnIndex:t+l,parent:eo(o)}))})),Yn(eo(o),"_columnWidthRightGrid",(function(e){var t=e.index,n=o.props,r=n.columnCount,i=n.fixedColumnCount,a=n.columnWidth,l=o.state,s=l.scrollbarSize;return l.showHorizontalScrollbar&&t===r-i?s:"function"==typeof a?a({index:t+i}):a})),Yn(eo(o),"_onScroll",(function(e){var t=e.scrollLeft,n=e.scrollTop;o.setState({scrollLeft:t,scrollTop:n});var r=o.props.onScroll;r&&r(e)})),Yn(eo(o),"_onScrollbarPresenceChange",(function(e){var t=e.horizontal,n=e.size,r=e.vertical,i=o.state,a=i.showHorizontalScrollbar,l=i.showVerticalScrollbar;if(t!==a||r!==l){o.setState({scrollbarSize:n,showHorizontalScrollbar:t,showVerticalScrollbar:r});var s=o.props.onScrollbarPresenceChange;"function"==typeof s&&s({horizontal:t,size:n,vertical:r})}})),Yn(eo(o),"_onScrollLeft",(function(e){var t=e.scrollLeft;o._onScroll({scrollLeft:t,scrollTop:o.state.scrollTop})})),Yn(eo(o),"_onScrollTop",(function(e){var t=e.scrollTop;o._onScroll({scrollTop:t,scrollLeft:o.state.scrollLeft})})),Yn(eo(o),"_rowHeightBottomGrid",(function(e){var t=e.index,n=o.props,r=n.fixedRowCount,i=n.rowCount,a=n.rowHeight,l=o.state,s=l.scrollbarSize;return l.showVerticalScrollbar&&t===i-r?s:"function"==typeof a?a({index:t+r}):a})),Yn(eo(o),"_topLeftGridRef",(function(e){o._topLeftGrid=e})),Yn(eo(o),"_topRightGridRef",(function(e){o._topRightGrid=e}));var r=e.deferredMeasurementCache,i=e.fixedColumnCount,a=e.fixedRowCount;return o._maybeCalculateCachedStyles(!0),r&&(o._deferredMeasurementCacheBottomLeftGrid=a>0?new vd({cellMeasurerCache:r,columnIndexOffset:0,rowIndexOffset:a}):r,o._deferredMeasurementCacheBottomRightGrid=i>0||a>0?new vd({cellMeasurerCache:r,columnIndexOffset:i,rowIndexOffset:a}):r,o._deferredMeasurementCacheTopRightGrid=i>0?new vd({cellMeasurerCache:r,columnIndexOffset:i,rowIndexOffset:0}):r),o}return ro(t,e),Jn(t,[{key:"forceUpdateGrids",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,o=e.rowIndex,r=void 0===o?0:o;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,n):n,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,r):r}},{key:"measureAllCells",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,o=e.rowIndex,r=void 0===o?0:o,i=this.props,a=i.fixedColumnCount,l=i.fixedRowCount,s=Math.max(0,n-a),c=Math.max(0,r-l);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:n,rowIndex:c}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:s,rowIndex:c}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:n,rowIndex:r}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:s,rowIndex:r}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(!0)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.scrollLeft,n=e.scrollTop;if(t>0||n>0){var o={};t>0&&(o.scrollLeft=t),n>0&&(o.scrollTop=n),this.setState(o)}this._handleInvalidatedGridSize()}},{key:"componentDidUpdate",value:function(){this._handleInvalidatedGridSize()}},{key:"render",value:function(){var e=this.props,t=e.onScroll,n=e.onSectionRendered,o=(e.onScrollbarPresenceChange,e.scrollLeft,e.scrollToColumn),r=(e.scrollTop,e.scrollToRow),i=tu(e,["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"]);if(this._prepareForRender(),0===this.props.width||0===this.props.height)return null;var a=this.state,l=a.scrollLeft,s=a.scrollTop;return io.createElement("div",{style:this._containerOuterStyle},io.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(i),this._renderTopRightGrid(kd({},i,{onScroll:t,scrollLeft:l}))),io.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(kd({},i,{onScroll:t,scrollTop:s})),this._renderBottomRightGrid(kd({},i,{onScroll:t,onSectionRendered:n,scrollLeft:l,scrollToColumn:o,scrollToRow:r,scrollTop:s}))))}},{key:"_getBottomGridHeight",value:function(e){return e.height-this._getTopGridHeight(e)}},{key:"_getLeftGridWidth",value:function(e){var t=e.fixedColumnCount,n=e.columnWidth;if(null==this._leftGridWidth)if("function"==typeof n){for(var o=0,r=0;r<t;r++)o+=n({index:r});this._leftGridWidth=o}else this._leftGridWidth=n*t;return this._leftGridWidth}},{key:"_getRightGridWidth",value:function(e){return e.width-this._getLeftGridWidth(e)}},{key:"_getTopGridHeight",value:function(e){var t=e.fixedRowCount,n=e.rowHeight;if(null==this._topGridHeight)if("function"==typeof n){for(var o=0,r=0;r<t;r++)o+=n({index:r});this._topGridHeight=o}else this._topGridHeight=n*t;return this._topGridHeight}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t}),this.forceUpdate()}}},{key:"_maybeCalculateCachedStyles",value:function(e){var t=this.props,n=t.columnWidth,o=t.enableFixedColumnScroll,r=t.enableFixedRowScroll,i=t.height,a=t.fixedColumnCount,l=t.fixedRowCount,s=t.rowHeight,c=t.style,u=t.styleBottomLeftGrid,d=t.styleBottomRightGrid,m=t.styleTopLeftGrid,p=t.styleTopRightGrid,h=t.width,g=e||i!==this._lastRenderedHeight||h!==this._lastRenderedWidth,f=e||n!==this._lastRenderedColumnWidth||a!==this._lastRenderedFixedColumnCount,b=e||l!==this._lastRenderedFixedRowCount||s!==this._lastRenderedRowHeight;(e||g||c!==this._lastRenderedStyle)&&(this._containerOuterStyle=kd({height:i,overflow:"visible",width:h},c)),(e||g||b)&&(this._containerTopStyle={height:this._getTopGridHeight(this.props),position:"relative",width:h},this._containerBottomStyle={height:i-this._getTopGridHeight(this.props),overflow:"visible",position:"relative",width:h}),(e||u!==this._lastRenderedStyleBottomLeftGrid)&&(this._bottomLeftGridStyle=kd({left:0,overflowX:"hidden",overflowY:o?"auto":"hidden",position:"absolute"},u)),(e||f||d!==this._lastRenderedStyleBottomRightGrid)&&(this._bottomRightGridStyle=kd({left:this._getLeftGridWidth(this.props),position:"absolute"},d)),(e||m!==this._lastRenderedStyleTopLeftGrid)&&(this._topLeftGridStyle=kd({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},m)),(e||f||p!==this._lastRenderedStyleTopRightGrid)&&(this._topRightGridStyle=kd({left:this._getLeftGridWidth(this.props),overflowX:r?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},p)),this._lastRenderedColumnWidth=n,this._lastRenderedFixedColumnCount=a,this._lastRenderedFixedRowCount=l,this._lastRenderedHeight=i,this._lastRenderedRowHeight=s,this._lastRenderedStyle=c,this._lastRenderedStyleBottomLeftGrid=u,this._lastRenderedStyleBottomRightGrid=d,this._lastRenderedStyleTopLeftGrid=m,this._lastRenderedStyleTopRightGrid=p,this._lastRenderedWidth=h}},{key:"_prepareForRender",value:function(){this._lastRenderedColumnWidth===this.props.columnWidth&&this._lastRenderedFixedColumnCount===this.props.fixedColumnCount||(this._leftGridWidth=null),this._lastRenderedFixedRowCount===this.props.fixedRowCount&&this._lastRenderedRowHeight===this.props.rowHeight||(this._topGridHeight=null),this._maybeCalculateCachedStyles(),this._lastRenderedColumnWidth=this.props.columnWidth,this._lastRenderedFixedColumnCount=this.props.fixedColumnCount,this._lastRenderedFixedRowCount=this.props.fixedRowCount,this._lastRenderedRowHeight=this.props.rowHeight}},{key:"_renderBottomLeftGrid",value:function(e){var t=e.enableFixedColumnScroll,n=e.fixedColumnCount,o=e.fixedRowCount,r=e.rowCount,i=e.hideBottomLeftGridScrollbar,a=this.state.showVerticalScrollbar;if(!n)return null;var l=a?1:0,s=this._getBottomGridHeight(e),c=this._getLeftGridWidth(e),u=this.state.showVerticalScrollbar?this.state.scrollbarSize:0,d=i?c+u:c,m=io.createElement(Eu,C({},e,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:n,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:s,onScroll:t?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,r-o)+l,rowHeight:this._rowHeightBottomGrid,style:this._bottomLeftGridStyle,tabIndex:null,width:d}));return i?io.createElement("div",{className:"BottomLeftGrid_ScrollWrapper",style:kd({},this._bottomLeftGridStyle,{height:s,width:c,overflowY:"hidden"})},m):m}},{key:"_renderBottomRightGrid",value:function(e){var t=e.columnCount,n=e.fixedColumnCount,o=e.fixedRowCount,r=e.rowCount,i=e.scrollToColumn,a=e.scrollToRow;return io.createElement(Eu,C({},e,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,t-n),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(e),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,r-o),rowHeight:this._rowHeightBottomGrid,scrollToColumn:i-n,scrollToRow:a-o,style:this._bottomRightGridStyle,width:this._getRightGridWidth(e)}))}},{key:"_renderTopLeftGrid",value:function(e){var t=e.fixedColumnCount,n=e.fixedRowCount;return t&&n?io.createElement(Eu,C({},e,{className:this.props.classNameTopLeftGrid,columnCount:t,height:this._getTopGridHeight(e),ref:this._topLeftGridRef,rowCount:n,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(e)})):null}},{key:"_renderTopRightGrid",value:function(e){var t=e.columnCount,n=e.enableFixedRowScroll,o=e.fixedColumnCount,r=e.fixedRowCount,i=e.scrollLeft,a=e.hideTopRightGridScrollbar,l=this.state,s=l.showHorizontalScrollbar,c=l.scrollbarSize;if(!r)return null;var u=s?1:0,d=this._getTopGridHeight(e),m=this._getRightGridWidth(e),p=s?c:0,h=d,g=this._topRightGridStyle;a&&(h=d+p,g=kd({},this._topRightGridStyle,{left:0}));var f=io.createElement(Eu,C({},e,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,t-o)+u,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:h,onScroll:n?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:r,scrollLeft:i,style:g,tabIndex:null,width:m}));return a?io.createElement("div",{className:"TopRightGrid_ScrollWrapper",style:kd({},this._topRightGridStyle,{height:d,width:m,overflowX:"hidden"})},f):f}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.scrollLeft!==t.scrollLeft||e.scrollTop!==t.scrollTop?{scrollLeft:null!=e.scrollLeft&&e.scrollLeft>=0?e.scrollLeft:t.scrollLeft,scrollTop:null!=e.scrollTop&&e.scrollTop>=0?e.scrollTop:t.scrollTop}:null}}]),t}(io.PureComponent);function Sd(e){var t=e.className,n=e.columns,o=e.style;return io.createElement("div",{className:t,role:"row",style:o},n)}Yn(Ed,"defaultProps",{classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{},hideTopRightGridScrollbar:!1,hideBottomLeftGridScrollbar:!1}),Ed.propTypes={},Qc(Ed),(function(e){function t(e,n){var o;return Qn(this,t),(o=to(this,no(t).call(this,e,n))).state={clientHeight:0,clientWidth:0,scrollHeight:0,scrollLeft:0,scrollTop:0,scrollWidth:0},o._onScroll=o._onScroll.bind(eo(o)),o}return ro(t,e),Jn(t,[{key:"render",value:function(){var e=this.props.children,t=this.state,n=t.clientHeight,o=t.clientWidth,r=t.scrollHeight,i=t.scrollLeft,a=t.scrollTop,l=t.scrollWidth;return e({clientHeight:n,clientWidth:o,onScroll:this._onScroll,scrollHeight:r,scrollLeft:i,scrollTop:a,scrollWidth:l})}},{key:"_onScroll",value:function(e){var t=e.clientHeight,n=e.clientWidth,o=e.scrollHeight,r=e.scrollLeft,i=e.scrollTop,a=e.scrollWidth;this.setState({clientHeight:t,clientWidth:n,scrollHeight:o,scrollLeft:r,scrollTop:i,scrollWidth:a})}}]),t}(io.PureComponent)).propTypes={},Sd.propTypes=null;const wd={ASC:"ASC",DESC:"DESC"};function Cd(e){var t=e.sortDirection,n=Jc("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":t===wd.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":t===wd.DESC});return io.createElement("svg",{className:n,width:18,height:18,viewBox:"0 0 24 24"},t===wd.ASC?io.createElement("path",{d:"M7 14l5-5 5 5z"}):io.createElement("path",{d:"M7 10l5 5 5-5z"}),io.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}function Id(e){var t=e.dataKey,n=e.label,o=e.sortBy,r=e.sortDirection,i=o===t,a=[io.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:"string"==typeof n?n:null},n)];return i&&a.push(io.createElement(Cd,{key:"SortIndicator",sortDirection:r})),a}function Td(e){var t=e.className,n=e.columns,o=e.index,r=e.key,i=e.onRowClick,a=e.onRowDoubleClick,l=e.onRowMouseOut,s=e.onRowMouseOver,c=e.onRowRightClick,u=e.rowData,d=e.style,m={"aria-rowindex":o+1};return(i||a||l||s||c)&&(m["aria-label"]="row",m.tabIndex=0,i&&(m.onClick=function(e){return i({event:e,index:o,rowData:u})}),a&&(m.onDoubleClick=function(e){return a({event:e,index:o,rowData:u})}),l&&(m.onMouseOut=function(e){return l({event:e,index:o,rowData:u})}),s&&(m.onMouseOver=function(e){return s({event:e,index:o,rowData:u})}),c&&(m.onContextMenu=function(e){return c({event:e,index:o,rowData:u})})),io.createElement("div",C({},m,{className:t,key:r,role:"row",style:d}),n)}Cd.propTypes={},Id.propTypes=null,Td.propTypes=null;var xd=function(e){function t(){return Qn(this,t),to(this,no(t).apply(this,arguments))}return ro(t,e),t}(io.Component);function Pd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Rd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pd(n,!0).forEach((function(t){Yn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pd(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Yn(xd,"defaultProps",{cellDataGetter:function(e){var t=e.dataKey,n=e.rowData;return"function"==typeof n.get?n.get(t):n[t]},cellRenderer:function(e){var t=e.cellData;return null==t?"":String(t)},defaultSortDirection:wd.ASC,flexGrow:0,flexShrink:1,headerRenderer:Id,style:{}}),xd.propTypes={};var Ad=function(e){function t(e){var n;return Qn(this,t),(n=to(this,no(t).call(this,e))).state={scrollbarWidth:0},n._createColumn=n._createColumn.bind(eo(n)),n._createRow=n._createRow.bind(eo(n)),n._onScroll=n._onScroll.bind(eo(n)),n._onSectionRendered=n._onSectionRendered.bind(eo(n)),n._setRef=n._setRef.bind(eo(n)),n}return ro(t,e),Jn(t,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(e){var t=e.alignment,n=e.index;return this.Grid?this.Grid.getOffsetForCell({alignment:t,rowIndex:n}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,n=e.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:n,columnIndex:t})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,o=e.rowIndex,r=void 0===o?0:o;this.Grid&&this.Grid.recomputeGridSize({rowIndex:r,columnIndex:n})}},{key:"recomputeRowHeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:e})}},{key:"scrollToPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:e})}},{key:"scrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:e})}},{key:"getScrollbarWidth",value:function(){if(this.Grid){var e=(0,so.findDOMNode)(this.Grid),t=e.clientWidth||0;return(e.offsetWidth||0)-t}return 0}},{key:"componentDidMount",value:function(){this._setScrollbarWidth()}},{key:"componentDidUpdate",value:function(){this._setScrollbarWidth()}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,o=t.className,r=t.disableHeader,i=t.gridClassName,a=t.gridStyle,l=t.headerHeight,s=t.headerRowRenderer,c=t.height,u=t.id,d=t.noRowsRenderer,m=t.rowClassName,p=t.rowStyle,h=t.scrollToIndex,g=t.style,f=t.width,b=this.state.scrollbarWidth,_=r?c:c-l,v="function"==typeof m?m({index:-1}):m,y="function"==typeof p?p({index:-1}):p;return this._cachedColumnStyles=[],io.Children.toArray(n).forEach((function(t,n){var o=e._getFlexStyleForColumn(t,t.props.style);e._cachedColumnStyles[n]=Rd({overflow:"hidden"},o)})),io.createElement("div",{"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-colcount":io.Children.toArray(n).length,"aria-rowcount":this.props.rowCount,className:Jc("ReactVirtualized__Table",o),id:u,role:"grid",style:g},!r&&s({className:Jc("ReactVirtualized__Table__headerRow",v),columns:this._getHeaderColumns(),style:Rd({height:l,overflow:"hidden",paddingRight:b,width:f},y)}),io.createElement(Eu,C({},this.props,{"aria-readonly":null,autoContainerWidth:!0,className:Jc("ReactVirtualized__Table__Grid",i),cellRenderer:this._createRow,columnWidth:f,columnCount:1,height:_,id:void 0,noContentRenderer:d,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:b,scrollToRow:h,style:Rd({},a,{overflowX:"hidden"})})))}},{key:"_createColumn",value:function(e){var t=e.column,n=e.columnIndex,o=e.isScrolling,r=e.parent,i=e.rowData,a=e.rowIndex,l=this.props.onColumnClick,s=t.props,c=s.cellDataGetter,u=s.cellRenderer,d=s.className,m=s.columnData,p=s.dataKey,h=s.id,g=u({cellData:c({columnData:m,dataKey:p,rowData:i}),columnData:m,columnIndex:n,dataKey:p,isScrolling:o,parent:r,rowData:i,rowIndex:a}),f=this._cachedColumnStyles[n],b="string"==typeof g?g:null;return io.createElement("div",{"aria-colindex":n+1,"aria-describedby":h,className:Jc("ReactVirtualized__Table__rowColumn",d),key:"Row"+a+"-Col"+n,onClick:function(e){l&&l({columnData:m,dataKey:p,event:e})},role:"gridcell",style:f,title:b},g)}},{key:"_createHeader",value:function(e){var t,n,o,r,i,a=e.column,l=e.index,s=this.props,c=s.headerClassName,u=s.headerStyle,d=s.onHeaderClick,m=s.sort,p=s.sortBy,h=s.sortDirection,g=a.props,f=g.columnData,b=g.dataKey,_=g.defaultSortDirection,v=g.disableSort,y=g.headerRenderer,k=g.id,E=g.label,S=!v&&m,w=Jc("ReactVirtualized__Table__headerColumn",c,a.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:S}),C=this._getFlexStyleForColumn(a,Rd({},u,{},a.props.headerStyle)),I=y({columnData:f,dataKey:b,disableSort:v,label:E,sortBy:p,sortDirection:h});if(S||d){var T=p!==b?_:h===wd.DESC?wd.ASC:wd.DESC,x=function(e){S&&m({defaultSortDirection:_,event:e,sortBy:b,sortDirection:T}),d&&d({columnData:f,dataKey:b,event:e})};i=a.props["aria-label"]||E||b,r="none",o=0,t=x,n=function(e){"Enter"!==e.key&&" "!==e.key||x(e)}}return p===b&&(r=h===wd.ASC?"ascending":"descending"),io.createElement("div",{"aria-label":i,"aria-sort":r,className:w,id:k,key:"Header-Col"+l,onClick:t,onKeyDown:n,role:"columnheader",style:C,tabIndex:o},I)}},{key:"_createRow",value:function(e){var t=this,n=e.rowIndex,o=e.isScrolling,r=e.key,i=e.parent,a=e.style,l=this.props,s=l.children,c=l.onRowClick,u=l.onRowDoubleClick,d=l.onRowRightClick,m=l.onRowMouseOver,p=l.onRowMouseOut,h=l.rowClassName,g=l.rowGetter,f=l.rowRenderer,b=l.rowStyle,_=this.state.scrollbarWidth,v="function"==typeof h?h({index:n}):h,y="function"==typeof b?b({index:n}):b,k=g({index:n}),E=io.Children.toArray(s).map((function(e,r){return t._createColumn({column:e,columnIndex:r,isScrolling:o,parent:i,rowData:k,rowIndex:n,scrollbarWidth:_})})),S=Jc("ReactVirtualized__Table__row",v),w=Rd({},a,{height:this._getRowHeight(n),overflow:"hidden",paddingRight:_},y);return f({className:S,columns:E,index:n,isScrolling:o,key:r,onRowClick:c,onRowDoubleClick:u,onRowRightClick:d,onRowMouseOver:m,onRowMouseOut:p,rowData:k,style:w})}},{key:"_getFlexStyleForColumn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="".concat(e.props.flexGrow," ").concat(e.props.flexShrink," ").concat(e.props.width,"px"),o=Rd({},t,{flex:n,msFlex:n,WebkitFlex:n});return e.props.maxWidth&&(o.maxWidth=e.props.maxWidth),e.props.minWidth&&(o.minWidth=e.props.minWidth),o}},{key:"_getHeaderColumns",value:function(){var e=this,t=this.props,n=t.children;return(t.disableHeader?[]:io.Children.toArray(n)).map((function(t,n){return e._createHeader({column:t,index:n})}))}},{key:"_getRowHeight",value:function(e){var t=this.props.rowHeight;return"function"==typeof t?t({index:e}):t}},{key:"_onScroll",value:function(e){var t=e.clientHeight,n=e.scrollHeight,o=e.scrollTop;(0,this.props.onScroll)({clientHeight:t,scrollHeight:n,scrollTop:o})}},{key:"_onSectionRendered",value:function(e){var t=e.rowOverscanStartIndex,n=e.rowOverscanStopIndex,o=e.rowStartIndex,r=e.rowStopIndex;(0,this.props.onRowsRendered)({overscanStartIndex:t,overscanStopIndex:n,startIndex:o,stopIndex:r})}},{key:"_setRef",value:function(e){this.Grid=e}},{key:"_setScrollbarWidth",value:function(){var e=this.getScrollbarWidth();this.setState({scrollbarWidth:e})}}]),t}(io.PureComponent);Yn(Ad,"defaultProps",{disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanIndicesGetter:Su,overscanRowCount:10,rowRenderer:Td,headerRowRenderer:Sd,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}}),Ad.propTypes={};var Od=[],Nd=null,Md=null;function Dd(){Md&&(Md=null,document.body&&null!=Nd&&(document.body.style.pointerEvents=Nd),Nd=null)}function Bd(){Dd(),Od.forEach((function(e){return e.__resetIsScrolling()}))}function Ld(e){e.currentTarget===window&&null==Nd&&document.body&&(Nd=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),function(){Md&&fu(Md);var e=0;Od.forEach((function(t){e=Math.max(e,t.props.scrollingResetTimeInterval)})),Md=bu(Bd,e)}(),Od.forEach((function(t){t.props.scrollElement===e.currentTarget&&t.__handleWindowScrollEvent()}))}function zd(e,t){Od.some((function(e){return e.props.scrollElement===t}))||t.addEventListener("scroll",Ld),Od.push(e)}function Fd(e,t){(Od=Od.filter((function(t){return t!==e}))).length||(t.removeEventListener("scroll",Ld),Md&&(fu(Md),Dd()))}var Gd,Hd,Ud=function(e){return e===window},Wd=function(e){return e.getBoundingClientRect()};function jd(e,t){if(e){if(Ud(e)){var n=window,o=n.innerHeight,r=n.innerWidth;return{height:"number"==typeof o?o:0,width:"number"==typeof r?r:0}}return Wd(e)}return{height:t.serverHeight,width:t.serverWidth}}function Vd(e){return Ud(e)&&document.documentElement?{top:"scrollY"in window?window.scrollY:document.documentElement.scrollTop,left:"scrollX"in window?window.scrollX:document.documentElement.scrollLeft}:{top:e.scrollTop,left:e.scrollLeft}}function Kd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var $d=function(){return"undefined"!=typeof window?window:void 0},qd=(Hd=Gd=function(e){function t(){var e,n;Qn(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return Yn(eo(n=to(this,(e=no(t)).call.apply(e,[this].concat(r)))),"_window",$d()),Yn(eo(n),"_isMounted",!1),Yn(eo(n),"_positionFromTop",0),Yn(eo(n),"_positionFromLeft",0),Yn(eo(n),"_detectElementResize",void 0),Yn(eo(n),"_child",void 0),Yn(eo(n),"state",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kd(n,!0).forEach((function(t){Yn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kd(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},jd(n.props.scrollElement,n.props),{isScrolling:!1,scrollLeft:0,scrollTop:0})),Yn(eo(n),"_registerChild",(function(e){!e||e instanceof Element||console.warn("WindowScroller registerChild expects to be passed Element or null"),n._child=e,n.updatePosition()})),Yn(eo(n),"_onChildScroll",(function(e){var t=e.scrollTop;if(n.state.scrollTop!==t){var o=n.props.scrollElement;o&&("function"==typeof o.scrollTo?o.scrollTo(0,t+n._positionFromTop):o.scrollTop=t+n._positionFromTop)}})),Yn(eo(n),"_registerResizeListener",(function(e){e===window?window.addEventListener("resize",n._onResize,!1):n._detectElementResize.addResizeListener(e,n._onResize)})),Yn(eo(n),"_unregisterResizeListener",(function(e){e===window?window.removeEventListener("resize",n._onResize,!1):e&&n._detectElementResize.removeResizeListener(e,n._onResize)})),Yn(eo(n),"_onResize",(function(){n.updatePosition()})),Yn(eo(n),"__handleWindowScrollEvent",(function(){if(n._isMounted){var e=n.props.onScroll,t=n.props.scrollElement;if(t){var o=Vd(t),r=Math.max(0,o.left-n._positionFromLeft),i=Math.max(0,o.top-n._positionFromTop);n.setState({isScrolling:!0,scrollLeft:r,scrollTop:i}),e({scrollLeft:r,scrollTop:i})}}})),Yn(eo(n),"__resetIsScrolling",(function(){n.setState({isScrolling:!1})})),n}return ro(t,e),Jn(t,[{key:"updatePosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.scrollElement,t=this.props.onResize,n=this.state,o=n.height,r=n.width,i=this._child||so.findDOMNode(this);if(i instanceof Element&&e){var a=function(e,t){if(Ud(t)&&document.documentElement){var n=document.documentElement,o=Wd(e),r=Wd(n);return{top:o.top-r.top,left:o.left-r.left}}var i=Vd(t),a=Wd(e),l=Wd(t);return{top:a.top+i.top-l.top,left:a.left+i.left-l.left}}(i,e);this._positionFromTop=a.top,this._positionFromLeft=a.left}var l=jd(e,this.props);o===l.height&&r===l.width||(this.setState({height:l.height,width:l.width}),t({height:l.height,width:l.width}))}},{key:"componentDidMount",value:function(){var e=this.props.scrollElement;this._detectElementResize=Ru(),this.updatePosition(e),e&&(zd(this,e),this._registerResizeListener(e)),this._isMounted=!0}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.scrollElement,o=e.scrollElement;o!==n&&null!=o&&null!=n&&(this.updatePosition(n),Fd(this,o),zd(this,n),this._unregisterResizeListener(o),this._registerResizeListener(n))}},{key:"componentWillUnmount",value:function(){var e=this.props.scrollElement;e&&(Fd(this,e),this._unregisterResizeListener(e)),this._isMounted=!1}},{key:"render",value:function(){var e=this.props.children,t=this.state,n=t.isScrolling,o=t.scrollTop,r=t.scrollLeft,i=t.height,a=t.width;return e({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:i,isScrolling:n,scrollLeft:r,scrollTop:o,width:a})}}]),t}(io.PureComponent),Yn(Gd,"propTypes",null),Hd);Yn(qd,"defaultProps",{onResize:function(){},onScroll:function(){},scrollingResetTimeInterval:150,scrollElement:$d(),serverHeight:0,serverWidth:0});const Yd=(0,a.memo)((e=>{const[t,n]=(0,a.useState)(!1),[o,r]=(0,a.useState)(Math.random());return(0,a.useEffect)((()=>{n(!0)}),[]),(0,s.useEffectDeep)((()=>{r(Math.random)}),[e.list]),(0,a.createElement)("div",{className:"kubio-predefined-layouts__virtual-grid"},t&&(0,a.createElement)(Xd,C({key:o},e)))})),Xd=(0,a.memo)((e=>{var t;let{list:n,onSelect:o,ListItemComponent:r}=e;const i=(0,a.useRef)(),[l,c]=(0,a.useState)(Math.random()),[u,d]=(0,a.useState)(Qd()),m=(0,a.useMemo)((()=>{const e=u;let t=0,o=0;const r=[];return n.forEach((n=>{0===t&&(r[o]=[]),r[o][t]=n,t===e-1?(t=0,o++):t++})),r}),[n,u,l]),h=(0,a.useCallback)((e=>{let{columnIndex:t,key:n,rowIndex:i,style:l}=e;const s=m[i][t];return s?(0,a.createElement)("div",{key:n,style:l},(0,a.createElement)(r,{key:s.uniqueId,value:s,onSelect:o})):(0,a.createElement)(a.Fragment,null)}),[m,l]),g=(0,a.useMemo)((()=>{const e=document.querySelector(".kubio-predefined-layouts__modal-layout__list");if(!e)return null;const t=window.getComputedStyle(e),n=parseInt(t.paddingLeft)+parseInt(t.paddingRight),o=parseInt(t.paddingTop)+parseInt(t.paddingBottom),r=e.clientWidth-n,i=e.clientHeight-o-5,a=r/u;return{containerWidth:r,containerHeight:i,columnWidth:a,columnHeight:a}}),[u,l]),f=null===(t=p().get(m,"0",[]))||void 0===t?void 0:t.length,b=(0,a.useCallback)((()=>{const e=Qd();e!==u&&d(e),c(Math.random())}),[u,d,c]),_=(0,s.useDebounce)(b,50);return(0,a.useEffect)((()=>(window.addEventListener("resize",_),()=>{window.removeEventListener("resize",_)})),[_]),(0,a.createElement)("div",{ref:i,className:"kubio-predefined-layouts__virtual-grid__inner"},g&&(0,a.createElement)(Eu,{key:l,cellRenderer:h,columnCount:f,columnWidth:g.columnWidth,rowCount:m.length,rowHeight:g.columnHeight,height:g.containerHeight,width:g.containerWidth}))})),Qd=()=>{const e=document.querySelector(".kubio-predefined-layouts__virtual-grid");if(e)return parseInt(getComputedStyle(e).getPropertyValue("--number-columns"))},Zd=e=>e.preventDefault(),Jd=(0,a.memo)((e=>{let{title:t,onClose:n=p().noop,className:o,children:r,...i}=e;const l=(0,a.useRef)(),c=(0,a.useMemo)((()=>document.querySelector(".kubio-predefined-layouts__popup-slot")),[]),u=(0,a.useCallback)((e=>{var t;null!=e&&null!==(t=e.target)&&void 0!==t&&t.closest(".kubio-predefined-layouts__inner-modal")||n()}),[n]);return(0,s.useOnClickOutside)(l,u),(0,a.createPortal)((0,a.createElement)("div",C({className:T()("kubio-predefined-layouts__inner-modal__overlay",o),onClick:Zd,onMouseDown:Zd},i),(0,a.createElement)("div",{className:"kubio-predefined-layouts__inner-modal",ref:l},(0,a.createElement)("div",{className:" components-modal__content"},(0,a.createElement)("div",{className:"components-modal__header"},(0,a.createElement)("div",{className:"components-modal__header-heading-container"},(0,a.createElement)("h1",{className:"components-modal__header-heading"},t)),(0,a.createElement)(k.Button,{onClick:n,icon:pt,label:(0,x.__)("Close dialog","kubio")})),r))),c)})),em=(0,a.memo)((()=>(0,a.createElement)("div",{className:"kubio-predefined-layouts__loading-overlay"},(0,a.createElement)(k.Icon,{icon:ye.KubioLoader}),";"))),tm=(0,a.memo)((e=>{let{searchPlaceholder:t=(0,x.__)("Find a starter site…","kubio")}=e;return(0,a.createElement)(ap.Sidebar,null,(0,a.createElement)(ap.Sidebar.Header,null),(0,a.createElement)(ap.Sidebar.Content,null,(0,a.createElement)(Zm.Slot,null),(0,a.createElement)(Kc,{placeholder:t}),(0,a.createElement)(zc,null)))})),nm=(0,a.memo)((e=>{let{value:t={},onSelect:n}=e;const{screenshot:o,isPro:r,label:i,slug:l,uniqueId:s,relatedDemoSite:c}=t,u=(0,a.useMemo)((()=>!r&&c?null==c?void 0:c.screenshot:o),[s,r,o,c]),d=p().get(c,"slug");return(0,a.createElement)(jc,{screenshot:u,label:i,isPack:!0,uniqueId:s,isPro:r,onClick:()=>{n(t)},favoriteType:"demoSite",favoriteId:l,relatedFavoriteId:d})}));var om=n(246),rm=n.n(om);const im=(0,a.memo)((e=>{let{list:t,onSelect:n}=e;const o=(0,a.useRef)(),[r,i]=(0,a.useState)(1),l=(0,a.useMemo)((()=>{let e=20*r;return e=Math.min(t.length,e),t.slice(0,e)}),[r,t]),c=(0,a.useCallback)((()=>{const e=r+1;20*e-20>t.length||i(e)}),[i,r,t]),u=(0,s.useDebounce)(c,100),d=(0,a.useMemo)((()=>t.length!==l.length),[l,t]);return(0,a.createElement)("div",{className:"kubio-predefined-layouts__screenshot-list kubio-predefined-layouts__screenshot-list--infinite-list",ref:o},(0,a.createElement)(rm(),{pageStart:0,initialLoad:!1,useWindow:!1,loadMore:u,hasMore:d,threshold:2e3,loader:(0,a.createElement)("div",{className:"loader",key:0})},l.map(((e,t)=>(0,a.createElement)(nm,{key:e.slug+"__"+t,value:e,onSelect:n})))))})),am=()=>{const{onSelectDemo:e}=Ch(),{list:t}=_h(),n=(0,a.useCallback)((t=>{e(null==t?void 0:t.slug)}),[e]);return(0,a.createElement)(ap.Page.Content,null,(0,a.createElement)(im,{list:t,onSelect:n}))},lm=(0,a.memo)((()=>{const{currentDemoSite:e}=Ch();return(0,a.createElement)(ap.Sidebar,{className:"kubio-predefined-layouts__preview-page__sidebar"},(0,a.createElement)(ap.Sidebar.Header,null,(0,x.__)("Import Starter Site","kubio")),(0,a.createElement)(ap.Sidebar.Content,null,(0,a.createElement)(jc,C({showAnimationAtLoad:!0},e,{showFavorite:!1,showLabel:!1}))),(0,a.createElement)(ap.Sidebar.Footer,null,(0,a.createElement)("div",{className:"d-flex justify-content-end align-items-center"},(0,a.createElement)("a",{href:null==e?void 0:e.preview,target:"_blank",rel:"noreferrer"},(0,x.__)("Preview starter site","kubio")))))})),sm={ACTIVE:(0,x.__)("Active","kubio"),INSTALLED:(0,x.__)("Installed","kubio"),NOT_INSTALLED:(0,x.__)("Not installed","kubio")},cm=p().get(window,["kubioUtilsData","plugins_states"],{}),um=(0,a.memo)((()=>{const{currentDemoSite:e}=Ch(),t=(0,a.useMemo)((()=>{const t=p().get(e,"plugins",[]);return Array.isArray(t)?t.map((e=>{const t=p().get(cm,null==e?void 0:e.slug),n=p().get(sm,t);return{...e,statusLabel:n}})):[]}),[e]);return(0,a.createElement)(a.Fragment,null,t.map((e=>{let{slug:t,label:n,statusLabel:o}=e;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("li",{key:t,className:"kubio-predefined-layouts__demo-site-import-page__plugin"},(0,a.createElement)("div",{className:"d-flex justify-content-between"},(0,a.createElement)("span",{className:"d-flex align-items-center"},n),(0,a.createElement)("span",{className:"kubio-predefined-layouts__demo-site-import-page__plugin__status"},o))),(0,a.createElement)("hr",null))})))})),dm=(0,a.memo)((()=>{const{currentDemoSite:e}=Ch(),t=!p().isEmpty(null==e?void 0:e.plugins);return(0,a.createElement)("div",{className:"kubio-predefined-layouts__demo-site-import-page__import-panel"},(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"kubio-predefined-layouts__demo-site-import-page__import-panel__title"},(0,x.__)("You are about to import a demo site","kubio")),(0,a.createElement)("ul",null,(0,a.createElement)("li",null,(0,x.__)("Current pages will be moved to trash. You can restore the content back at any time.","kubio")),(0,a.createElement)("li",null,(0,x.__)("Posts, pages, images, widgets, menus and other theme settings will get imported.","kubio")),(0,a.createElement)("li",{className:"text-danger"},(0,x.__)("Your current design will be completely overwritten by the new template. This process is irreversible. If you wish to be able to go back to the current design,please create a backup of your site before proceedingwith the import.","kubio")))),t&&(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"kubio-predefined-layouts__demo-site-import-page__import-panel__title"},(0,x.__)("The following plugins will be installed as they are part of the demo","kubio")),(0,a.createElement)("ul",{className:"kubio-predefined-layouts__demo-site-import-page__plugins-list"},(0,a.createElement)(um,null))))})),mm=(0,a.memo)((()=>{const{currentDemoSite:e}=Ch(),t=null==e?void 0:e.label;return(0,a.createElement)(ap.Page.Content,null,(0,a.createElement)(ap.Page.Content.Title,null,(0,a.createElement)("span",{className:"kubio-predefined-layouts__preview-page__content__title__name"},t)),(0,a.createElement)(dm,null))})),pm=(0,a.memo)((()=>{const{currentDemoSite:e,setShowDemoSiteImportPage:t}=Ch(),{baseUrl:n}=(0,w.useSelect)((e=>{const{url:t}=e("core").getEntityRecord("root","site")||{};return{baseUrl:t}}),[]),o=(0,s.useUnloadStoreEntities)(),r=(0,s.useResetUndoStack)(),i=(0,a.useCallback)((()=>{o(),r()}),[o,r]),l=(0,a.useMemo)((()=>!0),[])&&(null==e?void 0:e.isPro)?Hn.ProItem:k.Button,c=(0,a.useCallback)((()=>{t(!1)}),[t]),u=(0,a.useCallback)((async()=>{if(!(null==e?void 0:e.slug))return;const t=new URL(`${n}/wp-admin/admin.php`),o=t.searchParams;o.set("page","kubio-get-started"),o.set("tab","demo-sites"),o.set("import",null==e?void 0:e.slug);const r=t.toString();i(),document.location.href=r}),[e]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(ap.Page.Footer,null,(0,a.createElement)("div",{className:" d-flex w-100 justify-content-end align-items-center"},(0,a.createElement)(k.Button,{isSecondary:!0,onClick:c},(0,x.__)("Cancel","kubio")),(0,a.createElement)(l,{tag:k.Button,isPrimary:!0,urlArgs:{source:"templates_gallery",content:null==e?void 0:e.label},onClick:u},(0,x.__)("Import full starter site","kubio")))))})),hm=(0,a.memo)((e=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)(ap,C({},e,{className:"kubio-predefined-layouts__demo-site-import-page",sidebar:(0,a.createElement)(lm,null),pageContent:(0,a.createElement)(mm,null),pageFooter:(0,a.createElement)(pm,null)}))))),gm=(0,a.memo)((e=>{const{selectedDemoSlug:t,showDemoSiteImportPage:n}=Ch(),{list:o}=_h();return(0,a.createElement)(a.Fragment,null,t&&(0,a.createElement)(uh,e),n&&(0,a.createElement)(hm,null),(0,a.createElement)(ap,C({},e,{className:"kubio-predefined-layouts__demo-list-page",items:o,sidebar:(0,a.createElement)(tm,null),pageContent:(0,a.createElement)(am,null),emptyContent:(0,x.__)("No Starter Site Found","kubio")})))})),fm=(0,a.memo)((e=>{let{children:t}=e;const{rawDemoList:n}=Ch(),{favoritesDataByType:o}=Nh(),r=(0,a.useMemo)((()=>null===o?n:p().isEmpty(o)?[]:n.filter((e=>!!p().get(o,["demoSite",null==e?void 0:e.slug])))),[n,o]),i=(0,a.useMemo)((()=>{const e=p().cloneDeep(r),t=[];return e.forEach((e=>{const{isPro:n,relatedDemoSite:o}=e;o?!n&&t.push(e):t.push(e)})),t}),[r]),l=(0,a.useMemo)((()=>({list:i})),[i]);return(0,a.createElement)(dh.Provider,{value:l},t)})),bm=(0,a.memo)((e=>(0,a.createElement)(wh,null,(0,a.createElement)(fm,null,(0,a.createElement)(fh,null,(0,a.createElement)(gm,e)))))),_m=(0,a.memo)((e=>{let{value:t={},onSelect:n}=e;const{screenshot:o,isPro:r,label:i,slug:l,uniqueId:s,demoSiteSlug:c,id:u,type:d}=t,m=(0,a.useMemo)((()=>{const e=(e=>p().get(qs,["demoSitesListBySlug",e]))(c);return`STARTER SITE: ${null==e?void 0:e.label}`}),[c]),h=(0,a.useMemo)((()=>({favoriteType:`demo-${d}`,favoriteId:u})),[d,u]);return(0,a.createElement)("div",{className:"kubio-predefined-layouts__demo-part-list-page__item",onClick:()=>{n(t)}},(0,a.createElement)(jc,C({screenshot:o,label:i,uniqueId:s,isPro:r},h)),(0,a.createElement)("div",{className:"kubio-predefined-layouts__demo-part-list-page__item__pack-label",onClick:e=>e.stopPropagation()},m))})),vm=(0,a.memo)((e=>{let{list:t,onSelect:n}=e;return(0,a.createElement)(Yd,{list:t,onSelect:n,ListItemComponent:_m})})),ym=()=>{const{onSelectDemo:e}=Ch(),{list:t}=_h(),n=(0,a.useCallback)((t=>{e(null==t?void 0:t.demoSiteSlug,t)}),[e]);return(0,a.createElement)(ap.Page.Content,null,(0,a.createElement)(vm,{list:t,onSelect:n}))},km=(0,a.memo)((e=>{const{selectedDemoSlug:t,showDemoSiteImportPage:n,demoPartsIsLoaded:o}=Ch(),{list:r}=_h();return(0,a.createElement)(a.Fragment,null,t&&(0,a.createElement)(uh,e),n&&(0,a.createElement)(hm,null),(0,a.createElement)(ap,C({},e,{className:"kubio-predefined-layouts__demo-part-list-page",isLoading:!o,items:r,sidebar:(0,a.createElement)(tm,{searchPlaceholder:(0,x.__)("Find a page…","kubio")}),pageContent:(0,a.createElement)(ym,null),emptyContent:(0,x.__)("No Page Found","kubio")})))})),Em=(0,a.memo)((e=>{let{children:t}=e;const{rawDemoList:n,demosPartsPerSlug:o}=Ch(),{favoritesDataByType:r}=Nh(),i=(0,a.useMemo)((()=>{let e=[];return n.forEach((t=>{let{slug:n,isPro:r,relatedDemoSite:i}=t;if(i){if(r)return;const t=n,a=null==i?void 0:i.slug,l=p().get(o,t,[]),s=p().get(o,a,[]);e=e.concat(l,s)}else{const t=p().get(o,n,[]);e=e.concat(t)}})),e}),[n,o]),l=(0,a.useMemo)((()=>null===r?i:p().isEmpty(r)?[]:i.filter((e=>{const{type:t,id:n}=e,o=[`demo-${t}`,n];return!!p().get(r,o)}))),[i,r]),s=(0,a.useMemo)((()=>({list:l})),[l]);return(0,a.createElement)(dh.Provider,{value:s},t)})),Sm=(0,a.memo)((e=>(0,a.createElement)(wh,null,(0,a.createElement)(Em,null,(0,a.createElement)(fh,null,(0,a.createElement)(km,e)))))),wm=(0,a.memo)((e=>{let{value:t={},onSelect:n,onLoad:o}=e;const{screenshot:r,isProOnFree:i,label:l,name:s,categoryLabelWithIndex:c}=t,u=(0,a.useRef)(),d=i,m=d?Hn.ProItem:jc;let p={};return d&&(p={urlArgs:{source:"templates_gallery",content:l}}),(0,a.createElement)(Hn.ProModalTextContext.Provider,{value:(0,x.__)("This section is available only in the PRO version.","kubio")},(0,a.createElement)(m,C({tag:jc,ref:u,title:l,screenshot:r,label:c,uniqueId:s,isPro:i,isLandscape:!0,onClick:()=>n(t),favoriteType:"section",favoriteId:s,onLoad:o,addImageType:!1},p)))})),Cm=(0,a.createContext)({}),Im=(0,a.memo)((e=>{let{children:t,filterByPublicTag:n=!0,activeTag:o,setActiveTag:r}=e;const[i,l]=Tm(p().noop,"content"),[s]=Tm(p().noop,"header"),[c]=Tm(p().noop,"footer"),{favoritesDataByType:u}=Nh(),{initialParams:d,activePage:g}=Cc(),f=p().get(d,["sections","internalTag"]),{isFrontPage:b}=(0,w.useSelect)((e=>{const{getIsFrontPage:t=p().noop}=e("kubio/edit-site")||{};return{isFrontPage:t()}}),[]),_=p().get(d,[g,"categoryType"],"kubio-content"),v=(0,a.useMemo)((()=>s.concat(i,c)),[s,i,c]),y=(0,a.useMemo)((()=>v.filter((e=>{if(!_)return!0;const t=p().get(e,"categories.0"),n=t.split("/")[0];return(!b||t!==h.INNER_HEADERS_CATEGORY)&&n===_})).filter((e=>!(f&&!((null==e?void 0:e.internalTags)||[]).includes(f))&&!!(0,ve.isPatternAvailableInCurrentTheme)(e)))),[v,_,b,f]),k=(0,a.useMemo)((()=>null===u?y:p().isEmpty(u)?[]:y.filter((e=>!!p().get(u,["section",null==e?void 0:e.name])))),[y,u]),E=(0,a.useMemo)((()=>{const e={};return k.map(((t,n)=>{var o;let r=t.screenshot;!r&&t.isCustomSection&&(r="data:image/svg+xml,"+`<svg background='#fff' xmlns='http://www.w3.org/2000/svg' width='400'  height='250'>\t<rect x='0' y='0' width='400' height='250' fill='white'></rect>\t<text x='50%' y="50%" fill='#a6adb5' dominant-baseline='middle' font-family='Open Sans, Arial, Helvetica, sans-serif' text-anchor='middle'>\t\t${t.title}\t</text></svg>`.replace(/"/g,"'").replace(/>\s{1,}</g,"><").replace(/\s{2,}/g," ").replace(/[\r\n%#()<>?[\\\]^`{|}]/g,encodeURIComponent));const i=null===(o=(0,m.find)(l,{name:p().get(t,"categories.0")}))||void 0===o?void 0:o.label;p().get(e,i)?e[i]++:e[i]=1;const a=`${i} #${e[i]}`;return{...t,label:t.title,categoryLabelWithIndex:a,screenshot:r}})).filter((e=>{const t=(null==e?void 0:e.publicTags)||[];return!(n&&o!==ve.ALL_TAG&&!t.includes(o))})).sort(((e,t)=>0+e.isProPattern-t.isProPattern))}),[l,k,o]),S=(0,a.useMemo)((()=>l.map((e=>{let{name:t,label:n}=e;return{label:n,value:t}}))),[l]),C=(0,a.useCallback)(((e,t)=>{const n=e=>null==e?void 0:e.toLowerCase().replace("#",""),o=n(t);return e.filter((e=>{var t,r,i,a;let{label:l,categoryLabelWithIndex:s}=e;return(null===(t=n(l))||void 0===t||null===(r=t.includes)||void 0===r?void 0:r.call(t,o))||(null===(i=n(s))||void 0===i||null===(a=i.includes)||void 0===a?void 0:a.call(i,o))}))}),[]),I=(0,a.useMemo)((()=>({list:E,categories:S,filterFunction:C})),[E,S,C]),T=(0,a.useMemo)((()=>({activeTag:o,setActiveTag:r})),[o,r]);return(0,a.createElement)(Cm.Provider,{value:T},(0,a.createElement)(dh.Provider,{value:I},t))})),Tm=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"content";const{patternCategories:n,patterns:o}=(0,w.useSelect)((e=>{const{getSettings:n}=e("core/block-editor");return{patterns:n().__experimentalBlockPatterns.filter((e=>e.isGutentagPattern&&0===e.name.indexOf(`kubio-${t}`))),patternCategories:n().__experimentalBlockPatternCategories}}),[t]),r=(0,a.useMemo)((()=>{const e={};n.forEach(((t,n)=>{let{name:o}=t;return e[o]=n}));const t=o.map(((t,n)=>{const o=p().get(t,"categories[0]"),r=e[o];return{...t,arrayIndex:n,categoryIndex:r}}));return p().orderBy(t,["categoryIndex","arrayIndex"],["asc","asc"])}),[o,n]),i=(0,a.useCallback)(((t,n)=>{const o=t.isGutentagPattern?(0,ve.transformTemplateToBlock)(n):(0,m.map)(n,(e=>(0,Un.cloneBlock)(e)));e(o,t)}),[]);return[r,n,i]},xm=()=>(0,a.useContext)(Cm),Pm=()=>{const{activeTag:e,setActiveTag:t}=xm();return(0,a.createElement)(Im,{activeTag:e,setActiveTag:t,filterByPublicTag:!1},(0,a.createElement)(fh,null,(0,a.createElement)(Rm,null)))},Rm=()=>{const{list:e}=_h(),{activeTag:t,setActiveTag:n}=xm(),o=(0,a.useMemo)((()=>{const t=new Set;return e.forEach((e=>{(e.publicTags||[]).forEach((e=>t.add(e)))})),[...t]}),[e]);return(0,a.createElement)(a.Fragment,null,!!o.length&&(0,a.createElement)(ve.KubioSectionsTags,{activeTag:t,setActiveTag:n,availableTagSlugs:o}))},Am=(0,a.memo)((e=>{let{list:t,onSelect:n}=e;const o=(0,a.useRef)(),[r,i]=(0,a.useState)(1),l=(0,a.useMemo)((()=>{let e=40*r;return e=Math.min(t.length,e),t.slice(0,e).map(((e,t)=>({...e,__internalId:t})))}),[r,t]),c=(0,a.useCallback)((()=>{i((e=>{const n=e+1;return 40*n-40>t.length?e:n}))}),[t]),u=(0,s.useDebounce)(c,100),d=(0,a.useMemo)((()=>t.length!==l.length),[l,t]),{onRestartMasonry:m}=(e=>{let{containerRef:t}=e;const n=(0,a.useRef)({}),o=(0,a.useRef)({}),r=(0,a.useRef)(0),i="data-masonry-loaded",l=(0,a.useRef)(0),c=(0,a.useRef)(!1),[u,d]=(0,a.useState)(!1),m=(0,a.useRef)(!1),p=(0,a.useCallback)((e=>{if("top"!==e.propertyName)return;const t=e.target;l.current>0&&l.current--,t.removeEventListener("transitionend",p),0===l.current&&c.current&&d(!0)}),[]),h=(0,a.useCallback)((()=>{if(0!==l.current||m.current)return c.current=!0,void(m.current=!1);m.current=!0;const e=t.current.children[0],a=o.current,s=n.current,u=r.current,d=Array.from(e.children).filter((e=>!e.hasAttribute(i)&&e.querySelector("img").hasAttribute("data-is-loaded"))),h=t.current,g=e.offsetHeight;e.style.paddingTop=`${g}px`;const f=e.clientWidth,{getComputedStyle:b}=h.ownerDocument.defaultView,_=parseInt(b(h).getPropertyValue("--number-columns")),v=f/_;d.forEach(((e,t)=>{const n=u+t,o=Math.floor(n/_);void 0===s[o]&&(s[o]=0);const r=0!==o?s[o-1]:0,a=e.offsetHeight+r;if(a>s[o]&&(s[o]=a),n>=_){const t=s[o-1];e.style.top=`${t}px`}else e.style.top=0;const l=n%_*v;e.style.left=`${l}px`,e.style.width=`${v}px`,e.style.position="absolute",e.setAttribute(i,!0)})),d.forEach(((e,t)=>{const n=u+t,o=e.querySelector(".kubio-predefined-layouts__screenshot-preview__parent");let r;if(n>=_){const e=a[n-_];r=`${e}px`,a[n]=e+o.offsetHeight+30}else a[n]=o.offsetHeight+30,r="0.1px";e.style.top!==r&&(l.current++,e.addEventListener("transitionend",p)),e.style.top=r}));let y=0;for(let e=0;e<_;e++){const t=d[d.length-1-e];if(!t)continue;const n=t.offsetHeight+parseFloat(t.style.top);y<n&&(y=n)}r.current+=d.length,e.style.paddingTop=`${y}px`,m.current=!1}),[t,p]);(0,a.useEffect)((()=>{u&&(d(!1),h())}),[u]);const g=(0,a.useCallback)((()=>{n.current={},o.current={},r.current=0;const e=t.current.children[0];e.style.paddingTop="0",Array.from(e.children).forEach((e=>{e.hasAttribute(i)&&e.removeAttribute(i),e.style.left="",e.style.top="",e.style.width="",e.style.position=""})),h()}),[t,h]),f=(0,s.useDebounce)(g,50);return(0,a.useEffect)((()=>(window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f)})),[f]),{onRestartMasonry:h}})({containerRef:o}),p=(0,s.useDebounce)((0,a.useCallback)(m,[]),500);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"kubio-predefined-layouts__screenshot-list kubio-predefined-layouts__screenshot-list--infinite-list",ref:o},(0,a.createElement)(rm(),{pageStart:0,initialLoad:!1,useWindow:!1,loadMore:u,hasMore:d,threshold:2e3,loader:(0,a.createElement)(a.Fragment,null)},l.map(((e,t)=>(0,a.createElement)(wm,{onLoad:p,key:e.name+"__"+t,value:e,index:t,onSelect:n})))),(0,a.createElement)(Pm,null)))})),Om=()=>{const{list:e}=_h(),{initialParams:t,activePage:n}=Cc(),o=p().get(t,[n,"onActionFunc"]),{insertBlocks:r}=(0,w.useDispatch)("core/block-editor"),{contentClientId:i,nrOfBlocksInsideContent:l,patternCategories:c,sectionNameAndIdHooks:u}=(0,w.useSelect)((e=>{var t;const{getBlocks:n,getBlockOrder:o,getClientIdsWithDescendants:r,getBlock:i}=e("core/block-editor"),{__experimentalBlockPatternCategories:a}=e("core/block-editor").getSettings(),l=n()||[],s=(0,ve.findBlockByName)(l,"core/post-content"),c=null==s?void 0:s.clientId;return{patternCategories:a,contentClientId:c,nrOfBlocksInsideContent:null===(t=o(c))||void 0===t?void 0:t.length,sectionNameAndIdHooks:{getClientIdsWithDescendants:r,getBlock:i}}}),[]),{onClose:d=p().noop}=Cc(),g=(0,a.useCallback)((async e=>{var t;const n=null==e?void 0:e.content;let o=(0,ve.transformTemplateToBlock)(n);o=function(e){var t,n,o;let{block:r,pattern:i,patternCategories:a,hooks:l}=e;const{categories:s}=i,c=null!==(t=null==s?void 0:s[0])&&void 0!==t?t:"__undefined__category__",u=null!==(n=null===(o=(0,m.find)(a,{name:c}))||void 0===o?void 0:o.label)&&void 0!==n?n:"Custom Section",{anchor:d,name:p}=(0,ve.getNextSectionNameAndId)(u,l);return"kubio/section"===r.name&&(r={...r,attributes:{...r.attributes,anchor:d,attrs:{...r.attributes.attrs,name:p}}}),r}({pattern:e,block:o,hooks:u,patternCategories:c});let a=l;var s;-1!==e.categories.indexOf(h.HERO_ACCENT_CATEGORY)&&(a=0),await r((0,ve.cleanFontFamilyFromBlocks)(o),a,i,!1),d(),null!==(t=o)&&void 0!==t&&t.clientId&&oc(null===(s=o)||void 0===s?void 0:s.clientId)}),[i,l,r,d,c,u]),f=(0,s.useDeepMemo)((()=>La().generate()),[e]),b=(0,a.useCallback)((async e=>{o?(o(e),d()):g(e)}),[o,d,g]);return(0,a.createElement)(ap.Page.Content,null,(0,a.createElement)(Am,{key:f,list:e,onSelect:b}))},Nm="https://s3.us-west-2.amazonaws.com/static-assets.kubiobuilder.com/assets/predesigned-layouts/no+elements+found.png",Mm="https://s3.us-west-2.amazonaws.com/static-assets.kubiobuilder.com/assets/predesigned-layouts/no+elements+found+favorites.png";[Nm,Mm].forEach((e=>{(new Image).src=e}));const Dm=(0,a.memo)((e=>{let{children:t}=e;const{activePage:n}=Cc(),o=t||(0,x.__)("NO ELEMENTS FOUND","kubio"),r=(0,a.useMemo)((()=>n===Ec?Mm:Nm),[n]);return(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list--empty-content"},(0,a.createElement)("img",{src:r}),o)})),Bm=(0,a.memo)((e=>{let{children:t}=e;const{activePage:n}=Cc(),{activeTag:o,setActiveTag:r}=xm(),i=(0,a.useMemo)((()=>n===Ec?Mm:Nm),[n]);return(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list--empty-content"},(0,a.createElement)(ve.KubioSectionsTags,{activeTag:o,setActiveTag:r}),(0,a.createElement)("img",{src:i}),(0,x.__)("No Section Found","kubio"))})),Lm=(0,a.memo)((e=>{const{list:t}=_h(),n=!window.kubioPatternsRegistered;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(ap,C({},e,{className:"kubio-predefined-layouts__sections-page",isLoading:n,items:t,sidebar:(0,a.createElement)(tm,{searchPlaceholder:(0,x.__)("Find a section…","kubio")}),pageContent:(0,a.createElement)(Om,null),EmptyContentComponent:Bm})))})),zm=(0,a.memo)((e=>{const{initialParams:t,activePage:n}=Cc(),o=p().get(t,["sections","tag"],ve.ALL_TAG),[r,i]=(0,a.useState)(o);return(0,a.createElement)(Im,{activeTag:r,setActiveTag:i},(0,a.createElement)(fh,null,(0,a.createElement)(Lm,e)))})),Fm=(0,a.createContext)({value:null}),Gm=(0,a.memo)((e=>{let{children:t}=e;const{previousActivePage:n}=Cc(),[o,r]=(0,a.useState)(n),i=(0,a.useMemo)((()=>({activeTab:o,setActiveTab:r})),[o,r]);return(0,a.createElement)(Fm.Provider,{value:i},t)})),Hm=()=>(0,a.useContext)(Fm),Um=Sc.filter((e=>{let{value:t}=e;return t!==Ec})),Wm=(0,a.memo)((()=>{const{activeTab:e,setActiveTab:t}=Hm(),{initialParams:n}=Cc(),o=p().get(n,"disabledPages",[]);return(0,a.createElement)(P.ToggleGroup,{value:e,onChange:t,disabledOptions:o,options:Um})})),jm=(0,a.memo)((()=>(0,a.createElement)(Zm.Fill,null,(0,a.createElement)(Wm,null)))),Vm=(0,a.memo)((e=>{const{activeTab:t}=Hm(),n=(0,a.useMemo)((()=>p().get($m,t,a.Fragment)),[t]);return(0,a.createElement)("div",{className:"kubio-predefined-layouts__favorite-page"},(0,a.createElement)(n,e),(0,a.createElement)(jm,null))})),Km=(0,a.memo)((e=>(0,a.createElement)(Gm,null,(0,a.createElement)(Oh,null,(0,a.createElement)(Vm,e))))),$m={[vc]:bm,[yc]:Sm,[kc]:zm,[Ec]:Km},qm=(0,a.memo)((e=>{const{activePage:t,onClose:n,showLoadingOverlay:o}=Cc(),r=(0,a.useRef)(),i=(0,a.useMemo)((()=>p().get($m,t,a.Fragment)),[t]),l=(0,a.useCallback)((()=>{n()}),[n]);return(0,s.useOnClickOutside)(r,l),(0,a.createElement)("div",{ref:r,className:"kubio-predefined-layouts__pages-container position-relative"},(0,a.createElement)(i,e),(0,a.createElement)("div",{className:"kubio-predefined-layouts__popup-slot"}),o&&(0,a.createElement)(em,null))})),Ym=(0,a.memo)((e=>{let{children:t}=e;const n=t||(0,x.__)("Kubio Library","kubio");return(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__sidebar__header"},(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__sidebar__header__inner"},n))})),Xm=(0,a.memo)((e=>{let{children:t}=e;return(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__sidebar__content"},t)})),Qm=(0,a.memo)((e=>{let{children:t}=e;return(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__sidebar__footer"},t)})),Zm=(0,k.createSlotFill)("PredefinedLayoutsSidebarTop"),Jm=(0,a.memo)((e=>{let{children:t,className:n}=e;return(0,a.createElement)("div",{className:T()("kubio-predefined-layouts__modal-layout__sidebar",n)},t)}));Jm.Header=Ym,Jm.Content=Xm,Jm.Footer=Qm;const ep=(0,a.memo)((e=>{let{children:t}=e;return(0,a.createElement)("div",null,t)})),tp=(0,a.memo)((()=>{const{activePage:e,setActivePage:t,initialParams:n}=Cc(),o=p().get(n,"disabledPages",[]);return(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__pages-switcher"},(0,a.createElement)(P.ToggleGroup,{value:e,onChange:t,disabledOptions:o,options:Sc}))})),np=(0,a.memo)((e=>{let{children:t}=e;return(0,a.createElement)(a.Fragment,null,t)})),op=(0,a.memo)((e=>{let{children:t}=e;return(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list__title"},t)})),rp=(0,a.memo)((e=>{let{children:t}=e;return(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list__footer"},t)})),ip=(0,a.memo)((()=>(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list--loading-content"},(0,a.createElement)(k.Icon,{icon:ye.KubioLoader})))),ap=(0,a.memo)((e=>{let{items:t,sidebar:n,pageContent:o,pageFooter:r,className:i,isLoading:l=!1,emptyContent:s,EmptyContentComponent:c=Dm}=e;const{onClose:u}=Cc();let d;if(Array.isArray(t)){const e=!(null==t?void 0:t.length);d=l?(0,a.createElement)(ip,null):e?(0,a.createElement)(c,null,s):o}else d=o;return(0,a.createElement)("div",{className:T()("kubio-predefined-layouts__modal-layout",i)},n,(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list__container"},(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__header"},(0,a.createElement)(tp,null),(0,a.createElement)(k.Button,{className:"kubio-predefined-layouts__modal-layout__close",onClick:u,icon:$t,size:12,label:(0,x.__)("Close","kubio")})),(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list"},(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list__left-gradient"}),d),r))}));ap.Page=ep,ap.Page.Content=np,ap.Page.Footer=rp,ap.Page.Content.Title=op,ap.Sidebar=Jm;const lp=(0,a.memo)((e=>{let{onSelectDemo:t}=e;const{activePage:n}=Cc(),o=(0,a.useMemo)((()=>{switch(n){case vc:return(0,x.__)("Back to Starter Sites","kubio");case yc:return(0,x.__)("Back to Pages","kubio")}return(0,x.__)("Back","kubio")}),[n]);return(0,a.createElement)(ap.Sidebar.Header,null,(0,a.createElement)(k.Button,{className:"kubio-predefined-layouts__preview-page__sidebar__back",icon:(0,a.createElement)(k.Dashicon,{icon:"redo"}),onClick:()=>t(null)},o))})),sp=(0,a.createContext)({text:null,isDisabled:!1}),cp=(0,a.memo)((()=>(0,a.createElement)("div",null,(0,x.__)("You can't import page content","kubio")))),up=(0,a.memo)((e=>{let{children:t}=e;const{selectedDemoPart:n}=uc(),o=Tp(n),{currentPostIsPage:r}=(0,w.useSelect)((e=>{const{getPage:t=p().noop}=e("kubio/edit-site")||{},n=t(),{postType:o}=(null==n?void 0:n.context)||{};return{currentPostIsPage:"page"===o}}),[]),i=p().isEmpty(n),l=(0,a.useMemo)((()=>{const e=o.find((e=>{let{isCurrentPageTemplate:t}=e;return t})),t=o.find((e=>{let{isSelectedDemoPart:t}=e;return t}));return t&&null!=t&&t.isDisabled?{text:t.noticeText,isDisabled:t.isDisabled}:e&&"page"===(null==n?void 0:n.type)||"page"===(null==n?void 0:n.type)&&!r?{text:Pp,isDisabled:!0}:{text:cp,isDisabled:i}}),[o,n,r]);return(0,a.createElement)(sp.Provider,{value:l},t)})),dp=()=>(0,a.useContext)(sp),mp=["attachment","kubio_changeset"],pp=e=>{let{onComplete:t=m.noop,closeModal:n=m.noop,entityName:o=(0,x.__)("other","kubio"),ModalComponent:r=k.Modal,modalProps:i={},changeReadyState:l=!0,changePage:c=!0}=e;const d=(0,s.useUnloadStoreEntities)(),p=(0,s.useResetUndoStack)(),h=(0,f.useSetGlobalSessionProp)("ready"),[g,_]=(0,a.useState)(!1),{hasDirtyEntities:v,entitiesToSave:y}=(0,w.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t}=e("core");return{hasDirtyEntities:t().filter((e=>{let{kind:t,name:n}=e;return"postType"===t&&!mp.includes(n)})).length>0,entitiesToSave:t()}})),{saveEditedEntityRecord:E}=(0,w.useDispatch)("core"),{setIsNavigationPanelOpened:S,setPage:I}=(0,w.useDispatch)(ct),[,T]=(0,b.useAIData)(),P=(0,a.useCallback)((()=>{S(!1),l&&(h(!1),c&&I(null));const{requestIdleCallback:e}=window;e((()=>{d(),p(),(0,s.removeCachedAllMergedAttributes)(),T(null),e(t)})),(0,u.doAction)("kubio.editor.page-changed")}),[S,l,I,h,d,p,T,t]);return(0,a.useEffect)((()=>{v||P()}),[P,v]),(0,a.createElement)(a.Fragment,null,v&&(0,a.createElement)(r,C({title:(0,x.__)("You have unsaved changes","kubio"),onRequestClose:n},i),(0,a.createElement)("p",null,(0,a.createElement)("span",{dangerouslySetInnerHTML:{__html:(0,x.sprintf)(// translators: %s: page name
(0,x.__)("You are being redirected to <strong>%s</strong> page.","kubio"),o)}}),(0,a.createElement)("br",null),(0,x.__)("Would you like to save these changes or discard them?","kubio")),(0,a.createElement)(k.ButtonGroup,{className:"h-template-part-modal__button-group"},(0,a.createElement)(k.Button,{isLink:!0,onClick:()=>{P()}},(0,x.__)("Discard changes","kubio")),(0,a.createElement)(k.Button,{isPrimary:!0,onClick:()=>{_(!0),(()=>{const e=y.map((e=>{let{kind:t,name:n,key:o}=e;return E(t,n,o)}));return Promise.all(e)})().then((()=>{P(),_(!1)}))},isBusy:g,disabled:g},(0,x.__)("Save changes","kubio")))))},hp=(0,a.memo)((e=>{let{onClose:t=p().noop,children:n}=e;const[o,r]=(0,a.useState)(!1),[,i]=(0,f.useGlobalSessionProp)("displayingEmptyPageChecked"),l=(0,a.useMemo)((()=>({onClose:t})),[t]),s=(0,a.useCallback)((()=>{r(!0),i(!0)}),[i]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(pp,{onComplete:s,onClose:t,ModalComponent:Jd,modalProps:l,changeReadyState:!1}),o&&n)})),{memo:gp,useState:fp}=n(9307),bp=gp((e=>{let{actionLabel:t,description:n,NoticeActionComponent:o,onClose:r=p().noop,onAction:i=p().noop,onShowAction:l=p().noop,fromPopup:s=!1,...c}=e;const[u,d]=fp(!1),m=(0,a.useCallback)((()=>{r(),d(!1)}),[r,d]),h=e=>{e.stopPropagation(),e.preventDefault(),l(),d(!0)};return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"kubio-predefined-layouts__disabled-notice__description"},n),(0,a.createElement)("div",null,!s&&(0,a.createElement)("a",{className:"kubio-predefined-layouts__disabled-notice__action",onClick:h},t),s&&(0,a.createElement)(k.Button,{isSecondary:!0,onClick:h},t)),u&&(0,a.createElement)(hp,{onClose:m},(0,a.createElement)(o,C({onAction:i},c))))})),_p=(0,a.memo)((e=>{let{onAction:t,templateSlug:n,thirdPartyUrl:o=null}=e;const r=(0,a.useRef)(!1),{storeData:i}=(0,w.useSelect)((e=>{var t;const{storeData:n={}}=null===(t=e(s.TEMPLATE_STORE_NAME))||void 0===t?void 0:t.getTemplateData();return{storeData:n}}),[]),{createErrorNotice:l}=(0,s.useKubioNotices)(),{setTemplate:c=p().noop}=(0,w.useDispatch)("kubio/edit-site")||{},u=(0,f.useSetGlobalSessionProp)("ready"),{onClose:d}=Cc(),m=(0,a.useCallback)((()=>{if(!o)return void l((0,x.__)("Could not redirect to the page you selected","kubio"));const e=document.createElement("a");e.setAttribute("href",o),document.body.append(e),e.click()}),[o,l]),h=(0,a.useMemo)((()=>{const e=(null==i?void 0:i.templates)||[],t=e=>{var t;const n=null==e||null===(t=e.id)||void 0===t?void 0:t.split("//");return p().get(n,"[1]")};if(Array.isArray(n)){let o=null;return p().reverse(n).forEach((n=>{if(o)return;const r=e.find((e=>t(e)===n));r&&(o=r)})),o}return e.find((e=>t(e)===n))}),[null==i?void 0:i.templates]),g=(0,a.useCallback)((()=>{r.current||(r.current=!0,u(!1),t(),d(),h?c(h.id,h.slug,!0):m())}),[h,c,t,r,d,u]);return(0,a.useEffect)((()=>{g()}),[]),(0,a.createElement)(a.Fragment,null)})),vp=()=>{const{siteUrl:e}=(0,w.useSelect)((e=>{const{getSettings:t=p().noop}=e("kubio/edit-site"),{siteUrl:n}=t()||{};return{siteUrl:n}}),[]);return e},yp=e=>{const t=vp();return(0,a.useMemo)((()=>{try{const n=new URL(`${t}wp-admin/admin.php`),o=n.searchParams;return o.append("page","kubio"),o.append("pageURL",e),n.toString()}catch(e){return null}}),[e])},kp=(0,a.memo)((e=>{const{blogLink:t}=(0,w.useSelect)((e=>{const{getEditedEntityRecord:t}=e("core"),{getSettings:n=p().noop}=e("kubio/edit-site"),o=t("root","site");let r;if("page"===(null==o?void 0:o.show_on_front)){const e=t("postType","page",parseInt(null==o?void 0:o.page_for_posts));r=p().get(e,"link",null)}else{const{siteUrl:e}=n()||{};r=e}return{blogLink:r}}),[]),n=yp(t);return(0,a.createElement)(bp,C({description:(0,x.__)("This content can be imported only on the blog template","kubio"),actionLabel:(0,x.__)("Switch to the blog template","kubio"),templateSlug:fc,NoticeActionComponent:_p,thirdPartyUrl:n},e))})),Ep=(0,a.memo)((e=>{let{onAction:t,firstPost:n}=e;const o=(0,a.useRef)(!1),{createErrorNotice:r}=(0,s.useKubioNotices)(),{setTemplate:i=p().noop}=(0,w.useDispatch)("kubio/edit-site")||{},l=(0,f.useSetGlobalSessionProp)("ready"),{onClose:c}=Cc(),{setPage:u}=(0,w.useDispatch)(h.STORE_KEY),d=(0,a.useCallback)((()=>{!o.current&&n&&(o.current=!0,l(!1),t(),c(),u({type:n.type,slug:n.slug,path:(0,Sr.getPathAndQueryString)(n.link),context:{postType:n.type,postId:n.id}}))}),[n,i,t,o,c,l]);return(0,a.useEffect)((()=>{d()}),[]),(0,a.createElement)(a.Fragment,null)})),Sp=(0,a.memo)((e=>{const{firstPost:t}=(0,w.useSelect)((e=>{const{getEntityRecords:t}=e("core"),n=t("postType","post",{per_page:1});return{firstPost:p().get(n,"0")}}),[]);return(0,a.createElement)(bp,C({description:(0,x.__)("This content can be imported only on the singe post template","kubio","kubio"),actionLabel:(0,x.__)("Switch to the singe post template","kubio"),firstPost:t,NoticeActionComponent:Ep},e))})),Cp=(0,a.memo)((e=>{const t=vp(),n=yp(`${t}?s=search-page`);return(0,a.createElement)(bp,C({description:(0,x.__)("This content can be imported only on the search template","kubio"),actionLabel:(0,x.__)("Switch to the search template","kubio"),templateSlug:"search",thirdPartyUrl:n,NoticeActionComponent:_p},e))})),Ip=(0,a.memo)((e=>{const t=vp(),n=yp(`${t}page-no-found`);return(0,a.createElement)(bp,C({description:(0,x.__)("This content can be imported only on the 404 template","kubio"),actionLabel:(0,x.__)("Switch to the 404 template","kubio"),templateSlug:"404",thirdPartyUrl:n,NoticeActionComponent:_p},e))})),Tp=e=>{const{fseTemplateSlug:t,page:n}=(0,w.useSelect)((e=>{const{getPage:t=p().noop,getTemplateId:n=p().noop}=e("kubio/edit-site")||{},o=t(),r=n()||"";return{page:o,fseTemplateSlug:p().get(r.split("//"),"[1]")}}),[]),o=(0,f.useGetGlobalSessionProp)("urlBasedTemplatesMap",{})[null==n?void 0:n.path],r=t||o,i=(e=>{let{templateSlug:t,selectedDemoPart:n={}}=e;const{type:o,slug:r}=n;let i=!1;const a="template"===o&&(null==fc?void 0:fc.includes(r)),l=fc.includes(t);return i=a&&!l,{type:"blog",noticeText:kp,isDisabled:i,isCurrentPageTemplate:l,isSelectedDemoPart:a}})({templateSlug:r,selectedDemoPart:e}),a=(e=>{let{templateSlug:t,selectedDemoPart:n={}}=e;const{type:o,slug:r}=n;let i=!1;const a="template"===o&&(null==gc?void 0:gc.includes(r)),l=gc.includes(t);return i=a&&!l,{type:"single",noticeText:Sp,isDisabled:i,isCurrentPageTemplate:l,isSelectedDemoPart:a}})({templateSlug:r,selectedDemoPart:e}),l=(e=>{let{templateSlug:t,selectedDemoPart:n={}}=e;const{type:o,slug:r}=n;let i=!1;const a="search"===t,l="template"===o&&"search"===r;return i=l&&!a,{type:"search",noticeText:Cp,isDisabled:i,isCurrentPageTemplate:a,isSelectedDemoPart:l}})({templateSlug:r,selectedDemoPart:e}),s=(e=>{let{templateSlug:t,selectedDemoPart:n={}}=e;const{type:o,slug:r}=n;let i=!1;const a="404"===t,l="template"===o&&"404"===r;return i=l&&!a,{type:"404",noticeText:Ip,isDisabled:i,isCurrentPageTemplate:a,isSelectedDemoPart:l}})({templateSlug:r,selectedDemoPart:e});return[a,i,l,s]},xp=(0,a.memo)((e=>{let{onAction:t}=e;const{saveEntityRecord:n,editEntityRecord:o,saveEditedEntityRecord:r}=(0,w.useDispatch)("core"),{setPage:i}=(0,w.useDispatch)(h.STORE_KEY),l=(0,a.useRef)(!1),{createErrorNotice:c}=(0,s.useKubioNotices)(),u=(0,f.useSetGlobalSessionProp)("ready"),{onClose:d}=Cc(),m=(0,a.useCallback)((async()=>{if(l.current)return;l.current=!0,u(!1),t(),d();const e={title:"Kubio page",status:"publish"};try{var a;const t=await n("postType","page",e);if(!t)return;const l=p().capitalize(null==t||null===(a=t.slug)||void 0===a?void 0:a.replaceAll("-"," "));await o("postType","page",t.id,{title:l}),await r("postType","page",t.id),i({type:t.type,slug:t.slug,path:(0,Sr.getPathAndQueryString)(t.link),context:{postType:t.type,postId:t.id}})}catch(e){c((0,x.__)("Could not create new page","kubio"))}}),[i,t,d,n,c,o]);return(0,a.useEffect)((()=>{m()}),[]),(0,a.createElement)(a.Fragment,null)})),Pp=(0,a.memo)((e=>(0,a.createElement)(bp,C({description:(0,x.__)("This content can be imported only on a page","kubio"),actionLabel:(0,x.__)("Create new page","kubio"),NoticeActionComponent:xp},e)))),Rp=(0,a.memo)((e=>{let{onAction:t=p().noop,...n}=e;const{text:o,isDisabled:r}=dp();return(0,a.createElement)("div",{className:"kubio-predefined-layouts__disabled-notice__outer"},o&&r&&(0,a.createElement)("div",{className:"kubio-predefined-layouts__disabled-notice"},(0,a.createElement)(o,C({onAction:t},n))))})),Ap=(0,a.memo)((()=>(0,a.createElement)(ap.Sidebar.Footer,null,(0,a.createElement)(Rp,null)))),Op=(0,a.memo)((()=>(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__sidebar__content--is-loading"},(0,a.createElement)(k.Icon,{icon:ye.KubioLoader}),";"))),Np=(0,a.memo)((e=>{let{currentDemoSite:t,selectedDemoPart:n}=e;const o=null==t?void 0:t.preview,r=(0,a.useRef)(),i=(0,a.useMemo)((()=>{const{pagePreviewUrl:e}=n||{};return e||o}),[o,n]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("a",{ref:r,href:i,target:"_blank",className:"kubio-predefined-layouts__preview-page__sidebar__preview-button",rel:"noreferrer"},(0,a.createElement)(k.Icon,{icon:ye.PreviewIcon})),(0,a.createElement)(P.ModalTooltip,{anchorRef:r},(0,x.__)("Live Preview","kubio")))})),Mp=(0,a.memo)((e=>{let{selectedDemoPart:t,currentDemoSite:n,demoPartsIsLoaded:o,currentDemoParts:r}=e;const[i,l]=(0,a.useState)(!1),{uniqueId:s}=t||{},c=(0,a.createElement)(Np,{currentDemoSite:n,selectedDemoPart:t});return(0,a.useEffect)((()=>{t&&!i&&(l(!0),function(e,t){if(!Array.isArray(e)||!t)return;const n=new Image;n.onload=()=>{e.filter((e=>e.uniqueId!==(null==t?void 0:t.uniqueId))).forEach((e=>{(new Image).src=e.screenshotFull}))},n.src=null==t?void 0:t.screenshotFull}(r,t))}),[t]),(0,a.createElement)(ap.Sidebar.Content,null,o&&(0,a.createElement)(jc,C({key:s,showFull:!0,showAnimationAtLoad:!0,labelSlot:c,showFavorite:!1,addUniquePreviewAttribute:!1},t)),!o&&(0,a.createElement)(Op,null))})),Dp=(0,a.memo)((()=>{const{selectedDemoPart:e,demoPartsIsLoaded:t,currentDemoParts:n}=uc(),{currentDemoSite:o,onSelectDemo:r}=Ch();return(0,a.createElement)(ap.Sidebar,{className:"kubio-predefined-layouts__preview-page__sidebar"},(0,a.createElement)(lp,{onSelectDemo:r}),(0,a.createElement)(Mp,{selectedDemoPart:e,currentDemoSite:o,demoPartsIsLoaded:t,currentDemoParts:n}),(0,a.createElement)(Ap,null))})),Bp=(0,a.memo)((e=>{let{colorPalette:t}=e;const n=(0,a.useMemo)((()=>t.map((e=>{let{color:t}=e;return`rgb(${t.join(",")}`}))),[t]);return(0,a.createElement)("td",{className:"kubio-predefined-layouts__color-palette-previewer__list"},n.map(((e,t)=>(0,a.createElement)(P.ColorIndicator,{key:t,value:e}))))})),Lp=(0,a.memo)((e=>{let{colorPalette:t}=e;return(0,a.createElement)("tr",{className:"kubio-predefined-layouts__color-palette-previewer"},(0,a.createElement)("td",null,(0,x.__)("Starter site colors","kubio")),t&&(0,a.createElement)(Bp,{colorPalette:t}))})),zp=["h1","h2","h3","h4","h5","h6","p"],Fp=[{label:"Heading 1",holder:"h1"},{label:"Heading 2",holder:"h2"},{label:"Heading 3",holder:"h3"},{label:"Heading 4",holder:"h4"},{label:"Heading 5",holder:"h5"},{label:"Heading 6",holder:"h6"},{label:"Paragraph",holder:"p"}],Gp=(0,a.memo)((e=>{let{typography:t}=e;const n=(0,a.useMemo)((()=>{const e=p().get(t,"holders",{});return p().pick(e,zp)}),[t]),o=(0,a.useCallback)((e=>{const t=p().get(n,e);if(!t)return{};const o=Qi.typographyConfig.getTypographyCss(t,null,!1);return p().omit(o,"color")}),[n]);return t?(0,a.createElement)("td",{className:"kubio-predefined-layouts__typography-previewer__text-container"},Fp.map((e=>{let{label:t,holder:r}=e;const i=o(r);return(0,a.createElement)(Hp,{key:r,style:i,holder:r,styleByHolder:n},t)}))):(0,a.createElement)(a.Fragment,null)})),Hp=(0,a.memo)((e=>{let{children:t,styleByHolder:n,holder:o,style:r}=e;const i=(0,a.useRef)(),l=(0,a.useMemo)((()=>{const e=p().get(n,o),{family:t,weight:r,size:i}=e;return`${t}, ${r}, ${null==i?void 0:i.value}${null==i?void 0:i.unit}`}),[n,o]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("span",{className:"kubio-predefined-layouts__typography-previewer__text",style:r,ref:i},t),(0,a.createElement)("span",{className:"kubio-predefined-layouts__typography-previewer__text-separator"},", "),(0,a.createElement)(P.ModalTooltip,{anchorRef:i},l))})),Up=(0,a.memo)((e=>{let{typography:t}=e;return(0,a.createElement)("tr",{className:"kubio-predefined-layouts__typography-previewer"},(0,a.createElement)("td",null,(0,x.__)("Starter site typography","kubio")),(0,a.createElement)(Gp,{typography:t}))})),Wp=(0,a.memo)((e=>{let{isOpen:t}=e;const[n,o]=(0,a.useState)(),{selectedDemoPart:r}=uc();(0,a.useEffect)((()=>{!async function(){const e=await async function(e){const t=["demoPartsContentById","page"===(null==e?void 0:e.type)?"pages":"templates",null==e?void 0:e.id],n=p().get(qs,t);return Zs(null==n?void 0:n.globalDataId)}(r);e&&o(e)}()}),[r]);const i=(0,a.useMemo)((()=>null==n?void 0:n.colors),[n]),l=(0,a.useMemo)((()=>p().get(n,"globalStyle.style.descendants.body.typography")),[n]),s=(0,a.useRef)(),c=(0,a.useMemo)((()=>{var e;return t?{height:`${null==s||null===(e=s.current)||void 0===e?void 0:e.offsetHeight}px`}:{height:0}}),[t]),u=(0,a.useMemo)((()=>{const e=[];return p().get(n,["fonts","google"],[]).forEach((t=>{let{family:n}=t;e.includes(n)||e.push(n)})),e}),[n]);return(0,a.createElement)(jp.Fill,null,(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__advanced-settings__control",style:c},(0,a.createElement)("div",{ref:s,className:"kubio-predefined-layouts__preview-page__advanced-settings__control__inner"},(0,a.createElement)("table",{className:"kubio-predefined-layouts__preview-page__advanced-settings__global-data"},(0,a.createElement)("tbody",null,(0,a.createElement)(Lp,{colorPalette:i}),(0,a.createElement)(Up,{typography:l}))))),(0,a.createElement)(Gc,{fontsToLoad:u}))})),jp=(0,k.createSlotFill)("PredefinedLayoutsAdvancedSettings"),Vp=(0,a.memo)((()=>{const{shouldConvertGlobalColors:e,setShouldConvertGlobalColors:t}=Pc();return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__advanced-settings"},(0,a.createElement)(P.ToggleControl,{label:(0,x.__)("Replace global styles","kubio"),value:e,onChange:t})),(0,a.createElement)(Wp,{isOpen:e}))})),Kp=(0,a.memo)((e=>{let{value:t={},onSelect:n,selected:o}=e;const{screenshot:r,isPro:i,label:l,uniqueId:s,type:c,id:u}=t,d=s===(null==o?void 0:o.uniqueId),m=(0,a.useMemo)((()=>({favoriteType:`demo-${c}`,favoriteId:u})),[c,u]);return(0,a.createElement)("div",{className:T()("kubio-predefined-layouts__preview-page__item",{"kubio-predefined-layouts__preview-page__item--selected":d}),onClick:()=>{n(t)}},(0,a.createElement)(jc,C({isPro:i,screenshot:r,label:l,uniqueId:s},m)))})),$p=(0,a.memo)((e=>{let{list:t,value:n,onSelect:o}=e;return(0,a.createElement)(Wc,{list:t},(e=>(0,a.createElement)(Kp,{key:e.slug,value:e,selected:n,onSelect:o})))})),qp=e=>{(0,a.useEffect)((()=>{if(!e)return;const t=document.querySelector(`[data-unique-id="${null==e?void 0:e.uniqueId}"]`);t&&(function(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}(t)||t.scrollIntoView({block:"center"}))}),[e])},Yp=(0,a.memo)((()=>{const{currentDemoParts:e,setSelectedDemoPart:t,selectedDemoPart:n}=uc();return qp(n),(0,a.createElement)($p,{list:e,onSelect:t,value:n})})),Xp=(0,a.memo)((()=>{const{currentDemoSite:e,onSelectDemo:t}=Ch(),{currentDemoParts:n,relatedDemoParts:o,setSelectedDemoPart:r,selectedDemoPart:i}=uc(),l=!!o,s=null==e?void 0:e.relatedDemoSite;qp(i);const c=(0,a.useMemo)((()=>null!=e&&e.isPro?e:s),[e,s]),u=(0,a.useMemo)((()=>e===c?s:e),[e,c]),d=(0,a.useMemo)((()=>e.isPro?n:e.isPro||o?!e.isPro&&null!=e&&e.relatedDemoSite&&o?o:void 0:n),[n,e,o]),m=(0,a.useMemo)((()=>l&&n&&o?d===n?o:n:null),[l,d]),p=(0,a.useMemo)((()=>n===d),[d,n]),h=!p,g=(0,a.useCallback)((e=>{p?r(e):t(null==c?void 0:c.slug,e)}),[r,p,c]),f=(0,a.useCallback)((e=>{h?r(e):t(null==u?void 0:u.slug,e)}),[r,h,u]);return o?(0,a.createElement)(a.Fragment,null,(0,a.createElement)($c,{label:(0,x.__)("FREE","kubio")}),(0,a.createElement)($p,{list:m,onSelect:f,value:i}),(0,a.createElement)($c,{label:(0,x.__)("PRO","kubio"),className:"kubio-predefined-layouts__free-pro-separator--second"}),(0,a.createElement)($p,{list:d,onSelect:g,value:i})):(0,a.createElement)(a.Fragment,null)})),Qp=(0,a.memo)((()=>{const{currentDemoSite:e}=Ch(),t=null==e?void 0:e.label,n=(0,a.useMemo)((()=>!(null==e||!e.relatedDemoSite)),[e])?Xp:Yp;return(0,a.createElement)(ap.Page.Content,null,(0,a.createElement)(ap.Page.Content.Title,null,(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__content__title"},(0,a.createElement)("div",{className:"d-flex justify-content-between align-items-center"},(0,a.createElement)("span",{className:"kubio-predefined-layouts__preview-page__content__title__name"},t),(0,a.createElement)(Vp,null)),(0,a.createElement)(jp.Slot,null))),(0,a.createElement)(n,null))})),Zp="content",Jp="fullPage",eh="fullStarterSite",th=[{label:(0,x.__)("Content","kubio"),value:Zp,description:(0,x.__)("The selected starter site content will be added after your existing sections","kubio"),image:"https://s3.us-west-2.amazonaws.com/static-assets.kubiobuilder.com/assets/predesigned-layouts/content.png"},{label:(0,x.__)("Full page","kubio"),value:Jp,description:(0,x.__)("Your header, content and footer will be all replaced with the ones from the selected page","kubio"),image:"https://s3.us-west-2.amazonaws.com/static-assets.kubiobuilder.com/assets/predesigned-layouts/full+page.png"},{label:(0,x.__)("Full starter site","kubio"),value:eh,description:(0,x.__)("All content will be replaced with the selected full starter site","kubio"),image:"https://s3.us-west-2.amazonaws.com/static-assets.kubiobuilder.com/assets/predesigned-layouts/full+site.png"}],nh=(0,a.memo)((e=>{let{value:t,label:n,description:o,image:r,isActive:i,onClick:l,isDisabled:s=!1,isFreeOnPro:c=!1,urlArgs:u}=e;const d=(0,a.useMemo)((()=>[{label:n,value:t}]),[n,t]),m=(0,a.useMemo)((()=>i?t:null),[i,t]),p=(0,a.useCallback)((()=>{s||l()}),[l,s]),h=(0,a.useMemo)((()=>c?Hn.ProItem:oh),[c]),g=(0,a.useMemo)((()=>c?{tag:oh,urlArgs:{urlArgs:u}}:{}),[c]);return(0,a.createElement)(h,C({className:T()("kubio-predefined-layouts__preview-page__import-popup__card",{"kubio-predefined-layouts__preview-page__import-popup__card--active":i,"kubio-predefined-layouts__preview-page__import-popup__card--disabled":s}),onClick:p},g),(0,a.createElement)("img",{className:"kubio-predefined-layouts__preview-page__import-popup__card__image",src:r}),(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__import-popup__card__label"},(0,a.createElement)(k.RadioControl,{options:d,selected:m})),(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__import-popup__card__description"},o),s&&(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__import-popup__card__disabled-overlay"}))})),oh=(0,a.memo)((0,a.forwardRef)(((e,t)=>{let{children:n,...o}=e;return(0,a.createElement)("div",C({},o,{ref:t}),n)}))),rh=(0,a.memo)((e=>{let{onClose:t,onImportContent:n,onImportFullPage:o,onImportStarterSite:r,isFreeBuild:i,currentTemplateIsClassic:l,currentDemoSite:s,selectedDemoPart:c}=e;const u=(0,a.useMemo)((()=>l?Jp:Zp),[l]),[d,m]=(0,a.useState)(u),p=(0,a.useCallback)((e=>{e!==d&&m(e)}),[d,m]),h=(0,a.useMemo)((()=>th.map((e=>{const t={};return e.value===Jp&&i&&!l&&(t.isFreeOnPro=!0,t.urlArgs={source:"templates_gallery",content:null==s?void 0:s.label}),e.value===Zp&&l&&(t.isDisabled=!0),{...e,...t}}))),[th,l,i,s,c]);return(0,a.createElement)(Jd,{title:(0,a.createElement)(ih,null),onClose:t},(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__import-popup"},(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__import-popup__list"},h.map((e=>(0,a.createElement)(nh,C({key:e.value},e,{isActive:d===e.value,onClick:()=>p(e.value)}))))),(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__import-popup__footer d-flex justify-content-end"},(0,a.createElement)(k.Button,{isPrimary:!0,onClick:()=>{switch(d){case Zp:return void n();case Jp:return void o();case eh:t(),r()}}},(0,x.__)("Import selection","kubio")))))})),ih=(0,a.memo)((()=>(0,a.createElement)("span",{style:{fontWeight:"700"}},(0,x.__)("What to import:","kubio")))),{memo:ah}=n(9307),lh=ah((e=>{let{onClose:t}=e;const[n,o]=(0,a.useState)(!1),r=(0,a.useCallback)((()=>{o(!0)}),[o]),i=(0,a.useMemo)((()=>{if(n)return"invisible"}),[n]);return(0,a.createElement)(Jd,{title:(0,a.createElement)("div",null,(0,x.__)("This content can't be imported here","kubio")),onClose:t,className:i},(0,a.createElement)(Rp,{onAction:t,onClose:t,onShowAction:r,fromPopup:!0}))})),sh=(0,a.memo)((()=>{const{selectedDemoPart:e}=uc(),[t,n]=(0,a.useState)(!1),[o,r]=(0,a.useState)(!1),i=(0,a.useCallback)((()=>{n(!1)}),[n]),{currentDemoSite:l,setShowDemoSiteImportPage:s}=Ch(),{importDemoPart:c,isImporting:u,whatToImport:d,setWhatToImport:m}=Pc(),{isDisabled:h}=dp(),{type:g,isPro:f}=e||{},{isClassicTemplate:b}=(0,w.useSelect)((e=>{const{getTemplateId:t=p().noop}=e("kubio/edit-site")||{};return{isClassicTemplate:!t()}})),_="template"===g&&b,v=(0,a.useMemo)((()=>!0),[]),y=v&&f,E=y?Hn.ProItem:k.Button,S=v&&(null==l?void 0:l.isPro),I=S?Hn.ProItem:k.Button;let P={};y&&(P={urlArgs:{source:"templates_gallery",content:null==l?void 0:l.label}});let R={};S&&(R={urlArgs:{source:"templates_gallery",content:null==l?void 0:l.label}});const A=(0,a.useCallback)((()=>{s(!0)}),[s]),O=(0,a.useCallback)((()=>{m(dc),setTimeout((()=>{c()}),0)}),[m,c]),N=(0,a.useCallback)((()=>{m(mc),setTimeout((()=>{c()}),0)}),[m,c]),M=(0,a.useCallback)((()=>{h?r(!0):n(!0)}),[h,n,r]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(ap.Page.Footer,null,(0,a.createElement)("div",{className:T()("kubio-predefined-layouts__preview-page__footer d-flex w-100 align-items-center justify-content-end")},(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__footer__buttons"},(0,a.createElement)(Hn.ProModalTextContext.Provider,{value:(0,x.__)("This page is only available in the PRO version of Kubio. Please select a free page to import or upgrade to the PRO version.","kubio")},(0,a.createElement)(E,C({tag:k.Button,isPrimary:!0,onClick:M,isBusy:u},P,{propPopoverClass:"kubio-pro-popover-large"}),(0,x.__)("Import","kubio"))),(0,a.createElement)(Hn.ProModalTextContext.Provider,{value:(0,x.__)("This starter site is only available in the PRO version of Kubio. Please select a free starter site to import or upgrade to the PRO version.","kubio")},(0,a.createElement)(I,C({tag:k.Button,isSecondary:!0,onClick:A},R),(0,x.__)("Import full starter site","kubio")))))),t&&(0,a.createElement)(rh,{currentTemplateIsClassic:_,currentDemoSite:l,selectedDemoPart:e,isFreeBuild:v,onClose:i,onImportContent:O,onImportFullPage:N,onImportStarterSite:A}),o&&(0,a.createElement)(lh,{onClose:()=>r(!1)}))})),ch=(0,a.memo)((e=>{const{currentDemoParts:t,demoPartsIsLoaded:n}=uc(),{demoPartThatIsImporting:o}=Pc();return(0,a.createElement)(a.Fragment,null,o&&(0,a.createElement)(Lc,null),(0,a.createElement)(ap,C({},e,{isLoading:!n,className:"kubio-predefined-layouts__preview-page",items:t,sidebar:(0,a.createElement)(Dp,null),pageContent:(0,a.createElement)(Qp,null),pageFooter:(0,a.createElement)(sh,null)})))})),uh=(0,a.memo)((e=>(0,a.createElement)(cc,null,(0,a.createElement)(xc,null,(0,a.createElement)(up,null,(0,a.createElement)(ch,e)))))),dh=(0,a.createContext)({list:[],categories:null,filterFunction:null}),mh=(0,a.createContext)({list:[]}),ph=(0,a.createContext)({searchString:"",setSearchString:null}),hh=(0,a.createContext)({categoriesList:[],selectedCategory:null,setSelectedCategory:null}),gh=[],fh=(0,a.memo)((e=>{let{children:t}=e;const{list:n,categories:o=gh,filterFunction:r=null}=bh(),i=(0,w.useSelect)((e=>{const{getExcludedSectionCategories:t}=e("kubio/edit-site");return t()})),{selectedCategory:l,setSelectedCategory:s}=yh(),{searchString:c,setSearchString:u}=vh(),{initialParams:d,activePage:m}=Cc(),h="all",g=p().get(d,[m,"category"],h);let f,b,_,v;if(s)f=l,b=s;else{const[e,t]=(0,a.useState)(g);f=e,b=t}if(u)_=c,v=u;else{const[e,t]=(0,a.useState)("");_=e,v=t}const y=(0,a.useMemo)((()=>{if(p().isEmpty(o))return{};const e={};return o.forEach((t=>{let{label:n,value:o}=t;e[o]=n})),e}),[o]),k=(0,a.useMemo)((()=>r&&"function"==typeof r?r(n,_):kh(n,_)),[_,n,r]),{resultedCategories:E,nrOfItemsPerCategory:S}=(0,a.useMemo)((()=>{let e=[{value:h,label:"All"}];const t={};if(k.forEach((n=>{const o=(null==n?void 0:n.categories)||[];o.forEach((n=>{if(i.includes(n))return;const r=e.map((e=>e.value));if(o.forEach((e=>{t[e]?t[e]++:t[e]=1})),r.includes(n))return;let a;p().get(y,n)?a=p().get(y,n):(a=p().startCase(n.replace("-"," & ")).trim(),a=a.replace(" "," & "));const l={value:n,label:a};e.push(l)}))})),t[h]=Object.keys(t).reduce(((e,n)=>e+t[n]),0),!p().isEmpty(o)){const t=o.map((e=>{let{value:t}=e;return t}));e=p().orderBy(e,(e=>p().indexOf(t,e.value)))}return{resultedCategories:e,nrOfItemsPerCategory:t}}),[k,o,i,y]),C=(0,a.useMemo)((()=>k.filter((e=>{const t=(null==e?void 0:e.categories)||[];return!t.some((e=>i.includes(e)))&&(f===h||t.includes(f))}))),[f,h,k,i]),I=(0,a.useMemo)((()=>({searchString:_,setSearchString:v})),[_,v]),T=(0,a.useMemo)((()=>({categoriesList:E,selectedCategory:f,setSelectedCategory:b,nrOfItemsPerCategory:S})),[E,f,b,S]),x=(0,a.useMemo)((()=>({list:C})),[C]);return(0,a.useEffect)((()=>{g&&(E.find((e=>e.value===g))||b(h))}),[]),(0,a.createElement)(mh.Provider,{value:x},(0,a.createElement)(ph.Provider,{value:I},(0,a.createElement)(hh.Provider,{value:T},t)))})),bh=()=>(0,a.useContext)(dh),_h=()=>(0,a.useContext)(mh),vh=()=>(0,a.useContext)(ph),yh=()=>(0,a.useContext)(hh),kh=(e,t)=>{if(!t)return e;const n=t.toLowerCase();return e.filter((e=>{let{label:t}=e;return t.toLowerCase().includes(n)}))},Eh={selectedDemoSlug:null,onSelectDemo:p().noop,setSelectedDemoSlug:p().noop,currentDemoSite:null,selectedDemoPartId:null,setSelectedDemoPartId:p().noop},Sh=(0,a.createContext)(Eh),wh=e=>{let{children:t}=e;const[n,o]=(0,a.useState)(),[r,i]=(0,a.useState)([]),[l,s]=(0,a.useState)({}),[c,u]=(0,a.useState)(!1),[d,m]=(0,a.useState)(),[p,h]=(0,a.useState)(!1);(0,a.useEffect)((()=>{!async function(){const e=await nc();i(e)}()}),[]),(0,a.useEffect)((()=>{!async function(){const e=await ec();s(e),u(!0)}()}),[]);const g=(0,a.useCallback)(((e,t)=>{m(t),o(e)}),[o,m]),f=(0,a.useMemo)((()=>r.find((e=>e.slug===n))),[n,r]),b=(0,a.useMemo)((()=>({rawDemoList:r,selectedDemoSlug:n,onSelectDemo:g,setSelectedDemoSlug:o,currentDemoSite:f,initialDemoPart:d,setInitialDemoPart:m,demosPartsPerSlug:l,demoPartsIsLoaded:c,showDemoSiteImportPage:p,setShowDemoSiteImportPage:h})),[r,n,g,o,f,d,m,l,c,p,h]);return(0,a.createElement)(Sh.Provider,{value:b},t)},Ch=()=>(0,a.useContext)(Sh),Ih=(0,a.createContext)({favoritesDataByType:{},onAddToFavorites:p().noop}),Th="kubio_favorites";let xh=!1;const Ph=(0,a.memo)((e=>{let{children:t}=e;const[n,o]=(0,a.useState)({}),{favoritesEntities:r}=(0,w.useSelect)((e=>{const{getEntityRecords:t,getEditedEntityRecord:n}=e("core");return{favoritesEntities:(t("postType",Th,{per_page:-1})||[]).map((e=>n("postType",Th,e.id)))}}),[]),{saveEntityRecord:i,editEntityRecord:l}=(0,w.useDispatch)("core"),s=(0,a.useRef)(!1),c=(0,a.useMemo)((()=>p().get(r,"0")),[r]),u=(0,a.useMemo)((()=>{try{const e=p().get(c,"content","{}");return JSON.parse(e)}catch(e){return{}}}),[c]);(0,a.useEffect)((()=>{p().isEmpty(n)&&!p().isEqual(u,n)&&o(u)}),[u]);const d=(0,a.useCallback)((async()=>{const e={title:"Favorites data",status:"publish",content:JSON.stringify({})};return await i("postType",Th,e)}),[i]),m=(0,a.useCallback)((async(e,t,r)=>{var i,a;const u=p().cloneDeep(n);if(Array.isArray(t)||(t=[t]),t.forEach((t=>{!1===p().get(u,e,!1)&&p().set(u,e,{}),r?p().set(u,`${e}.${t}`,!0):p().unset(u,`${e}.${t}`)})),o(u),s.current)return;s.current=!0;let m=c;if(p().isEmpty(m)&&!xh&&(xh=!0,m=await d()),null===(i=m)||void 0===i||!i.id)return void(s.current=!1);const h={content:JSON.stringify(u)};l("postType",Th,null===(a=m)||void 0===a?void 0:a.id,h),s.current=!1}),[d,s,c,n]),h=(0,a.useMemo)((()=>({favoritesDataByType:n,onAddToFavorites:m})),[n]);return(0,a.createElement)(Ih.Provider,{value:h},t)})),Rh=()=>(0,a.useContext)(Ih),Ah=(0,a.createContext)({favoritesDataByType:null}),Oh=(0,a.memo)((e=>{let{children:t}=e;const{favoritesDataByType:n}=Rh(),o=(0,a.useMemo)((()=>({favoritesDataByType:n})),[n]);return(0,a.createElement)(Ah.Provider,{value:o},t)})),Nh=()=>(0,a.useContext)(Ah),Mh=(0,a.memo)((e=>{let{buttonIconOnly:t=!1}=e;const[n,o]=(0,a.useState)(!1),[r,i]=(0,a.useState)({}),l=(0,a.useRef)(),c=(0,a.useCallback)((()=>{i({}),o(!n)}),[n,o]),{createErrorNotice:u}=(0,s.useKubioNotices)(),d=(0,a.useCallback)((e=>{"blur"!==(null==e?void 0:e.type)&&o(!1)}),[o]),m=(0,a.useCallback)((e=>{const t=(null==e?void 0:e.detail)||{};i(t),o(!0)}),[o]);(0,a.useEffect)((()=>(document.body.addEventListener("openTemplateGallery",m),()=>{document.body.removeEventListener("openTemplateGallery",m)})),[m]);const p=(0,a.useCallback)((()=>{u((0,x.__)("Something went wrong","kubio"))}),[u]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.Button,{ref:l,onClick:c,isPrimary:!0,icon:ye.PredesignedLayoutsIcon,className:T()("kubio-predefined-layouts__button",{"kubio-predefined-layouts__button--icon-only":t}),label:(0,x.__)("Templates Gallery","kubio"),showTooltip:!0},t?null:(0,x.__)("Templates Gallery","kubio")),(0,a.createElement)(cl.ErrorBoundary,{FallbackComponent:Dh,onReset:()=>{o(!1)},onError:p},(0,a.createElement)(Ph,null,n&&(0,a.createElement)(k.Modal,{className:"kubio-predefined-layouts__modal",onRequestClose:d},(0,a.createElement)(wc,{onClose:d,initialParams:r},(0,a.createElement)(qm,null))))))})),Dh=e=>{let{error:t,resetErrorBoundary:n}=e;return(0,a.useEffect)((()=>{n()}),[]),(0,a.createElement)(a.Fragment,null)},Bh=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M20.5 16h-.7V8c0-1.1-.9-2-2-2H6.2c-1.1 0-2 .9-2 2v8h-.7c-.8 0-1.5.7-1.5 1.5h20c0-.8-.7-1.5-1.5-1.5zM5.7 8c0-.3.2-.5.5-.5h11.6c.3 0 .5.2.5.5v7.6H5.7V8z"})),Lh=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M17 4H7c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H7c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h10c.3 0 .5.2.5.5v12zm-7.5-.5h4V16h-4v1.5z"})),zh=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M15 4H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H9c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h6c.3 0 .5.2.5.5v12zm-4.5-.5h2V16h-2v1.5z"}));var Fh=n(1874),Gh=n.n(Fh);let Hh=null,Uh=Math.random();function Wh(e){let t=Gh().replace("{message}",(0,x.__)("Generating preview…","kubio"));t=t.replace("{svg_image}",(0,a.renderToString)(ye.KubioLoader)),e.write(t),e.title=(0,x.__)("Generating preview…","kubio"),e.close()}function jh(){Hh=window.open("",(0,x.__)("Generating preview…","kubio")+Uh++)}const Vh={PREVIEW:"preview",DRAFT:"draft"},Kh=[{kind:"kubio",name:"menu"},{kind:"root",name:"site"}];var $h=n(6255),qh=n.n($h);const Yh=[{title:(0,x.__)("Desktop","kubio"),name:"Desktop",icon:Bh},{title:(0,x.__)("Tablet","kubio"),name:"Tablet",icon:Lh},{title:(0,x.__)("Mobile","kubio"),name:"Mobile",icon:zh}],Xh=e=>{let{deviceType:t,setDeviceType:n}=e;const{isDirty:o}=(0,w.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t}=e("core");return{isDirty:t().length>0}})),r=(()=>{const{getDirtyEntityRecords:e,getAutosaves:t,getEntityRecordEdits:n,getEditedEntityRecord:o}=(0,w.useSelect)((e=>({getDirtyEntityRecords:e("core").__experimentalGetDirtyEntityRecords,getAutosaves:e("core").getAutosaves,getEntityRecordEdits:e("core").getEntityRecordEdits,getEditedEntityRecord:e("core").getEditedEntityRecord}))),{saveEditedEntityRecord:r}=(0,w.useDispatch)("core");return async function(i){var a;let{autosaveType:l=Vh.PREVIEW}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=[];s=i||e();const c=s.filter((e=>{let{kind:t,name:n}=e;return!(0,m.find)(Kh,{kind:t,name:n})})),d=s.filter((e=>{let{kind:t,name:n,key:o}=e;return!(0,m.find)(c,{kind:t,name:n,key:o})})),p=c.map((e=>{let{kind:t,name:n,key:i}=e;const a=o(t,n,i);let s;if(null!=a&&a.blocks)s=(0,Un.serialize)(a.blocks);else{if("string"!=typeof(null==a?void 0:a.content))return null;s=null==a?void 0:a.content}return-1!==["wp_template","wp_template_part","page","post","product"].indexOf(a.type)?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"publish",{fieldsToOmit:n=["blocks"],type:o=Vh.PREVIEW}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return kr()({path:"kubio/v1/save-entity",method:"POST",data:{postData:(0,m.omit)({...e,id:e.id||e.wp_id},["selectionStart","selectionEnd"].concat(n)),type:o,status:t}})}({...a,content:s},"autosave",{type:l}):r(t,n,i,{isAutosave:!0})})),h=d.map((e=>{let{kind:t,name:o,key:r}=e;return{kind:t,name:o,key:r,...n(t,o,r)}})),g=null===(a=e())||void 0===a?void 0:a.filter((e=>{let{name:t}=e;return"page"===t||"post"===t})).reduce(((e,t)=>{let{key:n,name:r,kind:i}=t;const a=o(i,r,n);return{...e,[n]:null==a?void 0:a.template}}),{});return Promise.all(p).then((e=>{const n=c.map(((n,o)=>{let{name:r,key:i}=n;return e[o]?{id:e[o].ID||e[o].id,parent:e[o].post_parent||e[o].parent,data:e[o]}:(0,m.last)(t(r,i))}));return Promise.all(n).then((e=>{const t=e.filter(Boolean).map((e=>{let{id:t,parent:n}=e;return{id:t,parent:n}}));return{updatesRecords:e.map((e=>null==e?void 0:e.data)),autosaves:t,customEntities:h,pageTemplatesMap:g,customData:(0,u.applyFilters)("kubio/custom-preview-data",{})}}))}))}})(),{saveChangeset:i}=(()=>{const[e,t]=(0,f.useGlobalSessionProp)("previewChangest",{}),n=(0,w.useSelect)((e=>{var t;return null===(t=e("core/block-editor").getSettings())||void 0===t?void 0:t.changeset_uuid}));(0,a.useEffect)((()=>{e.id||!n||e.isLoading||(t({...e,isLoading:!0}),kr()({path:(0,Sr.addQueryArgs)("/wp/v2/kubio/preview-changeset/",{slug:n})}).then((e=>{e&&e.length&&t({...e[0],isLoading:!1})})))}),[e,t,n]);const o=(0,a.useCallback)((()=>{e.id&&window.navigator.sendBeacon&&window.navigator.sendBeacon(`${window.ajaxurl}?action=kubio-delete-changeset&uuid=${e.slug}`)}),[e.id]);return(0,a.useEffect)((()=>(window.addEventListener("beforeunload",o),()=>window.removeEventListener("beforeunload",o))),[e.id]),{saveChangeset:async o=>{let r=e;return r.id||(r=await kr()({path:(0,Sr.addQueryArgs)("/wp/v2/kubio/preview-changeset/",{slug:n})}),t(r)),await kr()({path:`/wp/v2/kubio/preview-changeset/${r.id}`,method:"POST",data:{...(0,m.pick)(e,["title","slug","type"]),content:JSON.stringify((0,m.omit)(o,"updatesRecords"))}}),n}}})(),{currentPageURL:l}=(0,w.useSelect)((e=>{const t=e(h.STORE_KEY).getPage(),n=p().get(t,"link"),o=p().get(t,"path"),r=n||o;return{currentPageURL:(null!=r?r:"").replace(/\/$/,"")}})),s=(0,w.useSelect)((e=>()=>{const{getSelectedBlockClientIds:t}=e(y.store),n=t();return n.length?n[0]:""})),{hideInsertionPoint:c}=(0,w.useDispatch)("core/block-editor"),d=e=>()=>{n(e),c()},g=(0,f.useBlocksOwnerDocument)();return(0,a.useEffect)((()=>{const e=(0,ve.getPreviewElementByModelId)(s(),g);e&&t&&qh()(e)}),[t]),(0,a.createElement)("div",{className:"kubio-preview-options"},Yh.map((e=>{let{name:n,title:o,icon:r}=e;return(0,a.createElement)(k.Button,{key:n,icon:r,isPressed:n===t,label:o,onClick:d(n)})})),""!==l&&(0,a.createElement)(k.Button,{onClick:async e=>{let{}=e;const t=(()=>{Hh&&!Hh.closed||jh();try{Wh(Hh.document)}catch(e){jh(),Wh(Hh.document)}return setTimeout((function(){Hh.focus()}),100),Hh})();let n="saved";const a=`${La().generate()}-${La().generate()}`;if(o){const e=await r();n=await i(e)}t.location=(0,Sr.addQueryArgs)(l,{"kubio-preview":n,"kubio-random":a})}},(0,x.__)("Preview","kubio")))},Qh=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M15.6 6.5l-1.1 1 2.9 3.3H8c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.3-.5h9.2L14.5 15l1.1 1.1 4.6-4.6-4.6-5z"})),Zh=window.wp.keycodes;function Jh(){const e=(0,w.useSelect)((e=>e("core").hasRedo())),{redo:t}=(0,w.useDispatch)("core");return(0,a.createElement)(k.Button,{icon:Qh,label:(0,x.__)("Redo","kubio"),shortcut:Zh.displayShortcut.primaryShift("z"),"aria-disabled":!e,onClick:e?t:void 0})}const eg=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M18.3 11.7c-.6-.6-1.4-.9-2.3-.9H6.7l2.9-3.3-1.1-1-4.5 5L8.5 16l1-1-2.7-2.7H16c.5 0 .9.2 1.3.5 1 1 1 3.4 1 4.5v.3h1.5v-.2c0-1.5 0-4.3-1.5-5.7z"}));function tg(){const e=(0,w.useSelect)((e=>e("core").hasUndo())),{undo:t}=(0,w.useDispatch)("core");return(0,a.createElement)(k.Button,{icon:eg,label:(0,x.__)("Undo","kubio"),shortcut:Zh.displayShortcut.primary("z"),"aria-disabled":!e,onClick:e?t:void 0})}function ng(e){let{openEntitiesSavedStates:t}=e;const{deviceType:n,isEditorSidebarOpened:o,shortcut:r,getBlockSelectionStart:i,isListViewOpen:l,listViewShortcut:c,isAICapabilityEnabled:u}=(0,w.useSelect)((e=>{const{__experimentalGetPreviewDeviceType:t,isFeatureActive:n,getEditedPostType:o,getEditedPostId:r,isInserterOpened:i,getTemplateId:a,getTemplatePartId:l,getEntity:s,getPage:c,getShowOnFront:u,isListViewOpened:d,isAICapabilityEnabled:m}=e(h.STORE_KEY),{getEntityRecord:p}=e("core"),{__experimentalGetTemplateInfo:g}=e("core/editor"),f=a(),b=l(),_=o(),v=p("postType",_,r());let y;var k;y="wp_template"===_?null!=v&&v.title?null==v||null===(k=v.title)||void 0===k?void 0:k.raw:g(v).title:null==v?void 0:v.slug;const{getShortcutRepresentation:E}=e("core/keyboard-shortcuts");return{isListViewOpen:d(),deviceType:t(),entityTitle:y,hasFixedToolbar:n("fixedToolbar"),template:v,templateType:_,isInserterOpen:i(),templateId:f,templatePartId:b,entity:s(),page:c(),showOnFront:u(),isEditorSidebarOpened:e(h.STORE_KEY).isEditorSidebarOpened(),shortcut:E("core/edit-post/toggle-sidebar"),getBlockSelectionStart:e("core/block-editor").getBlockSelectionStart,listViewShortcut:E("kubio/edit-site/toggle-list-view"),isAICapabilityEnabled:m()}}),[]),{__experimentalSetPreviewDeviceType:d,openSidebar:_,closeSidebar:v}=(0,w.useDispatch)(h.STORE_KEY),{hideInsertionPoint:y}=(0,w.useDispatch)("core/block-editor"),S=(0,a.useCallback)((e=>{y(),d(e)}),[]),C=(0,E.useViewportMatch)("medium"),I=o?()=>{v(),N(!1)}:()=>{_(i()?"block-inspector":"document"),N(!1)},T=(0,s.usePageTitle)(),{isNavigationOpened:P}=(0,w.useSelect)(h.STORE_KEY),{setIsNavigationPanelOpened:R,openNavigationPanelToMenu:O,setIsListViewOpened:N}=(0,w.useDispatch)(h.STORE_KEY),{uiVersion:M}=(0,g.useUIVersion)(),D=(0,a.useCallback)((()=>{N(!l)}),[N,l]);let B=!0;2===M&&(B=!1);const L=(0,f.useGetGlobalSessionProp)("ready",!1),z=(0,m.get)(window,["kubioUtilsData","enable_starter_sites"],!0),[F,G]=(0,a.useState)(!1),[,H]=Fa(),{isPage:U,isBlog:W,isWooPage:j}=(0,w.useSelect)((e=>{const{getPage:t=p().noop,getIsBlogPage:n=p().noop}=e("kubio/edit-site")||{},o=t();return{isPage:"page"===p().get(o,"context.postType"),isBlog:n(),isWooPage:e(h.STORE_KEY).getIsWooCommercePage()}}),[]),V=U&&!W&&!j;return(0,a.createElement)("div",{className:"edit-site-header"},(0,a.createElement)("div",{className:"edit-site-header_start"},(0,a.createElement)("div",{className:"edit-site-header__toolbar"},C&&(0,a.createElement)(a.Fragment,null,1===M&&(0,a.createElement)(en,null),(0,a.createElement)(tg,null),(0,a.createElement)(Jh,null),(0,a.createElement)(k.Button,{className:"edit-site-header-toolbar__list-view-toggle",icon:Da,isPressed:l/* translators: button label text should, if possible, be under 16 characters. */,label:(0,x.__)("List View","kubio"),onClick:D,shortcut:c}),L&&z&&(0,a.createElement)(Mh,{buttonIconOnly:u}),V&&u&&(0,a.createElement)(k.Tooltip,{text:(0,x.__)("AI page generation","kubio")},(0,a.createElement)(k.Button,{icon:ye.KubioAI,className:"kubio-ai-button-in-header kubio-ai-button",onClick:()=>G(!0)},(0,x.__)("Generate page","kubio"))),F&&(0,a.createElement)(b.AIWizard,{onFinish:()=>{G(!1),H(!0)},onCancel:()=>G(!1),isRegenerate:!0})),!1)),(0,a.createElement)("div",{className:"edit-site-header_center"},(0,a.createElement)("div",{className:"edit-site-document-actions"},(0,a.createElement)("div",{className:"edit-site-document-actions__title-wrapper"},(0,a.createElement)(k.Button,{className:"edit-site-document-actions__title",onClick:()=>{P()?R(!1):O(2===M?"kubio-content-area-postType-page":Ha)},isPressed:P(),iconPosition:"right",showTooltip:!0,label:P()?(0,x.__)("Close the site content panel","kubio"):(0,x.__)("Change page","kubio")},(0,a.createElement)(k.Flex,{align:"center",justify:"center"},(0,a.createElement)(k.FlexItem,{className:"edit-site-document-entity-title"},(0,a.createElement)("span",{className:"kubio-entity-title-text",dangerouslySetInnerHTML:{__html:(0,x.sprintf)(// translators: Editing current page
(0,x.__)("Editing: %s","kubio"),(0,x.sprintf)('<span class="kubio-entity-title-name">%s</span>',(0,ve.fromHtmlEntities)(null!=T?T:(0,x.__)("Page","kubio"))))}})),(0,a.createElement)(k.FlexItem,null,(0,a.createElement)(k.Icon,{icon:ye.SwitchPages,size:22}))))))),(0,a.createElement)("div",{className:"edit-site-header_end"},(0,a.createElement)("div",{className:"edit-site-header__actions"},(0,a.createElement)(el,null),(0,a.createElement)(Xh,{deviceType:n,setDeviceType:S}),(0,a.createElement)(Qa,{openEntitiesSavedStates:t}),B&&(0,a.createElement)(k.Button,{icon:A,label:(0,x.__)("Settings","kubio"),onClick:I,isPressed:o,"aria-expanded":o,className:"kubio-secondary-panel-toggler",shortcut:r}),(0,a.createElement)(Gt.Slot,{scope:"kubio/edit-site"}),(0,a.createElement)(sl,null))))}function og(e){let{openEntitiesSavedStates:t}=e;const{__experimentalGetDirtyEntityRecords:n,isSavingEntityRecord:o}=(0,w.useSelect)(S.store),{redo:r,undo:i}=(0,w.useDispatch)(S.store);return(0,Fn.useShortcut)("kubio/edit-site/save",(e=>{e.preventDefault();const r=n(),i=!!r.length;!r.some((e=>o(e.kind,e.name,e.key)))&&i&&t()})),(0,Fn.useShortcut)("kubio/edit-site/undo",(e=>{i(),e.preventDefault()})),(0,Fn.useShortcut)("kubio/edit-site/redo",(e=>{r(),e.preventDefault()})),null}og.Register=function(){const{registerShortcut:e}=(0,w.useDispatch)(Fn.store);return(0,a.useEffect)((()=>{e({name:"kubio/edit-site/save",category:"global",description:(0,x.__)("Save your changes.","kubio"),keyCombination:{modifier:"primary",character:"s"}}),e({name:"kubio/edit-site/undo",category:"global",description:(0,x.__)("Undo your last changes.","kubio"),keyCombination:{modifier:"primary",character:"z"}}),e({name:"kubio/edit-site/redo",category:"global",description:(0,x.__)("Redo your last undo.","kubio"),keyCombination:{modifier:"primaryShift",character:"z"}}),e({name:"kubio/edit-site/toggle-list-view",category:"global",description:(0,x.__)("Open the block list view.","kubio"),keyCombination:{modifier:"access",character:"o"}})}),[e]),null};const rg=og,ig=e=>{let{children:t,templateId:n,templateType:o,page:r}=e;const[i,l]=(0,a.useState)(!1),[s,c]=(0,a.useState)(!1),u=Cr(),[d,m]=(0,f.useGlobalSessionProp)("thirdPartyBlockInstalled",!1),{createSuccessNotice:p}=(0,w.useDispatch)("core/notices");(0,a.useEffect)((()=>{l(u)}),[u,n,o,r]);const h=(0,a.useCallback)((()=>{s||l(!1)}),[s]),g=(0,a.useCallback)((async()=>{c(!0);try{await Er()}catch(e){}m(!0),p((0,x.__)("Kubio blog templates were imported successfully! Refresh the editor to enjoy the full site editing experience","kubio"),{isDismissible:!0,actions:[{label:(0,x.__)("Refresh page now","kubio"),onClick:()=>window.location.reload()}]}),l(!1)}),[p,m]);return(0,a.createElement)(a.Fragment,null,i&&!d&&(0,a.createElement)(k.Modal,{title:(0,x.__)("💫 Start with the Kubio blog!","kubio"),onRequestClose:h,shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,isDismissible:!s},(0,a.createElement)("p",null,(0,x.__)("Kubio comes with a fully customizable blog area for your site.","kubio"),(0,a.createElement)("br",null),(0,x.__)("Would you like to use the Kubio blog templates? ","kubio")),(0,a.createElement)(k.ButtonGroup,{className:"h-template-part-modal__button-group"},!s&&(0,a.createElement)(k.Button,{isLink:!0,onClick:h},(0,x.__)("Maybe later","kubio")),(0,a.createElement)(k.Button,{isPrimary:!0,isBusy:s,onClick:g},!s&&(0,x.__)("Import Kubio blog","kubio"),s&&(0,x.__)("Importing Kubio blog…","kubio")))),t)},ag="__experimentalMainDashboardButton",{Fill:lg,Slot:sg}=(0,k.createSlotFill)(ag),cg=lg;cg.Slot=e=>{let{children:t}=e;return(0,s.useSlotHasFills)(ag)?(0,a.createElement)(sg,{bubblesVirtually:!0}):t};const ug=cg,dg=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M12 4L4 7.9V20h16V7.9L12 4zm6.5 14.5H14V13h-4v5.5H5.5V8.8L12 5.7l6.5 3.1v9.7z"})),mg=(0,a.memo)((e=>{let{message:t,withFooter:n=!0}=e;return(0,a.createPortal)((0,a.createElement)("div",{className:"kubio-ai-page-generator-overlay"},(0,a.createElement)(k.Flex,{align:"center",justify:"center"},(0,a.createElement)(k.FlexBlock,null,(0,a.createElement)(st,{className:"kubio-ai-logo-animated kubio-ai-logo-colored",icon:ye.KubioAI}),(0,a.createElement)("h2",null,t))),n&&(0,a.createElement)("div",{className:"kubio-ai-page-generator-overlay__footer"},(0,a.createElement)("p",{dangerouslySetInnerHTML:{__html:(0,x.sprintf)(// translators: %s is the url to pexels
(0,x.__)("The media items like photos and videos are provided by %s","kubio"),"<a href='https://www.pexels.com/' target='_blank'>Pexels</a>")}}))),window.document.body)})),pg=e=>{var t;let{setIsModalVisible:n}=e;const{saveEntityRecord:o}=(0,w.useDispatch)("core"),r=(0,f.useSetGlobalSessionProp)("ready"),[,i]=(0,f.useGlobalSessionProp)("displayingEmptyPageChecked"),[l,s]=(0,a.useState)(!0),{setPage:c,setIsNavigationPanelOpened:d}=(0,w.useDispatch)(ct),[m,p]=(0,a.useState)(null),[h,g]=(0,a.useState)(!1),[_,v]=(0,a.useState)(!1),[,y]=Fa(),k=(0,w.useSelect)((e=>e(ct).getAvailablePageTemplates().map((e=>e.value)).find((e=>(0,ve.getBackendData)("installedViaFreshSite")?e.endsWith("full-width"):"full-width"===e))||"")),E=(0,a.useCallback)((()=>{m&&(c({type:m.type,slug:m.slug,path:(0,Sr.getPathAndQueryString)(m.link),context:{postType:m.type,postId:m.id}}),v(!1),d(!1),i(!1),(0,u.addAction)("kubio.editorIsReady","kubio.editorIsReady.setIsAIGeneratingStarted",(function(){(0,u.removeAction)("kubio.editorIsReady","kubio.editorIsReady.setIsAIGeneratingStarted"),y(!0)})),setTimeout((()=>r(!0)),5e3),n(!1))}),[m,c,d,i,n,y,r]);return(0,a.createElement)(a.Fragment,null,l&&(0,a.createElement)(b.AIWizard,{onFinish:async e=>{let{pageContext:t}=e;v(!0),s(!1);const{title:n}=t,r=await o("postType","page",{title:n,status:"publish",template:k,meta:{saved_in_kubio:!0},kubio_ai_page_context:t});r&&(v(!1),g(!0),p(r))},onCancel:()=>n(!1),checkPageType:!1,isNewPageWizard:!0}),_&&(0,a.createElement)(mg,{message:(0,x.__)("Creating new page…","kubio"),withFooter:!1}),h&&(0,a.createElement)(pp,{onComplete:E,closeModal:()=>g(!1),entityName:null==m||null===(t=m.title)||void 0===t?void 0:t.rendered}))},hg=e=>{let{onNewAiPage:t,onNewKubioPage:n,showButton:o=!0,initialModalIsVisible:r=!1,title:i=(0,x.__)("How would you like to create your new page?","kubio"),description:l=(0,x.__)("Choose one of the two methods below for creating your new page.","kubio"),onCancel:s=p().noop}=e;const[c,u]=(0,a.useState)(r);return!(0,w.useSelect)((e=>e(yi.Ls).isAICapabilityEnabled()),[])&&o?(0,a.createElement)(k.Button,{className:"kubio-navigation-new-page__button",icon:qt,variant:"primary",iconSize:24,onClick:()=>n()},(0,x.__)("New Page","kubio")):(0,a.createElement)(a.Fragment,null,o&&(0,a.createElement)(k.Button,{className:"kubio-navigation-new-page__button",icon:qt,variant:"primary",iconSize:24,onClick:()=>u(!0)},(0,x.__)("New Page","kubio")),c&&(0,a.createElement)(k.Modal,{title:(0,x.__)("Add page","kubio"),onRequestClose:()=>{u(!1),s()},className:"kubio-navigation-new-page__modal"},(0,a.createElement)("div",{className:"kubio-navigation-new-page__modal__content"},(0,a.createElement)("h2",{className:"kubio-navigation-new-page__modal__title"},i),(0,a.createElement)("span",{className:"kubio-navigation-new-page__modal__description"},l),(0,a.createElement)("div",{className:"kubio-navigation-new-page__modal__cards"},(0,a.createElement)(gg,{icon:ye.KubioLogo,title:(0,x.__)("Create from scratch","kubio"),description:(0,x.__)("Build your page by hand starting from a blank canvas. This option is recommended for advanced users who wish to create their own, custom design.","kubio"),onClick:()=>{u(!1),n()}}),(0,a.createElement)(gg,{icon:ye.KubioAI,iconClassName:"kubio-ai-logo-animated kubio-ai-logo-colored",title:(0,x.__)("Generate with Kubio AI","kubio"),description:(0,x.__)("Get a head start by letting Kubio Al generate a first draft of the page for you. Then you can further customize the page to your liking.","kubio"),onClick:()=>{u(!1),t()}})))))},gg=e=>{let{icon:t,title:n,description:o,onClick:r,iconClassName:i}=e;return(0,a.createElement)("div",{className:"kubio-navigation-new-page__modal__card",onClick:r},(0,a.createElement)(k.Icon,{className:T()("kubio-navigation-new-page__modal__card__icon",i),icon:t}),(0,a.createElement)("h2",{className:"kubio-navigation-new-page__modal__card__title"},n),(0,a.createElement)("span",{className:"kubio-navigation-new-page__modal__card__description"},o))},fg=(0,a.createElement)(R.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,a.createElement)(R.Path,{d:"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h12c.3 0 .5.2.5.5v12zM7 11h2V9H7v2zm0 4h2v-2H7v2zm3-4h7V9h-7v2zm0 4h7v-2h-7v2z"})),bg=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M20 5h-5.7c0-1.3-1-2.3-2.3-2.3S9.7 3.7 9.7 5H4v2h1.5v.3l1.7 11.1c.1 1 1 1.7 2 1.7h5.7c1 0 1.8-.7 2-1.7l1.7-11.1V7H20V5zm-3.2 2l-1.7 11.1c0 .1-.1.2-.3.2H9.1c-.1 0-.3-.1-.3-.2L7.2 7h9.6z"})),_g=e=>{let{post:t,onCloseModal:n,onClickDuplicate:o}=e;const[r,i]=(0,a.useState)(!1),{createErrorNotice:l,createSuccessNotice:c}=(0,s.useKubioNotices)(),[u,d]=(0,a.useState)(""),{saveEntityRecord:m}=(0,w.dispatch)("core"),p=async(e,n,r)=>{i(!0);const a={title:r||u,status:"publish",content:null==t?void 0:t.content,excerpt:null==t?void 0:t.excerpt,meta:{...(null==t?void 0:t.meta)||{},saved_in_kubio:!0},template:null==t?void 0:t.template};let s=!1;try{s=await m(e,n,a),c((0,x.sprintf)((0,x.__)("%s saved successfully!","kubio"),a.title))}catch(e){console.error(e),l((0,x.sprintf)((0,x.__)("An error occurred. %s was not saved!","kubio"),a.title))}s&&o(s)};return(0,a.createElement)(k.Modal,{title:(0,x.__)("Duplicate page","kubio"),onRequestClose:e=>{e.stopPropagation(),n()},className:"block-editor-block-new-entity-modal",shouldCloseOnEsc:!r,shouldCloseOnClickOutside:!r,isDismissible:!r},(0,a.createElement)("div",{className:"popover__content"},(0,a.createElement)(P.InputControl,{value:u,onChange:e=>d(e),label:(0,x.__)("Title","kubio"),autoFocus:!0,onKeyPress:e=>{"Enter"===e.key&&p("postType",t.type,e.target.value)}}),(0,a.createElement)(k.__experimentalSpacer,{margin:3}),(0,a.createElement)(k.Button,{isPrimary:!0,isBusy:r,disabled:""===u,onClick:()=>{p("postType",t.type)},className:"add-button"},(0,x.__)("Duplicate page","kubio"))))},vg=e=>{var t,n;let{post:o,onCloseModal:r}=e;const[i,l]=(0,a.useState)(!1),{createErrorNotice:c,createSuccessNotice:u}=(0,s.useKubioNotices)();return(0,a.createElement)(k.Modal,{title:(0,x.__)("Delete ","kubio")+(null==o||null===(t=o.title)||void 0===t?void 0:t.raw)+(0,x.__)(" page?","kubio"),onRequestClose:e=>{e.stopPropagation(),r()},className:"block-editor-block-new-entity-modal",shouldCloseOnEsc:!i,shouldCloseOnClickOutside:!i,isDismissible:!i},(0,a.createElement)("p",null,(0,a.createElement)("span",{dangerouslySetInnerHTML:{__html:(0,x.sprintf)(// translators: %s: page name
(0,x.__)("The <strong>%s</strong> page will be moved in the trash.","kubio"),null==o||null===(n=o.title)||void 0===n?void 0:n.raw)}}),(0,a.createElement)("br",null),(0,x.__)("You can recover it later from WP Admin -> Pages -> Trash","kubio")),(0,a.createElement)(k.ButtonGroup,{className:"h-template-part-modal__button-group"},(0,a.createElement)(k.Button,{isLink:!0,onClick:r},(0,x.__)("Cancel","kubio")),(0,a.createElement)(k.Button,{isPrimary:!0,onClick:async()=>{l(!0),await yg(o,c,u),r()}},(0,x.__)("Delete","kubio"))))},yg=(e,t,n)=>{var o;const r=e.id,i=null==e||null===(o=e.title)||void 0===o?void 0:o.raw;try{(0,w.dispatch)("core").deleteEntityRecord("postType",e.type,parseInt(r)),n(i+(0,x.__)(" moved to trash!","kubio"))}catch(e){t((0,x.sprintf)(//translators: $s is the page name
(0,x.__)("An error occurred. %s was not saved","kubio"),i))}},kg=e=>{var t;const n=e.taxonomy?e.name:null==e||null===(t=e.title)||void 0===t?void 0:t.rendered,o=document.createElement("div");return o.innerHTML=n,o.textContent||o.innerText||""};function Eg(e){let{item:t}=e;const{setPage:n,setIsNavigationPanelOpened:o}=(0,w.useDispatch)(ct),{page_for_posts:r,page_on_front:i,show_on_front:l,wooCommercePagesIds:s,isActive:c}=(0,w.useSelect)((e=>{var n,o,r,i,a;const{page_for_posts:l,page_on_front:s,show_on_front:c}=e("core").getEditedEntityRecord("root","site"),u=null===(n=e("core/block-editor").getSettings())||void 0===n||null===(o=n.kubioBasicWooCommerce)||void 0===o?void 0:o.pagesIds,{getPage:d,getTemplateId:m,getTemplatePartId:p}=e(ct),h=[null===(r=d())||void 0===r||null===(i=r.context)||void 0===i||null===(a=i.postId)||void 0===a?void 0:a.toString(),m(),p()].filter(Boolean);return{page_for_posts:l,page_on_front:s,show_on_front:c,wooCommercePagesIds:Object.values(u||{}),isActive:h.includes(t.id.toString())}}),[]),{duplicateContainerRef:u,delContainerRef:d}=(0,a.useRef)(),[m,p]=(0,a.useState)(!1),[h,g]=(0,a.useState)(!1),[b,_]=(0,a.useState)(!1),[v,y]=(0,a.useState)({}),[,E]=(0,f.useGlobalSessionProp)("displayingEmptyPageChecked"),S=(0,a.useCallback)((()=>{const{type:e,slug:r,link:i,id:a}=null!=v&&v.id?v:t;n({type:e,slug:r,path:(0,Sr.getPathAndQueryString)(i),context:{postType:e,postId:a}}),E(!0),o(!1)}),[v,t,n,E,o]),C=(0,a.useCallback)((()=>{c||_(!0)}),[c]),I=(0,a.useCallback)((()=>{p(!0)}),[]),P=(0,a.useCallback)((()=>{g(!0)}),[]);if(!t)return null;const R=kg(t)||(0,x.__)("(no title)","kubio");let A,O;"page"===l&&i===t.id&&(A=(0,a.createElement)(k.Icon,{title:(0,x.__)("Homepage","kubio"),icon:dg,size:18})),"page"===l&&r===t.id&&(A=(0,a.createElement)(k.Icon,{title:(0,x.__)("Posts page","kubio"),icon:fg,size:18})),-1!==s.indexOf(t.id)&&(A=(0,a.createElement)(k.Icon,{title:(0,x.__)("Posts page","kubio"),icon:ye.WooCommerceSmallLogo,size:18}));const N=i!==t.id&&!c;"page"===l&&"page"===t.type&&r!==t.id&&(O=(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.DropdownMenu,{className:"kubio-more-menu",icon:nl,label:(0,x.__)("More tools & options","kubio"),popoverProps:{className:"edit-site-kubio-more-menu__content edit-site-more-menu__content",position:"bottom left",isAlternate:!0},toggleProps:{tooltipPosition:"bottom"}},(e=>{let{onClose:t}=e;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.MenuGroup,null,(0,a.createElement)(k.MenuItem,{icon:ye.DuplicateItemIcon,ref:u,onClick:e=>{e.preventDefault(),I(e),t()},role:"menuitemcheckbox"},(0,x.__)("Duplicate","kubio")),N&&(0,a.createElement)(k.MenuItem,{icon:bg,ref:d,onClick:e=>{e.preventDefault(),P(e),t()},role:"menuitemcheckbox"},(0,x.__)("Delete","kubio"))))})),m&&(0,a.createElement)(_g,{post:t,onCloseModal:()=>{p(!1)},onClickDuplicate:e=>{y(e),p(!1),_(!0)}}),h&&(0,a.createElement)(vg,{post:t,onCloseModal:()=>{g(!1)}})));const M=T()("edit-site-navigation-panel__content-item",{"kubio-navigation-item-active":c});return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.__experimentalNavigationItem,{className:M,item:`${t.taxonomy||t.type}-${t.id}`,title:R},(0,a.createElement)(k.Button,{onClick:C},A&&(0,a.createElement)("span",{className:"components-navigation__item-badge"},A),(0,a.createElement)("span",{className:"components-truncate components-text components-navigation__item-title"},R)),O),b&&(0,a.createElement)(pp,{onComplete:S,closeModal:()=>_(!1),entityName:R}))}const Sg=e=>(0,m.deburr)(e).replace(/^\//,"").toLowerCase(),wg=(e,t)=>-1!==Sg(e).indexOf(Sg(t));function Cg(e){let{item:t,icon:n}=e;const{title:o,description:r,isActive:i}=(0,w.useSelect)((e=>{var n,o,r,i;const{getPage:a,getTemplateId:l,getTemplatePartId:s}=e(ct),c=[null===(n=a())||void 0===n||null===(o=n.context)||void 0===o||null===(r=o.postId)||void 0===r?void 0:r.toString(),l(),s()].filter(Boolean);return{..."wp_template"===t.type?e("core/editor").__experimentalGetTemplateInfo(t):{title:(null==t||null===(i=t.title)||void 0===i?void 0:i.rendered)||(null==t?void 0:t.slug),description:""},isActive:c.includes(t.id.toString())}}),[]),{setTemplate:l,setTemplatePart:s,setIsNavigationPanelOpened:c,setPage:u}=(0,w.useDispatch)(ct),[d,m]=(0,a.useState)(!1),p=(0,a.useCallback)((()=>{i||m(!0)}),[m,i]),[,h]=(0,f.useGlobalSessionProp)("displayingEmptyPageChecked");if(!t)return null;const g=T()("edit-site-navigation-panel__template-item",{"kubio-navigation-item-active":i});return(0,a.createElement)(k.__experimentalNavigationItem,{className:g,item:`${t.type}-${t.id}`,title:o,icon:n},(0,a.createElement)(k.Button,{onClick:p},(0,a.createElement)("span",{className:"edit-site-navigation-panel__info-wrapper"},(0,a.createElement)("div",{className:"edit-site-navigation-panel__template-item-title"},"draft"===t.status&&(0,a.createElement)("em",null,(0,x.__)("[Draft]","kubio")),o),r&&(0,a.createElement)("div",{className:"edit-site-navigation-panel__template-item-description"},r))),d&&(0,a.createElement)(pp,{onComplete:()=>{"wp_template"===t.type?l(t.id,t.slug,!0):s(t.id),h(!1),c(!1)},closeModal:()=>m(!1),entityName:o,changePage:!1}))}function Ig(e){let{items:t,search:n}=e;const o=(null==t?void 0:t.length)>0?t[0].type:null,r=(0,w.useSelect)((e=>{if("wp_template"===o){const{__experimentalGetTemplateInfo:n}=e("core/editor");return t.map((e=>({slug:e.slug,...n(e)})))}return(t||[]).map((e=>{var t,n;return{slug:e.slug,title:null===(t=e.title)||void 0===t?void 0:t.rendered,description:null===(n=e.excerpt)||void 0===n?void 0:n.rendered}}))}),[t,o]),i=(0,a.useMemo)((()=>null===t||0===n.length?[]:t.filter((e=>{let{slug:t}=e;const{title:o,description:i}=r.find((e=>e.slug===t));return wg(t,n)||wg(o,n)||wg(i,n)}))),[t,r,n]),l="wp_template"===o||"wp_template_part"===o?Cg:Eg;return(0,a.createElement)(k.__experimentalNavigationGroup,{title:(0,x.__)("Search results","kubio")},(0,m.map)(i,(e=>(0,a.createElement)(l,{item:e,key:`${e.type}-${e.id}`}))))}const Tg=e=>{let{kind:t="postType",entity:n,title:o,hasSearch:r=!0,parentMenu:i=Ha}=e;const{search:l,searchQuery:c,onSearch:u,isDebouncing:d}=function(){const[e,t]=(0,a.useState)(""),[n,o]=(0,a.useState)(""),[r,i]=(0,a.useState)(!1);(0,a.useEffect)((()=>{i(!1)}),[n]);const l=(0,a.useCallback)((0,m.debounce)(o,75),[o]);return{search:e,searchQuery:n,isDebouncing:r,onSearch:(0,a.useCallback)((e=>{t(e),l(e),i(!0)}),[t,i,l])}}(),g=(0,w.useRegistry)(),{resetSelection:b}=g.dispatch(y.store),{setPage:_,setIsNavigationPanelOpened:v}=(0,w.useDispatch)(h.STORE_KEY),{saveEntityRecord:E}=(0,w.dispatch)("core"),{items:S,showOnFront:C,pageForPosts:I,pageOnFront:P,isResolved:R,siteURL:A}=(0,w.useSelect)((e=>{const{getEntityRecords:o,getEditedEntityRecord:r,hasFinishedResolution:i,getEntityRecord:a}=e("core"),l=[t,n,{search:c,status:"publish,private",per_page:50}],s=i("getEntityRecords",l),{page_for_posts:u,page_on_front:d}=e("core").getEditedEntityRecord("root","site");let p=o(...l);return"postType"===t&&"page"===n&&(0,m.isArray)(p)&&(p=[a("postType","page",d),a("postType","page",u),...p].filter(Boolean),p=(0,m.uniqBy)(p,(e=>parseInt(null==e?void 0:e.id)))),{items:p,isResolved:s,showOnFront:r("root","site").show_on_front,siteURL:e("core/block-editor").getSettings().siteUrl||"/",pageForPosts:u,pageOnFront:d,getEntityRecord:a}}),[c,n,t]),[O,N]=(0,a.useState)(""),[M,D]=(0,a.useState)(!1),[B,L]=(0,a.useState)(!1),[z,F]=(0,a.useState)(!1),[G,H]=(0,a.useState)({}),[,U]=(0,f.useGlobalSessionProp)("displayingEmptyPageChecked"),W=(0,a.useCallback)((()=>{D(!1),L(!0)}),[L]),j=async(e,t)=>{F(!0);const n={title:O,status:"publish",template:Y,meta:{saved_in_kubio:!0}},o=await E(e,t,n);o&&(H(o),W(),F(!1),N(""))},{availableTemplates:V,isKubioTheme:K}=(0,w.useSelect)((e=>{const t=e(h.STORE_KEY),{getSettings:n}=e(y.store);return{availableTemplates:t.getAvailablePageTemplates(),isKubioTheme:n().isKubioTheme}}),[]),{templates:$,defaultTemplate:q}=(0,s.useDeepMemo)((()=>{let e,t=V;return K?(e=p().find(t,{value:"kubio-full-width"})?"kubio-full-width":"full-width",t=V):(e="",(0,m.find)(t,{value:e})||(e=p().find(t,{value:"kubio-full-width"})?"kubio-full-width":"full-width")),{defaultTemplate:e,templates:t}}),[V,K]),[Y,X]=(0,a.useState)(q),Q=(0,s.useDeepMemo)((()=>{const e=$.reduce(((e,t)=>{const n=t.source||"custom";return{...e,[n]:[...e[n]||[],t]}}),{}),t=[];return p().forEach(h.templateGroupPriorities,(function(n){var o;null!==(o=e[n])&&void 0!==o&&o.length&&(t.push({value:"template-group-"+n,label:h.templateGroups[n],disabled:!0}),p().forEach(e[n],(function(e){t.push(e)})))})),t}),[$]),[Z,J]=(0,a.useState)(!1),ee=(0,a.useCallback)((()=>{J(!1),_({type:"page",path:A,context:{queryContext:{page:1}}}),U(!1),v(!1)}),[U,v,_,A]),te=(0,f.useSetGlobalSessionProp)("ready"),ne=(0,a.useCallback)((()=>{G&&(_({type:G.type,slug:G.slug,path:(0,Sr.getPathAndQueryString)(G.link),context:{postType:G.type,postId:G.id}}),F(!1),U(!1),v(!1),setTimeout((()=>te(!0)),5e3))}),[G,_,U,v,te]),oe=!R||l&&d,[re,ie]=(0,a.useState)(!1);let ae=(0,a.createElement)(a.Fragment,null);"postType"===t&&"page"===n&&(ae=(0,a.createElement)(a.Fragment,null,M&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.Modal,{title:(0,x.__)("Add page","kubio"),onRequestClose:()=>{D(!1)},className:"block-editor-block-new-entity-modal",shouldCloseOnEsc:!z,shouldCloseOnClickOutside:!z,isDismissible:!z},(0,a.createElement)("div",{className:"popover__content"},(0,a.createElement)(k.__experimentalInputControl,{value:O,onChange:e=>N(e),label:(0,x.__)("Title","kubio"),autoFocus:!0,onKeyPress:e=>{"Enter"===e.key&&j(t,n)}}),(0,a.createElement)(k.__experimentalSpacer,{margin:3}),(0,a.createElement)(k.SelectControl,{value:Y,onChange:e=>X(e),label:(0,x.__)("Template","kubio"),options:Q}),(0,a.createElement)(k.__experimentalSpacer,{margin:6}),(0,a.createElement)(k.Button,{isPrimary:!0,isBusy:z,disabled:z||""===O.trim(),onClick:()=>{b(0,0,null),j(t,n)},className:"add-button"},(0,x.__)("Add page","kubio"))))),B&&(0,a.createElement)(pp,{onComplete:ne,closeModal:()=>L(!1),entityName:O})));const le=p().sortBy(S,(e=>"page"!==C||I!==e.id&&P!==e.id?1:0));return(0,a.createElement)(k.__experimentalNavigationMenu,{menu:`kubio-content-area-${t}-${n}`,title:o,parentMenu:i,hasSearch:r,onSearch:u,search:l,isSearchDebouncing:d||!R,titleAction:(0,a.createElement)(a.Fragment,null,"page"===n&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(hg,{onNewKubioPage:()=>D(!0),onNewAiPage:()=>ie(!0)}),re&&(0,a.createElement)(pg,{setIsModalVisible:ie})),ae),className:T()("kubio-nav-menu-heading",{"kubio-nav-menu-heading--page":"page"===n})},l&&!d&&(0,a.createElement)(Ig,{items:le,search:l,disableFilter:!0}),!l&&(0,a.createElement)(a.Fragment,null,"posts"===C&&(0,a.createElement)(k.__experimentalNavigationItem,{item:"post-/",title:(0,x.__)("All Posts","kubio"),onClick:()=>J(!0)},(0,a.createElement)(k.Button,{className:"components-button css-1g713f0 ejwewyf3"},(0,a.createElement)(k.Flex,{align:"center"},(0,a.createElement)(k.FlexItem,null,(0,a.createElement)(k.Icon,{icon:dg,size:18})),(0,a.createElement)(k.FlexBlock,null,(0,a.createElement)("span",null,(0,x.__)("All Posts","kubio"))),Z&&(0,a.createElement)(pp,{onComplete:ee,closeModal:()=>L(!1),entityName:O})))),null==le?void 0:le.map((e=>(0,a.createElement)(Eg,{item:e,key:`${e.type||e.taxonomy}-${e.id}`})))),oe&&(0,a.createElement)(k.__experimentalNavigationItem,{title:(0,x.__)("Loading…","kubio"),isText:!0}))};function xg(e){let{onActivateMenu:t,activeMenu:n}=e;const{page:o}=(0,w.useSelect)((e=>({page:e(h.STORE_KEY).getPage()})),[]),r=(0,a.useMemo)((()=>{var e,t;return[{kind:"postType",entity:"page",title:(0,x.__)("Pages","kubio")},{kind:"postType",entity:"post",title:(0,x.__)("Posts","kubio")},{kind:"taxonomy",entity:"category",title:(0,x.__)("Categories","kubio")},...(null===(e=window)||void 0===e||null===(t=e.kubioEditSiteSettings)||void 0===t?void 0:t.postTypes.filter((e=>"kubio_section"!==e.entity)))||[]]}),[]);return(0,a.createElement)(k.__experimentalNavigation,{activeItem:o&&`content-${o.path}`,activeMenu:n,onActivateMenu:e=>{t(e)}},n===Ha&&(0,a.createElement)(ug.Slot,null,(0,a.createElement)(k.__experimentalNavigationBackButton,{backButtonLabel:(0,x.__)("Dashboard","kubio"),className:"edit-site-navigation-panel__back-to-dashboard",href:"index.php"})),(0,a.createElement)(k.__experimentalNavigationMenu,{title:(0,x.__)("Site Content","kubio")},null==r?void 0:r.map((e=>{let{kind:t,entity:n,title:o}=e;return(0,a.createElement)(k.__experimentalNavigationItem,{title:o,navigateToMenu:`kubio-content-area-${t}-${n}`,key:`${t}-${n}`})}))),null==r?void 0:r.map((e=>(0,a.createElement)(Tg,C({},e,{key:`${e.kind}-${e.entity}`})))))}function Pg(e){let{menu:t,title:n,templateParts:o}=e;return(0,a.createElement)(k.__experimentalNavigationMenu,{menu:t,title:n,parentMenu:Ua,isEmpty:!o||0===o.length},(0,m.map)(o,(e=>(0,a.createElement)(Cg,{item:e,key:`wp_template_part-${e.id}`}))))}function Rg(){const[e,t]=(0,a.useState)(""),n=(0,a.useCallback)((e=>{t(e)})),{isLoading:o,templateParts:r,templatePartsByArea:i}=(0,w.useSelect)((e=>{const t=e(S.store).getEntityRecords("postType","wp_template_part"),n=t||[],o=(0,m.groupBy)(n.map((e=>({...e,area:e.area||"uncategorized"}))),"area");return{isLoading:null===t,templateParts:n,templatePartsByArea:o}}),[]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.__experimentalNavigationMenu,{menu:Ua,title:(0,x.__)("Template Parts","kubio"),parentMenu:Ha,hasSearch:!0,onSearch:n,search:e},e&&(0,a.createElement)(Ig,{items:r,search:e}),!e&&Xa.map((e=>{let{title:t,menu:n}=e;return(0,a.createElement)(k.__experimentalNavigationItem,{key:`template-parts-navigate-to-${n}`,navigateToMenu:n,title:t,hideIfTargetMenuEmpty:!0})})),!e&&o&&(0,a.createElement)(k.__experimentalNavigationItem,{title:(0,x.__)("Loading…","kubio"),isText:!0})),Xa.map((e=>{let{area:t,menu:n,title:o}=e;return(0,a.createElement)(Pg,{key:`template-parts-menu-${n}`,menu:n,title:o,templateParts:i[t]})})))}function Ag(){const{defaultTemplateTypes:e,templates:t,classicThemePrimaryTemplates:n}=(0,w.useSelect)((e=>{const{getSettings:t}=e(ct),n=e("core").getEntityRecords("postType","wp_template");return{defaultTemplateTypes:t().defaultTemplateTypes,classicThemePrimaryTemplates:t().classicThemePrimaryTemplates,templates:n}}),[]),{addTemplate:o}=(0,w.useDispatch)(ct),r=(0,m.map)(t,"slug"),i=(0,m.filter)(e,(e=>(0,m.includes)((0,m.uniq)([...Ga,...n]),e.slug)&&!(0,m.includes)(r,e.slug)));return i.length?(0,a.createElement)(k.DropdownMenu,{className:"edit-site-navigation-panel__new-template-dropdown",icon:null,label:(0,x.__)("Add Template","kubio"),popoverProps:{noArrow:!1},toggleProps:{children:(0,a.createElement)(k.Button,{isPrimary:!0,icon:qt,iconPosition:"right",className:"kubio-new-page-btn",label:(0,x.__)("New","kubio")},(0,x.__)("New","kubio"))}},(t=>{let{onClose:n}=t;return(0,a.createElement)(k.NavigableMenu,{className:"edit-site-navigation-panel__new-template-popover"},(0,a.createElement)(k.MenuGroup,{label:(0,x.__)("Add Template","kubio")},(0,m.map)(i,(t=>{let{title:r,description:i,slug:l}=t;return(0,a.createElement)(k.MenuItem,{info:i,key:l,onClick:()=>{(t=>{const{title:n,description:r}=(0,m.find)(e,{slug:t});o({content:"__KUBIO_REPLACE_WITH_APPROPRIATE_CONTENT__",excerpt:r,slug:t.toString(),status:"publish",title:n,kubio_template_source:"kubio-custom"})})(l),n()}},r)}))))})):null}function Og(e){let{menu:t,title:n,templates:o,parentMenu:r}=e;const i=!o||0===o.length;return!i&&(0,a.createElement)(k.__experimentalNavigationMenu,{menu:t,title:n,parentMenu:r,isEmpty:i},(0,m.map)(o,(e=>(0,a.createElement)(Cg,{item:e,key:`wp_template-${e.id}`}))))}const Ng=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"custom";return!!e&&(null==e?void 0:e.filter((e=>{let{kubio_template_source:n="custom"}=e;return n===t})))};function Mg(e){let{title:t,templates:n,menu:o,hasAdd:r=!0,parentMenu:i=Wa}=e;const l=(0,a.useMemo)((()=>{const e={},t=Ng(n,"kubio"),o=Ng(n,"theme"),r=!!n&&(0,m.difference)(n,[...t,...o]);return t&&t.length&&(e.kubio=t),o&&o.length&&(e.theme=o),r&&r.length&&(e.custom=o),e}),[n]),s=Object.keys(l).length<=1;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.__experimentalNavigationMenu,{menu:o,title:t,titleAction:r&&(0,a.createElement)(Ag,null),parentMenu:i},s&&(0,a.createElement)(a.Fragment,null,(0,m.map)(n,(e=>(0,a.createElement)(Cg,{item:e,key:`wp_template-${e.id}`,icon:ye.KubioLogo})))),!s&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.__experimentalNavigationItem,{navigateToMenu:`${o}--${Ya}`,title:(0,x.__)("Kubio templates","kubio"),hideIfTargetMenuEmpty:!0}),(0,a.createElement)(k.__experimentalNavigationItem,{navigateToMenu:`${o}--${qa}`,title:(0,x.__)("Theme templates","kubio"),hideIfTargetMenuEmpty:!0}),(0,a.createElement)(k.__experimentalNavigationItem,{navigateToMenu:`${o}--${$a}`,title:(0,x.__)("Custom templates","kubio"),hideIfTargetMenuEmpty:!0}))),(0,a.createElement)(Og,{menu:`${o}--${Ya}`,title:(0,x.__)("Kubio templates","kubio"),templates:l.kubio,parentMenu:o}),(0,a.createElement)(Og,{menu:`${o}--${qa}`,title:(0,x.__)("Theme templates","kubio"),templates:l.theme,parentMenu:o}),(0,a.createElement)(Og,{menu:`${o}--${$a}`,title:(0,x.__)("Custom templates","kubio"),templates:l.custom,parentMenu:o}))}function Dg(){var e,t,n,o,r,i;const[l,c]=(0,a.useState)(""),u=(0,a.useCallback)((e=>{c(e)})),{templates:d}=(0,w.useSelect)((e=>{const{getEntityRecords:t}=e(S.store);return{templates:t("postType","wp_template",{per_page:-1})}}),[]),m=(0,a.useMemo)((()=>(d||[]).reduce(((e,t)=>{let n="general";const o=t.slug;return(0,s.currentTemplateIsPage)(o)&&(n="page"),(0,s.currentTemplateIsPost)(o)&&(n="post"),{...e,[n]:[...e[n]||[],t]}}),{})),[d]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.__experimentalNavigationMenu,{menu:Wa,title:(0,x.__)("Templates","kubio"),titleAction:(0,a.createElement)(Ag,null),parentMenu:Ha,hasSearch:!0,onSearch:u,search:l},l&&(0,a.createElement)(Ig,{items:d,search:l}),!l&&(0,a.createElement)(a.Fragment,null,!(null===(e=m.page)||void 0===e||!e.length)&&(0,a.createElement)(k.__experimentalNavigationItem,{navigateToMenu:Va,title:(0,x.__)("Page templates","kubio"),hideIfTargetMenuEmpty:!0}),!(null===(t=m.post)||void 0===t||!t.length)&&(0,a.createElement)(k.__experimentalNavigationItem,{navigateToMenu:Ka,title:(0,x.__)("Post templates","kubio"),hideIfTargetMenuEmpty:!0}),!(null===(n=m.general)||void 0===n||!n.length)&&(0,a.createElement)(k.__experimentalNavigationItem,{navigateToMenu:ja,title:(0,x.__)("General templates","kubio"),hideIfTargetMenuEmpty:!0})),!l&&null===d&&(0,a.createElement)(k.__experimentalNavigationItem,{title:(0,x.__)("Loading…","kubio"),isText:!0})),!(null===(o=m.page)||void 0===o||!o.length)&&(0,a.createElement)(Mg,{menu:Va,title:(0,x.__)("Page templates","kubio"),templates:m.page,hasAdd:!1,category:"page"}),!(null===(r=m.post)||void 0===r||!r.length)&&(0,a.createElement)(Mg,{menu:Ka,title:(0,x.__)("Post templates","kubio"),templates:m.post,category:"post",hasAdd:!1}),!(null===(i=m.general)||void 0===i||!i.length)&&(0,a.createElement)(Mg,{menu:ja,title:(0,x.__)("General templates","kubio"),templates:m.general,hasAdd:!1,category:"general"}))}function Bg(e){let{activeMenu:t,onActivateMenu:n}=e;const{postId:o,postType:r}=(0,w.useSelect)((e=>{const{getEditedPostType:t,getEditedPostId:n}=e(ct);return{postId:n(),postType:t()}}),[]);return(0,a.createElement)(k.__experimentalNavigation,{activeItem:`${r}-${o}`,activeMenu:t,onActivateMenu:e=>{n(e)}},(0,a.createElement)(k.__experimentalNavigationMenu,{title:(0,x.__)("Advanced","kubio")},(0,a.createElement)(k.__experimentalNavigationItem,{title:(0,x.__)("Templates","kubio"),navigateToMenu:Wa}),(0,a.createElement)(k.__experimentalNavigationItem,{title:(0,x.__)("Template Parts","kubio"),navigateToMenu:Ua}),(0,a.createElement)(Dg,{activeMenu:t}),(0,a.createElement)(Rg,null)))}const Lg=e=>{let{isOpen:t}=e;const[n,o]=(0,a.useState)(Ha),[r,i]=(0,a.useState)(Ha),{siteTitle:l,openedMenu:s}=(0,w.useSelect)((e=>{const{getEntityRecord:t}=e("core");return{siteTitle:(t("root","__unstableBase",void 0)||{}).name,openedMenu:e(ct).getNavigationMenu()}}),[]),c=(0,a.useRef)();(0,a.useEffect)((()=>{t&&c.current.focus()}),[r]);const u=(0,E.usePrevious)(t);(0,a.useEffect)((()=>{s&&t&&!u&&o(s)}),[n,t,s]);const{setIsNavigationPanelOpened:d}=(0,w.useDispatch)(ct);return(0,a.createElement)("div",{className:T()("edit-site-navigation-panel",{"is-open":t}),ref:c,tabIndex:"-1",onKeyDown:e=>{e.keyCode===Zh.ESCAPE&&(e.stopPropagation(),d(!1))}},(0,a.createElement)("div",{className:"edit-site-navigation-panel__inner"},(0,a.createElement)("div",{className:"edit-site-navigation-panel__site-title-container"},(0,a.createElement)(k.Flex,null,(0,a.createElement)(k.FlexBlock,null,(0,a.createElement)("div",{className:"edit-site-navigation-panel__site-title"},l)),(0,a.createElement)(k.FlexItem,null,(0,a.createElement)(k.Tooltip,{text:(0,x.__)("Close panel","kubio")},(0,a.createElement)(k.Button,{className:"kubio-edit-site-navigation-panel__close-button",icon:$t,onClick:()=>d(!1)}))))),(0,a.createElement)("div",{className:"edit-site-navigation-panel__scroll-container"},r===Ha&&(0,a.createElement)(xg,{onActivateMenu:o,activeMenu:n}),n===Ha&&(0,a.createElement)(Bg,{activeMenu:r,onActivateMenu:i}))))},zg=function(e){let{isOpen:t}=e;const{isActive:n}=(0,w.useSelect)((e=>{const{isFeatureActive:t}=e(h.STORE_KEY);return{isActive:t("fullscreenMode")}}),[]),{setIsNavigationPanelOpened:o}=(0,w.useDispatch)(h.STORE_KEY);if(!n)return null;const r=(0,a.createElement)(k.Icon,{size:"36px",icon:ye.HamburgerMenu});return(0,a.createElement)("div",{className:"edit-site-navigation-toggle"+(t?" is-open":"")},(0,a.createElement)(k.Button,{className:"edit-site-navigation-toggle__button has-icon",label:(0,x.__)("Toggle navigation","kubio"),onClick:()=>o(!t),showTooltip:!0},r))},{Fill:Fg,Slot:Gg}=(0,k.createSlotFill)("EditSiteNavigationPanelPreview");function Hg(){const e=(0,w.useSelect)((e=>e(ct).isNavigationOpened()));return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(zg,{isOpen:e}),e&&(0,a.createElement)(Lg,{isOpen:e}),(0,a.createElement)(Gg,null))}const Ug=()=>{const e=(0,w.useSelect)((e=>e(d.store).getNotices().filter((e=>"snackbar"===e.type)).map((e=>({...e,className:`is-${e.status}`})))),[]),{removeNotice:t}=(0,w.useDispatch)(d.store);return(0,a.createPortal)((0,a.createElement)(k.SnackbarList,{className:"components-editor-notices__snackbar edit-site-notices",notices:e,onRemove:t}),document.body)};function Wg(){const{setIsListViewOpened:e}=(0,w.useDispatch)(h.STORE_KEY),{clearSelectedBlock:t,selectBlock:n}=(0,w.useDispatch)(y.store),o=(0,E.useFocusOnMount)("firstElement"),r=(0,E.useFocusReturn)(),i=`edit-site-editor__list-view-panel-label-${(0,E.useInstanceId)(Wg)}`;return(0,a.createElement)("div",{"aria-labelledby":i,className:"edit-site-editor__list-view-panel",onKeyDown:function(t){t.keyCode!==Zh.ESCAPE||t.defaultPrevented||e(!1)}},(0,a.createElement)("div",{className:"edit-site-editor__list-view-panel-header"},(0,a.createElement)("strong",{id:i},(0,x.__)("List view","kubio")),(0,a.createElement)(k.Button,{icon:pt,label:(0,x.__)("Close list view sidebar","kubio"),onClick:()=>e(!1)})),(0,a.createElement)("div",{className:"edit-site-editor__list-view-panel-content",ref:(0,E.useMergeRefs)([r,o])},(0,a.createElement)(y.__experimentalListView,{onSelect:async function(e){await t(),n(e,-1)},showNestedBlocks:!0,__experimentalFeatures:!0,__experimentalPersistentListViewFeatures:!0})))}function jg(){const{setTemplate:e,setTemplatePart:t,showHomepage:n,setPage:o}=(0,w.useDispatch)(h.STORE_KEY),{siteUrl:r,state:i}=window.kubioEditSiteSettings;(0,a.useEffect)((()=>{var a,l,s,c;const d=window.location.href;let m=(0,Sr.getQueryArg)(d,"postId")||(null==i||null===(a=i.entity)||void 0===a||null===(l=a.context)||void 0===l?void 0:l.postId);m=isNaN(parseInt(m))?m:parseInt(m);const p=(0,Sr.getQueryArg)(d,"pageURL");if(!m&&!p)return void n();const h=(0,Sr.getQueryArg)(d,"postType")||(null==i||null===(s=i.entity)||void 0===s||null===(c=s.context)||void 0===c?void 0:c.postType);if(p)o({path:p});else if("wp_template"===h)e(m);else if("wp_template_part"===h)t(m);else if(h){var g,f,b;const e=(null==i||null===(g=i.entity)||void 0===g||null===(f=g.context)||void 0===f?void 0:f.postId)===m?null==i||null===(b=i.entity)||void 0===b?void 0:b.path:`${r}?p=${m}`;o({context:{postType:h,postId:m},path:e})}else n();(0,u.doAction)("kubio.afterEntitySet")}),[]);const l=function(){const e=(0,a.useRef)(),t=(0,w.useSelect)((e=>{var t,n;const{getEditedPostType:o,getEditedPostId:r,getPage:i}=e(h.STORE_KEY),a=i();let l=r(),s=o();return null!=a&&null!==(t=a.context)&&void 0!==t&&t.postId&&null!=a&&null!==(n=a.context)&&void 0!==n&&n.postType&&(l=a.context.postId,s=a.context.postType),l&&s?{postId:l,postType:s,page:a}:{page:a}}));return Se()(e.current,t)||(e.current=t),e.current}();return(0,a.useEffect)((()=>{const e=(0,Sr.removeQueryArgs)(window.location.href,"postType","postId","pageURL"),{page:t,...n}=l,o=l?(0,Sr.addQueryArgs)(e,n):e;window.history.replaceState({},"",o)}),[l]),null}const Vg=(0,a.createContext)({}),Kg=[(0,Kt.getNamesOfBlocks)().HEADER,(0,Kt.getNamesOfBlocks)().FOOTER,(0,Kt.getNamesOfBlocks)().SIDEBAR,"core/template-part","core/post-content"],$g=()=>(0,a.useContext)(Vg),qg=e=>{let{children:t,blockContext:n,templateId:o,templateType:r,page:i}=e;const l=(0,a.useRef)([]),[s,c]=(0,a.useState)(!1),d=(0,f.useSetGlobalSessionProp)("ready"),p=(0,f.useGetGlobalSessionProp)("ready",!1),h=(0,a.useRef)(p),{entitiesFinished:g,postLoaded:b,isEmptyPost:_,isPost:v,postEntity:y,isChangingPage:k}=(0,w.useSelect)((e=>{const{getEditedEntityRecord:t,hasFinishedResolution:n}=e("core"),{getCurrentPostType:i,getCurrentPostId:a,isChangingPage:s}=e(yi.Ls),c=!(!p&&o&&r)||l.current.reduce(((e,n)=>{let{theme:o,slug:r,content:i}=n,a=!0;var l;return i||(a=!o||!r||!(0,m.isUndefined)(null===(l=t("postType","wp_template_part",`${o}//${r}`))||void 0===l?void 0:l.content)),e&&a}),!0);let u=!0;const d=i(),h=a();let g,f=!1,b=!1;var _;return d&&h&&(["wp_template","wp_template_part"].includes(d)||(f=!0,b=t("postType",d,h),g=null===(_=b)||void 0===_?void 0:_.content,u=!(0,m.isUndefined)(g)&&n("getEditedEntityRecord",["postType",d,h]))),{entitiesFinished:c||u,postLoaded:u,postEntity:b,isEmptyPost:d&&h&&!(0,m.isUndefined)(g)&&(0,m.isString)(g)&&!(g.includes("\x3c!-- wp:")||g.includes("\x3c!--wp:")),isPost:f,isChangingPage:s()}}),[l.current.length,p,n,o,o]),S=(0,E.useDebounce)((0,a.useCallback)((()=>{c(!0)}),[]),200),C=(0,a.useCallback)((e=>{d(e),e&&window.requestIdleCallback((()=>{if(d(e),top.kubioStartTime){const e=Math.floor(performance.now()-top.kubioStartTime)/1e3;console.log("Kubio ready in: "+e+" seconds"),top.kubioStartTime=null}(0,u.doAction)("kubio.editorIsReady")}))}),[d]),I=(0,a.useCallback)((e=>{h.current!==e&&e&&(0,Qi.updateAllStyleManagers)((()=>{C(e)}))}),[]),T=(0,E.useDebounce)(I,500),x=(0,E.useDebounce)((0,a.useCallback)((()=>{I(!0),c(!0)}),[]),2e3),P=(0,E.useDebounce)((0,a.useCallback)((()=>{I(!0),c(!0)}),[]),1e4);(0,a.useEffect)((()=>{(0,m.debounce)(I,15e3)}),[]);const{editEntityRecord:R}=(0,w.useDispatch)("core");(0,a.useEffect)((()=>{const e=y.content;v&&e&&"function"!=typeof e&&!y.blocks&&R("postType",y.type,y.id,{blocks:(0,Un.parse)(e)},{undoIgnore:!0})}),[v,y,_,R]);const A=(0,E.usePrevious)(p);(0,a.useEffect)((()=>{h.current=p,A&&!p&&(c(!1),l.current=[])}),[p,A]),(0,a.useLayoutEffect)((()=>{if(!k&&!p)if(g){if(P.cancel(),x.cancel(),T.cancel(),v&&b&&_)return void x(!0);if(v)return void T(s);T(!0)}else x.cancel(),P(!0)}),[b,v,_,g,s,p,i,o,r,P,x,T,k]);const O=(0,a.useCallback)(((e,t)=>{let{theme:n,slug:o}=t;Kg.includes(e)&&(n&&o?(0,m.find)(l.current,{theme:n,slug:o})||l.current.push({theme:n,slug:o}):"core/post-content"===e&&l.current.push({content:!0})),S()}),[S]),N=(0,a.useMemo)((()=>({isReady:p,markAsLoaded:O})),[p,O]);return(0,a.createElement)(Vg.Provider,{value:N},t)},Yg=(0,E.createHigherOrderComponent)((e=>t=>{const{markAsLoaded:n,isReady:o}=$g();return(0,a.useLayoutEffect)((()=>{o||n(t.name,t.attributes)}),[o,n,t.attributes,t.name]),(0,a.createElement)(e,t)}),"BlockListEditorStateReady");function Xg(){return function(){const[e,t]=(0,v.useGlobalStylesOutput)(),{getSettings:n}=(0,w.useSelect)(ct),{updateSettings:o}=(0,w.useDispatch)(ct);(0,a.useEffect)((()=>{var r;if(p().isEmpty(e)||p().isEmpty(t))return;const i=n(),a=(null==i||null===(r=i.styles)||void 0===r?void 0:r.filter((e=>!e.isGlobalStyles||"base-layout"===e.__unstableType)))||[],l=(0,ve.mergeNoArrays)({},i,{styles:[...a,...e],__experimentalFeatures:t});o(l)}),[e,t])}(),null}(0,u.addFilter)("editor.BlockListBlock","kubio/style/BlockListEditorStateReady",(0,E.compose)([Yg]),1);const Qg=e=>(0,s.convertTemplateFormatToBlock)([e]).map((e=>(0,ve.refreshBlockStyleRefs)(e))),{getClientIdsWithDescendants:Zg,getBlock:Jg}=(0,w.select)("core/block-editor"),ef=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=(0,b.getFromGenerationSession)("sectionsGeneratedAnchors",new Set),o=Zg().filter((e=>!t.includes(e))).map((e=>{var t,n;return null===(t=Jg(e))||void 0===t||null===(n=t.attributes)||void 0===n?void 0:n.anchor})).filter(Boolean).concat([...n]),r=(0,ve.slugify)(e);let i=0,a=r;for(;-1!==o.indexOf(a);)i++,a=`${r}-${i}`;n.add(a),(0,b.setInGenerationSession)("sectionsGeneratedAnchors",n);let l=i?`${e} ${i}`:e;return l=l.split(" ").map(m.upperFirst).join(" "),{name:l,anchor:a}},tf=async e=>{let{section:t,pageTitle:n,siteContext:o,pageContext:r,generateAnchorAndName:i=!0}=e;const a=(0,l.sectionCategoryToLabel)(t.category);let s,c,u;const{name:d,anchor:m}=i?ef(a):{};try{[u,c]=await(0,b.fillSectionTemplate)({...t,pageTitle:n,siteContext:o,pageContext:r,label:d,anchor:m}),s=Qg(u),s=nf(s,o,r)}catch(e){throw e}return[s,c]},nf=(e,t,n)=>(e=(0,ve.cleanFontFamilyFromBlocks)(e),(0,ve.walkBlocks)(e,(o=>(0,u.applyFilters)("kubio.ai.generateSectionBlocks.afterBlockGenerated",o,t,n,e))),e),{NAVIGATION:of,NAVIGATION_TOP_BAR:rf,NAVIGATION_ITEMS:af,NAVIGATION_STICKY_ITEMS:lf}=(0,Kt.getNamesOfBlocks)(),sf=async function(e){let{pageContext:t,siteContext:n,pageTitle:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=e.map((e=>(0,Un.cloneBlock)(e)));const r=[];return(0,s.walkBlockTree)(e,(async e=>{[rf,af,lf].includes(e.name)&&r.push((async()=>{try{const[r]=await tf({section:{category:rf===e.name?"navigation-top-bar":"navigation",template:(0,ve.transformBlockToTemplate)(e)},pageTitle:o,siteContext:n,pageContext:t}),{attributes:i,innerBlocks:a}=r[0];p().set(e,"attributes",i),p().set(e,"innerBlocks",a)}catch(t){ke.Log.error(`Kubio AI section generation error - navigation section: ${e.name}`,t,e)}}))})),await Promise.allSettled(r.map((e=>e()))),e},cf=async e=>{let{sectionCategory:t,pageContext:n,siteContext:o,pageTitle:r,replaceBlocks:i,block:a}=e;try{const e=(0,ve.transformBlockToTemplate)(a);if(a.name===of){const[e]=await sf([a],{pageTitle:r,siteContext:o,pageContext:n});return void i(a.clientId,e,0)}const[l]=await tf({section:{category:t,template:e},pageContext:n,siteContext:o,pageTitle:r,includeContent:!1});i(a.clientId,l,0)}catch(e){ke.Log.error("headerInnerBlocksReplaceContent",e)}},uf=()=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.Icon,{className:"kubio-ai-logo-animated kubio-ai-logo-colored",icon:ye.KubioAI})),df=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=null==e?void 0:e.querySelector(`[data-block="${t}"]`);if(r)if(n)if(o){const t=e.createElement("div");t.classList.add("kubio-ai-generating-section-overlay"),r.append(t),(0,s.reactRender)((0,a.createElement)(uf,null),t)}else{const e=r.querySelector(".kubio-ai-generating-section-overlay");e&&((0,s.reactUnmount)(e),e.remove())}else r.classList[o?"add":"remove"]("kubio-ai-is-generating")},{HEADER:mf,FOOTER:pf,SECTION:hf,COLUMN:gf,IMAGE:ff}=(0,Kt.getNamesOfBlocks)(),bf=[mf,pf,hf,gf,ff],_f=e=>{const{ownerDocument:t}=(0,s.useOwnerDocumentContext)(),[n,o]=(0,a.useState)(!1),r=(0,w.useSelect)((()=>{const t=(0,w.select)("core/block-editor").getBlock(e);return!!t&&bf.includes(t.name)}),[e]);return[n,(0,a.useCallback)((n=>{o(n),df(t,e,r,n)}),[e,r,t])]},{NAVIGATION:vf,HERO:yf}=(0,Kt.getNamesOfBlocks)(),kf=async(e,t,n,o)=>{let r=[];const i=(()=>{const{getEntityRecords:e}=(0,w.select)("core");return(e("postType","wp_template_part",{per_page:-1})||[]).find((e=>{let{kubio_template_source:t,slug:n}=e;return"kubio"===t&&["header","","kubio-header"].includes(n)}))||null})();if(!i)return;const a=p().get(e,"2",[]),l=(0,m.cloneDeep)(a.find((e=>e[0]===vf)));let s=(0,m.cloneDeep)(a.find((e=>e[0]===yf)));if(l&&(r=nf(r.concat((0,m.castArray)(Qg(l))),n,o)),s){s=(0,u.applyFilters)("kubio.ai.generateSectionBlocks.beforeBlockGenerated",s);const[e]=await tf({section:{category:"hero",template:s},pageTitle:t,siteContext:n,pageContext:o});r=r.concat((0,m.castArray)(e))}if((0,m.isEmpty)(r))return;const c={blocks:r,content:e=>{let{blocks:t=[]}=e;return(0,Un.__unstableSerializeAndClean)(t)}},{editEntityRecord:d}=(0,w.dispatch)("core");d("postType","wp_template_part",i.id,c)},Ef=async(e,t)=>{let{clientId:n,sectionCategory:o,pageContext:r,siteContext:i,pageTitle:a,replaceBlocks:l,clearSelectedBlock:s=m.noop,setAIData:c=m.noop,summary:u="",currentSectionCloudId:d=null,usedSections:p=null}=e,h=[];p&&p.items.has(n)&&(h=[...p.items.get(n)]);try{if(!t){ke.Log.info(`Used sections: ${h.join()||"N/A"} | Section id: ${d}`);const e=(0,b.getPageContentSectionTemplate)({category:o,siteContext:i,returnAll:!0,skipIds:(0,m.isNumber)(d)?[d]:[]});let n=null;const r=e.filter((e=>!h.includes(e.cloudPresetId)));if(r.length)n=r[0],h.push(n.cloudPresetId);else{const t=h.shift();n=e.find((e=>e.cloudPresetId===t))||e[0]}(0,m.isNumber)(d)&&!h.includes(d)&&h.push(d),t=n.template}const[e]=await tf({section:{category:o,template:t,summary:u},pageContext:r,siteContext:i,pageTitle:a});l(n,e);const g=e[0].clientId;if(p){const e=new Map(p.items);e.delete(n),e.set(g,(0,m.uniq)(h)),p.setItems(e)}if(r.isFrontPage&&"cta"===o){const t=(0,m.cloneDeep)(i);(0,m.set)(t,["cta","pattern"],{category:o,template:e.map(ve.transformBlockToTemplate),summary:u}),c(t,"siteContext"),(0,b.saveAiGeneralSettings)(t)}window.requestIdleCallback((()=>{s(g)}))}catch(e){ke.Log.error("contentSectionReplaceDesign",e)}},Sf=async e=>{let{sectionCategory:t,pageContext:n,siteContext:o,pageTitle:r,replaceBlocks:i,block:a,includeContent:l=!0,shouldReplaceBlock:s=!0}=e;try{const e=(0,ve.transformBlockToTemplate)(a),[c]=await tf({section:{category:t,template:e},pageContext:n,siteContext:o,pageTitle:r,includeContent:l});return s&&i(a.clientId,c,0),c[0]}catch(e){ke.Log.error("footerInnerBlocksReplaceContent",e)}},{HEADER:wf,FOOTER:Cf}=(0,Kt.getNamesOfBlocks)(),{HEADER:If,FOOTER:Tf}=(0,Kt.getNamesOfBlocks)(),xf=e=>{const{getClientIdsWithDescendants:t,getBlock:n,getBlockIndex:o}=(0,w.select)("core/block-editor"),{updateBlockAttributes:r,__unstableMarkLastChangeAsPersistent:i}=(0,w.dispatch)("core/block-editor"),a=t().map(n).find((e=>"hero-accent"===(0,m.get)(e,["attributes","kubioAI","meta","category"])));if(a&&0===o(a.clientId)){const t=(0,m.cloneDeep)(a.attributes.kubio);(0,m.set)(t,"style.descendants.inner.margin.top.value",e?-170:0),(0,m.set)(t,"props.overlapSection",e),(0,m.set)(t,"hash",La().generate()),i(),r(a.clientId,{kubio:t})}},Pf=()=>{const{dataHelper:e,...t}=(()=>{const{dataHelper:e}=(0,s.useKubioBlockContext)(),t=e.clientId,[{pageContext:n,siteContext:o,pageTitle:r},i]=(0,b.useAIData)(),{replaceBlocks:c,replaceInnerBlocks:u,selectBlock:d,clearSelectedBlock:h}=(0,w.useDispatch)("core/block-editor"),{block:g,innerBlocks:f,isFrontPage:_}=(0,w.useSelect)((e=>{const{getBlockParentsByBlockName:n,getBlock:o}=e("core/block-editor"),{getIsFrontPage:r=p().noop}=e("kubio/edit-site")||{},i=o((0,m.first)(n(t,[wf,Cf])||[])||t);return{block:i,innerBlocks:e("core/block-editor").getBlocks(i.clientId),isFrontPage:r()}}),[t]),v=(0,a.useMemo)((()=>{let t=(e.getAttribute("anchor","section")||"section").replace(/\-\d+/,"");return t=(0,l.normalizeCategorySlug)(t),e.getAttribute("kubioAI.meta.category",t)}),[e]);return(0,a.useMemo)((()=>({clientId:g.clientId,sectionCategory:v,pageContext:n,siteContext:o,pageTitle:r,replaceBlocks:c,replaceInnerBlocks:u,block:g,innerBlocks:f,name:g.name,selectBlock:d,clearSelectedBlock:h,isFrontPage:_,dataHelper:e,setAIData:i})),[g,v,n,o,r,c,u,f,d,h,_,e,i])})(),[n,o]=(0,f.useGlobalSessionProp)("kubioAISurpriseMeUsedItems",new Map),r=(0,a.useMemo)((()=>({...t,usedSections:{items:n,setItems:o}})),[o,t,n]),[i,c]=_f(r.clientId),{clearSelectedBlock:u}=(0,w.useDispatch)("core/block-editor"),d=(0,a.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i)return;const n=p().merge({},r,t);u(),c(!0);const o=(0,b.initGenerationSession)();try{switch(n.name){case If:const{pair:t,overlappable:o}=await async function(e){let{clientId:t,pageContext:n,siteContext:o,pageTitle:r,replaceInnerBlocks:i,clearSelectedBlock:a=m.noop,isFrontPage:l=!0,pairPattern:s,usedSections:c=null}=e,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,d=null;const p=c&&c.items.get(t)||[];try{const{navigation:e,hero:h,pairCloudPresetId:g,name:f,overlappable:_}=(0,b.getPageHederTemplate)(u,l,{skipSlugs:p});ke.Log.info(`Skipping headers: ${p.join()||"N/A"}`),p.includes(f)||p.push(f);const v=g?(0,b.findPattern)("*",{findBy:{cloudPresetId:g},skipSlugs:p}):null;d=s||v;let y=[];if(e){const t=(0,m.cloneDeep)(e);y=await sf(Qg(t),{pageTitle:r,siteContext:o,pageContext:n})}const[k]=await tf({section:{category:"hero",template:h},pageTitle:r,siteContext:o,pageContext:n});return y=nf(y,o,n),await i(t,[...y,...k].filter(Boolean)),c&&(c.items.set(t,p),c.setItems(new Map(c.items))),a(),{pair:d,overlappable:_}}catch(e){ke.Log.error("headerReplaceDesign",e)}return{pair:d}}(n,e);n.isFrontPage&&t&&(await kf((0,m.get)(t,["content","2"],[]),n.pageTitle,n.siteContext,n.pageContext),xf(o||n.overlappable));break;case Tf:await async function(e){let{clientId:t,pageContext:n,siteContext:o,pageTitle:r,replaceInnerBlocks:i,replaceBlocks:a,selectBlock:l=noop}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const e="footer",c=s||(0,b.getPageFooterTemplate)(o),u=Qg(c)[0].innerBlocks,d=[];for(let t=0;t<u.length;t++){const i=u[t],l=await Sf({sectionCategory:e,pageContext:n,siteContext:o,pageTitle:r,replaceBlocks:a,block:i,includeContent:!0,shouldReplaceBlock:!0});d.push(l)}await i(t,d),l(t)}catch(e){ke.Log.error("footerReplaceDesign",e)}}(n,e);break;default:await Ef(n,e)}}catch(e){ke.Log.error("replaceDesign",e)}finally{o()}c(!1)}),[u,i,r,c]),g=(0,a.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i)return;u(),c(!0);const t=(0,b.initGenerationSession)(),n=p().merge({},r,e);try{switch(n.name){case If:await(async e=>{let{sectionCategory:t,pageContext:n,siteContext:o,pageTitle:r,replaceBlocks:i,innerBlocks:a,clearSelectedBlock:l=m.noop}=e;const s=a.filter((e=>e.name!==of)),c=a.filter((e=>[of].includes(e.name)));for(let e=0;e<s.length;e++){const a=s[e];await cf({sectionCategory:t,pageContext:n,siteContext:o,pageTitle:r,replaceBlocks:i,block:a})}for(let e=0;e<c.length;e++){const a=c[e];await cf({sectionCategory:t,pageContext:n,siteContext:o,pageTitle:r,replaceBlocks:i,block:a})}l()})(n);break;case Tf:await(async e=>{let{sectionCategory:t,pageContext:n,siteContext:o,pageTitle:r,replaceBlocks:i,innerBlocks:a}=e;for(let e=0;e<a.length;e++){const l=a[e];await Sf({sectionCategory:t,pageContext:n,siteContext:o,pageTitle:r,replaceBlocks:i,block:l,includeContent:!1})}})(n);break;default:await(async e=>{let{clientId:t,sectionCategory:n,pageContext:o,siteContext:r,pageTitle:i,replaceBlocks:a,block:l,setAIData:s=m.noop,summary:c=""}=e;try{const e=(0,ve.transformBlockToTemplate)(l),u=await(async e=>{let{section:t,pageTitle:n,siteContext:o,pageContext:r,includeContent:i=!0,clientId:a}=e;const l=t.category.replaceAll(".",""),{name:s,anchor:c}=ef(l,[a]),[u]=await(0,b.rephraseSectionTemplate)({...t,pageTitle:n,siteContext:o,pageContext:r,label:s,anchor:c,includeContent:i});let d=Qg(u);return d=nf(d,o,r),d})({section:{category:n,template:e,summary:c},pageContext:o,siteContext:r,pageTitle:i,includeContent:!0,clientId:t});if(a(t,u),o.isFrontPage&&"cta"===n){const e=(0,m.cloneDeep)(r);(0,m.set)(e,["cta","pattern"],{category:n,template:u.map(ve.transformBlockToTemplate),summary:c}),s(e,"siteContext"),(0,b.saveAiGeneralSettings)(e)}}catch(e){ke.Log.error("contentSectionReplaceContent",e)}})(n)}}catch(e){ke.Log.error("replaceDesign",e)}finally{t()}c(!1)}),[u,i,r,c]),_=(0,a.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(i)return;const t=(()=>{switch(r.name){case If:return"kubio-header";case Tf:return"kubio-footer";default:return"kubio-content"}})(),n=(0,m.get)(r,"sectionCategory","section"),o="kubio-header"!==t||r.isFrontPage?"section"===n||"kubio-content"!==t?void 0:`${t}/${n}`:h.INNER_HEADERS_CATEGORY;let a=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=(0,m.cloneDeep)(e.content),o=e.categories[0].split("/")[1],r=e.pairCloudPresetId?(0,b.findPattern)("*",{findBy:{cloudPresetId:e.pairCloudPresetId}}):null;try{await d(n,{sectionCategory:o,pairPattern:r,summary:t,overlappable:[...e.publicTags||[],...e.internalTags||[]].includes("overlappable")})}catch(e){ke.Log.error("replaceDesign",e)}};if(e){const t=a;a=n=>e(n,t)}const l={page:"sections",disabledPages:["starterSite","pages"],sections:{categoryType:t,category:o,internalTag:h.AI_READY_TAG,onActionFunc:a}};(0,ve.onOpenTemplateGalleryWithParams)(l)}),[i,r,d]);return{replaceDesign:d,replaceContent:g,replaceDesignFromGallery:_,dataHelper:e}},Rf=e=>new Promise((t=>{setTimeout(t,e)})),Af="generating",Of="generated",Nf=["cta","website-main-cta-section"];class Mf{constructor(e,t,n,o,r){Yn(this,"insertBlocks",void 0),Yn(this,"queue",[]),Yn(this,"insertedSections",[]),Yn(this,"queuedSections",new Map),Yn(this,"preCreatedSections",{}),Yn(this,"pageTitle",void 0),Yn(this,"siteContext",void 0),Yn(this,"pageContext",void 0),this.pageTitle=t,this.siteContext=n,this.pageContext=o,this.notify=r,this.insertBlocks=e}initialize(e){for(const t of e){let e=t.slug;const n=La().generate();Nf.includes(t.category)||(e=`${t.slug}::${n}`),this.queuedSections.set(e,{id:n,itemSlug:t.slug,category:t.category,section:t,inserted:!1,blocks:null,status:null}),this.queue.push(e)}}async generateSection(e){const t=this.queuedSections.get(e),n=this.preCreatedSections[t.category];if(n)return t.status=Af,this.logInfo((0,x.sprintf)("Section was pre-created - %1$s ( %2$s )",t.itemSlug,t.id)),t.blocks=n.map(ve.transformTemplateToBlock),void(t.status=Of);if(null===t.status)try{this.logInfo((0,x.sprintf)("Start generating - %1$s ( %2$s )",t.itemSlug,t.id)),this.queuedSections.set(e,{...t,status:Af});const[n]=await tf({section:t.section,pageTitle:this.pageTitle,siteContext:this.siteContext,pageContext:this.pageContext,generateAnchorAndName:!1});this.queuedSections.set(e,{...t,blocks:n,status:Of})}catch(n){this.queue.map(((t,n)=>t===e?n:-1)).filter((e=>e>=0)).forEach((e=>this.queue.splice(e,1))),this.logError("Kubio AI section generation error",n,t.section)}}async generate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&this.notify((0,x.__)("Preparing page content","kubio")),this.preCreatedSections=t;const n=(0,ve.getBackendData)("kubioAIParallelCalls",3),o=(0,m.chunk)(this.queue,n);for(const t of o)await this.executeChunk(t,e)}async executeChunk(e,t){await Rf(t?1e3:0),await Promise.allSettled(e.map(((e,t)=>this.generateSection(e,t))))}getInsertedSections(){return this.insertedSections}async insert(){const e=this.queue[0],t=this.queuedSections.get(e);if(this.notify(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,x.sprintf)(// translators: %s section name
(0,x.__)('Generating "%s" section',"kubio"),(0,l.sectionCategoryToLabel)(e))}(t.category)),t.status!==Of)return await Rf(200),await this.insert();const n={...t,blocks:t.blocks.map((e=>{const t=(0,Un.cloneBlock)((0,m.cloneDeep)(e)),n=(0,m.get)(e,"attributes.kubioAI.meta.category","section"),o=(0,l.sectionCategoryToLabel)(n),{name:r,anchor:i}=ef(o);return(0,m.set)(t,"attributes.anchor",i),(0,m.set)(t,"attributes.attrs.name",r),t}))};return this.insertedSections.push(n),this.queue.shift(),this.logInfo((0,x.sprintf)("Inserted - %1$s ( %2$s )",t.itemSlug,t.id)),await this.insertBlocks(n.blocks),this.queue.length?(await Rf(500),await this.insert()):void 0}logInfo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];ke.Log.info(`[SectionsQueue] ${e}`,...n)}logError(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];ke.Log.error(`[SectionsQueue] ${e}`,...n)}}const Df=(e,t)=>{const n=(0,m.get)(e,["attributes"]),o=(0,m.get)(n,["kubio","style","descendants",t,"background"]);return{blockAttributes:n,blockBg:o,blockBgType:(0,m.get)(o,"type")}},Bf=async e=>{let{imageData:t,block:n,imageDataPath:o="bgImage",styledComponent:r}=e;const{blockAttributes:i,blockBg:a,blockBgType:l}=Df(n,r);if("image"!==l)return;const s=(0,m.get)(a,["image","0","source","url"]),c=(0,m.get)(i,["kubioAI","imageTerms"]);try{const e=await(0,b.searchImages)({...zf,search:c,initialImage:s}),r=Lf(e.items,s);p().set(t,o,{currentValue:s,variants:r,clientId:n.clientId,blockName:n.name}),Ff(r)}catch(e){console.error(e)}},Lf=(e,t)=>e.filter((e=>e.split("?")[0]!==t.split("?")[0])),zf={perPage:11},Ff=e=>{e.forEach((e=>{(new window.Image).src=e}))},Gf=(0,m.debounce)(ve.scrollIntoView,300),{NAVIGATION:Hf,HERO:Uf}=(0,Kt.getNamesOfBlocks)(),Wf=["home","about","features","portfolio","pricing","team","contact"],jf=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e=Te(e).toHsl();const o=n||t,r=t;return Te({...e,l:Math.floor(Math.random()*(o-r+1)+r)}).toHexString()},Vf=()=>{const[e,t]=(0,a.useState)(!1),[n,o]=(0,a.useState)((0,x.__)("Generating…","kubio")),r=(0,f.useBlocksOwnerDocument)(),{setItems:i}=(0,qo.usePrimaryMenuBlockEditor)(),{createErrorNotice:l}=(0,s.useKubioNotices)(),{postContentClientId:c,getHeaderClientId:d,getBlocks:v,isFSETemplate:y,themeSlug:k,nonFSEContentBlocksClientIds:E}=(0,w.useSelect)((e=>{var t;const{getClientIdsWithDescendants:n,getBlock:o,getBlocks:r}=e("core/block-editor"),{currentPageHasFSETemplate:i}=e(h.STORE_KEY),a=i(),l=e=>{const t=(0,m.castArray)(e),r=n().map((e=>o(e))).find((e=>t.includes(e.name)));return null==r?void 0:r.clientId},s=a?l("core/post-content"):null;return{isFSETemplate:a,getBlocks:r,postContentClientId:s,getHeaderClientId:()=>l("kubio/header"),getCurrentHeaderStructure:()=>{const e={};return r(l("kubio/header")).forEach((t=>{t.name===Uf&&(e.hero=(0,ve.transformBlockToTemplate)(t)),t.name===Hf&&(e.navigation=(0,ve.transformBlockToTemplate)(t))})),e},themeSlug:null===(t=e("core").getCurrentTheme())||void 0===t?void 0:t.template,nonFSEContentBlocksClientIds:r().map((e=>{let{clientId:t}=e;return t}))}}),[]),{insertBlocks:C,replaceInnerBlocks:I,clearSelectedBlock:T,removeBlocks:P}=(0,w.useDispatch)("core/block-editor"),{editEntityRecord:R,saveEntityRecord:A}=(0,w.useDispatch)("core"),{setLogoImage:O}=(0,_.useSiteLogoImages)(),[N,M]=Fa(),[D,B]=(0,b.useAIData)(),{globalStyle:L}=(0,_.useGlobalDataStyle)(),{setPalette:z}=(0,_.useGlobalDataColors)(),[,F]=(0,S.useEntityProp)("root","site","title"),G=(0,w.useSelect)((e=>{var t,n;const{getPage:o,getEntity:r}=e(h.STORE_KEY),i=(null===(t=o())||void 0===t?void 0:t.link)||null,a=(null===(n=r())||void 0===n?void 0:n.path)||null;return(i||a||"").replace(/\/$/,"")}),[]),H=(0,a.useCallback)((async e=>{await C(e,v(c).length,null===c?"":c,!1),await new Promise((t=>{setTimeout((()=>{Gf(null==r?void 0:r.querySelector(`[data-block="${e[0].clientId}"]`),{block:"center",onScrollEnd:()=>(0,m.delay)(t,200)})}),300)}))}),[r,v,c,C]),U=(0,a.useRef)(null),W=(0,a.useCallback)((e=>{const t=U.current;t&&top.requestIdleCallback((()=>{setTimeout((()=>{Gf(null==r?void 0:r.querySelector(`[data-block="${t}"]`),{block:"start",smooth:!0,onScrollEnd:e})}),500)}))}),[r]),j=(0,a.useCallback)((async()=>(T(),c?await I(c,[]):await P(E))),[T,E,c,P,I]),V=(0,a.useCallback)((e=>{const t=d();I(t,e)}),[d,I]),{frontPageEntity:K}=D,$=(0,a.useCallback)((async e=>{var t;const{pageContext:n,siteContext:o,pageTitle:r,record:i,isFrontPage:a}=e;await R("postType",i.type,i.id,{meta:{saved_in_kubio:!0},title:r,kubio_ai_page_context:n}),null!==(t=o.website_logo)&&void 0!==t&&t.id&&O(o.website_logo.id),a&&o.business_name&&F(o.business_name)}),[R,O,F]),q=(0,w.useSelect)((e=>e(ct).getAvailablePageTemplates().map((e=>e.value)).find((e=>"full-width"===e||"kubio-full-width"===e))||"")),Y=(0,a.useCallback)((async e=>{const t=[],{siteContext:n,isFrontPage:r=!1,isRegenerate:a=!1,isMultiPage:l=!1}=e;if(r&&!a&&l){o((0,x.__)("Generating site structure ","kubio"));const e=await(0,b.generateSiteStructure)({siteContext:(0,m.omit)(n,"otherPages")});if(e.length)for(const n of e)t.push(await A("postType","page",{title:n,status:"publish",template:q}));const r=[K,...t].filter(Boolean);if(r.length){const e=(0,qo.generateItemInitialData)(),t=r.map(((t,n)=>({...e,id:e.id-n,type:"post_type",object:"page",objectId:t.id,label:t.title.rendered,order:n+1})));i(t)}}return(0,m.uniq)([...n.otherPages||[],...t],"id").map((e=>({id:e.id,title:(0,m.isString)(e.title)?e.title:e.title.rendered})))}),[K,q,A,i]),X=(0,a.useCallback)((e=>{const t=(0,qo.generateItemInitialData)();if(e.length){const n=e.filter((e=>Wf.includes(e.category))).map(((e,n)=>{const o=(0,m.get)(e.blocks,[0,"attributes","anchor"]),r=(0,m.get)(e.blocks,[0,"attributes","attrs","name"]);return{...t,id:t.id-1-n,objectId:t.id-1-n,url:`${G}/#${o}`,label:r,order:n+2}})),o=[K?{...t,id:t.id,type:"post_type",object:"page",objectId:K.id,label:K.title.rendered,order:1}:null,...n];i(o.filter(Boolean))}}),[G,K,i]),Q=(0,a.useCallback)((async e=>{var t,n;const{siteContext:r,isFrontPage:i=!1}=e;let a=(null==r?void 0:r.siteMood)||h.SITE_MOOD_VALUES.NEUTRAL,l="organization",s="both",c="",u="";const d={pattern:i?null:null===(t=e.siteContext)||void 0===t||null===(n=t.cta)||void 0===n?void 0:n.pattern,text:""};if(i){o((0,x.__)("Determine the website particularities","kubio"));try{const{mood:e,websiteSubject:t,ownerType:n,clientType:o,cta:i,coreBusiness:p}=await(0,b.determineSiteMood)({siteContext:(0,m.omit)(r,"otherPages")});a=e,l=n,s=o,u=p,d.text=i,c=t}catch(e){ke.Log.error("Unable to determine site mood with AI",e)}}return ke.Log.info(`Site mood is: ${a}`),{siteMood:a,cta:d,ownerType:l,clientType:s,websiteSubject:c,coreBusiness:u}}),[]),Z=(0,a.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const{pageContext:n,siteContext:r,pageTitle:i}=e;o((0,x.__)("Generating page structure","kubio"));let a=await(0,b.getPageSectionsTemplates)({pageTitle:i,siteContext:r,pageContext:{...n,sortSections:!0}});if((0,m.isEmpty)(a)&&t)a=await Z(e,t-1);else if((0,m.isEmpty)(a)){const e=(0,x.__)("There was an error with the KubioAI services. If the error persists, please contact support","kubio");throw new b.AIApiError(e,{cause:"empty_page_structure"})}return a}),[]),J=(0,a.useCallback)((async(e,t)=>{const{pageContext:n,pageTitle:r,siteContext:i,isFrontPage:a=!1}=e;if(!a)return;let l=(0,m.sample)(h.colorPalettes.filter((e=>e.mood===t)));try{o((0,x.__)("Blending colors for an exceptional color palette","kubio"));const e=await(0,b.generateColorScheme)({pageContext:n,siteContext:i,pageTitle:r,mood:t});l={colors:[...e,jf(e[1],98,100),jf(e[0],5,10)]}}catch(e){ke.Log.error("Error determining site colors",e)}l&&z(l.colors)}),[z]),ee=(0,f.useSetGlobalSessionProp)("aiFrontPageHeroImageVariantsData"),te=(0,a.useCallback)((async(e,t)=>{if(!y)return;const{pageContext:n,pageTitle:r,siteContext:i,isFrontPage:a=!1,isRegenerate:l}=e;if(!a)return;o((0,x.__)("Crafting an engaging website header","kubio"));let s,c=null,d=null,h=null,g=null,f=!0;l||(s=(0,b.getPageHederTemplate)(null,!0,{tag:[`theme-${k}`]})),s||(s=(0,b.getPageHederTemplate)(null,!0,{tag:[t]})),c=s.navigation,d=s.hero,h=s.bodyStyle,g=s.pairTemplate,f=s.overlappable,(0,b.setInGenerationSession)("currentHeaderIsOverlappable",f),d=(0,u.applyFilters)("kubio.ai.generateSectionBlocks.beforeBlockGenerated",d);const[_,v]=await Promise.allSettled([c?sf(Qg(c),{pageContext:n,siteContext:i,pageTitle:r}):new Promise((e=>e([]))),tf({section:{category:"hero",template:d},pageTitle:r,siteContext:i,pageContext:n})]),E=await _.value,[S]=await v.value;if(g)try{kf(g,r,i,{...n,isFrontPage:!1})}catch(e){ke.Log.error("Generating inner header error",e)}return h&&top.requestIdleCallback((()=>{setTimeout((()=>{L.setStyle("",h,{styledComponent:"body",media:"desktop",mergeData:!1})}),10)})),a&&(async e=>{let{heroBlock:t,setAiFrontPageHeroImageVariantsData:n}=e;const o={};await Bf({imageData:o,block:t,imageDataPath:"bgImage",styledComponent:"outer"}),await(async e=>{let{imageData:t,block:n,styledComponent:o}=e;const{blockAttributes:r,blockBg:i,blockBgType:a}=Df(n,o);if("slideshow"!==a)return;const l=(0,m.get)(i,["slideshow","slides"],[]).map((e=>null==e?void 0:e.url)),s=p().get(l,0),c=(0,m.get)(r,["kubioAI","slideshowTerms",0]);try{const e=await(0,b.searchImages)({...zf,search:c,initialImage:s}),o=Lf(e.items,s);p().set(t,"bgSlideshow",{currentValue:l,variants:o,clientId:n.clientId,blockName:n.name}),Ff(o)}catch(e){console.error(e)}})({imageData:o,block:t,styledComponent:"outer"}),await(async e=>{let{imageData:t,heroBlock:n}=e;const o=(0,ve.findBlockByName)(n,"kubio/image");if(!o)return;const r=(0,m.get)(o,["attributes","url"]),i=(0,m.get)(o,["attributes","kubioAI","imageTerms"]);try{const e=await(0,b.searchImages)({...zf,search:i,initialImage:r}),n=Lf(e.items,r);p().set(t,"imageBlock",{currentValue:r,variants:n,clientId:o.clientId,blockName:o.name}),Ff(n)}catch(e){console.error(e)}})({imageData:o,heroBlock:t}),await(async e=>{let{imageData:t,heroBlock:n}=e;const o=(0,ve.findAllBlocksByName)(n,"kubio/column",[]);for(let e=0;e<o.length;e++){const n=o[e];await Bf({imageData:t,block:n,imageDataPath:"columnBgImage",styledComponent:"inner"})}})({imageData:o,heroBlock:t}),p().isEmpty(o)?n(null):n(o)})({heroBlock:S[0],setAiFrontPageHeroImageVariantsData:ee}),V([...E,...S]),S[0].clientId}),[y,V,k,L,ee]),ne=(0,f.useSetGlobalSessionProp)("showAiPostGenerateInterface"),oe=(0,a.useCallback)((async()=>{const{pageContext:e,siteContext:n,pageTitle:r,isFrontPage:i=!1,isMultiPage:a}=D;t(!0),U.current=null,await $(D);const l=await Y(D),{siteMood:s,clientType:c,cta:u,ownerType:d,websiteSubject:p,coreBusiness:h}=await Q(D),g={...D,siteContext:{...n,otherPages:l,isMultiPage:a,siteMood:s,clientType:c,cta:u,ownerType:d,websiteSubject:p,coreBusiness:h},pageContext:{...e,isFrontPage:i}},f=new Mf(H,r,g.siteContext,g.pageContext,o);let _=await Z(g);if(i){const e=_.find((e=>"cta"===e.category));g.siteContext.cta.pattern=(0,m.cloneDeep)(e)}if(_=((e,t)=>{const{isFrontPage:n,siteContext:o}=t,r=o.cta.pattern||null;if(e=[...e],!r)return e;if(n){const t=(0,m.findIndex)(e,(e=>"features"===e.category));t>=0&&e.splice(t+1,0,r)}return e.map((e=>"cta"===e.category?{...r,slug:"website-main-cta-section"}:e))})(_,g),await j(),f.initialize(_),f.generate(i,{cta:i?null:(0,m.get)(g,"siteContext.cta.pattern.template",null)}),U.current=await te(g,s),await J(g,s),await f.insert(),y){const e=(0,b.getFromGenerationSession)("currentHeaderIsOverlappable",null);null!==e&&xf(e)}t(!1),M(!1);const v=f.getInsertedSections();if(i&&y&&(document.body.classList.toggle("kubio-ai-will-show-front-page-wizard",!0),a||X(v)),i){const e=v.find((e=>"cta"===e.category));e&&(g.siteContext.cta.pattern.template=e.blocks.map(ve.transformBlockToTemplate))}U.current||(U.current=(0,m.get)(v,["0","blocks","0","clientId"])),i&&((0,b.saveAiGeneralSettings)(g.siteContext),B(g)),W((()=>{i&&y&&top.requestIdleCallback((()=>{setTimeout((()=>{ne(!0)}),300)}))}))}),[D,$,Y,Q,H,Z,j,te,J,y,M,W,ne,X,B]),[re]=(0,b.useAIServiceInfo)(),ie=(0,a.useRef)(!1);return(0,g.useEffectAsync)((async()=>{if(!D.record||!N||!0===ie.current)return;if(null===c&&y)return;if(re.remainingCredits<re.perPageCredits)return(0,u.doAction)("kubio.ai.zero_credits",{type:"page_generation"}),t(!1),void M(!1);const e=performance.now(),n=(0,b.initGenerationSession)();try{(0,u.addFilter)("kubio.dismissZeroCreditsModal","kubio.dismissZeroCreditsModal.pageGeneration",(()=>!0)),document.body.classList.add("kubio-ai-is-page-generating"),ie.current=!0,await oe()}catch(e){e instanceof b.AIApiError?ke.Log.error("Page generation: AI API Error",e):(ke.Log.error("Page generation: JS Error",e),l((0,x.__)("KUBIO AI: There was an unknown error. If it persists, please contact support","kubio"),{duration:3e3}))}finally{t(!1),M(!1),ie.current=!1,n(),document.body.classList.remove("kubio-ai-is-page-generating"),ke.Log.success("Generation time: "+Math.ceil((performance.now()-e)/100)/10),(0,u.removeFilter)("kubio.dismissZeroCreditsModal","kubio.dismissZeroCreditsModal.pageGeneration")}}),[re,D,M,l,oe,y,c]),(0,a.createElement)(a.Fragment,null,e&&(0,a.createElement)(mg,{message:n}))},Kf=()=>{const[e]=Fa(),t=(0,f.useGetGlobalSessionProp)("ready"),[n,o]=(0,a.useState)(),r=(0,s.useDebounce)((0,a.useCallback)((e=>o(e)),[]),300);return(0,a.useLayoutEffect)((()=>{t&&e&&r(!0)}),[t,e,r]),(0,a.createElement)(a.Fragment,null,n&&(0,a.createElement)(Vf,null))},$f=()=>{const[e,t]=(0,a.useState)(!0),[,n]=Fa(),o=(0,f.useGetGlobalSessionProp)("ready");return(0,w.useSelect)((e=>e(h.STORE_KEY).isAICapabilityEnabled()),[])&&o&&e&&(0,a.createElement)(b.AIWizard,{onFinish:()=>{t(!1),n(!0)},onCancel:()=>t(!1),isFrontPage:!0,startWithAIFrontPage:!0})},qf=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z"})),Yf=7500,Xf=(0,a.memo)((()=>(0,a.createElement)(k.Icon,{icon:ye.DashiconCheckedIcon,className:"kubio-comparison-check-icon"}))),Qf=()=>(0,Hn.upgradeToPro)({source:"ai_upgrade_modal",content:"ai_upgrade_modal"}),Zf=(0,a.memo)((()=>(0,a.createElement)(k.Icon,{icon:ye.DashiconUncheckedIcon,className:"kubio-comparison-close-icon"}))),Jf=e=>{let{children:t}=e;return(0,a.createElement)("div",{className:"kubio-comparison-tooltip"},t)},eb=["attachment","kubio_changeset"],tb=()=>{const[e]=(0,b.useAIServiceInfo)(),{aiImageCost:t=150,aiSectionCost:n=30}=e;return(0,a.createElement)(Jf,null,(0,a.createElement)("p",null,(0,x.sprintf)(// translators: %s is the number of credits
(0,x.__)("With %s credits you'll benefit of:","kubio"),Intl.NumberFormat().format(Yf))),(0,a.createElement)("ul",null,(0,a.createElement)("li",null,(0,x.sprintf)(// translators: %d is the number
(0,x.__)("%d full page generations","kubio"),Math.ceil(Yf/(10*n)))),(0,a.createElement)("li",null,(0,x.sprintf)(// translators: %d is the number
(0,x.__)("%d page sections generations","kubio"),Math.ceil(Yf/n))),(0,a.createElement)("li",null,(0,x.sprintf)(// translators: %d is the number
(0,x.__)("%d text generations","kubio"),Math.ceil(750))),(0,a.createElement)("li",null,(0,x.sprintf)(// translators: %d is the number
(0,x.__)("%d image generations","kubio"),Math.ceil(Yf/t)))),(0,a.createElement)("p",null,(0,x.__)("The numbers provided are approximations and may vary based on the size and complexity of the generated content","kubio")))},nb=[{label:(0,x.__)("Generate pages with AI","kubio"),free:(0,x.__)("Homepage only","kubio"),pro:(0,x.__)("Multiple pages","kubio")},{label:(0,x.__)("Regenerate page section","kubio"),free:(0,a.createElement)(Xf,null),pro:(0,a.createElement)(Xf,null)},{label:(0,x.__)("Search images on Pexels","kubio"),free:(0,a.createElement)(Xf,null),pro:(0,a.createElement)(Xf,null)},{label:(0,x.__)("Generate images with AI","kubio"),free:(0,a.createElement)(Zf,null),pro:(0,a.createElement)(Xf,null)},{label:(0,x.__)("Kubio AI credits","kubio"),tooltip:()=>(0,a.createElement)(tb,null),free:500,pro:(0,x.sprintf)(// translators: %s is the amount of credits, e.g 7500
(0,x.__)("Starting from %s","kubio"),Intl.NumberFormat().format(Yf))},{label:(0,x.__)("Design variety on AI generated pages","kubio"),free:(0,x.__)("Limited","kubio"),pro:(0,x.__)("Full","kubio")},{label:(0,x.__)("Customize footer text","kubio"),free:(0,a.createElement)(Zf,null),pro:(0,a.createElement)(Xf,null)},{label:(0,x.__)("Sticky navigation","kubio"),free:(0,a.createElement)(Zf,null),pro:(0,a.createElement)(Xf,null)},{label:(0,x.__)("High converting navigation layouts","kubio"),tooltip:()=>(0,a.createElement)(Jf,null,(0,x.__)("Navigation layouts containing “call to action” buttons that will lead to better conversion rates.","kubio")),free:(0,a.createElement)(Zf,null),pro:(0,a.createElement)(Xf,null)},{label:(0,x.__)("Beautiful hero sections","kubio"),free:"9",pro:"35+"},{label:(0,x.__)("Different hero image for each page","kubio"),free:(0,a.createElement)(Zf,null),pro:(0,a.createElement)(Xf,null)},{label:(0,x.__)("Newsletter subscription forms","kubio"),free:(0,a.createElement)(Zf,null),pro:(0,a.createElement)(Xf,null)},{label:(0,x.__)("Pricing tables","kubio"),free:(0,a.createElement)(Zf,null),pro:(0,a.createElement)(Xf,null)},{label:(0,x.__)("Technical support","kubio"),free:(0,x.__)("Best effort","kubio"),pro:(0,x.__)("Priority support","kubio")}];let ob=(0,a.createElement)(a.Fragment,null);ob=e=>{let{onCancel:t}=e;const[n,o]=(0,a.useState)(!1),[r,i]=(0,a.useState)(!1),l=(0,a.useRef)(),{hasDirtyEntities:c,entitiesToSave:u}=(0,w.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t}=e("core");return{hasDirtyEntities:t().filter((e=>{let{kind:t,name:n}=e;return"postType"===t&&!eb.includes(n)})).length>0,entitiesToSave:t()}})),{saveEditedEntityRecord:d}=(0,w.useDispatch)("core"),p=(0,s.useUnloadStoreEntities)(),h=(0,a.useCallback)((()=>{p(),window.location=(0,ve.getBackendData)("wpAdminUpgradePage")}),[p]),g=(0,a.useCallback)((async()=>{o(!0);const e=u.map((e=>{let{kind:t,name:n,key:o}=e;return d(t,n,o)}));await Promise.all(e),window.location=(0,ve.getBackendData)("wpAdminUpgradePage")}),[u,d]),f=(0,a.useCallback)((()=>{c?i(!0):window.location=(0,ve.getBackendData)("wpAdminUpgradePage")}),[c]);return(0,a.createElement)("div",{className:"kubio-ai-zero-credits-upgrade"},(0,a.createElement)("div",{className:"kubio-ai-zero-credits-upgrade__content"},(0,a.createElement)("div",{className:"kubio-ai-zero-credits-upgrade__close-modal"},(0,a.createElement)(k.Button,{icon:$t,onClick:t})),(0,a.createElement)(k.Flex,null,(0,a.createElement)(k.FlexBlock,{className:"kubio-ai-zero-credits-upgrade__content-column"},(0,a.createElement)("div",{className:"kubio-ai-zero-credits-upgrade__content-column__content"},(0,a.createElement)(k.Icon,{icon:ye.KubioAI,className:"kubio-ai-logo-colored kubio-ai-logo-animated"}),(0,a.createElement)("h1",null,(0,x.__)("Looks like you have used all your free Kubio AI credits.","kubio")),(0,a.createElement)("p",null,(0,x.__)("To continue generating website content with Kubio AI you will need to upgrade to Kubio PRO.","kubio")),(0,a.createElement)("p",null,(0,x.__)("You can also continue using the Kubio builder for free and you can keep the generated content, but you won't be able to enjoy the AI features anymore.","kubio")),(0,a.createElement)("p",null,(0,x.__)("On the right, you can see a few advantages offered by the PRO version.","kubio")),(0,a.createElement)(k.Flex,{className:"buttons-wrapper",justify:"flex-start"},(0,a.createElement)(k.Button,{variant:"primary",onClick:Qf,className:"kubio-ai-button"},(0,x.__)("Upgrade to PRO","kubio")),(0,a.createElement)(k.Button,{onClick:t,className:"kubio-ai-button-tertiary"},(0,x.__)("Maybe later","kubio"))),(0,a.createElement)(k.Flex,{align:"center",className:"kubio-zero-credits-already-purchased-wrapper"},(0,a.createElement)("span",null,(0,x.__)("Already purchased?","kubio")),(0,a.createElement)(k.Button,{ref:l,onClick:f,variant:"link",className:"kubio-ai-button-link is-small kubio-ai-activate-pro"},(0,x.__)("Activate PRO now","kubio")),r&&(0,a.createElement)(k.Popover,{inline:!0,anchor:l.current,placement:"top",offset:10,focusOnMount:!1,className:"kubio-ai-wizard-confirmation",shift:!0,flip:!0,onClose:()=>!n&&i(!1)},(0,a.createElement)(k.Flex,{className:"kubio-ai-wizard-confirmation__message",align:"flex-start",direction:"column"},(0,a.createElement)("h3",null,(0,x.__)("The current page has unsaved changes","kubio")),(0,a.createElement)("p",null,(0,x.__)("The Kubio PRO license activation process will take you to the WordPress admin area and the page you are currently editing has unsaved changes.","kubio")),(0,a.createElement)("p",null,(0,x.__)("Would you like to save these changes or discard them?","kubio"))),(0,a.createElement)(k.Flex,{justify:"flex-start",gap:5},(0,a.createElement)(k.Button,{className:"kubio-ai-button-tertiary has-text",onClick:h},(0,x.__)("Discard & activate","kubio")),(0,a.createElement)(k.Button,{className:"kubio-ai-button has-text",isBusy:n,onClick:g},(0,x.__)("Save & activate","kubio"))))))),(0,a.createElement)(k.FlexBlock,{className:"kubio-ai-zero-credits-upgrade__bg-column"},(0,a.createElement)("table",null,(0,a.createElement)("thead",null,(0,a.createElement)("tr",null,(0,a.createElement)("th",{className:"clear-border"}),(0,a.createElement)("th",{className:"kubio-comparison-header-free"},(0,x.__)("FREE","kubio")),(0,a.createElement)("th",{className:"kubio-comparison-header-pro"},(0,x.__)("PRO","kubio")))),(0,a.createElement)("tbody",null,nb.map((e=>(0,a.createElement)("tr",{key:e.label},(0,a.createElement)("th",{className:"label-column"},(0,a.createElement)("span",null,!e.tooltip&&(0,a.createElement)("span",null,e.label),!!e.tooltip&&(0,a.createElement)(k.Tooltip,{delay:100,className:"kubio-comparison-tooltip-title",placement:"right",text:(0,m.isFunction)(e.tooltip)?e.tooltip():e.tooltip},(0,a.createElement)("span",{className:"item-has-tooltip"},e.label,(0,a.createElement)(k.Icon,{className:"tooltip-icon",icon:qf}))))),(0,a.createElement)("td",{className:"content-column"},e.free),(0,a.createElement)("td",{className:"content-column content-column--pro"},e.pro))))))))))};const rb=()=>{const e=(0,a.useRef)({}),[t,n]=(0,a.useState)(!1),o=(0,a.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(0,u.applyFilters)("kubio.dismissZeroCreditsModal",!1)){switch(t.type||"general"){case"page_generation":e.current={title:(0,x.__)("Credit status","kubio"),message:(0,x.__)("You currently do not have enough credits to generate a new page. To continue using this feature, please consider purchasing more credits.","kubio")};break;case"general":e.current={title:(0,x.__)("Credit status","kubio"),message:(0,x.__)("You currently do not have enough credits. To continue using this feature, please consider purchasing more credits","kubio")}}n(!0)}}),[]);(0,s.useAddWPAction)("kubio.ai.zero_credits",o);const[r,i]=(0,b.useAIServiceInfo)(),{createSuccessNotice:l}=(0,s.useKubioNotices)(),c=(0,a.useCallback)((async()=>{n(!1);try{const{remaining_credits:e=0,per_page_credits:t=30}=await(0,b.getAIInfo)();i({...r,state:"ready",remainingCredits:e,perPageCredits:t}),l((0,x.__)("Credit status updated!","kubio"),{type:"snackbar",duration:3e3})}catch(e){ke.Log.error("Zero credits modal",e)}}),[r,l,i]),d=(0,a.useCallback)((()=>{n(!1)}),[]);return t&&(0,a.createElement)(k.Modal,{className:T()("kubio-ai-wizard-modal auto kubio-ai-zero-credits-upgrade-modal"),overlayClassName:"kubio-ai-zero-credits-upgrade__close-modal",__experimentalHideHeader:!0,title:null,isDismissible:!1},(0,a.createElement)(ob,{message:e.current.message,refresh:c,onCancel:d}))},ib=-1,ab=()=>{const{isReady:e}=$g(),[t,n]=(0,a.useState)(0),[o,r]=(0,a.useState)(!1),[i,l]=Fa(),[s,c]=(0,f.useGlobalSessionProp)("displayingEmptyPageChecked",!0),{isAIEnabled:u,isWooPage:d}=(0,w.useSelect)((e=>({isAIEnabled:e(h.STORE_KEY).isAICapabilityEnabled(),isWooPage:e(h.STORE_KEY).getIsWooCommercePage()})),[]),{contentLength:m,isFrontPage:g,isPage:_}=(0,w.useSelect)((e=>{var t;const{getBlocks:n,getBlockOrder:o}=e("core/block-editor"),r=n()||[],{getIsFrontPage:i=p().noop,getPage:a=p().noop}=e("kubio/edit-site")||{},l=a()||{},s=(0,ve.findBlockByName)(r,"core/post-content"),c=null==s?void 0:s.clientId;return{isFrontPage:i(),contentLength:null===(t=o(c))||void 0===t?void 0:t.length,isPage:"page"===p().get(l,"context.postType")}}));return(0,a.useEffect)((()=>{e&&n(0)}),[e]),(0,a.useLayoutEffect)((()=>{if(t!==ib&&e&&u)if(i)n(ib);else if(_&&!g&&!d)return m?void n(ib):s?n(1):(n(ib),void c(!1))}),[e,m,g,_,i,u,o,t,s,c]),(0,a.createElement)(a.Fragment,null,1===t&&(0,a.createElement)(hg,{showButton:!1,initialModalIsVisible:!0,onNewAiPage:()=>{n(ib),r(!0)},onNewKubioPage:()=>{n(ib)},onCancel:()=>{n(ib)},title:(0,x.__)("Generate page content","kubio"),description:(0,x.__)("Choose a method to generate content for the current page","kubio")}),o&&(0,a.createElement)(b.AIWizard,{onFinish:()=>{n(ib),r(!1),l(!0)},onCancel:()=>{n(ib),r(!1)},isRegenerate:!0,forceGenerateTitle:!0}))},lb=e=>{let{enabled:t}=e;const n=(0,f.useGetGlobalSessionProp)("ready",!1),[o,r]=(0,f.useGlobalSessionProp)("AIFromGetStartedTriggered",!1),[i]=(0,b.useAIData)(),[l,s]=(0,b.useAIServiceInfo)(),[,c]=Fa();return(0,a.useEffect)((()=>{}),[s]),(0,a.useEffect)((()=>{if(t&&!o&&"ready"===l.state&&n&&i.isAIConnected){async function e(){s(await(0,b.getAIInfo)()),r(!0),c(!0)}e()}}),[i.isAIConnected,l.state,t,n,c,r,o,s]),(0,a.createElement)(a.Fragment,null)},sb={secondarySidebar:(0,x.__)("Block Library","kubio"),drawer:(0,x.__)("Navigation Sidebar","kubio")},cb=(0,E.createHigherOrderComponent)((e=>t=>{var n,o,r,i;let{initialSettings:l}=t;const{isFullscreenActive:c,sidebarIsOpened:u,settings:d,templateId:g,templateType:f,page:b,isNavigationOpen:_,isInserterOpen:v,isListViewOpen:y,isFSETemplate:k,currentSidebar:E}=(0,w.useSelect)((e=>{const{isFeatureActive:t,getSettings:n,getEditedPostType:o,getEditedPostId:r,getPage:i,isNavigationOpened:a,isListViewOpened:l,getEditorOpenedSidebar:s}=e(h.STORE_KEY),c=o(),u=r();return{isFullscreenActive:t("fullscreenMode"),sidebarIsOpened:e(h.STORE_KEY).isEditorSidebarOpened(),settings:n(),templateType:c,page:i(),templateId:u,isNavigationOpen:a(),isInserterOpen:e(h.STORE_KEY).getOpenedInserter(),isFSETemplate:!!u&&!!c,isListViewOpen:l(),currentSidebar:s()}}),[]),{postId:S,post:C,currentTemplateId:I,isKubioTheme:T}=(0,w.useSelect)((e=>{const t=p().get(b,["context","postId"]),n=p().get(b,["context","postType"]),{getEntityRecords:o,getEntityRecord:r}=e("core"),{getTemplateId:i=p().noop}=e("kubio/edit-site");if(!t||!n)return{postId:null,currentTemplateId:null,isKubioTheme:null,post:{}};let a;if(["wp_template","wp_template_part"].includes(n)){const e=o("postType",n,{wp_id:t});a=null==e?void 0:e[0]}else a=r("postType",n,parseInt(t));const l=i(),{getEditorSettings:s}=e(zn.store);return{postId:t,currentTemplateId:l,isKubioTheme:s().supportsTemplateMode,post:a}}),[null==b||null===(n=b.context)||void 0===n?void 0:n.postId,null==b||null===(o=b.context)||void 0===o?void 0:o.postType]),{openSidebar:P}=(0,w.useDispatch)(h.STORE_KEY),{createInfoNotice:R}=(0,w.useDispatch)("core/notices");(0,a.useEffect)((()=>{P("document")}),[]);const{editEntityRecord:A}=(0,w.useDispatch)("core"),{updateEditorSettings:O,setupEditorState:N}=(0,w.useDispatch)("core/editor"),{defaultTemplateTypes:M}=d;(0,a.useEffect)((()=>{O({...l,defaultTemplateTypes:M})}),[M,l,O]),(0,a.useLayoutEffect)((()=>{const e=p().get(b,["context","postId"]),t=p().get(b,["context","postType"]);e&&t&&N({id:e,type:t})}),[null==b||null===(r=b.context)||void 0===r?void 0:r.postId,null==b||null===(i=b.context)||void 0===i?void 0:i.postType]),(0,a.useLayoutEffect)((()=>{var e;if(C&&"page"===C.type&&(null===(e=C.meta)||void 0===e||!e.saved_in_kubio)&&(0,m.isString)(I)){const e=T?"full-width":"kubio-full-width",t=I.includes(e),n=p().get(C,["content","raw"]),o=p().get(C,"template"),r=p().get(C,"id"),i=p().get(C,"type");!n&&t&&""===o&&((0,s.markLastChangeAsPersistent)(),A("postType",i,r,{template:e}),R((0,x.__)('New empty page detected. Page template was set to "Full Width"',"kubio"),{type:"snackbar"}))}}),[I,A,T,C,S]);const D={startGeneratingAIFrontPage:l.startGeneratingAIFrontPage,isListViewOpen:y,isFullscreenActive:c,sidebarIsOpened:u,templateId:g,templateType:f,page:b,isNavigationOpen:_,isInserterOpen:v,isFSETemplate:k,currentSidebar:E,startWithAIFrontPage:d.startWithAIFrontPage||!1,__experimentalGlobalStylesBaseStyles:d.__experimentalGlobalStylesBaseStyles,__experimentalGlobalStylesUserEntityId:d.__experimentalGlobalStylesUserEntityId};return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(e,D),(0,a.createElement)(jg,null))}),"WithEditorCurrentEntity"),ub=(0,E.compose)(cb,E.pure)((function(e){const{__experimentalGlobalStylesUserEntityId:t,sidebarIsOpened:n,templateId:o,templateType:r,page:i,isNavigationOpen:c,isInserterOpen:u,isListViewOpen:d,isFSETemplate:m,startWithAIFrontPage:p,currentSidebar:E,startGeneratingAIFrontPage:C}=e,{setPage:I}=(0,w.useDispatch)("core/editor"),P=(0,s.useActiveMedia)(),[R,A]=(0,a.useState)(!1),O=(0,a.useCallback)((()=>A(!0)),[]),N=(0,a.useCallback)((()=>{A(!1)}),[]);!function(){const{hasBlockSelection:e,isEditorSidebarOpened:t,isGlobalStyleEditing:n}=(0,w.useSelect)((e=>({hasBlockSelection:!!e("core/block-editor").getBlockSelectionStart(),isEditorSidebarOpened:e(h.STORE_KEY).isEditorSidebarOpened(),isGlobalStyleEditing:e(h.STORE_KEY).isGlobalStyleEditing()})),[]),{openSidebar:o}=(0,w.useDispatch)(h.STORE_KEY);(0,a.useEffect)((function(){t&&o(e?"block-inspector":n?"document/general-settings":"document")}),[e,t,n])}(),(()=>{const[e,t]=(0,a.useState)({}),[,n]=(0,Fi.useCurrentInspectorTab)(),o=(0,w.useSelect)((e=>{const t=e("core/block-editor").getSelectedBlock();return{clientId:null==t?void 0:t.clientId,name:null==t?void 0:t.name}}));(0,a.useEffect)((()=>{(null==e?void 0:e.clientId)!==(null==o?void 0:o.clientId)&&(null==e?void 0:e.name)!==(null==o?void 0:o.name)&&(n("content"),t(o))}),[o,e,t,n])})();const M=(0,f.useGetGlobalSessionProp)("ready",!1),D=(0,a.useMemo)((()=>({...null==i?void 0:i.context,queryContext:[(null==i?void 0:i.context.queryContext)||{page:1},e=>I({...i,context:{...null==i?void 0:i.context,queryContext:{...null==i?void 0:i.context.queryContext,...e}}})]})),[i,I]);(0,a.useEffect)((()=>{c?document.body.classList.add("is-navigation-sidebar-open"):document.body.classList.remove("is-navigation-sidebar-open")}),[c]),(0,a.useEffect)((()=>(0,l.initializeGutentagPatterns)()),[]);const{uiVersion:B}=(0,g.useUIVersion)(),L=T()("kubio-sidebar",{"kubio-sidebar-hidden":(!n||u||d)&&1===B}),z=T()("kubio-secondary-sidebar",{"kubio-secondary-sidebar--closed":!(u||d),"kubio-secondary-sidebar-hidden":!(u||d)&&1===B}),{createErrorNotice:F}=(0,w.useDispatch)("core/notices");let G=(0,a.createElement)(a.Fragment,null),H=(0,a.createElement)(a.Fragment,null);M&&(2===B?H=(0,a.createElement)("div",{className:"kubio-sidebar-v2-wrapper"},d&&(0,a.createElement)("div",{className:"kubio-sidebar-list-view"},(0,a.createElement)(Wg,null)),(0,a.createElement)("div",{id:"kubio-main-sidebar",className:L,"data-sidebar-name":E},(0,a.createElement)(Wt.Slot,{scope:`${h.STORE_KEY}/sidebars`}),(0,a.createElement)(Ui,null)),(0,a.createElement)("div",{className:z},u&&(0,a.createElement)(Qt,null))):(G=(0,a.createElement)("div",{id:"kubio-main-sidebar",className:L},(0,a.createElement)(Wt.Slot,{scope:`${h.STORE_KEY}/sidebars`}),(0,a.createElement)(Ui,null)),H=(0,a.createElement)("div",{className:z},u&&(0,a.createElement)(Qt,null),d&&(0,a.createElement)(Wg,null))));const U=(0,a.createElement)(qg,{blockContext:D,templateId:o,templateType:r,page:i},(0,a.createElement)(b.AIDataProvider,null,(0,a.createElement)(_.KubioGlobalDataContextProvider,null,(0,a.createElement)(Vo,null,(0,a.createElement)(v.GlobalStylesProvider,null,(0,a.createElement)(y.BlockContextProvider,{value:D},(0,a.createElement)(Xg,null),(0,a.createElement)(rg.Register,null),(0,a.createElement)(Wi,null),(0,a.createElement)(Bn,null,(0,a.createElement)(Vt,{labels:sb,drawer:(0,a.createElement)(Hg,null),sidebar:G,secondarySidebar:H,header:(0,a.createElement)(ng,{openEntitiesSavedStates:O}),notices:(0,a.createElement)(Ug,null),content:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(zn.EditorNotices,null),m&&(0,a.createElement)(Ia,null),!m&&(0,a.createElement)(Ta,null),(0,a.createElement)(rg,{openEntitiesSavedStates:O}),(0,a.createElement)("div",{id:"kubio-toolbar-boundary"})),actions:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Ma,{isOpen:R,close:N})),footer:(0,a.createElement)(y.BlockBreadcrumb,null)})),(0,a.createPortal)((0,a.createElement)("div",{className:"kubio-popover-slot-container"},(0,a.createElement)(k.Popover.Slot,null),(0,a.createElement)(k.Popover.Slot,{name:"kubio-popover-slot"})),document.body),(0,a.createElement)(Rt.PluginArea,{onError:function(e){F((0,x.sprintf)(/* translators: %s: plugin name */(0,x.__)('The "%s" plugin has encountered an error and cannot be rendered.',"kubio"),e))}}),(0,a.createElement)(Kf,null))))),(0,a.createElement)(ab,null),(0,a.createElement)(lb,{enabled:C})));return(0,a.createElement)("div",{className:T()("kubio-editor-wrapper",`kubio-editor-wrapper--media-${P}`)},(0,a.createElement)(jt,{isActive:!0}),(0,a.createElement)(zn.UnsavedChangesWarning,null),(0,a.createElement)(Fn.ShortcutProvider,{style:{height:"100%"}},(0,a.createElement)(k.SlotFillProvider,null,(0,a.createElement)(S.EntityProvider,{kind:"root",type:"site"},m&&(0,a.createElement)(S.EntityProvider,{kind:"postType",type:r,id:o},(0,a.createElement)(S.EntityProvider,{kind:"postType",type:"wp_global_styles",id:t},U)),!m&&U))),M&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(xa,null),(0,a.createElement)(ig,{blockContext:D,templateId:o,templateType:r,page:i})),p&&(0,a.createElement)($f,null),(0,a.createElement)(rb,null))})),db=window.wp.mediaUtils;(0,u.addFilter)("editor.MediaUpload","kubio/edit-site/components/media-upload",(()=>db.MediaUpload)),(0,u.addFilter)("editor.BlockEdit","kubio/advancedPanel",Nr.withInspectorControlsAdvancedPanel);const mb=window.wp.dataControls,pb={features:{fullscreenMode:!0}},hb=(0,w.combineReducers)({features(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pb.features,t=arguments.length>1?arguments[1]:void 0;return"TOGGLE_FEATURE"===t.type?{...e,[t.feature]:!e[t.feature]}:e}}),gb=(0,w.combineReducers)({preferences:hb,deviceType:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Desktop",t=arguments.length>1?arguments[1]:void 0;return"SET_PREVIEW_DEVICE_TYPE"===t.type?t.deviceType:e},settings:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SETTINGS":return{...e,...t.settings};case"UPDATE_UI_VERSION":return kr()({path:(0,Sr.addQueryArgs)("/kubio/v1/update-ui-version",{version:t.version})}),{...e,kubioGlobalSettings:{...e.kubioGlobalSettings||{},editorUIVersion:t.version}};case"TOGGLE_AI_CAPABILITIES":return kr()({path:"/kubio/v1/update-enable-ai-capabilities",method:"POST",data:{value:t.value}}),{...e,kubioGlobalSettings:{...e.kubioGlobalSettings||{},enableAICapabilities:t.value}};case"UPDATE_EDITOR_MODE":return kr()({path:"/kubio/v1/update-editor-mode",method:"POST",data:{value:t.value}}),{...e,kubioGlobalSettings:{...e.kubioGlobalSettings||{},editorMode:t.value}};case"UPDATE_EXCLUDED_SECTION_CATEGORIES":return kr()({path:"/kubio/v1/update-excluded-section-categories",method:"POST",data:{value:t.value}}),{...e,kubioGlobalSettings:{...e.kubioGlobalSettings||{},excludedSectionCategories:t.value}}}return e},editedPost:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TEMPLATE":case"SET_PAGE":return{type:"wp_template",id:t.templateId,page:t.page};case"SET_PAGE_CONTENT":return{page:t.page};case"SET_TEMPLATE_PART":return{type:"wp_template_part",id:t.templatePartId,page:{context:{}}}}return e},homeTemplateId:function(e,t){return"SET_HOME_TEMPLATE"===t.type?t.homeTemplateId:e},navigationPanel:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{menu:Ha,isOpen:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_NAVIGATION_PANEL_TO_MENU":return{...e,isOpen:!0,menu:t.menu};case"SET_IS_NAVIGATION_PANEL_OPENED":return{...e,menu:t.isOpen?e.menu:Ha,isOpen:t.isOpen};case"SET_IS_INSERTER_OPENED":return{...e,menu:e.isOpen&&t.isOpen?Ha:e.menu,isOpen:!t.isOpen&&e.isOpen}}return e},blockInserterPanel:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_NAVIGATION_PANEL_TO_MENU":return!1;case"SET_IS_NAVIGATION_PANEL_OPENED":return!t.isOpen&&e;case"SET_IS_INSERTER_OPENED":return t.isOpen}return e},currentAncestor:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return"SET_CURRENT_ANCESTOR"===t.type?t.currentAncestor:e},templateId:function(e,t){switch(t.type){case"SET_TEMPLATE":case"ADD_TEMPLATE":case"SET_PAGE":case"SET_ENTITY":return t.templateId;case"SET_TEMPLATE_PART":return}return e},templatePartId:function(e,t){return"SET_TEMPLATE_PART"===t.type?t.templatePartId:e},templateType:function(e,t){switch(t.type){case"SET_TEMPLATE":case"ADD_TEMPLATE":case"SET_PAGE":case"SET_ENTITY":return"wp_template";case"SET_TEMPLATE_PART":return"wp_template_part"}return e},templateIds:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TEMPLATE":return[...e,t.templateId];case"REMOVE_TEMPLATE":return e.filter((e=>e!==t.templateId))}return e},templatePartIds:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]},page:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PAGE":case"SET_PAGE_CONTENT":case"SET_TEMPLATE":return t.page;case"SET_TEMPLATE_PART":return{context:{}}}return e},entity:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"SET_ENTITY"===t.type?t.entity:e},showOnFront:function(e){return e},subSidebars:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SUBSIDEBAR":return e[t.areaIdentifier]?e:{...e,[t.areaIdentifier]:t.sidebar};case"REMOVE_SUBSIDEBAR":return{...e,[t.areaIdentifier]:!1}}return e},globalStyleEditing:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{value:void 0,previousEntity:null},t=arguments.length>1?arguments[1]:void 0;return"TOGGLE_GLOBAL_STYLE_EDITING"===t.type?{...e,value:t.value,previousEntity:t.previousEntity}:e},openedInserter:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"TOGGLE_IS_INSERTER_OPEN"===t.type?(t.options=t.options||{},Se()(e,t)?e:{value:null==t?void 0:t.value,clientId:null==t?void 0:t.rootClientId,options:(null==t?void 0:t.options)||{}}):e},isGutentagDebug:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"TOGGLE_GUTENTAG_DEBUG"===t.type?null==t?void 0:t.value:e},classicTemplate:function(e,t){switch(t.type){case"SET_PAGE":case"SET_PAGE_CONTENT":return{...e,id:null==t?void 0:t.classicTemplateId}}return e},listViewPanel:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_NAVIGATION_PANEL_TO_MENU":return!1;case"SET_IS_NAVIGATION_PANEL_OPENED":return!t.isOpen&&e;case"SET_IS_INSERTER_OPENED":return!t.value&&e;case"SET_IS_LIST_VIEW_OPENED":return t.isOpen}return e},aiInfo:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{remainingCredits:0},t=arguments.length>1?arguments[1]:void 0;return"UPDATE_AI_INFO"===t.type?(0,m.merge)(e,(0,m.cloneDeep)(t.value||{})):e},isChangingPage:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"SET_PAGE"===t.type&&(e=!!t.changingPage),e}}),{select:fb,dispatch:bb}=w.controls;function _b(e){return{type:"TOGGLE_FEATURE",feature:e}}function vb(e){return{type:"SET_PREVIEW_DEVICE_TYPE",deviceType:e}}function yb(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function*(){const o={templateSlug:t};if(!t){const t=yield w.controls.resolveSelect("core","getEntityRecord","postType","wp_template",e);o.templateSlug=null==t?void 0:t.slug}return{type:"SET_TEMPLATE",templateId:e,page:{context:n?{}:o}}}()}function*kb(e){const t=yield w.controls.dispatch("core","saveEntityRecord","postType","wp_template",e);return{type:"SET_TEMPLATE",templateId:t.id,page:{context:{templateSlug:t.slug}}}}function*Eb(e){yield(0,mb.apiFetch)({path:`/wp/v2/templates/${e}`,method:"DELETE"});const t=yield w.controls.select(h.STORE_KEY,"getPage");yield w.controls.dispatch(h.STORE_KEY,"setPage",t)}function Sb(e){return{type:"SET_TEMPLATE_PART",templatePartId:e}}function wb(e){return{type:"SET_HOME_TEMPLATE",homeTemplateId:e}}function Cb(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function*(o){if(null===e)return{type:"SET_PAGE",page:null,templateId:null,changingPage:!0};if(!e.path&&null!==(o=e.context)&&void 0!==o&&o.postId){const t=yield w.controls.resolveSelect("core","getEntityRecord","postType",e.context.postType||"post",e.context.postId);e.path=(0,Sr.getPathAndQueryString)(t.link)}if(!n)return void(yield{type:"SET_PAGE_CONTENT",page:e,classicTemplateId:""!==t?t:"page.php"});let r;if(!t&&n&&(r=yield w.controls.resolveSelect("core","__experimentalGetTemplateForLink",(0,Sr.addQueryArgs)(e.path,{_:Date.now()})),!r))return void(yield{type:"SET_PAGE",page:e,templateId:null});const i=t||r,{id:a,slug:l}=i;return yield{type:"SET_PAGE",page:l?{...e,context:{...e.context,templateSlug:l}}:e,templateId:a},a}()}function*Ib(){const{show_on_front:e,page_on_front:t}=yield w.controls.resolveSelect("core","getEntityRecord","root","site"),{siteUrl:n}=yield w.controls.select(h.STORE_KEY,"getSettings"),o={path:n,context:"page"===e?{postType:"page",postId:t}:{}},r=yield*Cb(o);if(!r)return{type:"GUTENTAG_NO_ACTION"};yield wb(r)}function Tb(e){return{type:"OPEN_NAVIGATION_PANEL_TO_MENU",menu:e}}function xb(e){return{type:"SET_IS_NAVIGATION_PANEL_OPENED",isOpen:e}}function Pb(e){return{type:"UPDATE_SETTINGS",settings:e}}function*Rb(e){return yield bb("core/interface","enableComplementaryArea",`${h.STORE_KEY}/sidebars`,`${h.STORE_KEY}/sidebar/${e}`)}function*Ab(){return yield bb("core/interface","enableComplementaryArea",`${h.STORE_KEY}/sidebars`,`${h.STORE_KEY}/sidebar/block-inserter`)}function Ob(e){let{areaIdentifier:t,sidebar:n}=e;return function*(){return{type:"ADD_SUBSIDEBAR",sidebar:n,areaIdentifier:t}}()}function Nb(e){let{areaIdentifier:t}=e;return function*(){return{type:"REMOVE_SUBSIDEBAR",areaIdentifier:t}}()}function*Mb(){yield bb("core/interface","disableComplementaryArea",`${h.STORE_KEY}/sidebars`)}function Db(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function*(){return{type:"TOGGLE_GLOBAL_STYLE_EDITING",value:e,previousEntity:t}}()}function*Bb(e){return{type:"TOGGLE_GUTENTAG_DEBUG",value:e}}function Lb(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){return{type:"TOGGLE_IS_INSERTER_OPEN",value:e,rootClientId:t||!1,options:{closeOnSelect:!1,replace:!1,...n}}}()}function zb(e){return{type:"SET_CURRENT_ANCESTOR",currentAncestor:e}}function Fb(e){return{type:"SET_IS_LIST_VIEW_OPENED",isOpen:e}}function Gb(e){return{type:"UPDATE_UI_VERSION",version:e}}function Hb(e){return{type:"UPDATE_EDITOR_MODE",value:e}}function Ub(e){return{type:"TOGGLE_AI_CAPABILITIES",value:e}}function Wb(e){return{type:"UPDATE_AI_INFO",value:e}}function jb(e){return{type:"UPDATE_EXCLUDED_SECTION_CATEGORIES",value:e}}var Vb,Kb;function $b(e){return[e]}function qb(e){return!!e&&"object"==typeof e}function Yb(){var e={clear:function(){e.head=null}};return e}function Xb(e,t,n){var o;if(e.length!==t.length)return!1;for(o=n;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}function Qb(e,t){var n,o;function r(){n=Kb?new WeakMap:Yb()}function i(){var n,r,i,a,l,s=arguments.length;for(a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];for(l=t.apply(null,a),(n=o(l)).isUniqueByDependants||(n.lastDependants&&!Xb(l,n.lastDependants,0)&&n.clear(),n.lastDependants=l),r=n.head;r;){if(Xb(r.args,a,1))return r!==n.head&&(r.prev.next=r.next,r.next&&(r.next.prev=r.prev),r.next=n.head,r.prev=null,n.head.prev=r,n.head=r),r.val;r=r.next}return r={val:e.apply(null,a)},a[0]=null,r.args=a,n.head&&(n.head.prev=r,r.next=n.head),n.head=r,r.val}return t||(t=$b),o=Kb?function(e){var t,o,r,i,a=n,l=!0;for(t=0;t<e.length;t++){if(!qb(o=e[t])){l=!1;break}a.has(o)?a=a.get(o):(r=new WeakMap,a.set(o,r),a=r)}return a.has(Vb)||((i=Yb()).isUniqueByDependants=l,a.set(Vb,i)),a.get(Vb)}:function(){return n},i.getDependants=t,i.clear=r,r(),i}Vb={},Kb="undefined"!=typeof WeakMap;const Zb=Object.values(s.defaultTemplatesByPostType).map((e=>`${e}.php`));function Jb(e,t){return"fullscreenMode"===t||"fixedToolbar"!==t&&(0,m.get)(e.preferences.features,[t],!1)}function e_(e){return e.deviceType}const t_=(0,w.createRegistrySelector)((e=>()=>e("core").canUser("create","media"))),n_=Qb(((e,t)=>{const n={...e.settings,outlineMode:!0,focusMode:Jb(e,"focusMode"),hasFixedToolbar:Jb(e,"fixedToolbar"),__experimentalSetIsInserterOpened:t};return t_(e)?(n.mediaUpload=t=>{let{onError:n,...o}=t;(0,db.uploadMedia)({wpAllowedMimeTypes:e.settings.allowedMimeTypes,onError:e=>{let{message:t}=e;return n(t)},...o})},n):n}),(e=>[t_(e),e.settings,Jb(e,"focusMode"),Jb(e,"fixedToolbar")]));function o_(e){return e.homeTemplateId}function r_(e){var t;return null===(t=e.editedPost)||void 0===t?void 0:t.type}function i_(e){var t;return null===(t=e.editedPost)||void 0===t?void 0:t.id}function a_(e){return e.editedPost.page}function l_(e){return e.navigationPanel.isOpen}function s_(e){var t;return null===(t=e.navigationPanel)||void 0===t?void 0:t.menu}function c_(e){return e.blockInserterPanel}function u_(e){return e.templateId}function d_(e){return e.templatePartId}function m_(e){return e.templateType}function p_(e){return e.templateIds}function h_(e){return e.templatePartIds}function g_(e){return e.entity}function f_(e){return e.showOnFront}const b_=(0,w.createRegistrySelector)((e=>function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const o=e("core/interface").getActiveComplementaryArea(`${h.STORE_KEY}/sidebars`);return n?o===`${h.STORE_KEY}/sidebar/${n}`:!(0,m.isEmpty)(o)}));function v_(e){var t;return null===(t=e.openedInserter)||void 0===t?void 0:t.value}function y_(e){var t;return null===(t=e.openedInserter)||void 0===t?void 0:t.clientId}function k_(e){var t,n;return!(null===(t=e.openedInserter)||void 0===t||null===(n=t.options)||void 0===n||!n.replace)}function E_(e){var t,n;return!(null===(t=e.openedInserter)||void 0===t||null===(n=t.options)||void 0===n||!n.closeOnSelect)}function S_(e){return e.currentAncestor}function w_(){return(0,w.select)("core/interface").getActiveComplementaryArea(`${h.STORE_KEY}/sidebars`)}function C_(e){return e.subSidebars}function I_(e){return e.globalStyleEditing.value}function T_(e){return e.globalStyleEditing.previousEntity}function x_(e){return e.isGutentagDebug}function P_(e){const{rootClientId:t,insertionIndex:n}=e.blockInserterPanel;return{rootClientId:t,insertionIndex:n}}function R_(e){return e.listViewPanel}const A_=e=>{var t;const{templateId:n,templateType:o}=e;return n&&o&&(null===(t=(0,w.select)("core").getEditedEntityRecord("postType",o,n))||void 0===t?void 0:t.kubio_template_source)||null},O_=e=>{var t;const n=null==e||null===(t=e.page)||void 0===t?void 0:t.context;let o=null;var r,i,a;o=null!=n&&n.postType&&null!=n&&n.postId?null!==(r=(0,w.select)("core").getEditedEntityRecord("postType",null==n?void 0:n.postType,null==n?void 0:n.postId).template)&&void 0!==r?r:null:null!==(i=null===(a=e.templateId)||void 0===a?void 0:a.split("//").pop())&&void 0!==i?i:null;const l=(0,w.select)("core").getEditedEntityRecord("root","site");if("page"===l.show_on_front&&l.page_on_front===parseInt(null==n?void 0:n.postId)){const e=((0,w.select)("core").getEntityRecords("postType","wp_template",{per_page:-1})||[]).map((e=>{let{id:t}=e;return t.split("//").pop()})).includes("front-page"),{classicHasFrontPageTemplate:t}=(0,w.select)("core/block-editor").getSettings();if(e||t)return"front-page"}return""===o&&(o="page"===(null==n?void 0:n.postType)?"page":"single"),o},N_=e=>{const t=O_(e),n=(0,w.select)("core").getEntityRecords("postType","wp_template",{per_page:-1});return!!t&&(n||[]).map((e=>{let{id:t}=e;return t.split("//").pop()})).includes(t)},M_=e=>{var t;const n=null==e||null===(t=e.page)||void 0===t?void 0:t.context;return(null==n?void 0:n.postType)||null},D_=e=>{var t;const n=null==e||null===(t=e.page)||void 0===t?void 0:t.context;return(null==n?void 0:n.postId)||null},B_=e=>{var t;const n=null==e||null===(t=e.page)||void 0===t?void 0:t.context,o=(0,w.select)("core").getEditedEntityRecord("root","site"),r=null==o?void 0:o.page_for_posts;return parseInt(r)===parseInt(null==n?void 0:n.postId)},L_=e=>{var t,n;const o=a_(e),r="front-page"===(null==o||null===(t=o.context)||void 0===t?void 0:t.templateSlug),i=(0,w.select)("core").getEditedEntityRecord("root","site"),a=null==i?void 0:i.page_on_front,l=null==o||null===(n=o.context)||void 0===n?void 0:n.postId,s="page"===i.show_on_front&&parseInt(a)===parseInt(l);return r||s},z_=e=>{const t=(0,w.select)("core").getEditedEntityRecord("root","site"),n=a_(e),o=p().get(n,"context",{}),{postType:r,postId:i}=o,a="page"===(null==t?void 0:t.show_on_front),l=null==t?void 0:t.page_on_front,s=a&&parseInt(l)===parseInt(i),c=a&&parseInt(null==t?void 0:t.page_for_posts)===parseInt(i);return"page"===r&&!c&&!s},F_=()=>{var e,t;const n=(null===(e=(0,w.select)("core").getEntityRecords("postType","wp_template",{per_page:-1}))||void 0===e?void 0:e.filter((e=>{let{slug:t}=e;return(0,s.currentTemplateIsPage)(t)})))||[],o=(null===(t=(0,w.select)("core/block-editor").getSettings())||void 0===t?void 0:t.classicThemeTemplates)||[],r=n.map((e=>{let{title:t,slug:n,kubio_template_source:o="custom"}=e;return{value:n,label:"kubio"===o?t.rendered.replace("Kubio","").trim():t.rendered,source:o}}));return Object.keys(o).forEach((e=>{const t=o[e];(0,m.find)(n,{slug:e.replace(".php","")})||r.push({value:Zb.includes(e)?e.replace(".php",""):e,label:t,isClassicTemplate:!0,source:"theme"})})),r.forEach((e=>{"page"===e.value&&(e.value="")})),p().sortBy(r,["source","label"])};function G_(e){var t;return null==e||null===(t=e.classicTemplate)||void 0===t?void 0:t.id}function H_(e){var t,n;const o=a_(e),r=p().get(o,"context",{}),{postType:i,postId:a}=r,l=null===(t=(0,w.select)("core/block-editor").getSettings())||void 0===t||null===(n=t.kubioBasicWooCommerce)||void 0===n?void 0:n.pagesIds;return"product"===i||Object.values(l||{}).includes(parseInt(a))}const U_=Qb((e=>{var t;const n=null===(t=e.settings)||void 0===t?void 0:t.kubioGlobalSettings;return(null==n?void 0:n.editorUIVersion)||1}),(e=>[e.settings])),W_=Qb((e=>{var t;const n=null===(t=e.settings)||void 0===t?void 0:t.kubioGlobalSettings;return(null==n?void 0:n.enableAICapabilities)||!1}),(e=>[e.settings])),j_=Qb((e=>{var t;const n=null===(t=e.settings)||void 0===t?void 0:t.kubioGlobalSettings;return(null==n?void 0:n.editorMode)||"full"}),(e=>[e.settings])),V_=e=>"simple"===j_(e),K_=e=>e.aiInfo||{remainingCredits:0,isStub:!0},$_=e=>!0===e.isChangingPage;function q_(e){return e.canvasMode}const Y_=e=>{var t,n;return(null===(t=e.settings)||void 0===t||null===(n=t.kubioGlobalSettings)||void 0===n?void 0:n.excludedSectionCategories)||[]},X_={reducer:gb,actions:r,selectors:i,controls:mb.controls,persist:["preferences"]};async function Q_(e){return(0,w.registerStore)(ct,{...X_,initialState:e})}const Z_=(0,a.forwardRef)(((e,t)=>{let{menuItems:n,toggleButton:o,onClose:r,onOpen:i,popoverProps:l,className:s}=e;const[c,u]=(0,a.useState)(!1),d=(0,a.useCallback)((e=>{u(e),e?null==i||i():null==r||r()}),[u,i,r]),m=(0,a.useRef)();return(0,a.useImperativeHandle)(t,(()=>({getPopupIsVisible:()=>c}))),(0,a.createElement)(P.DropdownWithHover,{className:T()("kubio-dropdown-with-hover__section-options",s),ref:m,onToggle:d,toggleElement:o,popoverProps:{className:"kubio-ai-design-section-button__dropdown__popup",...l}},(0,a.createElement)(J_,{dropdownRef:m,menuItems:n}))})),J_=e=>{let{dropdownRef:t,menuItems:n}=e;const o=p().get(t,["current","onClose"],p().noop);return(0,a.createElement)(k.MenuGroup,null,n.map(((e,t)=>{let{label:n,description:r,icon:i,onClick:l,className:s}=e;return(0,a.createElement)(k.MenuItem,{key:t,onClick:async()=>{await l(),o()}},(0,a.createElement)("div",{className:T()("kubio-ai-design-section-button__dropdown",s)},(0,a.createElement)("div",{className:"kubio-ai-design-section-button__dropdown__icon"},(0,a.createElement)(k.Icon,{icon:i})),(0,a.createElement)("div",{className:"kubio-ai-design-section-button__dropdown__content"},(0,a.createElement)("div",{className:"kubio-ai-design-section-button__dropdown__content__label"},n),(0,a.createElement)("div",{className:"kubio-ai-design-section-button__dropdown__content__description"},r))))})))},ev=e=>{var t,n,o,r;let{setVisible:i,sectionRef:l,onChangeSection:s,askForSummary:c=!0,isNewSection:u=!1}=e;const{replaceDesign:d,replaceContent:m,dataHelper:p}=Pf(),[h,g]=(0,a.useState)((()=>u?"":p.getAttribute("kubioAI.meta.summary",""))),f=(0,a.useRef)(!1),b=(0,a.useCallback)((async e=>{if(i(!1),!f.current)try{var t;switch(f.current=!0,null===(t=l.current)||void 0===t?void 0:t.type){case"surprise":await d(null,{summary:e,currentSectionCloudId:p.getAttribute("kubioAI.meta.cloudPresetId","")});break;case"regenerate":await m({summary:e});break;case"hand-pick":await l.current.insert(l.current.pattern,e)}}catch(e){ke.Log.error("Generate section modal error",e)}finally{f.current=!1}}),[l,i,d,m]),_=(0,a.useCallback)((()=>b(h)),[b,h]);return(0,a.useEffect)((()=>{if(!c){const e=p.getAttribute("kubioAI.meta.summary","");b(e)}}),[b,p,c]),c?(0,a.createElement)(k.Modal,{className:"kubio-ai-wizard-modal kubio-generate-ai-section auto",title:(0,a.createElement)(k.Flex,null,(0,a.createElement)(k.FlexBlock,{className:"kubio-ai-wizard-modal__title"},(0,a.createElement)(k.Icon,{icon:ye.KubioAI,className:"kubio-ai-logo-colored kubio-ai-logo-animated"}),"hand-pick"===(null===(t=l.current)||void 0===t?void 0:t.type)?(0,x.__)("Generate new section AI","kubio"):(0,x.__)("Regenerate content","kubio")),(0,a.createElement)(k.FlexItem,null,(0,a.createElement)(k.Button,{onClick:()=>i(!1),icon:$t,label:(0,x.__)("Close","kubio")}))),isDismissible:!1,onRequestClose:()=>{},shouldCloseOnClickOutside:!1},(0,a.createElement)(k.Flex,{className:"kubio-generate-ai-section__content",align:"normal"},(0,a.createElement)(k.Flex,{className:"kubio-generate-ai-section__content__section-preview",justify:"center"},(0,a.createElement)("div",{className:T()("section-preview-image-wrapper",(null===(n=l.current)||void 0===n?void 0:n.pattern)&&"ai-hand-picked-section")},(0,a.createElement)("img",{src:null!==(o=l.current)&&void 0!==o&&o.pattern?l.current.pattern.screenshot:(0,ve.staticAssetURL)("ai-assets/placeholder.png"),alt:"placeholder"}))),(0,a.createElement)(k.Flex,{className:"kubio-generate-ai-section__content__summary-wrapper",direction:"column",gap:3.75},(0,a.createElement)(P.TextareaControl,{label:(0,x.__)("Write a brief description to Kubio AI about the new section's content.","kubio"),className:T()("kubio-ai-summary-field"),value:h,onChange:g,rows:6}),(0,a.createElement)(k.Flex,{justify:"flex-end",gap:2.5},"hand-pick"===(null===(r=l.current)||void 0===r?void 0:r.type)&&(0,a.createElement)(k.Button,{className:"kubio-ai-change-section",onClick:s},(0,x.__)("Change section","kubio")),(0,a.createElement)(k.Button,{className:"kubio-ai-button",onClick:_},(0,x.__)("Generate","kubio")))))):(0,a.createElement)(a.Fragment,null)},tv=e=>{let{sectionClientId:t,insertBefore:n=!0,shouldUseSectionClientId:o=!1,aiIntermediateCallback:r=null}=e;const{newSectionIndex:i,parentClientId:l}=(0,w.useSelect)((e=>{const{getBlockIndex:r,getBlockRootClientId:i,getBlockOrder:a}=e("core/block-editor"),l=i(t);let s=r(t);return n||s++,o&&(s=a(t).length),{newSectionIndex:s,parentClientId:o?t:l}}),[t]),{insertBlock:c,replaceBlocks:u,selectBlock:d}=(0,w.useDispatch)("core/block-editor"),{ownerDocument:g}=(0,s.useOwnerDocumentContext)(),[{pageContext:f,siteContext:_,pageTitle:v}]=(0,b.useAIData)();return{onGenerateAiSection:(0,a.useCallback)((function(){let{onCallback:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const o=(0,m.cloneDeep)(t.content),r=(0,ve.transformTemplateToBlock)(o);await c(r,i,l,!0),g.defaultView.requestIdleCallback((async()=>{const i=(0,b.initGenerationSession)();df(g,r.clientId,!0,!0);try{await Ef({pageContext:f,siteContext:_,pageTitle:v,clientId:r.clientId,sectionCategory:t.categories.at(0).replace("kubio-content/",""),replaceBlocks:u,selectBlock:d,summary:n},o)}catch(e){throw e}finally{df(g,r.clientId,!0,!1),null==e||e()}i()}))};if(r){const e=t;t=t=>r(t,e)}const n={page:"sections",disabledPages:["starterSite","pages"],sections:{internalTag:h.AI_READY_TAG,categoryType:"kubio-content",onActionFunc:t}};(0,ve.onOpenTemplateGalleryWithParams)(n)}),[r,c,i,g,f,v,l,u,d,_]),onInsertNormalSection:(0,a.useCallback)((()=>{const e={page:"sections",disabledPages:["starterSite","pages"],sections:{categoryType:"kubio-content",onActionFunc:async e=>{const t=(0,m.cloneDeep)(e.content);let n=(0,ve.transformTemplateToBlock)(t);const{anchor:o,name:r}=(0,ve.getNextSectionNameAndIdForPattern)(e);n=p().merge({},n,{attributes:{anchor:o,attrs:{name:r}}}),await c(n,i,l,!0)}}};(0,ve.onOpenTemplateGalleryWithParams)(e)}),[c,i,l])}},nv=(0,a.forwardRef)(((e,t)=>{const{sectionClientId:n,disabled:o,insertBefore:r=!0,blockTitle:i,hasSingleBlockType:l,dropdownRef:s,onDropdownClose:c,onDropdownOpen:u,onActionStarted:d,onActionEnded:m,...p}=e,g=l?(0,x.sprintf)(// translators: %s: the name of the block when there is only one
(0,x.__)("Add %s","kubio"),i):(0,x.__)("Add block","kubio"),f=(0,a.useRef)(),[b,_]=(0,a.useState)(!1),v=(0,a.useCallback)(((e,t)=>{f.current={type:"hand-pick",pattern:e,insert:t},_(!0)}),[]),{onGenerateAiSection:y,onInsertNormalSection:E}=tv({sectionClientId:n,insertBefore:r,aiIntermediateCallback:v}),[S,I]=lt(),T=(0,w.useSelect)((e=>e(h.STORE_KEY).isAICapabilityEnabled()),[]),P=(0,a.useCallback)((function(){null==d||d(),I((()=>y({onCallback:()=>{null==m||m()}})))}),[I,y,d,m]),R=(0,a.useCallback)((()=>{_(!1),P()}),[P]),A=(0,a.useMemo)((()=>[T?{label:(0,x.__)("Generate a new AI section","kubio"),description:(0,x.__)("Choose a section and let Kubio AI generate your content.","kubio"),icon:ye.KubioAI,onClick:P}:null,{label:(0,x.__)("Select from templates gallery","kubio"),description:(0,x.__)("Choose a section and write your content.","kubio"),icon:ye.PredesignedLayoutsIcon,onClick:E,className:"kubio-select-from-template-gallery-button"}].filter(Boolean)),[T,P,E]),O=(0,a.createElement)("div",{className:"kubio-between-sections-inserter__container"},(0,a.createElement)(k.Button,C({ref:t,icon:qt,label:g,isPrimary:!0,tooltipPosition:"bottom",className:"kubio-between-sections-inserter","aria-haspopup":!1,"aria-expanded":!1,disabled:o},p),(0,x.__)("Add section","kubio")));return(0,a.createElement)(a.Fragment,null,S,b&&(0,a.createElement)(ev,{setVisible:_,sectionRef:f,onChangeSection:R,askForSummary:!0,isNewSection:!0}),(0,a.createElement)(Z_,{menuItems:A,toggleButton:O,ref:s,onClose:c,onOpen:u,popoverProps:{position:"bottom"}}))}));(0,u.addFilter)("kubio.BetweenSectionsInserter","BetweenSectionsInserter",(()=>nv));const ov=(0,a.createContext)({}),rv=()=>(0,a.useContext)(ov),iv={imageSearch:{slug:"AI-IMAGE-SEARCH",label:(0,x.__)("AI Image","kubio")},imageGenerate:{slug:"AI-IMAGE-GENERATE",label:(0,x.__)("AI Image","kubio")}},av={generate:"GENERATE"},lv=e=>{const t=Object.keys(iv).filter((t=>iv[t].slug===e));return t.length>0?iv[t[0]].label:(0,x.__)("AI Image Editor","kubio")},sv=e=>{let{classNames:t,children:n}=e;return(0,a.createElement)("div",{className:T()("kubio-ai-image-editor-sidebar",t)},n)},cv=e=>{let{children:t,classes:n=""}=e;return(0,a.createElement)("div",{className:`kubio-ai-image-editor-content ${n}`},t)},uv=e=>{let{image:t,grid:n=4}=e;const{onSelectImageAction:o,editImageAction:r}=rv();return(0,a.createElement)("div",{className:T()("kubio-ai-image-generator-single-image",`kubio-ai-single-image-grid-${n}`)},(0,a.createElement)("img",{src:t.filename,alt:""}),(0,a.createElement)("div",{className:"kubio-ai-image-overlay"},(0,a.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-button",variant:"primary",onClick:()=>{o(t.filename)}},(0,x.__)("Use this image","kubio")),(0,a.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action",onClick:()=>{r(t)}},(0,x.__)("Edit","kubio"))))},dv=e=>{let{generatedImages:t,totalImages:n}=e;return(0,a.createElement)(a.Fragment,null,t&&t.map(((e,t)=>(0,a.createElement)(uv,{image:e,key:t,grid:n}))))},mv=e=>{let{label:t,onClick:n,isBusy:o,disabled:r,loadingMessage:i,infoMessage:l,variant:s="primary"}=e;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-sidebar-button",onClick:n,isBusy:o,disabled:r,variant:s},t),i&&o&&(0,a.createElement)("p",{className:"kubio-ai-info kubio-ai-info-loading"},i),l&&!o&&(0,a.createElement)("p",{className:"kubio-ai-info"},l))},pv=((0,x.__)("3D Model","kubio"),(0,x.__)("Analog Film","kubio"),(0,x.__)("Anime","kubio"),(0,x.__)("Cinematic","kubio"),(0,x.__)("Comic Book","kubio"),(0,x.__)("Digital Art","kubio"),(0,x.__)("Enhance","kubio"),(0,x.__)("Fantasy Art","kubio"),(0,x.__)("Isometric","kubio"),(0,x.__)("Line Art","kubio"),(0,x.__)("Low Poly","kubio"),(0,x.__)("Modeling Compound","kubio"),(0,x.__)("Neon Punk","kubio"),(0,x.__)("Origami","kubio"),(0,x.__)("Photographic","kubio"),(0,x.__)("Pixel Art","kubio"),(0,x.__)("Tile Texture","kubio"),()=>(0,ve.getBackendData)("aiSDImageTypes",{})),hv=()=>(0,ve.getBackendData)("aiSDImageStyles",{}),gv=[{label:(0,x.__)("Square (1024x1024)","kubio"),value:"1024x1024"},{label:(0,x.__)("Landscape (1152x896)","kubio"),value:"1152x896"},{label:(0,x.__)("Wide Landscape (1216x832)","kubio"),value:"1216x832"},{label:(0,x.__)("Panoramic (1344x768)","kubio"),value:"1344x768"},{label:(0,x.__)("Tall portrait (768x1344)","kubio"),value:"768x1344"},{label:(0,x.__)("Portrait (832x1216)","kubio"),value:"832x1216"},{label:(0,x.__)("Compact portrait (896x1152)","kubio"),value:"896x1152"}],fv=()=>{const[e,t]=(0,a.useState)(!1),{imagePrompt:n,setImagePrompt:o,isGenerating:r,setIsGenerating:i,initialImage:l,saveGeneratedImages:s,setEditorSection:c,aspectRatio:u,setAspectRatio:d,imageStyle:p,setImageStyle:h,imageType:g,setImageType:f,imageSize:b,numberOfImages:_,setNumberOfImages:v,setImageSizeFromOptions:y,aiCreditsPerImageCost:E}=rv(),S=(0,a.useMemo)((()=>(0,m.map)(pv(),((e,t)=>({label:e,value:t})))),[]),w=(0,a.useMemo)((()=>{const e=hv(),t={},n={value:"",label:(0,x.__)("None","kubio")};return Object.keys(e).forEach((o=>{t[o]=(0,m.map)(e[o],((e,t)=>({label:e,value:t}))),t[o].unshift(n)})),t}),[]);(0,a.useEffect)((()=>{var e;t(null!==(e=w[g])&&void 0!==e?e:"")}),[w,S,g]);const C=(0,a.useCallback)((async()=>!1),[u,g,n,b,p,l,r,_,c,s,i]);return(0,a.createElement)("div",{className:"kubio-ai-sidebar-controls"},(0,a.createElement)("p",{className:"kubio-ai-info"},(0,x.__)("Experiment with the latest generative AI and let your imagination define your images.","kubio")),(0,a.createElement)(k.TextareaControl,{onChange:o,value:n,label:(0,x.__)("Image Description","kubio"),useDebounce:!1}),(0,a.createElement)(k.RangeControl,{label:(0,x.__)("Samples","kubio"),value:_,min:1,max:4,initialPosition:1,withInputField:!0,onChange:v,className:"kubio-ai-range-with-help",help:(0,x.sprintf)(/* translators: %s is replaced with the number of credits */(0,x.__)("More samples will multiply the cost. Estimated cost: %s credits.","kubio"),E*_)}),(0,a.createElement)(P.GutentagSelectControl,{label:(0,x.__)("Size","kubio"),inlineLabel:!1,value:u,options:gv,onChange:e=>{d(e),y(e)},size:"__unstable-large"}),(0,a.createElement)(P.GutentagSelectControl,{label:(0,x.__)("Image type","kubio"),inlineLabel:!1,value:g,options:S,onChange:e=>{var n;f(e),h(""),t(null!==(n=w[e])&&void 0!==n&&n)},size:"__unstable-large"}),!1!==e&&(0,a.createElement)(P.GutentagSelectControl,{label:(0,x.__)("Image style","kubio"),inlineLabel:!1,value:p,options:e,onChange:h,size:"__unstable-large",disabled:!1===e}),(0,a.createElement)(mv,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-sidebar-button",onClick:C,isBusy:r,disabled:r||0===n.length,variant:"primary",label:(0,x.__)("Generate image","kubio"),loadingMessage:(0,x.__)("Please wait, this may take a few minutes.","kubio"),infoMessage:(0,x.__)("All generated images will be saved in the Media Library.","kubio")}))},bv=(0,Hn.isFreeVersion)()?Hn.proBadgeClasses.proItem:"",_v=(0,Hn.isFreeVersion)()?`${Hn.proBadgeClasses.proItem}-wrapper`:"",vv=()=>(0,Hn.isFreeVersion)()?(0,a.createElement)("span",{className:Hn.proBadgeClasses.badgeClass},(0,x.__)("PRO","kubio")):null,yv=()=>{const{editorTab:e,setEditorTab:t,backToSection:n}=rv();return(0,a.createElement)("div",{className:"kubio-ai-image-editor-menu"},(0,a.createElement)(k.Button,{onClick:()=>{t(iv.imageSearch.slug),n(av.imageSearch)},className:e===iv.imageSearch.slug?"kubio-ai-button-tab":""},(0,x.__)("Search","kubio")),(0,a.createElement)(k.Button,{onClick:()=>{t(iv.imageGenerate.slug),n(av.generate)},className:e===iv.imageGenerate.slug?"kubio-ai-button-tab":""},(0,x.__)("Generate","kubio"),(0,a.createElement)(vv,null)))},kv=()=>(0,a.createElement)("div",{className:"kubio-ai-image-results-empty"},(0,a.createElement)(k.Icon,{icon:ye.GenerateImageIcon}),(0,a.createElement)("p",null,(0,x.__)("Your results will appear here.","kubio"))),Ev=e=>{let{grid:t=4,placeholderImage:n=!1}=e;return(0,a.createElement)("div",{className:T()("kubio-ai-image-generator-single-image",`kubio-ai-single-image-grid-${t}`)},n&&(0,a.createElement)("img",{src:n,alt:"",className:"kubio-ai-placeholder-image"}))},Sv=e=>{let{urlArgs:t}=e;const n=(0,a.useCallback)((e=>{e.preventDefault(),(0,Hn.upgradeToPro)(t)}),[t]);return(0,a.createElement)("div",{className:"kubio-ai-pro-popup-background "},(0,a.createElement)("div",{className:"kubio-ai-generated-images"},(0,a.createElement)(Ev,null),(0,a.createElement)(Ev,null),(0,a.createElement)(Ev,null),(0,a.createElement)(Ev,null)),(0,a.createElement)("div",{className:"kubio-ai-pro-popup"},(0,a.createElement)("div",{className:"kubio-ai-pro-content"},(0,a.createElement)("h1",null,(0,x.__)("Generate awesome images with Kubio AI","kubio"))),(0,a.createElement)("img",{src:(0,ve.staticAssetURL)("ai-assets/pro-img.png"),alt:"final-message"}),(0,a.createElement)("div",{className:"kubio-ai-pro-content upgrade-to-pro__content"},(0,a.createElement)("p",{className:"kubio-ai-pro-content-lead"},(0,x.__)("Hello there! 🌈 Did you know you can unlock a whole new world of creativity with Kubio PRO?","kubio")),(0,a.createElement)("ul",{className:"kubio-ai-pro-content-features"},(0,a.createElement)("li",null,(0,a.createElement)(k.Icon,{icon:O,size:16}),(0,x.__)("Generate new images by just writing a few words.","kubio")),(0,a.createElement)("li",null,(0,a.createElement)(k.Icon,{icon:O,size:16}),(0,x.__)("Create different kinds of images like paintings, 3D models, photographic, etc.","kubio")),(0,a.createElement)("li",null,(0,a.createElement)(k.Icon,{icon:O,size:16}),(0,x.__)("Easily adjust images using the generative fill feature.","kubio"))),(0,a.createElement)(k.Button,{className:"btn-upgrade",onClick:n},(0,Hn.getStringValueWithId)("pro.upgrade.label")))))},wv=512,Cv=async e=>{const t=new Image;return t.src=e,await t.decode(),t},Iv=e=>64*Math.ceil(e/64),Tv=(e,t,n)=>{let o=0,r=0;return Iv(e)<=Iv(t)?(r=512,o=Iv(r*n)):(o=wv,r=Iv(o*n)),[o,r]},xv=(e,t,n)=>{const o=Tv(e,t,n);if(o[0]<wv){const e=wv-o[0];o[0]=wv,o[1]=Iv(wv+e)}return o},Pv=e=>{let{totalImages:t}=e;const{numberOfImages:n,imageSize:o}=rv(),r=[],i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=document.createElement("canvas");o.width=e,o.height=t;const r=o.getContext("2d");r.fillStyle="rgba(244, 244, 247, "+n+")",r.fillRect(0,0,e,t);const i=new window.Image(e,t);return i.src=o.toDataURL(),i.src}(o[0],o[1],1);for(let e=0;e<n;e++)r.push((0,a.createElement)(Ev,{key:e,grid:t,placeholderImage:i}));return(0,a.createElement)(a.Fragment,null,r)},Rv=e=>{let{generatedImages:t,isGenerating:n,totalImages:o}=e;return(0,a.createElement)("div",{className:`kubio-ai-generated-images kubio-ai-generated-images-${o}`},t.length>0&&(0,a.createElement)(dv,{generatedImages:t,totalImages:o}),n&&(0,a.createElement)(Pv,{totalImages:o}))},Av=e=>{let{generatedImages:t,isGenerating:n,totalImages:o}=e;return(0,a.createElement)(a.Fragment,null,(t.length>0||!0===n)&&(0,a.createElement)(Rv,{generatedImages:t,isGenerating:n,totalImages:o}),0===t.length&&!1===n&&(0,a.createElement)(kv,null))},Ov={source:"ai-image-generator",content:"ai-image-generator"},Nv=()=>{const{generatedImages:e,isGenerating:t,numberOfImages:n}=rv(),o=t?n+e.length:e.length;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(sv,{classNames:`${_v}`},(0,a.createElement)(yv,null),(0,a.createElement)(fv,null)),(0,a.createElement)(cv,{classes:e.length>0||t?"":"kubio-ai-image-results-empty-wrapper"},(0,Hn.isFreeVersion)()?(0,a.createElement)(Sv,{urlArgs:Ov}):(0,a.createElement)(Av,{generatedImages:e,isGenerating:t,totalImages:o})))},Mv=()=>{const{onSelectImageAction:e,currentSelectedImage:t}=rv();return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"kubio-ai-image-editor-img-holder"},(0,a.createElement)("div",{className:"kubio-ai-image-editor-si-wrapper"},(0,a.createElement)("span",null,(0,a.createElement)("img",{src:t.filename,alt:""})),(0,a.createElement)("div",{className:"kubio-ai-image-editor-action-overlay"},(0,a.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-button",variant:"primary",onClick:()=>{e(t.filename)}},(0,x.__)("Use this image","kubio"))))))},Dv=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"m13.1 16-3.4-4 3.4-4 1.1 1-2.6 3 2.6 3-1.1 1z"})),Bv=()=>{const{backToSection:e}=rv();return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action kubio-ai-button-action-back",onClick:()=>{e(av.generate)},icon:Dv},(0,x.__)("Generate an image","kubio")),(0,a.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-edit-action kubio-ai-button-edit-action-first",onClick:()=>{e(av.generativeFill)},icon:(0,a.createElement)(k.Dashicon,{icon:"admin-appearance"})},(0,a.createElement)("div",{className:"kubio-ai-button-edit-action-content"},(0,a.createElement)("h3",null,(0,x.__)("Generative Fill","kubio")),(0,a.createElement)("p",null,(0,x.__)("Use the brush to highlight an area of the image and specify the changes you want for that area.","kubio")))),(0,a.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-edit-action",onClick:()=>{e(av.variations)},icon:(0,a.createElement)(k.Dashicon,{icon:"format-gallery"})},(0,a.createElement)("div",{className:"kubio-ai-button-edit-action-content"},(0,a.createElement)("h3",null,(0,x.__)("Variations","kubio")),(0,a.createElement)("p",null,(0,x.__)("Describe the changes you would like to make for the current image.","kubio")))))},Lv=()=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)(sv,null,(0,a.createElement)(Bv,null)),(0,a.createElement)(cv,null,(0,a.createElement)(Mv,null))),zv=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M10.8622 8.04053L14.2805 12.0286L10.8622 16.0167L9.72327 15.0405L12.3049 12.0286L9.72327 9.01672L10.8622 8.04053Z"})),Fv=()=>{const{onSelectImageAction:e,backToSection:t,currentSelectedImage:n,prevImageAction:o,nextImageAction:r}=rv();return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"kubio-ai-image-editor-action-top-bar"},(0,a.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action kubio-ai-button-action-back",onClick:()=>{t(av.generate)},icon:Dv},(0,x.__)("Back","kubio")),(0,a.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-button",variant:"primary",onClick:()=>{e(n.filename)}},(0,x.__)("Use this image","kubio"))),(0,a.createElement)("div",{className:"kubio-ai-image-editor-img-holder"},(0,a.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button kubio-ai-nav kubio-ai-prev",onClick:()=>{o(n.filename)},icon:Dv},(0,x.__)("prev","kubio")),(0,a.createElement)("img",{src:n.filename,alt:""}),(0,a.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button kubio-ai-nav kubio-ai-next",onClick:()=>{r(n.filename)},icon:zv},(0,x.__)("next","kubio"))))},Gv=()=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)(sv,null,(0,a.createElement)(fv,null)),(0,a.createElement)(cv,null,(0,a.createElement)(Fv,null))),Hv=e=>{let{sectionTitle:t=(0,x.__)("Variations","kubio")}=e;const[n,o]=(0,a.useState)(!1),{imagePrompt:r,setImagePrompt:i,isGenerating:l,setIsGenerating:s,initialImage:c,aspectRatio:u,imageStyle:d,setImageStyle:p,imageSize:h,setImageSize:g,numberOfImages:f,setNumberOfImages:_,addImageVariations:v,currentSelectedImage:y,backToSection:E,imageType:S,setImageType:w,aiCreditsPerImageCost:C}=rv();(0,a.useEffect)((()=>{(async()=>{if(c){const e=await Cv(c);g(((e,t,n)=>{switch(n){case"auto":return((e,t)=>[Iv(e),Iv(t)])(e,t);case"4/3":return Tv(e,t,4/3);case"3/4":return xv(e,t,3/4);case"3/2":return Tv(e,t,1.5);case"16/9":return Tv(e,t,16/9);case"9/16":return xv(e,t,9/16);default:return[wv,wv]}})(e.naturalWidth,e.naturalHeight,u))}})()}),[c,u,g]);const I=(0,a.useMemo)((()=>(0,m.map)(pv(),((e,t)=>({label:e,value:t})))),[]),T=(0,a.useMemo)((()=>{const e=hv(),t={},n={value:"",label:(0,x.__)("None","kubio")};return Object.keys(e).forEach((o=>{t[o]=(0,m.map)(e[o],((e,t)=>({label:e,value:t}))),t[o].unshift(n)})),t}),[]);(0,a.useEffect)((()=>{var e;o(null!==(e=T[S])&&void 0!==e?e:"")}),[T,I,S]);const R=(0,a.useCallback)((async()=>{if(!l){s(!0);try{const e=await(0,b.aiImageVariations)({imagePrompt:r,currentSelectedImage:y.filename,imageSize:h,imageStyle:d,imageType:S,numberOfImages:f});e.length>0&&v(y.filename,e)}catch(e){console.log(e)}s(!1)}}),[l,s,r,y.filename,h,d,S,f,v]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action kubio-ai-button-action-back",onClick:()=>{E(av.edit)},icon:Dv},(0,x.__)("Back","kubio")),(0,a.createElement)("div",{className:"kubio-ai-sidebar-heading"},(0,a.createElement)("div",{className:"kubio-ai-icon-holder"},(0,a.createElement)(k.Dashicon,{icon:"format-gallery"})),(0,a.createElement)("div",{className:"kubio-ai-text-holder"},(0,a.createElement)("h3",null,t),(0,a.createElement)("p",{className:"kubio-ai-heading-info"},(0,x.__)("Describe the changes you would like to make for the current image.","kubio")))),(0,a.createElement)(k.TextareaControl,{onChange:i,value:r,label:(0,x.__)("Description of changes","kubio"),useDebounce:!1}),(0,a.createElement)(k.RangeControl,{label:(0,x.__)("Samples","kubio"),value:f,min:1,max:4,initialPosition:1,withInputField:!0,onChange:_,className:"kubio-ai-range-with-help",help:(0,x.sprintf)(/* translators: %s is replaced with the number of credits */(0,x.__)("More samples will multiply the cost. Estimated cost: %s credits.","kubio"),C*f)}),(0,a.createElement)(P.GutentagSelectControl,{label:(0,x.__)("Image type","kubio"),inlineLabel:!1,value:S,options:I,onChange:e=>{var t;w(e),p(""),o(null!==(t=T[e])&&void 0!==t&&t)},size:"__unstable-large"}),!1!==n&&(0,a.createElement)(P.GutentagSelectControl,{label:(0,x.__)("Image style","kubio"),inlineLabel:!1,value:d,options:n,onChange:p,size:"__unstable-large",disabled:!1===n}),(0,a.createElement)(mv,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-sidebar-button",onClick:R,isBusy:l,disabled:l,variant:"primary",label:(0,x.__)("Create variations","kubio"),loadingMessage:(0,x.__)("Please wait, this may take a few minutes.","kubio"),infoMessage:(0,x.__)("All generated images will be saved in the Media Library.","kubio")}))},Uv=e=>{let{grid:t=1}=e;const{currentSelectedImage:n}=rv();return(0,a.createElement)("div",{className:T()("kubio-ai-image-generator-single-image","kubio-ai-original",`kubio-ai-single-image-grid-${t}`),"data-label":(0,x.__)("Original","kubio")},(0,a.createElement)("img",{src:n.filename,alt:""}))},Wv=()=>{const{getImageVariations:e}=rv(),t=e();return(0,a.createElement)("div",{className:`kubio-ai-generated-images kubio-ai-generated-images-${t.length+1}`},(0,a.createElement)(Uv,{grid:t.length+1}),t.length>0&&t.map(((e,n)=>(0,a.createElement)(uv,{image:e,key:n,grid:t.length+1}))))},jv=()=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)(sv,null,(0,a.createElement)(Hv,null)),(0,a.createElement)(cv,null,(0,a.createElement)(Wv,null)));function Vv(e,t,n,o,r,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(o,r)}function Kv(){return Kv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Kv.apply(this,arguments)}var $v={exports:{}};!function(e){var t=function(e){var t,n=Object.prototype,o=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,o){var r=t&&t.prototype instanceof f?t:f,i=Object.create(r.prototype),a=new x(o||[]);return i._invoke=function(e,t,n){var o=d;return function(r,i){if(o===p)throw new Error("Generator is already running");if(o===h){if("throw"===r)throw i;return R()}for(n.method=r,n.arg=i;;){var a=n.delegate;if(a){var l=C(a,n);if(l){if(l===g)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=u(e,t,n);if("normal"===s.type){if(o=n.done?h:m,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}(e,n,a),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",g={};function f(){}function b(){}function _(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,k=y&&y(y(P([])));k&&k!==n&&o.call(k,i)&&(v=k);var E=_.prototype=f.prototype=Object.create(v);function S(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(r,i,a,l){var s=u(e[r],e,i);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(d).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,l)}))}l(s.arg)}var r;this._invoke=function(e,o){function i(){return new t((function(t,r){n(e,o,t,r)}))}return r=r?r.then(i,i):i()}}function C(e,n){var o=e.iterator[n.method];if(o===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=u(o,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;var i=r.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function n(){for(;++r<e.length;)if(o.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:R}}function R(){return{value:t,done:!0}}return b.prototype=_,s(E,"constructor",_),s(_,"constructor",b),b.displayName=s(_,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,s(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},S(w.prototype),s(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,o,r,i){void 0===i&&(i=Promise);var a=new w(c(t,n,o,r),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),s(E,l,"Generator"),s(E,i,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},e.values=P,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(o,r){return l.type="throw",l.arg=e,n.next=o,r&&(n.method="next",n.arg=t),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;T(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,o){return this.delegate={iterator:P(e),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}($v);var qv=$v.exports,Yv=function(e){var t=e.paths,n=e.id,o=e.strokeWidth,r=e.strokeColor,i=e.command,a=void 0===i?Qv:i;if(1===t.length){var l=t[0],s=l.x,c=l.y,u=o/2;return io.createElement("circle",{key:n,id:n,cx:s,cy:c,r:u,stroke:r,fill:r})}var d=t.reduce((function(e,t,n,o){return 0===n?"M "+t.x+","+t.y:e+" "+a(t,n,o)}),"");return io.createElement("path",{key:n,id:n,d,fill:"none",strokeLinecap:"round",stroke:r,strokeWidth:o})},Xv=function(e){var t,n,o,r,i=e.current,a=e.next,l=e.previous,s=e.reverse,c=(t=l||i,o=(n=a||i).x-t.x,r=n.y-t.y,{length:Math.sqrt(Math.pow(o,2)+Math.pow(r,2)),angle:Math.atan2(r,o)}),u=c.angle+(s?Math.PI:0),d=.2*c.length;return[i.x+Math.cos(u)*d,i.y+Math.sin(u)*d]},Qv=function(e,t,n){var o=null,r=null;switch(t){case 0:var i=Xv({current:e});o=i[0],r=i[1];break;case 1:var a=Xv({current:n[t-1],next:e});o=a[0],r=a[1];break;default:var l=Xv({current:n[t-1],previous:n[t-2],next:e});o=l[0],r=l[1]}var s=Xv({current:e,previous:n[t-1],next:n[t+1],reverse:!0});return"C "+o+","+r+" "+s[0]+","+s[1]+" "+e.x+", "+e.y},Zv=function(e){var t=e.id,n=e.paths;return io.createElement(io.Fragment,null,n.map((function(e,n){return io.createElement(Yv,{key:t+"__"+n,paths:e.paths,id:t+"__"+n,strokeWidth:e.strokeWidth,strokeColor:e.strokeColor,command:Qv})})))},Jv=function(e){return new Promise((function(t,n){var o=new Image;o.addEventListener("load",(function(){o.width>0&&t(o),n("Image not found")})),o.addEventListener("error",(function(e){return n(e)})),o.src=e,o.setAttribute("crossorigin","anonymous")}))};function ey(e){var t,n=null==(t=e.firstChild)?void 0:t.cloneNode(!0),o=e.offsetWidth,r=e.offsetHeight;return n.setAttribute("viewBox","0 0 "+o+" "+r),n.setAttribute("width",o.toString()),n.setAttribute("height",r.toString()),{svgCanvas:n,width:o,height:r}}var ty=io.forwardRef((function(e,t){var n=e.paths,o=e.isDrawing,r=e.onPointerDown,i=e.onPointerMove,a=e.onPointerUp,l=e.id,s=void 0===l?"react-sketch-canvas":l,c=e.width,u=void 0===c?"100%":c,d=e.height,m=void 0===d?"100%":d,p=e.className,h=void 0===p?"react-sketch-canvas":p,g=e.canvasColor,f=void 0===g?"red":g,b=e.backgroundImage,_=void 0===b?"":b,v=e.exportWithBackgroundImage,y=void 0!==v&&v,k=e.preserveBackgroundImageAspectRatio,E=void 0===k?"none":k,S=e.allowOnlyPointerType,w=void 0===S?"all":S,C=e.style,I=void 0===C?{border:"0.0625rem solid #9c9c9c",borderRadius:"0.25rem"}:C,T=e.svgStyle,x=void 0===T?{}:T,P=io.useRef(null),R=function(e){var t,n,o,r=null==(t=P.current)?void 0:t.getBoundingClientRect(),i=null!=(n=window.scrollX)?n:0,a=null!=(o=window.scrollY)?o:0;return r?{x:e.pageX-r.left-i,y:e.pageY-r.top-a}:{x:0,y:0}},A=function(e){"mouse"===e.pointerType&&0!==e.button||"all"!==w&&e.pointerType!==w||a()};io.useImperativeHandle(t,(function(){return{exportImage:function(e){return new Promise(function(){var t,n=(t=qv.mark((function t(n,o){var r,i,a,l,s,c,u,d;return qv.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=P.current){t.next=4;break}throw Error("Canvas not rendered yet");case 4:return i=ey(r),a=i.svgCanvas,l=i.width,s=i.height,c="data:image/svg+xml;base64,"+btoa(a.outerHTML),t.next=8,Jv(c);case 8:if(t.t0=t.sent,u=[t.t0],!y){t.next=21;break}return t.prev=11,t.next=14,Jv(_);case 14:d=t.sent,u.push(d),t.next=21;break;case 18:t.prev=18,t.t1=t.catch(11),console.warn("exportWithBackgroundImage props is set without a valid background image URL. This option is ignored");case 21:Promise.all(u).then((function(t){var o=document.createElement("canvas");o.setAttribute("width",l.toString()),o.setAttribute("height",s.toString());var r=o.getContext("2d");if(!r)throw Error("Canvas not rendered yet");t.reverse().forEach((function(e){r.drawImage(e,0,0)})),n(o.toDataURL("image/"+e))})).catch((function(e){throw e})),t.next=27;break;case 24:t.prev=24,t.t2=t.catch(0),o(t.t2);case 27:case"end":return t.stop()}}),t,null,[[0,24],[11,18]])})),function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function a(e){Vv(i,o,r,a,l,"next",e)}function l(e){Vv(i,o,r,a,l,"throw",e)}a(void 0)}))});return function(_x,e){return n.apply(this,arguments)}}())},exportSvg:function(){return new Promise((function(e,t){try{var n,o=null!=(n=P.current)?n:null;if(null!==o){var r,i,a=ey(o).svgCanvas;if(y)return void e(a.outerHTML);null==(r=a.querySelector("#"+s+"__background"))||r.remove(),null==(i=a.querySelector("#"+s+"__canvas-background"))||i.setAttribute("fill",f),e(a.outerHTML)}t(new Error("Canvas not loaded"))}catch(e){t(e)}}))}}})),io.useEffect((function(){return document.addEventListener("pointerup",A),function(){document.removeEventListener("pointerup",A)}}),[A]);var O=n.filter((function(e){return!e.drawMode})),N=0,M=n.reduce((function(e,t){return t.drawMode?(void 0===e[N]&&(e[N]=[]),e[N].push(t),e):(N+=1,e)}),[[]]);return io.createElement("div",{role:"presentation",ref:P,className:h,style:Kv({touchAction:"none",width:u,height:m},I),"touch-action":"none",onPointerDown:function(e){if(!("all"!==w&&e.pointerType!==w||"mouse"===e.pointerType&&0!==e.button)){var t=R(e);r(t)}},onPointerMove:function(e){if(o&&("all"===w||e.pointerType===w)){var t=R(e);i(t)}},onPointerUp:A},io.createElement("svg",{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:Kv({width:"100%",height:"100%"},x),id:s},io.createElement("g",{id:s+"__eraser-stroke-group",display:"none"},io.createElement("rect",{id:s+"__mask-background",x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),O.map((function(e,t){return io.createElement(Yv,{key:s+"__eraser-"+t,id:s+"__eraser-"+t,paths:e.paths,strokeColor:"#000000",strokeWidth:e.strokeWidth})}))),io.createElement("defs",null,_&&io.createElement("pattern",{id:s+"__background",x:"0",y:"0",width:"100%",height:"100%",patternUnits:"userSpaceOnUse"},io.createElement("image",{x:"0",y:"0",width:"100%",height:"100%",xlinkHref:_,preserveAspectRatio:E})),O.map((function(e,t){return io.createElement("mask",{id:s+"__eraser-mask-"+t,key:s+"__eraser-mask-"+t,maskUnits:"userSpaceOnUse"},io.createElement("use",{href:"#"+s+"__mask-background"}),Array.from({length:O.length-t},(function(e,n){return n+t})).map((function(e){return io.createElement("use",{key:e.toString(),href:"#"+s+"__eraser-"+e.toString()})})))}))),io.createElement("g",{id:s+"__canvas-background-group"},io.createElement("rect",{id:s+"__canvas-background",x:"0",y:"0",width:"100%",height:"100%",fill:_?"url(#"+s+"__background)":f})),M.map((function(e,t){return io.createElement("g",{id:s+"__stroke-group-"+t,key:s+"__stroke-group-"+t,mask:"url(#"+s+"__eraser-mask-"+t+")"},io.createElement(Zv,{id:s,paths:e}))}))))})),ny=io.forwardRef((function(e,t){var n=e.id,o=void 0===n?"react-sketch-canvas":n,r=e.width,i=void 0===r?"100%":r,a=e.height,l=void 0===a?"100%":a,s=e.className,c=void 0===s?"":s,u=e.canvasColor,d=void 0===u?"white":u,m=e.strokeColor,p=void 0===m?"red":m,h=e.backgroundImage,g=void 0===h?"":h,f=e.exportWithBackgroundImage,b=void 0!==f&&f,_=e.preserveBackgroundImageAspectRatio,v=void 0===_?"none":_,y=e.strokeWidth,k=void 0===y?4:y,E=e.eraserWidth,S=void 0===E?8:E,w=e.allowOnlyPointerType,C=void 0===w?"all":w,I=e.style,T=void 0===I?{border:"0.0625rem solid #9c9c9c",borderRadius:"0.25rem"}:I,x=e.svgStyle,P=void 0===x?{}:x,R=e.onChange,A=void 0===R?function(e){}:R,O=e.onStroke,N=void 0===O?function(e,t){}:O,M=e.withTimestamp,D=void 0!==M&&M,B=io.createRef(),L=io.useState(!0),z=L[0],F=L[1],G=io.useState(!1),H=G[0],U=G[1],W=io.useState([]),j=W[0],V=W[1],K=io.useState([]),$=K[0],q=K[1],Y=io.useState([]),X=Y[0],Q=Y[1],Z=io.useCallback((function(){var e,t,n=null!=(e=null==(t=X.slice(-1))?void 0:t[0])?e:null;null!==n?N(n,!n.drawMode):console.warn("No stroke found!")}),[H]);return io.useEffect((function(){Z()}),[H]),io.useEffect((function(){A(X)}),[X]),io.useImperativeHandle(t,(function(){return{eraseMode:function(e){F(!e)},clearCanvas:function(){V([].concat(X)),Q([])},undo:function(){if(0!==j.length)return Q([].concat(j)),void V([]);q((function(e){return[].concat(e,X.slice(-1))})),Q((function(e){return e.slice(0,-1)}))},redo:function(){0!==$.length&&(Q((function(e){return[].concat(e,$.slice(-1))})),q((function(e){return e.slice(0,-1)})))},exportImage:function(e){var t,n=null==(t=B.current)?void 0:t.exportImage;if(n)return n(e);throw Error("Export function called before canvas loaded")},exportSvg:function(){return new Promise((function(e,t){var n,o=null==(n=B.current)?void 0:n.exportSvg;o?o().then((function(t){e(t)})).catch((function(e){t(e)})):t(Error("Export function called before canvas loaded"))}))},exportPaths:function(){return new Promise((function(e,t){try{e(X)}catch(e){t(e)}}))},loadPaths:function(e){Q((function(t){return[].concat(t,e)}))},getSketchingTime:function(){return new Promise((function(e,t){D||t(new Error("Set 'withTimestamp' prop to get sketching time"));try{e(X.reduce((function(e,t){var n,o,r=null!=(n=t.startTimestamp)?n:0;return e+((null!=(o=t.endTimestamp)?o:0)-r)}),0))}catch(e){t(e)}}))},resetCanvas:function(){V([]),q([]),Q([])}}})),io.createElement(ty,{ref:B,id:o,width:i,height:l,className:c,canvasColor:d,backgroundImage:g,exportWithBackgroundImage:b,preserveBackgroundImageAspectRatio:v,allowOnlyPointerType:C,style:T,svgStyle:P,paths:X,isDrawing:H,onPointerDown:function(e){U(!0),q([]);var t={drawMode:z,strokeColor:z?p:"#000000",strokeWidth:z?k:S,paths:[e]};D&&(t=Kv({},t,{startTimestamp:Date.now(),endTimestamp:0})),Q((function(e){return[].concat(e,[t])}))},onPointerMove:function(e){if(H){var t=X.slice(-1)[0],n=Kv({},t,{paths:[].concat(t.paths,[e])});Q((function(e){return[].concat(e.slice(0,-1),[n])}))}},onPointerUp:function(){var e,t;if(H&&(U(!1),D)){var n=null!=(e=null==(t=X.slice(-1))?void 0:t[0])?e:null;if(null!==n){var o=Kv({},n,{endTimestamp:Date.now()});Q((function(e){return[].concat(e.slice(0,-1),[o])}))}}}})}));const oy=(0,a.createContext)({}),ry=()=>(0,a.useContext)(oy),iy=[{key:20,name:"20",className:"kubio-ai-stroke-option kubio-ai-stroke-20"},{key:30,name:"30",className:"kubio-ai-stroke-option kubio-ai-stroke-30"},{key:40,name:"40",className:"kubio-ai-stroke-option kubio-ai-stroke-40"},{key:50,name:"50",className:"kubio-ai-stroke-option kubio-ai-stroke-50"}],ay=()=>{const{undoImageAction:e,redoImageAction:t,setStrokeSize:n,strokeSize:o,paintActions:r,resetCanvasAction:i,generatedImagesActions:l}=ry(),{onSelectImageAction:s,currentSelectedImage:c}=rv();return(0,a.createElement)("div",{className:"kubio-image-editor-mask-editor-toolbar"},(0,a.createElement)("div",{className:"kubio-image-editor-toolbar-buttons"},(0,a.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action",onClick:e,icon:eg,disabled:!l.undo,showTooltip:!0,title:(0,x.__)("Undo","kubio"),iconSize:24}),(0,a.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action",onClick:t,icon:Qh,disabled:!l.redo,showTooltip:!0,title:(0,x.__)("Redo","kubio"),iconSize:24}),(0,a.createElement)("div",{className:"kubio-ai-h-divider"}),(0,a.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action kubio-ai-button-action-revert",onClick:i,icon:ye.EraserIcon,disabled:!r.isDirty,showTooltip:!0,title:(0,x.__)("Clear drawing","kubio"),iconSize:16}),(0,a.createElement)(k.CustomSelectControl,{__nextUnconstrainedWidth:!0,hideLabelFromVision:!0,label:"Stroke Size",options:iy,onChange:e=>{let{selectedItem:t}=e;n(t.key)},value:iy.find((e=>e.key===o))}),(0,a.createElement)("div",{className:"kubio-ai-h-divider"}),(0,a.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-button",variant:"primary",onClick:()=>{s(c.filename)}},(0,x.__)("Use this image","kubio"))))},ly=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{radius:t=30}=e,n=btoa(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="${t}" height="${t}">\n        <path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z" fill-opacity="0.7" />\n    </svg>`),o=Math.floor(t/2)+1;return{cursor:`url("data:image/svg+xml;base64,${n}") ${o} ${o}, auto`,borderRadius:"100%"}},sy=()=>{const{currentSelectedImage:e}=rv(),{setImageSize:t,imageSize:n,strokeSize:o,canvasRef:r,onStrokeAction:i}=ry(),[l,s]=(0,a.useState)(ly({radius:o})),[c,u]=(0,a.useState)([n[0],Math.min(512,n[1])]);(0,a.useEffect)((()=>{(async()=>{if(e){const n=await Cv(e.filename);t([n.naturalWidth,n.naturalHeight])}})()}),[e.filename]),(0,a.useEffect)((()=>{const e=Math.min(550,n[1]),t=Math.round(n[0]*(e/n[1]));u([t,e])}),[n]),(0,a.useEffect)((()=>{s(ly({radius:o}))}),[o]);const d=(0,a.useRef)();return(0,a.useEffect)((()=>{if(!d.current)return;const e=new window.MutationObserver((function(){const e=d.current.querySelector("#react-sketch-canvas__stroke-group-0");null==e||e.removeAttribute("mask")}));return e.observe(d.current,{childList:!0,subtree:!0}),()=>{e.disconnect()}}),[d.current]),(0,a.createElement)("div",{className:"kubio-ai-image-generative-editor",ref:d},n[0]>0&&(0,a.createElement)(ny,{ref:r,width:c[0],height:c[1],strokeWidth:o,className:"kubio-ai-generative-editor",strokeColor:"black",backgroundImage:e.filename,canvasColor:"white",exportWithBackgroundImage:!1,style:l,onStroke:i}),(0,a.createElement)(ay,null))},cy=()=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)(sy,null)),uy=()=>{const[e,t]=(0,a.useState)(""),n=(0,a.useRef)(!1),{backToSection:o,isGenerating:r,setIsGenerating:i,currentSelectedImage:l,addImageVersion:s,setCurrentSelectedImage:c}=rv(),{exportSketchImage:u,resetCanvasAction:d,addGeneratedImageToQueue:m}=ry(),p=(0,a.useCallback)((async()=>{if(!r){i(!0);try{const t=await(0,b.aiImageMask)({imagePrompt:e,currentSelectedImage:l.filename,maskImage:await u()});if(""!==t){const e=s(t[0]);d(),!1===n.current&&(n.current=e.currentImage,m(l)),m(e.newImage)}}catch(e){console.log(e)}i(!1)}}),[r,i,e,l,u,s,d,m]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action kubio-ai-button-action-back",onClick:()=>{!1!==n.current&&c(n.current),o("EDIT")},icon:Dv},(0,x.__)("Back","kubio")),(0,a.createElement)("div",{className:"kubio-ai-sidebar-heading"},(0,a.createElement)("div",{className:"kubio-ai-icon-holder"},(0,a.createElement)(k.Dashicon,{icon:"admin-appearance"})),(0,a.createElement)("div",{className:"kubio-ai-text-holder"},(0,a.createElement)("h3",null,(0,x.__)("Generative Fill","kubio")),(0,a.createElement)("p",{className:"kubio-ai-heading-info"},(0,x.__)("Use the brush to highlight an area of the image and specify the changes you want for that area.","kubio")))),(0,a.createElement)(k.TextareaControl,{onChange:t,value:e,label:(0,x.__)("Description of changes","kubio"),useDebounce:!1}),(0,a.createElement)(mv,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-sidebar-button",onClick:p,isBusy:r,disabled:r,variant:"primary",label:(0,x.__)("Generate fill","kubio"),loadingMessage:(0,x.__)("Please wait, this may take a few minutes.","kubio"),infoMessage:(0,x.__)("All generated images will be saved in the Media Library.","kubio")}))},dy=()=>{const e=(()=>{const e={cursor:-1,queue:[]},t={undo:!1,redo:!1,isDirty:!1},n=(0,a.useRef)(!1),[o,r]=(0,a.useState)(30),[i,l]=(0,a.useState)([0,0]),[s,c]=(0,a.useState)(!1),{setCurrentSelectedImage:u}=rv(),[d,m]=(0,a.useState)(e),[p,h]=(0,a.useState)(!1),[g,f]=(0,a.useState)(t),[b,_]=(0,a.useState)(t),[v,y]=(0,a.useState)(e),k=()=>{f({undo:d.cursor>-1,redo:d.cursor<d.queue.length-1,isDirty:!0})},E=e=>{const t=d;t.cursor=t.cursor+e,m((()=>t)),k()},S=()=>{m(e),f(t)},w=()=>{_({undo:v.cursor>0,redo:v.cursor<v.queue.length-1})},C=e=>{const t=v;t.cursor=t.cursor+e,y((()=>t)),u(t.queue[t.cursor]),w()};return{canvasRef:n,resetCanvasAction:()=>{S(),n.current.resetCanvas()},redoAction:()=>{E(1),n.current.redo()},undoAction:()=>{E(-1),n.current.undo()},strokeSize:o,setStrokeSize:r,exportSketchImage:async()=>{const e=await n.current.exportImage("png"),t=document.createElement("canvas");t.width=i[0],t.height=i[1];const o=t.getContext("2d");o.clearRect(0,0,t.width,t.height),o.fillStyle="white",o.fillRect(0,0,t.width,t.height);const r=new window.Image;return r.src=e,await r.decode(),o.drawImage(r,0,0,i[0],i[1]),t.toDataURL()},imageSize:i,setImageSize:l,onStrokeAction:()=>{if(!1===p)return void h(!0);const e=d;let t=e.queue;e.cursor=e.cursor>=-1?e.cursor+1:-1,e.cursor>-1&&(t=e.queue.slice(0,e.cursor)),t.push(1),e.queue=t,m(e),k(),h(!1)},paintActions:g,newImageGenerated:s,setNewImageGenerated:c,resetPaintQueue:S,clearCanvasAction:()=>{E(-1),n.current.clearCanvas()},undoImageAction:()=>{C(-1)},redoImageAction:()=>{C(1)},generatedImagesActions:b,addGeneratedImageToQueue:e=>{const t=v;let n=t.queue;t.cursor<t.queue.length-1&&(n=t.queue.slice(0,t.cursor+1)),n.push(e),t.cursor=n.length-1,t.queue=n,y((()=>t)),w()}}})();return(0,a.createElement)(oy.Provider,{value:e},(0,a.createElement)(sv,null,(0,a.createElement)(uy,null)),(0,a.createElement)(cv,null,(0,a.createElement)(cy,null)))},my=(0,a.createContext)({}),py=()=>(0,a.useContext)(my),hy={imagePrompt:"",imageSize:"medium",imageOrientation:"original",aiPrompt:"",initialSearch:!1},gy=()=>(0,a.createElement)("div",{className:"kubio-ai-image-results-empty"},(0,a.createElement)(k.Icon,{icon:ye.SearchImageIcon}),(0,a.createElement)("p",null,(0,x.__)("Your search results will appear here.","kubio"))),fy=e=>{let{image:t,saveImage:n,canSave:o}=e;const{isGenerating:r}=rv();return(0,a.createElement)("div",{className:"kubio-ai-image-generator-single-image"},(0,a.createElement)("img",{src:t["src.medium"],alt:""}),(0,a.createElement)("div",{className:"kubio-ai-image-overlay"},(0,a.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-button",variant:"primary",isBusy:r,disabled:r,onClick:()=>{n(t.url,!0)}},(0,x.__)("Use this image","kubio")),(0,a.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action",onClick:()=>{n(t.url)},disabled:!o,isBusy:r},o?(0,x.__)("Save for later","kubio"):(0,x.__)("Saved","kubio"))))},by=()=>{const e=(0,a.useRef)(),{foundImages:t,foundImagePages:n,galleryPage:o,searchForImages:r,isSearching:i,savedImages:l,saveImage:s,imageSearchOptions:c}=py(),{isGenerating:u,setIsGenerating:d,onSelectImageAction:m}=rv(),[p,h]=(0,a.useState)(!1);(0,a.useEffect)((()=>{h(o<n)}),[n,o]);const g=(0,a.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(u||l.has(e)){const n=l.get(e);t&&m(n,c.aiPrompt)}d(!0);try{const n=await(0,b.aiSearchedImageSave)({selectedImage:e});""!==n&&(s(e,n.url),t&&m(n.url,c.aiPrompt))}catch(e){console.log(e)}d(!1)}),[c.aiPrompt,u,m,s,l,d]);return(0,a.createElement)("div",{className:"kubio-ai-generated-images--infinite-list",ref:e},(0,a.createElement)("div",{className:"kubio-ai-search-images "},t.map(((e,t)=>(0,a.createElement)(fy,{image:e,key:t,saveImage:g,canSave:!l.has(e.url)})))),p&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"kubio-ai-more"},(0,a.createElement)(k.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-load-more-button",variant:"primary",onClick:r,isBusy:i,disabled:i},(0,x.__)("Get more images","kubio"))),(0,a.createElement)("p",{className:"kubio-by-pexels",dangerouslySetInnerHTML:{__html:(0,x.sprintf)(// translators: %s is the url to pexels
(0,x.__)("The media items like photos and videos are provided by %s","kubio"),"<a href='https://www.pexels.com/' target='_blank'>Pexels</a>")}})))},_y=[{value:"large",label:(0,x.__)("Large","kubio")},{value:"medium",label:(0,x.__)("Medium","kubio")},{value:"small",label:(0,x.__)("Small","kubio")},{value:"tiny",label:(0,x.__)("Tiny","kubio")}],vy=[{value:"landscape",label:(0,x.__)("Landscape","kubio")},{value:"portrait",label:(0,x.__)("Portrait","kubio")},{value:"square",label:(0,x.__)("Square","kubio")},{value:"original",label:(0,x.__)("Same as current image","kubio")}],yy=()=>{const{imageSearchOptions:e,setSearchOption:t,isSearching:n,setIsSearching:o,searchForImages:r}=py(),{isInitialSearch:i,setIsInitialSearch:l,initialPromptText:s,initialImage:c}=rv();return(0,a.useEffect)((()=>{(async()=>{const n=await(async e=>{const t=await Cv(e),n=t.width/t.height;switch(!0){case 1===n:return"square";case n>1:return"landscape";case n<1:return"portrait"}return"original"})(c);t("imageOrientation",n),!1===i&&""!==e.aiPrompt&&(o(!0),r(!1),l(!0),s.current="")})()}),[c]),(0,a.createElement)(a.Fragment,null,(0,a.createElement)("p",{className:"kubio-ai-info"},(0,x.__)("Easily search for free images from Pexels. Just type an image description and Kubio AI will extract search terms to find relevant images.","kubio")),(0,a.createElement)(k.TextareaControl,{onChange:e=>{t("imagePrompt",e)},value:e.imagePrompt,label:(0,x.__)("Image Description","kubio"),useDebounce:!1}),(0,a.createElement)(P.GutentagSelectControl,{label:(0,x.__)("Image Orientation","kubio"),inlineLabel:!1,value:e.imageOrientation,options:vy,onChange:e=>{t("imageOrientation",e)},size:"__unstable-large"}),(0,a.createElement)(P.GutentagSelectControl,{label:(0,x.__)("Saved image size","kubio"),inlineLabel:!1,value:e.imageSize,options:_y,onChange:e=>{t("imageSize",e)},size:"__unstable-large"}),(0,a.createElement)(mv,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-sidebar-button",onClick:()=>{o(!0),r(!0)},isBusy:n,disabled:n||0===e.imagePrompt.length,variant:"primary",label:(0,x.__)("Search image","kubio"),loadingMessage:(0,x.__)("Please wait, this may take a few minutes.","kubio")}))},ky=()=>{const{foundImagePages:e}=py();return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(sv,null,(0,a.createElement)(yv,null),(0,a.createElement)(yy,null)),(0,a.createElement)(cv,{classes:"kubio-ai-image-editor-content-search"},e>0?(0,a.createElement)(by,null):(0,a.createElement)(gy,null)))},Ey=e=>{let{onClose:t,initialImage:n,onSelectImage:o}=e;const r=rv(),{setInitialImage:i,editorSection:l,editorTab:s}=r;i(n),r.onSelectImageAction=function(e){o(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:""),t()};const c=(()=>{const{initialImage:e,initialPromptText:t}=rv(),[n,o]=(0,a.useState)(!1),[r,i]=(0,a.useState)([]),[l,s]=(0,a.useState)(1),[c,u]=(0,a.useState)(0),[d,m]=(0,a.useState)(new Map),[p,h]=(0,a.useState)({...hy,imagePrompt:t.current,aiPrompt:t.current}),g=(e,t)=>{h((n=>(n[e]=t,{...n})))},f=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s(e.page+1),u(e.total_pages),i(!0===t?null==e?void 0:e.items:t=>t.concat(null==e?void 0:e.items))},_=(0,a.useCallback)((async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!n){o(!0);try{const n=await(0,b.aiSearchImages)({initialImage:e,page:l,search:p.imagePrompt,imageSize:p.imageSize,imageOrientation:p.imageOrientation,aiPrompt:t?"":p.aiPrompt});n&&(f(n,t),n.ai_query&&g("aiPrompt",n.ai_query))}catch(e){console.log(e)}o(!1)}}),[n,e,l,p.imagePrompt,p.imageSize,p.imageOrientation,p.aiPrompt]);return{imageSearchOptions:p,setSearchOption:g,isSearching:n,setIsSearching:o,setImageGallery:f,foundImages:r,galleryPage:l,foundImagePages:c,searchForImages:_,savedImages:d,setSavedImages:m,saveImage:(e,t)=>{m(d.set(e,t))}}})();return(0,a.createElement)(my.Provider,{value:c},(0,a.createElement)(k.Modal,{className:"kubio-ai-image-editor kubio-ai-wizard-modal",overlayClassName:"kubio-ai-close-modal",title:(0,a.createElement)(k.Flex,null,(0,a.createElement)(k.FlexBlock,{className:"kubio-ai-wizard-modal__title"},(0,a.createElement)(k.Icon,{icon:ye.KubioAI,className:"kubio-ai-logo-colored kubio-ai-logo-animated"}),lv(s)),(0,a.createElement)(k.FlexItem,null,(0,a.createElement)(k.Button,{onClick:t,icon:$t,label:(0,x.__)("Close","kubio")}))),isDismissible:!1},(0,a.createElement)("div",{className:T()("kubio-ai-image-editor-wrapper",bv)},s===iv.imageGenerate.slug&&(0,a.createElement)(a.Fragment,null,l===av.generate&&(0,a.createElement)(Nv,null),l===av.edit&&(0,a.createElement)(Lv,null),l===av.view&&(0,a.createElement)(Gv,null),l===av.generativeFill&&(0,a.createElement)(dy,null),l===av.variations&&(0,a.createElement)(jv,null)),s===iv.imageSearch.slug&&(0,a.createElement)(a.Fragment,null,l===av.imageSearch&&(0,a.createElement)(ky,null)))))},Sy=e=>{let{onClose:t,onSelectImage:n,initialImage:o,initialPrompt:r}=e;const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const[n,o]=(0,a.useState)(av.imageSearch),[r,i]=(0,a.useState)(iv.imageSearch.slug),[l,s]=(0,a.useState)(""),[c,u]=(0,a.useState)(!1),[d,p]=(0,a.useState)(e),[h,g]=(0,a.useState)(),[f,_]=(0,a.useState)([]),v=m.noop,[y,k]=(0,a.useState)(1),[E,S]=(0,a.useState)("1024x1024"),[w,C]=(0,a.useState)(""),[I,T]=(0,a.useState)("photographic"),[x,P]=(0,a.useState)([1024,1024]),R=(0,a.useRef)(t),[A,O]=(0,a.useState)(!1),[N]=(0,b.useAIServiceInfo)(),{aiImageCost:M=150}=N,D=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"filename";return f.findIndex((n=>n[t]===e))},B=function(e){return{filename:e,...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isVariation:!1,isVersion:!1}}};return{editorSection:n,setEditorSection:o,imagePrompt:l,setImagePrompt:s,isGenerating:c,setIsGenerating:u,initialImage:d,setInitialImage:p,generatedImages:f,setGeneratedImages:_,onSelectImageAction:v,editImageAction:e=>{g(e),o(av.edit)},viewImageAction:e=>{g(e),o(av.view)},currentSelectedImage:h,setCurrentSelectedImage:g,backToSection:e=>{o(e)},prevImageAction:e=>{const t=D(e);-1!==t&&g(0===t?f[f.length-1]:f[t-1])},nextImageAction:e=>{const t=D(e);-1!==t&&(t===f.length-1?g(f[0]):g(f[t+1]))},aspectRatio:E,setAspectRatio:S,imageStyle:w,setImageStyle:C,imageSize:x,setImageSize:P,numberOfImages:y,setNumberOfImages:k,replaceWithEditedImage:e=>{const t=D(h.filename);if(t>-1){const n=f[t];n.filename=e,g(n),_((e=>(e[t]=n,[...e])))}},saveGeneratedImages:e=>{const t=f;e.forEach((e=>{t.push(B(e))})),_(t)},addImageVariations:(e,t)=>{const n=f;return t.forEach((t=>{n.push(B(t,{isVariation:e}))})),n},getImageVariations:()=>f.filter((e=>e.isVariation===h.filename)),saveNewImage:e=>{const t=B(e);return _((e=>[...e,t])),t},imageType:I,setImageType:T,editorTab:r,setEditorTab:i,setImageSizeFromOptions:e=>{const t=e.split("x");P([t[0],t[1]])},addImageVersion:e=>{const t=f,n=B(e,{isVersion:h.filename});t.push(n);const o={newImage:n,currentImage:h};return _(t),g(n),o},getPreviousImageVersion:()=>{const e=f.find((e=>e.filename===h.filename));if(e){const t=f.find((t=>t.filename===e.isVersion));t&&g(t)}},initialPromptText:R,isInitialSearch:A,setIsInitialSearch:O,aiCreditsPerImageCost:M}}(o,r),{getAIInfo:l=m.noop}=(0,w.select)(h.STORE_KEY)||{},{remainingCredits:s=0}=l()||{},c=s>0;return c||(0,u.doAction)("kubio.ai.zero_credits"),(0,a.createElement)(ov.Provider,{value:i},c&&(0,a.createElement)(Ey,{onClose:t,onSelectImage:n,initialImage:o}))},wy=e=>{let{initialImage:t,onChange:n,isSmallButton:o=!1,initialPrompt:r}=e;const i=(0,a.useRef)(),[l,s]=(0,a.useState)(""),[c,u]=lt(),d=(0,a.useCallback)((()=>{u((()=>{s((e=>!e))}))}),[u]);return(0,a.createElement)(a.Fragment,null,c,(0,a.createElement)(k.Button,{ref:i,isSmall:o,className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button",onClick:d,icon:ye.KubioAI}),l&&(0,a.createElement)(Sy,{className:"kubio-options-popover",anchor:i.current,onClose:()=>s(!1),onSelectImage:n,initialImage:t,initialPrompt:r}))},{MULTIPLE_IMAGES:Cy,IMAGE:Iy}=(0,Kt.getNamesOfBlocks)(),Ty=[Cy,Iy],xy=e=>{let{value:t,onChange:n,onlyImages:o=!0}=e;const r=(0,a.useRef)(),[i,l]=(0,a.useState)(""),[s,c]=lt(),u=(0,a.useCallback)((()=>{c((()=>{l((e=>!e))}))}),[c]),d=(0,w.useSelect)((e=>e(h.STORE_KEY).isAICapabilityEnabled()),[]);return o?(0,a.createElement)(a.Fragment,null,s,d&&(0,a.createElement)(k.MenuItem,{ref:r,onClick:u,icon:ye.KubioAI},(0,x.__)("Replace with AI","kubio")),i&&(0,a.createElement)(Sy,{className:"kubio-options-popover",anchor:r.current,onClose:()=>l(!1),onSelectImage:(e,t)=>{n({url:e,id:"",caption:t})},initialImage:t})):(0,a.createElement)(a.Fragment,null)},Py=(0,E.createHigherOrderComponent)((e=>t=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)(xy,t),(0,a.createElement)(e,t))),"withImageToolbar");(0,u.addFilter)("kubio.blockEditor.mediaReplaceFlow.afterUploadComponent","kubio.control.ImageToolbar",Py,4);const Ry=e=>{let{value:t,BlockEdit:n,...o}=e;const[r,i]=lt(),l=(0,a.useRef)(),c=(0,a.useRef)(""),[u,d]=(0,a.useState)(!1),{dataHelper:p}=(0,s.useKubioBlockContext)(),h=p.getContextProp("activeImageId"),g=p.withChildren(),f=(0,m.get)(p,["localData","kubioAI","imageTerms"])||"",b=(0,a.useCallback)((()=>{i((()=>{d((e=>!e))}))}),[i]);return(0,a.useEffect)((()=>{p.blockName===Iy&&(c.current=p.getAttribute("url"))}),[p]),(0,a.createElement)(a.Fragment,null,r,(0,a.createElement)(y.BlockControls,null,(0,a.createElement)(k.ToolbarGroup,{className:"kubio-toolbar-text-ai"},(0,a.createElement)(k.ToolbarButton,{name:"kubio-ai",icon:ye.KubioAI,title:(0,x.__)("Kubio AI","kubio"),className:"kubio-toolbar-text-ai",onClick:b}))),u&&(0,a.createElement)(Sy,{className:"kubio-options-popover",anchor:l.current,onClose:()=>d(!1),onSelectImage:async e=>{if(p.blockName===Iy)return p.setAttribute("url",e),void p.setAttribute("id",0);const t=g.find((e=>e.clientId===h)),n=await(async e=>{const t=await Cv(e);return t.width/t.height})(e);t&&(t.setAttribute("url",e),t.setAttribute("id",0),t.setAttribute("aspectRatio",n))},initialImage:c.current,initialPrompt:f}),(0,a.createElement)(n,o))},Ay=(0,E.createHigherOrderComponent)((e=>t=>{const{name:n}=t;return(0,w.useSelect)((e=>e(h.STORE_KEY).isAICapabilityEnabled()),[])&&Ty.includes(n)?(0,a.createElement)(Ry,C({BlockEdit:e},t)):(0,a.createElement)(e,t)}),"withKubioAIToolbarControls");(0,u.addFilter)("editor.BlockEdit","kubio/ai/with-toolbar-controls",Ay,4);const Oy=(0,E.createHigherOrderComponent)((e=>t=>{const{dataHelper:n}=(0,s.useKubioBlockContext)();if(!n)return(0,a.createElement)(e,t);const o=(0,m.get)(n,["localData","kubioAI","imageTerms"])||"",[r,i]=_f(n.clientId),l=(0,a.useCallback)((e=>{let{url:t,type:l,onChange:s}=e;return"image"!==l?(0,a.createElement)(a.Fragment,null):(0,a.createElement)(wy,{isGenerating:r,setIsGenerating:i,initialImage:t,onChange:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";s({url:e,id:"",caption:t}),(0,m.set)(n,["localData","kubioAI","imageTerms"],t)},initialPrompt:o})}),[r,i,o,n]),c=(0,w.useSelect)((e=>e(h.STORE_KEY).isAICapabilityEnabled()),[]),u=t.hideAIImageButton||!1;return(0,a.createElement)(e,C({},t,{secondaryButton:c&&!u?l:void 0}))}),"withAIImageControls");(0,u.addFilter)("kubio.control.media-picker","kubio/control/ai-media-picker",Oy,4);const{HERO:Ny,HEADER:My,NAVIGATION:Dy}=(0,Kt.getNamesOfBlocks)(),By=(0,E.createHigherOrderComponent)((e=>t=>{var n,o,r,i,l;const{replaceDesignFromGallery:s}=Pf(),[c,d,p]=lt(),[g,f]=(0,a.useState)(!1),b=(0,a.useRef)(null),_=(0,a.useCallback)((()=>{b.current={type:"surprise"},f(!0)}),[]),v=(0,a.useCallback)((()=>{b.current={type:"regenerate"},f(!0)}),[b]),y=(0,a.useCallback)((()=>{s(((e,t)=>{b.current={type:"hand-pick",pattern:e,insert:t},f(!0)}))}),[s,b]),E=(0,a.useMemo)((()=>[{label:(0,x.__)("Surprise me","kubio"),description:(0,x.__)("Kubio AI chooses a section and writes the content for you.","kubio"),icon:ye.KubioAI,onClick:_},{label:(0,x.__)("Hand pick a design","kubio"),description:(0,x.__)("You choose a section, Kubio AI writes your content.","kubio"),icon:ye.PredesignedLayoutsIcon,onClick:y},{label:(0,x.__)("Regenerate content","kubio"),description:(0,x.__)("Kubio AI will keep the same design but regenerate the text and images.","kubio"),icon:ye.RegenerateContentIcon,onClick:v}]),[_,y,v]),S=null==t||null===(n=t.dataHelper)||void 0===n?void 0:n.blockName,I=null==t||null===(o=t.dataHelper)||void 0===o?void 0:o.clientId,{isUnlocked:T}=Ly({clientId:I});let P=!1;const R=null==t||null===(r=t.dataHelper)||void 0===r||null===(i=r.getAttribute)||void 0===i?void 0:i.call(r,"kubioAI.meta.summary","");"regenerate"===(null===(l=b.current)||void 0===l?void 0:l.type)?P=!0:[Ny,My,Dy].includes(S)||(P=!R);const A=(0,a.useCallback)((e=>{let{buttonBaseClass:t}=e;if(!(0,u.applyFilters)("kubio.section-ai-options.showRegenerateButton",!0,S))return(0,a.createElement)(a.Fragment,null);const n=!p||!T,o=(0,a.createElement)(k.Button,{className:`${t} kubio-ai-design-section-button kubio-ai-button`,icon:ye.KubioAI,label:(0,x.__)("Regenerate design","kubio"),onClick:T?d:m.noop},(0,x.__)("Regenerate","kubio"));return(0,a.createElement)(a.Fragment,null,n&&o,!n&&(0,a.createElement)(Z_,{menuItems:E,toggleButton:o,className:"kubio-dropdown-with-hover__section-options--ai"}))}),[d,p,E,S,T]),O=(0,w.useSelect)((e=>e(h.STORE_KEY).isAICapabilityEnabled()),[]);return(0,a.createElement)(a.Fragment,null,c,g&&(0,a.createElement)(ev,{setVisible:f,sectionRef:b,onChangeSection:()=>{f(!1),y()},askForSummary:P}),(0,a.createElement)(e,C({},t,{beforeSettingsButton:O?A:void 0})))}),"withSectionHoverControls"),Ly=e=>{let{clientId:t}=e;const{templatePartArea:n}=(0,w.useSelect)((e=>{const{getBlockRootClientId:n,getBlock:o}=e("core/block-editor"),r=o(n(t));return{templatePartArea:p().get({"kubio/header":"header","kubio/footer":"footer","kubio/sidebar":"sidebar"},null==r?void 0:r.name,!1)}}),[]);let{isUnlocked:o}=(0,s.useTemplatePartLock)(n);return n||(o=!0),{isUnlocked:o}};(0,u.addFilter)("kubio.components.section-hover-options","kubio/control/section-hover-controls",By,4);const zy=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M5 11.25h14v1.5H5z"})),Fy=(0,a.createElement)(R.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,a.createElement)(R.Path,{d:"M7 16.5h10V15H7v1.5zm0-9V9h10V7.5H7z"})),Gy=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M6.13 5.5l1.926 1.927A4.975 4.975 0 007.025 10H5v1.5h2V13H5v1.5h2.1a5.002 5.002 0 009.8 0H19V13h-2v-1.5h2V10h-2.025a4.979 4.979 0 00-1.167-2.74l1.76-1.76-1.061-1.06-1.834 1.834A4.977 4.977 0 0012 5.5c-1.062 0-2.046.33-2.855.895L7.19 4.44 6.13 5.5zm2.37 5v3a3.5 3.5 0 107 0v-3a3.5 3.5 0 10-7 0z",fillRule:"evenodd",clipRule:"evenodd"})),Hy=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{d:"M17.5 10h-1.7l-3.7 10.5h1.7l.9-2.6h3.9l.9 2.6h1.7L17.5 10zm-2.2 6.3 1.4-4 1.4 4h-2.8zm-4.8-3.8c1.6-1.8 2.9-3.6 3.7-5.7H16V5.2h-5.8V3H8.8v2.2H3v1.5h9.6c-.7 1.6-1.8 3.1-3.1 4.6C8.6 10.2 7.8 9 7.2 8H5.6c.6 1.4 1.7 2.9 2.9 4.4l-2.4 2.4c-.3.4-.7.8-1.1 1.2l1 1 1.2-1.2c.8-.8 1.6-1.5 2.3-2.3.8.9 1.7 1.7 2.5 2.5l.6-1.5c-.7-.6-1.4-1.3-2.1-2z"})),Uy=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(R.Path,{fillRule:"evenodd",d:"M6.863 13.644L5 13.25h-.5a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5H5L18 6.5h2V16h-2l-3.854-.815.026.008a3.75 3.75 0 01-7.31-1.549zm1.477.313a2.251 2.251 0 004.356.921l-4.356-.921zm-2.84-3.28L18.157 8h.343v6.5h-.343L5.5 11.823v-1.146z",clipRule:"evenodd"})),{HEADING:Wy}=(0,Kt.getNamesOfBlocks)(),jy=e=>{let{title:t,subtitle:n,icon:o}=e;return(0,a.createElement)(k.Flex,{className:"text-ai-custom-label",direction:"column",gap:1.5,expanded:!0},(0,a.createElement)(k.Flex,{justify:"flex-start"},(0,a.createElement)(st,{icon:o,className:"text-ai-custom-label__icon"}),(0,a.createElement)("span",{className:"text-ai-custom-label__title"},t)),(0,a.createElement)("span",{className:"text-ai-custom-label__subtitle"},n))},Vy=e=>{let{dataHelper:t,onClose:n,anchor:o,isGenerating:r,setIsGenerating:i}=e;const[l,s]=(0,a.useState)(""),[{pageTitle:c,siteContext:u,pageContext:d}]=(0,b.useAIData)(),m=(0,a.useCallback)((async()=>{i(!0),n();try{const e=await(0,b.prompt)({pageTitle:c,siteContext:u,pageContext:d,prompt:l,originalContent:t.getAttribute("content",""),short:t.block.name===Wy});t.setAttribute("content",e)}catch(e){}i(!1)}),[t,l,n,d,c,i,u]);return(0,a.createElement)(k.Popover,{className:"kubio-options-popover kubio-text-ai-popover",anchor:o,onClose:n,offset:15},(0,a.createElement)(k.Flex,{direction:"column",align:"end",gap:3.75},(0,a.createElement)(k.FlexBlock,null,(0,a.createElement)(P.TextareaControl,{className:"kubio-ai-block-prompt-textarea",value:l,onChange:s,label:(0,a.createElement)(jy,{icon:ye.TextAiRegenerate,title:(0,x.__)("Regenerate","kubio"),subtitle:(0,x.__)("Write a new prompt and let the AI generate the content for you","kubio")}),cols:60,rows:4})),(0,a.createElement)(k.FlexItem,null,(0,a.createElement)(k.Button,{className:"kubio-ai-button",onClick:m,isBusy:r},(0,x.__)("Regenerate","kubio")))))},Ky=e=>{let{dataHelper:t,onClose:n,anchor:o,isGenerating:r,setIsGenerating:i}=e;const[l,s]=(0,a.useState)("natural"),[{pageTitle:c,siteContext:u,pageContext:d}]=(0,b.useAIData)(),p=(0,a.useMemo)((()=>(0,m.map)((0,b.getContentLanguageStyles)(),((e,t)=>{let{label:n,description:o}=e;return{label:n,description:o,value:t}}))),[]),h=(0,a.useCallback)((async()=>{i(!0),n();try{const e=await(0,b.changeTextPrompt)({pageTitle:c,siteContext:u,pageContext:d,promptData:l,text:t.getAttribute("content",""),type:"tone"});t.setAttribute("content",e)}catch(e){}i(!1)}),[t,l,n,d,c,i,u]);return(0,a.createElement)(k.Popover,{className:"kubio-options-popover kubio-text-ai-popover",anchor:o,onClose:n,offset:15},(0,a.createElement)(k.Flex,{direction:"column",gap:3.75},(0,a.createElement)(k.FlexBlock,null,(0,a.createElement)(P.GutentagSelectControl,{label:(0,a.createElement)(jy,{icon:Uy,title:(0,x.__)("Change tone","kubio"),subtitle:(0,x.__)("Select the tone you want to rewrite this text.","kubio")}),inlineLabel:!1,options:p,value:l,onChange:s,itemRenderer:e=>(0,a.createElement)("div",{className:"kubio-ai-language-style-select-item"},(0,a.createElement)("span",null,e.label),(0,a.createElement)("span",null,e.description))})),(0,a.createElement)(k.Button,{className:"kubio-ai-button",onClick:h,isBusy:r},(0,x.__)("Rewrite","kubio"))))},$y=e=>{let{dataHelper:t,onClose:n,anchor:o,isGenerating:r,setIsGenerating:i}=e;const[l,s]=(0,a.useState)("en_US"),[{pageTitle:c,siteContext:u,pageContext:d}]=(0,b.useAIData)(),p=(0,a.useMemo)((()=>(0,m.map)((0,b.getContentLanguages)(),((e,t)=>({label:e,value:t})))),[]),h=(0,a.useCallback)((async()=>{i(!0),n();try{const e=await(0,b.changeTextPrompt)({pageTitle:c,siteContext:u,pageContext:d,promptData:l,text:t.getAttribute("content",""),type:"translate"});t.setAttribute("content",e)}catch(e){}i(!1)}),[t,l,n,d,c,i,u]);return(0,a.createElement)(k.Popover,{className:"kubio-options-popover kubio-text-ai-popover",anchor:o,onClose:n,offset:15},(0,a.createElement)(k.Flex,{direction:"column",gap:3.75},(0,a.createElement)(k.FlexBlock,{expanded:!0},(0,a.createElement)(P.GutentagSelectControl,{label:(0,a.createElement)(jy,{icon:Hy,title:(0,x.__)("Translate","kubio"),subtitle:(0,x.__)("In which language would you like to translate this text?","kubio")}),value:l,onChange:s,inlineLabel:!1,options:p})),(0,a.createElement)(k.Button,{className:"kubio-ai-button",onClick:h,isBusy:r},(0,x.__)("Translate","kubio"))))},{HEADING:qy,TEXT:Yy}=(0,Kt.getNamesOfBlocks)(),Xy=[qy,Yy],Qy=[{icon:zy,title:(0,x.__)("Make shorter","kubio"),action:"shorten"},{icon:Fy,title:(0,x.__)("Make longer","kubio"),action:"lengthen"},{icon:Gy,title:(0,x.__)("Fix spelling & grammar","kubio"),action:"fix"},{icon:ye.TextAiRegenerate,title:(0,x.__)("Regenerate","kubio"),action:"prompt"},{icon:Hy,title:(0,x.__)("Translate","kubio"),action:"translate"},{icon:Uy,title:(0,x.__)("Change tone","kubio"),action:"change-tone"}],Zy=e=>{let{BlockEdit:t,...n}=e;const{dataHelper:o}=(0,s.useKubioBlockContext)(),{name:r,clientId:i}=n,[l,c]=_f(i),[{pageContext:u,siteContext:d,pageTitle:m}]=(0,b.useAIData)(),p=(0,a.useRef)(),h=r===Yy?"p":`h${o.getProp("level",2)}`,[g,f]=(0,a.useState)(!1),[_,v]=(0,a.useState)(!1),[E,S]=(0,a.useState)(!1),[w,C,I]=lt(),T=(0,a.useCallback)((async e=>{const{action:t}=e;if(!l){switch(c(!0),t){case"shorten":case"lengthen":case"fix":try{const e=await(0,b.processContent)({pageContext:u,siteContext:d,pageTitle:m,content:o.getAttribute("content",""),action:t,extras:{tag:h}});o.setAttribute("content",e)}catch(e){ke.Log.error(`process-text: ${t}`,e)}break;case"prompt":f(!0);break;case"translate":v(!0);break;case"change-tone":S(!0)}c(!1)}}),[o,l,u,m,c,d,h]);return(0,a.createElement)(a.Fragment,null,w,(0,a.createElement)(y.BlockControls,{group:"block"},I&&(0,a.createElement)(k.ToolbarDropdownMenu,{ref:p,icon:ye.KubioAI,className:"kubio-toolbar-text-ai",label:(0,x.__)("Kubio AI","kubio"),controls:Qy.map((e=>({...e,onClick:()=>T(e)}))),popoverProps:{className:"kubio-toolbar-text-ai__popover"}}),!I&&(0,a.createElement)(k.ToolbarButton,{ref:p,icon:ye.KubioAI,className:"kubio-toolbar-text-ai kubio-ai-button",label:(0,x.__)("Kubio AI","kubio"),onClick:C})),g&&(0,a.createElement)(Vy,{anchor:p.current,onClose:()=>f(!1),dataHelper:o,isGenerating:l,setIsGenerating:c}),_&&(0,a.createElement)($y,{anchor:p.current,onClose:()=>v(!1),dataHelper:o,isGenerating:l,setIsGenerating:c}),E&&(0,a.createElement)(Ky,{anchor:p.current,onClose:()=>S(!1),dataHelper:o,isGenerating:l,setIsGenerating:c}),(0,a.createElement)(t,n))},Jy=(0,E.createHigherOrderComponent)((e=>t=>{const{name:n}=t;return(0,w.useSelect)((e=>e(h.STORE_KEY).isAICapabilityEnabled()),[])&&Xy.includes(n)?(0,a.createElement)(Zy,C({BlockEdit:e},t)):(0,a.createElement)(e,t)}),"withKubioAIToolbarControls");(0,u.addFilter)("editor.BlockEdit","kubio/ai/with-toolbar-controls",Jy,4),(0,u.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","contact-form",(e=>("kubio/contact"!==e.name||p().set(e,"attributes.kubio.props.autoSelectFormAtMount",!0),e))),(0,u.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","contact-form",(e=>("kubio/subscribe-form"!==e.name||p().set(e,"attributes.kubio.props.autoSelectFormAtMount",!0),e)));const ek={facebook:"font-awesome/facebook-square",twitter:"font-awesome/square-x-twitter",youtube:"font-awesome/youtube-square",instagram:"font-awesome/instagram",tiktok:"font-awesome/tiktok",pinterest:"font-awesome/pinterest-square",whatsapp:"font-awesome/whatsapp",linkedin:"font-awesome/linkedin-square"},tk={"font-awesome":[{type:"square",items:ek},{type:"noneSquare",items:{facebook:"font-awesome/facebook",twitter:"font-awesome/twitter-x",youtube:"font-awesome/youtube-play",instagram:"font-awesome/instagram",tiktok:"font-awesome/tiktok",pinterest:"font-awesome/pinterest",whatsapp:"font-awesome/whatsapp",linkedin:"font-awesome/linkedin"}}],ionicons:[{type:"filled",items:{facebook:"ionicons/social-facebook",twitter:"ionicons/social-twitter",youtube:"ionicons/social-youtube",instagram:"ionicons/social-instagram",pinterest:"ionicons/social-pinterest",whatsapp:"ionicons/social-whatsapp",linkedin:"ionicons/social-linkedin"}},{type:"outlined",items:{facebook:"ionicons/social-facebook-outline",twitter:"ionicons/social-twitter-outline",youtube:"ionicons/social-youtube-outline",instagram:"ionicons/social-instagram-outline",pinterest:"ionicons/social-pinterest-outline",whatsapp:"ionicons/social-whatsapp-outline",linkedin:"ionicons/social-linkedin-outline"}}],"icons8-line-awesome":[{type:"normal",items:{facebook:"icons8-line-awesome/facebook",twitter:"icons8-line-awesome/twitter",youtube:"icons8-line-awesome/youtube-play",instagram:"icons8-line-awesome/instagram",pinterest:"icons8-line-awesome/pinterest",whatsapp:"icons8-line-awesome/whatsapp",linkedin:"icons8-line-awesome/linkedin"}}],socicon:[{type:"normal",items:{facebook:"socicon/facebook",twitter:"socicon/twitter",youtube:"socicon/youtube",instagram:"socicon/instagram",pinterest:"socicon/pinterest",whatsapp:"socicon/whatsapp",linkedin:"socicon/linkedin"}}],"foundation-icons":[{type:"normal",items:{facebook:"foundation-icons/social-facebook",twitter:"foundation-icons/social-twitter",youtube:"foundation-icons/social-youtube",instagram:"foundation-icons/social-instagram",pinterest:"foundation-icons/social-pinterest",linkedin:"foundation-icons/social-linkedin"}}],"simple-line-icons":[{type:"normal",items:{facebook:"simple-line-icons/social-facebook",twitter:"simple-line-icons/social-twitter",youtube:"simple-line-icons/social-youtube"}}],typicons:[{type:"normal",items:{facebook:"typicons/social-facebook",twitter:"typicons/social-twitter",youtube:"typicons/social-youtube",instagram:"typicons/social-instagram",pinterest:"typicons/social-pinterest",linkedin:"typicons/social-linkedin"}}]},nk=(()=>{const e={};return p().each(tk,((t,n)=>{t.forEach((t=>{let{items:n}=t;p().each(n,((t,o)=>{p().set(e,t,n)}))}))})),e})(),ok=ek,{SECTION:rk,SOCIAL_ICONS:ik}=(0,Kt.getNamesOfBlocks)(),ak=e=>{let{block:t,siteContext:n}=e;const o=p().get(n,"contact.socials",[]),r=(0,m.filter)(o,(e=>{let{url:t}=e;return!!t}));if(!o||p().isEmpty(o)||!r.length)return t;const i="attributes.icon.name",a=o.filter((e=>{let{url:t}=e;return t})),l=t.innerBlocks,s=l.filter((e=>{const t=p().get(e,i);return a.find((e=>{let{type:n}=e;return t.includes(n)}))})),c=[];let u=null;return a.forEach((e=>{let{type:t,url:n}=e;const o=s.find((e=>p().get(e,i).includes(t)));o?(p().set(o,"attributes.link.value",n),u=p().get(o,"attributes.icon.name")):c.push({type:t,url:n})})),c.forEach((e=>{let{type:t,url:n}=e;const o=l[l.length-1],r=p().cloneDeep((0,Un.cloneBlock)(o));p().unset(r,"attributes.kubio.styleRef"),p().set(r,"attributes.link.value",n);const i=((e,t)=>{const n=p().get(nk,t),o=ok[e];return n?p().get(n,e,o):o})(t,u);p().set(r,"attributes.icon.name",i),s.push(r)})),t.innerBlocks=s,t};(0,u.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","social-icons",((e,t,n,o)=>{if(e.name!==ik)return e;const r=o[0];if(r.name===rk){const t=["contact","footer-section","footer"],n=p().get(r,"attributes.kubioAI.meta.category");if(!t.includes(n))return e}return ak({block:e,siteContext:t})})),(0,u.addFilter)("kubio.navigation.topBarBlockBeforeInsert","social-icons",((e,t)=>e.name!==ik?e:ak({block:e,siteContext:t})));const{ICON_LIST:lk}=(0,Kt.getNamesOfBlocks)(),sk={phone:{desc:"phone",icons:["phone","call"]},email:{desc:"mail",icons:["mail","envelope"]},address:{desc:"address",icons:["map","pin","home","house"]}},ck=(e,t)=>e.innerBlocks.find((e=>{if(p().get(e,"attributes.kubioAI.desc","").toLowerCase().includes(sk[t].desc))return!0;const n=p().get(e,"attributes.icon","").toLowerCase();for(const e of sk[t].icons)if(n.includes(e))return!0;return!1})),uk=e=>{let{block:t,siteContext:n}=e;const o=p().get(n,"contact"),r=p().get(o,"address","123, Main Street, City, Country");if(r){const e=ck(t,"address");e&&p().set(e,"attributes.text",r)}const i=p().get(o,"phone","+1 234 567 890");if(i){const e=ck(t,"phone");e&&p().set(e,"attributes.text",i)}const a=p().get(o,"email","email@example.com");if(a){const e=ck(t,"email");e&&p().set(e,"attributes.text",a)}return t};(0,u.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","iconsList",((e,t,n,o)=>e.name!==lk?e:uk({block:e,siteContext:t}))),(0,u.addFilter)("kubio.navigation.topBarBlockBeforeInsert","iconsList",((e,t)=>e.name!==lk?e:uk({block:e,siteContext:t}))),(0,u.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","kubio-map",((e,t)=>{if("kubio/map"!==e.name)return e;const n=(0,m.get)(t,["contact","address"]);return n&&(0,m.set)(e,"attributes.address",n),(0,m.set)(e,"attributes.zoom.value",15),e})),(0,u.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","logo",((e,t)=>{if("kubio/logo"!==e.name)return e;const n=(0,w.select)("core").getEditedEntityRecord("root","site");return((null==n?void 0:n.site_logo)||(null==n?void 0:n.sitelogo)||p().get(t,["website_logo","id"]))&&p().set(e,"attributes.kubio.props.layoutType","image"),e})),(0,u.addFilter)("kubio.ai-filters","kubio-ai-filters",(()=>({useHandleInsert:tv,useIsAISetupComplete:lt,GenerateSectionModal:ev})));const dk=(0,a.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,a.createElement)(R.Path,{d:"M20 10c0-5.51-4.49-10-10-10C4.48 0 0 4.49 0 10c0 5.52 4.48 10 10 10 5.51 0 10-4.48 10-10zM7.78 15.37L4.37 6.22c.55-.02 1.17-.08 1.17-.08.5-.06.44-1.13-.06-1.11 0 0-1.45.11-2.37.11-.18 0-.37 0-.58-.01C4.12 2.69 6.87 1.11 10 1.11c2.33 0 4.45.87 6.05 2.34-.68-.11-1.65.39-1.65 1.58 0 .74.45 1.36.9 2.1.35.61.55 1.36.55 2.46 0 1.49-1.4 5-1.4 5l-3.03-8.37c.54-.02.82-.17.82-.17.5-.05.44-1.25-.06-1.22 0 0-1.44.12-2.38.12-.87 0-2.33-.12-2.33-.12-.5-.03-.56 1.2-.06 1.22l.92.08 1.26 3.41zM17.41 10c.24-.64.74-1.87.43-4.25.7 1.29 1.05 2.71 1.05 4.25 0 3.29-1.73 6.24-4.4 7.78.97-2.59 1.94-5.2 2.92-7.78zM6.1 18.09C3.12 16.65 1.11 13.53 1.11 10c0-1.3.23-2.48.72-3.59C3.25 10.3 4.67 14.2 6.1 18.09zm4.03-6.63l2.58 6.98c-.86.29-1.76.45-2.71.45-.79 0-1.57-.11-2.29-.33.81-2.38 1.62-4.74 2.42-7.1z"})),mk=function(e){let{icon:t}=e;if(!(0,w.useSelect)((e=>e(h.STORE_KEY).isFeatureActive("fullscreenMode")),[]))return null;const n=t||dk;return(0,a.createElement)(k.Button,{className:"edit-site-fullscreen-mode-close",icon:n,iconSize:36,href:"index.php",label:(0,x.__)("Back","kubio")})};function pk(e,t){(0,s.registerTemplateStore)(),t.__experimentalFetchLinkSuggestions=s.fetchLinkSuggestions,t.__experimentalSpotlightEntityBlocks=["core/template-part"];const n=new URLSearchParams(window.location.search);t.isGutentagDebug=!!n.get("kubio-debug");const o=t.state;delete t.state,o.settings=t,(0,c.registerCoreBlocks)(),(0,l.initFirebaseData)(),(0,m.isFunction)(c.__experimentalRegisterExperimentalCoreBlocks)&&(0,c.__experimentalRegisterExperimentalCoreBlocks)({enableFSEBlocks:!0});const r=ub;t.wpVersion&&document.body.classList.add("kubio-wp-"+t.wpVersion.replace(".","-")),Q_(o),(0,s.reactRender)((0,a.createElement)(a.StrictMode,null,(0,a.createElement)(r,{initialSettings:o.settings})),document.getElementById(e)),window.kubioToggleDebug=e=>{wp.data.dispatch("kubio/edit-site").toggleGutentagDebug(e)},top.kubioStartTime=performance.now(),(0,u.addAction)("kubio.editor.page-changed","kubio/editor/page-changed/restart-performance-timer",(()=>{top.kubioStartTime=performance.now()}))}})(),(window.kubio=window.kubio||{}).editor=o})();
